(this.webpackJsonpcaisse=this.webpackJsonpcaisse||[]).push([[0],{310:function(e,t,n){},441:function(e,t,n){},442:function(e,t,n){},486:function(e){e.exports=JSON.parse("{}")},487:function(e,t,n){},513:function(e,t){},525:function(e,t){},528:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=528},531:function(e,t){},533:function(e,t){},567:function(e,t){},569:function(e,t){},597:function(e,t){},599:function(e,t){},600:function(e,t){},605:function(e,t){},607:function(e,t){},613:function(e,t){},615:function(e,t){},634:function(e,t){},646:function(e,t){},649:function(e,t){},683:function(e,t,n){"use strict";n.r(t);var c,r=n(1),i=n.n(r),a=n(40),s=(n(441),n(5)),o=n(17),l=(n(442),n(12)),d=n(10),j=n(80),u=n.n(j),b=(n(204),n(744)),h=n(13),O=n(3),m=n(27),p=n(36),x=n(64),v=Object(x.c)({name:"message",initialState:{},reducers:{setMessage:function(e,t){return{message:t.payload}},clearMessage:function(){return{message:""}}}}),f=v.reducer,g=v.actions,A=g.setMessage,y=(g.clearMessage,f),C=n(18),N=n.n(C),k={login:function(e,t){return N.a.post("http://141.94.77.9:5000/api/login",{username:e,password:t}).then((function(e){return e.data.token&&(console.log(e.data),localStorage.setItem("user",JSON.stringify(e.data.token)),localStorage.setItem("username",e.data.username),localStorage.setItem("tva",e.data.tva),localStorage.setItem("address",e.data.address),localStorage.setItem("telephone",e.data.telephone)),e.data}))},logout:function(){localStorage.removeItem("user")}},w=JSON.parse(localStorage.getItem("user")),_=Object(x.b)("auth/register",function(){var e=Object(p.a)(Object(m.a)().mark((function e(t,n){var c,r,i,a,s,o;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.first_name,r=t.last_name,i=t.email,a=t.password,e.prev=1,e.next=4,k.register(c,r,i,a);case 4:return s=e.sent,console.log(s),n.dispatch(A(s.data.message)),e.abrupt("return",s.data);case 10:return e.prev=10,e.t0=e.catch(1),o=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),n.dispatch(A(o)),e.abrupt("return",n.rejectWithValue());case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(x.b)("auth/login",function(){var e=Object(p.a)(Object(m.a)().mark((function e(t,n){var c,r,i,a;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.username,r=t.password,e.prev=1,e.next=4,k.login(c,r);case 4:return i=e.sent,console.log(i),e.abrupt("return",{user:i});case 9:return e.prev=9,e.t0=e.catch(1),a=e.t0.response&&e.t0.response.data&&e.t0.response.data.message||e.t0.message||e.t0.toString(),n.dispatch(A(a)),e.abrupt("return",n.rejectWithValue());case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(x.b)("auth/logout",Object(p.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.logout();case 2:case"end":return e.stop()}}),e)})))),T=w?{isLoggedIn:!0,user:w}:{isLoggedIn:!1,user:null},B=Object(x.c)({name:"auth",initialState:T,reducers:{restore:function(e,t){e.isLoggedIn=!0,e.user=t.payload.user}},extraReducers:(c={},Object(O.a)(c,_.fulfilled,(function(e,t){e.isLoggedIn=!1})),Object(O.a)(c,_.rejected,(function(e,t){e.isLoggedIn=!1})),Object(O.a)(c,S.fulfilled,(function(e,t){e.isLoggedIn=!0,e.user=t.payload.user})),Object(O.a)(c,S.rejected,(function(e,t){e.isLoggedIn=!1,e.user=null})),Object(O.a)(c,I.fulfilled,(function(e,t){e.isLoggedIn=!1,e.user=null})),c)}),D=B.reducer,P=(B.actions.restore,D),L=n(411),E=n(194),F=n(777),R={success:"success",verifyUserAndPassword:"verify username and password",username:"username",password:"password",access:"access",auth:"authentication",cashier:"cashier",connect:"connect",connecter:"Login ",reset:"reset",freeTable:"free table",busytables:"busy table",newTable:"new table",nbrCouverts:"number of person",validate:"validate",backToTable:"back to tables",couverts:"person",artice:"article",price:"price",surplace:"Direct ",tiroir:"cash register",cancel:"cancel",added:"added",disconnect:"disconnect",closureHistory:"closure history",selectDate:"select a date",print:"print",latestClosure:"latest closure",TotalInit:"initial cashier total",close:"close",ofCashier:"of cash register",confirm:"Confirm",cashierr:"Cash Register"},q={success:"success",verifyUserAndPassword:"verifier utilisateur et mot de passe",username:"utilisateur",password:"mot de passe",access:"acceder",auth:"authentification",cashier:"caisse",connect:"Connexion",connecter:"Se connecter",reset:"reset",freeTable:"table libre",busytables:"table en cours",newTable:"Nouvelle Table",nbrCouverts:"nombre de couverts",validate:"valider",backToTable:"retour Au Tables",couverts:"couverts",artice:"Nom",price:"prix",surplace:"sur place ",tiroir:"Tiroir",cancel:"Annuler",aded:"ajouter",disconnect:"d\xe9connexion",closureHistory:"historique de cl\xf4tures",selectDate:"s\xe9l\xe9ctionner une date",print:"imprimer",latestClosure:"Derniere Cl\xf4ture",TotalInit:"total de caisse initial",close:"cl\xf4turer",ofCashier:"de caisse",cashierr:"Caisse",confirm:"OK"};L.a.use(E.e).init({resources:{en:{translation:R},fr:{translation:q}},lng:"fr",fallbackLng:"en",interpolation:{escapeValue:!1}});var z=F.a,H=n(29),Q=n.n(H),G=n(0),M=function(e){var t=e.user,n=e.setShowLogin,c=e.setClickable,i=z().t,a=Object(r.useState)(""),j=Object(s.a)(a,2),O=j[0],m=j[1],p=Object(r.useState)("default"),x=Object(s.a)(p,2),v=x[0],f=(x[1],Object(r.useRef)()),g=Object(r.useState)([]),A=Object(s.a)(g,2),y=A[0],C=A[1],N=localStorage.getItem("caisse_open"),k=Object(o.f)(),w=Object(h.c)();return Object(r.useEffect)((function(){!function(){var e=["0","1","2","3","4","5","6","7","8","9"," "," "],t="",n=[],c=0,r=0;do{do{var i=Math.floor(Math.random()*e.length),a=e[i];" "!=a?t=t+a+" ":t+=a,c+=1,e.splice(i,1),console.log("inner")}while(3!=c);n.push(t),t="",c=0,r+=1,console.log("outter")}while(4!=r);console.log(n),C([].concat(n))}()}),[]),Object(G.jsxs)("div",{className:"login_container",children:[Object(G.jsxs)("div",{style:{display:"flex"},children:[Object(G.jsxs)("div",{className:"mdp_container",children:[Object(G.jsx)(l.a,{icon:d.I,className:"mdp_icon",color:"white"}),Object(G.jsx)("div",{className:"input",children:O.split("").map((function(e){return Object(G.jsx)("h1",{style:{color:"white"},children:"*"})}))})]}),Object(G.jsx)(l.a,{style:{marginRight:"1.2rem"},icon:d.G,onClick:function(){n(!1),c(!0)},size:"3x"})]}),Object(G.jsx)(u.a,{theme:"hg-theme-default hg-layout-default myTheme",buttonTheme:[{class:"key_btn",buttons:"0 1 2 3 4 5 6 7 8 9  "},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return f.current=e},layoutName:v,layout:{default:y},onChange:function(e){e.length<12&&m(e),console.log("Input changed",e)},onKeyPress:function(e){console.log("Button pressed",e)}}),Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"3rem"},children:[Object(G.jsxs)(b.a,{className:"my_btn x5",onClick:function(){return localStorage.setItem("username",t),void w(S({username:t,password:O})).unwrap().then((function(e){Q.a.fire({icon:"success",title:"Connect\xe9e",showConfirmButton:!1,timer:1e3}),k(1==N?"/main":"/caisse")})).catch((function(e){Q.a.fire({icon:"error",title:"Verifier Mot de passe",showConfirmButton:!1,timer:1e3})}))},children:[Object(G.jsx)(l.a,{icon:d.D,size:"1x",color:"#0dcaf0",style:{marginRight:"0.5rem"}}),i("connecter")]}),Object(G.jsxs)(b.a,{className:"my_btn x5",onClick:function(){m(""),f.current.setInput("")},children:[Object(G.jsx)(l.a,{icon:d.H,size:"1x",color:"#0dcaf0",style:{marginRight:"0.5rem"}}),i("cancel")]})]})]})},W=function(e){var t=e.user,n=(z().t,Object(r.useState)(!1)),c=Object(s.a)(n,2),i=c[0],a=c[1],o=Object(r.useState)(!0),l=Object(s.a)(o,2),d=l[0],j=l[1];return Object(G.jsxs)("div",{className:"auth_card",onClick:function(){1==d&&(a(!i),j(!1))},children:[Object(G.jsx)("span",{children:Object(G.jsx)("img",{src:"http://141.94.77.9/caisse/icons/waiter.png",width:"128px",height:"128px",alt:""})}),Object(G.jsx)("h6",{children:t}),i&&Object(G.jsx)(M,{user:t,setShowLogin:a,setClickable:j})]})},Z=function(){z().t;var e,t=(null===(e=localStorage.getItem("staff"))||void 0===e?void 0:e.split(","))||[],n=Object(o.f)();return Object(r.useEffect)((function(){void 0==t[0]&&n("/init")}),[]),Object(G.jsx)("div",{className:"auth_window",children:Object(G.jsx)("div",{style:{display:"flex"},children:t.map((function(e){return Object(G.jsx)(W,{user:e})}))})})},X=function(e){var t=e.title,n=z().t;return Object(G.jsx)("div",{className:"my_navbar",children:Object(G.jsx)("h4",{className:"logo",children:n("".concat(t))})})},V=(n(310),n(767)),K=n(745),J=n(769),U=function(){return Object(G.jsxs)("div",{className:"my_container",children:[Object(G.jsx)(X,{title:"connect"}),Object(G.jsx)(Z,{}),Object(G.jsx)(V.a,{bg:"light",variant:"light",fixed:"bottom",children:Object(G.jsxs)(K.a,{children:[Object(G.jsxs)(V.a.Brand,{href:"#home",children:["Tous droits reserv\xe9es ",Object(G.jsx)("b",{children:"CAISSECONNECT.FR"})," \xa9 2022"]}),Object(G.jsx)(J.a,{className:"me-auto",children:Object(G.jsx)(J.a.Link,{href:"#home"})})]})})]})},Y=n(4),$=n(746),ee=(n.p,n.p+"static/media/logo.3c484734.png"),te=n(14),ne=Object(x.c)({name:"data",initialState:{zones:[],tables:[],categories:[],products:[],nSteps:[],orderHistory:[],clients:[],tva_mode:[],coupons:[],dataZ:[],isallowedLivraison:!1,isallowedEmporter:!1},reducers:{storeCoupon:function(e,t){e.coupons=t.payload.coupons,console.log(e.coupons)},storeClients:function(e,t){e.clients=t.payload.clients},storeDataz:function(e,t){e.dataZ=t.payload.dataZ},storeZones:function(e,t){e.zones=t.payload.zones},storeTables:function(e,t){e.tables=t.payload.tables},storeCategories:function(e,t){e.categories=t.payload.categories},storeProducts:function(e,t){e.products=t.payload.products},storeNSteps:function(e,t){e.nSteps=t.payload.nSteps},storeOrderHistory:function(e,t){e.orderHistory=t.payload.orderHistory},storeTvaMode:function(e,t){e.tva_mode=t.payload.tva_mode},updateProduct:function(e,t){var n=e.products.findIndex((function(e){return e.id==t.payload.id})),c=Object(te.a)(e.products),r=0;r=0==c[n].active?1:0,c[n]=Object(Y.a)(Object(Y.a)({},c[n]),{},{active:r}),e.products=c},updateEmporter:function(e,t){e.isallowedEmporter=!e.isallowedEmporter},updateLivraison:function(e,t){e.isallowedLivraison=!e.isallowedLivraison}}}),ce=ne.reducer,re=ne.actions,ie=re.storeZones,ae=re.storeTables,se=re.storeCategories,oe=re.storeProducts,le=re.storeNSteps,de=re.storeOrderHistory,je=re.storeClients,ue=re.updateProduct,be=re.storeTvaMode,he=re.storeCoupon,Oe=re.storeDataz,me=ce,pe=function(){var e=Object(h.c)(),t=z().t,n=Object(o.f)(),c=Object(r.useState)({show:!1,variant:"",msg:""}),i=Object(s.a)(c,2),a=i[0],j=i[1],u=Object(r.useState)({username:"",password:""}),O=Object(s.a)(u,2),m=O[0],p=O[1];return Object(G.jsx)("div",{className:"authincation h-100 c",children:Object(G.jsx)("div",{className:"container h-100",children:Object(G.jsx)("div",{className:"row justify-content-center h-100 align-items-center",children:Object(G.jsxs)("div",{className:"col-md-6",children:[Object(G.jsx)("div",{className:"authincation-content",children:Object(G.jsx)("div",{className:"row no-gutters",children:Object(G.jsxs)("div",{className:"col-xl-12",children:[Object(G.jsx)("div",{className:"row",children:Object(G.jsxs)("div",{className:"col-5 mx-auto top",children:[Object(G.jsx)("br",{}),Object(G.jsx)("div",{className:"text-center ",children:Object(G.jsx)("img",{className:"logo-compact ",src:ee,width:"100%",alt:""})})]})}),Object(G.jsxs)("div",{className:"auth-form",children:[Object(G.jsx)("h4",{className:"text-center mb-4",children:"Connectez-vous \xe0 votre compte"}),Object(G.jsxs)("form",{children:[Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{className:"mb-1 pull-left",children:Object(G.jsx)("strong",{children:t("username")})}),Object(G.jsx)("input",{onChange:function(e){return p(Object(Y.a)(Object(Y.a)({},m),{},{username:e.target.value}))},type:"text",className:"form-control",placeholder:"Nom d'utilisateur",autocomplete:"off"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{className:"mb-1 pull-left",children:Object(G.jsx)("strong",{children:t("password")})}),Object(G.jsx)("input",{onChange:function(e){return p(Object(Y.a)(Object(Y.a)({},m),{},{password:e.target.value}))},type:"password",className:"form-control",placeholder:"Mot de passe",autocomplete:"new-password","v-model":"User.MotDePasse"})]}),Object(G.jsx)("div",{className:"form-row d-flex justify-content-between mt-4 mb-2",children:Object(G.jsx)("div",{className:"form-group",children:Object(G.jsxs)("div",{className:"custom-control custom-checkbox ml-1",children:[Object(G.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"basic_checkbox_1"}),Object(G.jsx)("label",{className:"custom-control-label",for:"basic_checkbox_1",children:"Gardez-moi connect\xe9"})]})})}),Object(G.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show hidden",id:"error",children:[Object(G.jsxs)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",className:"mr-2",children:[Object(G.jsx)("polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"}),Object(G.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),Object(G.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),Object(G.jsx)("strong",{id:"errorMessage"})]})]}),Object(G.jsx)("div",{className:"text-center col-12",children:Object(G.jsxs)(b.a,{variant:"warning",size:"lg",onClick:function(){N.a.post("http://141.94.77.9:5000/api/init",Object(Y.a)({},m)).then((function(c){console.log(c.data),localStorage.setItem("staff",c.data.staff),localStorage.setItem("user_id",c.data.user_id),localStorage.setItem("currency",c.data.currency),e(je({clients:c.data.clients})),j({show:!0,msg:t("success"),variant:"success"}),N.a.post("http://141.94.77.9:5000/api/getCaisse",{user_id:c.data.user_id}).then((function(e){localStorage.setItem("caisse_id",e.data.id),localStorage.setItem("caisse_open",1==e.data.is_open?1:0)})),setTimeout((function(){n("/")}),1e3)})).catch((function(e){console.log(e),localStorage.removeItem("staff"),j({show:!0,msg:t("verifyUserAndPassword"),variant:"danger"})}))},children:[Object(G.jsx)(l.a,{icon:d.t})," Se connecter"]})})]})]})})}),a.show?Object(G.jsx)($.a,{variant:a.variant,children:a.msg}):""]})})})})},xe=n(406),ve=n(747),fe=n(684),ge=Object(x.c)({name:"order",initialState:{orders:[],checkoutData:[],currentOrders:[],selectedTable:{},client:{},nbrCouverts:0,remarque:"",orderType:"surplace"},reducers:{setRemarque:function(e,t){e.remarque=t.payload.remarque},storeSelectedTable:function(e,t){console.log(t.payload),e.selectedTable=t.payload.selectedTable},setNbrCouverts:function(e,t){e.nbrCouverts=t.payload.nbrCouverts},setNewCurrentOrder:function(e,t){e.currentOrders=[].concat(Object(te.a)(e.currentOrders),[t.payload.order])},setNewOrder:function(e,t){var n=e.orders.findIndex((function(e){return e.id==t.payload.order.id})),c=Object(te.a)(e.orders);-1==n||t.payload.order.is_supp?e.orders=[].concat(Object(te.a)(e.orders),[t.payload.order]):(c[n]=Object(Y.a)(Object(Y.a)({},c[n]),{},{qt:c[n].qt+1}),e.orders=Object(te.a)(c))},setOrderChange:function(e,t){e.orders.findIndex((function(e){return e.id==t.payload.order.id}));var n=Object(te.a)(e.orders);n[t.payload.key]=t.payload.order,e.orders=Object(te.a)(n)},deleteOrder:function(e,t){e.orders=e.orders.filter((function(e,n){return n!=t.payload.key}))},clearOrders:function(e,t){e.orders=[]},clearData:function(e,t){e.checkoutData=[]},addNewcheckoutData:function(e,t){e.checkoutData.some((function(e){return e.order_id==t.payload.order.order_id}))||(e.checkoutData=[].concat(Object(te.a)(e.checkoutData),[t.payload.order]))},addNewcheckoutDataFromDB:function(e,t){if(-1==e.checkoutData.findIndex((function(e){return e.order_id==t.payload.order.order_id}))){var n=t.payload.order.orderItems.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{qt:e.quantity})})),c=t.payload.order.tva*t.payload.order.price/100;e.checkoutData=[].concat(Object(te.a)(e.checkoutData),[Object(Y.a)(Object(Y.a)({},t.payload.order),{},{orderItems:n,orderType:t.payload.order.order_type,taxPrice:c})])}},deletecheckoutData:function(e,t){e.checkoutData=e.checkoutData.filter((function(e){return e.order_id!=t.payload.order_id}))},setCheckoutChange:function(e,t){var n=e.checkoutData.findIndex((function(e){return e.order_id==t.payload.order.order_id})),c=Object(te.a)(e.checkoutData);c[n]=t.payload.order,e.checkoutData=Object(te.a)(c)},initClient:function(e,t){e.client=t.payload.client},deleteClientandTable:function(e,t){e.client={},e.selectedTable={}},cancelOrder:function(e,t){Object(te.a)(e.checkoutData).forEach((function(n){n.order_id==t.payload.order_id&&(n=t.payload,e.checkoutData=[])}))},setType:function(e,t){e.orderType=t.payload}}}),Ae=ge.reducer,ye=ge.actions,Ce=ye.storeSelectedTable,Ne=(ye.setNbrCouverts,ye.setNewOrder),ke=ye.setOrderChange,we=ye.deleteOrder,_e=ye.addNewcheckoutData,Se=ye.clearOrders,Ie=ye.deletecheckoutData,Te=ye.initClient,Be=ye.deleteClientandTable,De=(ye.setNewCurrentOrder,ye.setCheckoutChange),Pe=ye.addNewcheckoutDataFromDB,Le=ye.setRemarque,Ee=(ye.cancelOrder,ye.clearData),Fe=ye.setType,Re=Ae,qe=function(e){var t=e.selectedZone,n=z().t,c=Object(te.a)(Array(12).keys()),i=Object(h.d)((function(e){return e.data.tables})),a=Object(h.d)((function(e){return e.order.checkoutData})),j=Object(r.useState)({}),u=Object(s.a)(j,2),O=u[0],m=u[1],p=Object(r.useState)(!1),x=Object(s.a)(p,2),v=x[0],f=x[1],g=Object(r.useState)(0),A=Object(s.a)(g,2),y=(A[0],A[1],Object(h.c)()),C=Object(o.f)(),N=function(e){return i.filter((function(e){return e.zone_id==t})).find((function(t){return t.position==e}))},k=function(e){if(void 0!=N(e)&&0!=N(e).active)if(m({id:N(e).id,nbr:N(e).numero,ppl:N(e).nbrePersonne,libre:N(e).libre,nbrCouverts:1}),0==N(e).libre){var t=a.filter((function(t){return t.table_number==N(e).id&&"completed"!=t.status}))[0];C("/checkout/".concat(t.order_id))}else f(!0)};return Object(G.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(G.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:Object(G.jsx)(ve.a,{style:{},children:Object(G.jsxs)("tbody",{children:[Object(G.jsx)("tr",{children:c.map((function(e){var t,n,c,r;return Object(G.jsx)("td",{children:Object(G.jsx)(b.a,{className:"rond"==(null===(t=N(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:N(e)?null!==(n=N(e))&&void 0!==n&&n.active?null!==(c=N(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return k(e)},children:null===(r=N(e))||void 0===r?void 0:r.numero})})}))}),Object(G.jsx)("tr",{children:c.map((function(e){return e+12})).map((function(e){var t,n,c,r;return Object(G.jsx)("td",{children:Object(G.jsx)(b.a,{className:"rond"==(null===(t=N(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:N(e)?null!==(n=N(e))&&void 0!==n&&n.active?null!==(c=N(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return k(e)},children:null===(r=N(e))||void 0===r?void 0:r.numero})})}))}),Object(G.jsx)("tr",{children:c.map((function(e){return e+24})).map((function(e){var t,n,c,r;return Object(G.jsx)("td",{children:Object(G.jsx)(b.a,{className:"rond"==(null===(t=N(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:N(e)?null!==(n=N(e))&&void 0!==n&&n.active?null!==(c=N(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return k(e)},children:null===(r=N(e))||void 0===r?void 0:r.numero})})}))}),Object(G.jsx)("tr",{children:c.map((function(e){return e+36})).map((function(e){var t,n,c,r;return Object(G.jsx)("td",{children:Object(G.jsx)(b.a,{className:"rond"==(null===(t=N(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:N(e)?null!==(n=N(e))&&void 0!==n&&n.active?null!==(c=N(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return k(e)},children:null===(r=N(e))||void 0===r?void 0:r.numero})})}))}),Object(G.jsx)("tr",{children:c.map((function(e){return e+48})).map((function(e){var t,n,c,r;return Object(G.jsx)("td",{children:Object(G.jsx)(b.a,{className:"rond"==(null===(t=N(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:N(e)?null!==(n=N(e))&&void 0!==n&&n.active?null!==(c=N(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return k(e)},children:null===(r=N(e))||void 0===r?void 0:r.numero})})}))}),Object(G.jsx)("tr",{children:c.map((function(e){return e+60})).map((function(e){var t,n,c,r;return Object(G.jsx)("td",{children:Object(G.jsx)(b.a,{className:"rond"==(null===(t=N(e))||void 0===t?void 0:t.type)?"table_btn round":"table_btn",variant:N(e)?null!==(n=N(e))&&void 0!==n&&n.active?null!==(c=N(e))&&void 0!==c&&c.libre?"success":"danger":"secondary":"dark",onClick:function(){return k(e)},children:null===(r=N(e))||void 0===r?void 0:r.numero})})}))})]})})}),Object(G.jsx)(fe.a,{show:v,onHide:function(){return f(!1)},children:1==O.libre?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:Object(G.jsxs)("h5",{style:{fontSize:"24px"},children:[Object(G.jsx)(l.a,{icon:d.K,style:{marginRight:"1rem"}}),n("newTable")]})})}),Object(G.jsxs)(fe.a.Body,{children:[n("nbrCouverts"),Array.from({length:O.ppl},(function(e,t){return t+1})).map((function(e){return Object(G.jsx)(b.a,{className:"ml",onClick:function(){m(Object(Y.a)(Object(Y.a)({},O),{},{nbrCouverts:e})),console.log(O)},variant:(null===O||void 0===O?void 0:O.nbrCouverts)==e?"warning":"dark",style:{backgroundColor:(null===O||void 0===O?void 0:O.nbrCouverts)==e?"#ff6b6b":"black",borderColor:(null===O||void 0===O?void 0:O.nbrCouverts)==e?"#ff6b6b":"black"},children:e})}))]}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return f(!1)},children:n("cancel")}),Object(G.jsxs)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"warning",onClick:function(){return f(!1),console.log(O),y(Ce({selectedTable:O})),y(Te({client:{type:"surplace"}})),y(Fe("surplace")),void setTimeout((function(){C("/menu")}),300)},children:[Object(G.jsx)(l.a,{icon:d.l,style:{marginRight:"0.5rem"}}),n("validate")]})]})]}):Object(G.jsx)(fe.a.Body,{children:Object(G.jsx)(b.a,{variant:"danger",onClick:function(){C("/checkout/".concat(O.id))},children:"Checkout !"})})})]})},ze=function(){var e=localStorage.getItem("user_id"),t=Object(h.c)(),n=Object(o.f)(),c=Object(r.useState)(""),i=Object(s.a)(c,2),a=i[0],j=i[1],u=Object(h.d)((function(e){return e.data.zones})),O=Object(h.d)((function(e){return e.order.checkoutData})),m=Object(r.useState)(!1),p=Object(s.a)(m,2),x=p[0],v=p[1];return Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/getUserZones",{user_id:e}).then((function(e){var n;t(ie({zones:e.data.zones})),t(ae({tables:e.data.tables})),j(null===(n=u[0])||void 0===n?void 0:n.id)}))}),[O]),Object(G.jsxs)("div",{children:[Object(G.jsx)(l.a,{icon:d.f,style:{position:"absolute",right:"1rem",top:"1rem",cursor:"pointer"},size:"2x",color:"white",onClick:function(){return v(!0)}}),Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"1.5rem",height:"45px"},children:[Object(G.jsx)("h2",{className:"plan-restuarnat",style:{position:"absolute",left:"3.5%"},children:Object(G.jsx)("b",{children:"Plan du Restaurant"})}),u.map((function(e){return Object(G.jsx)(b.a,{className:"zone_button",style:{marginLeft:"1rem"},onClick:function(){return j(e.id)},variant:a==e.id?"dark":"outline-dark",children:e.nom})}))]}),Object(G.jsx)(qe,{selectedZone:a}),Object(G.jsxs)(xe.a,{placement:"end",show:x,onHide:function(){return v(!1)},children:[Object(G.jsx)(xe.a.Header,{closeButton:!0,children:Object(G.jsx)(xe.a.Title,{children:"menu"})}),Object(G.jsx)(xe.a.Body,{children:Object(G.jsxs)("div",{className:"my_offcanvas",children:[Object(G.jsxs)("div",{className:"offcanvas_item",onClick:function(){return n("/backoffice")},children:[Object(G.jsx)(l.a,{icon:d.p}),Object(G.jsx)("p",{children:"Acc\xe9der aux back-Office"})]}),Object(G.jsxs)("div",{className:"offcanvas_item",onClick:function(){return n("/clients")},children:[Object(G.jsx)(l.a,{icon:d.J}),Object(G.jsx)("p",{children:"Gestion des clients"})]}),Object(G.jsxs)("div",{className:"offcanvas_item",children:[Object(G.jsx)(l.a,{icon:d.x}),Object(G.jsx)("p",{children:"Commandes a livrer"})]}),Object(G.jsxs)("div",{className:"offcanvas_item",children:[Object(G.jsx)(l.a,{icon:d.a}),Object(G.jsx)("p",{children:"Commandes a emporter"})]}),Object(G.jsxs)("div",{className:"offcanvas_item",onClick:function(){return n("/avoires")},children:[Object(G.jsx)(l.a,{icon:d.F}),Object(G.jsx)("p",{children:"Gestion des avoirs"})]}),Object(G.jsxs)("div",{className:"offcanvas_item",onClick:function(){return n("/cloture")},children:[Object(G.jsx)(l.a,{icon:d.k}),Object(G.jsx)("p",{children:"Cloture de caisse"})]}),Object(G.jsxs)("div",{className:"offcanvas_item",children:[Object(G.jsx)(l.a,{icon:d.h}),Object(G.jsx)("p",{children:"Cumuler les tables"})]}),Object(G.jsxs)("div",{className:"offcanvas_item",children:[Object(G.jsx)(l.a,{icon:d.s}),Object(G.jsx)("p",{children:"Rappel ticket"})]})]})})]})]})},He=(n.p,n(72)),Qe=n(748),Ge=n(766),Me=n(231),We=n(749),Ze=n(396),Xe=(n(249),n(146)),Ve=n.p+"static/media/loading.30c0aa7c.gif",Ke=function(){var e,t,n,c,i,a,j,u,O,x,v=localStorage.getItem("user_id"),f=Object(h.d)((function(e){return e.data.zones})),g=Object(r.useState)(""),A=Object(s.a)(g,2),y=A[0],C=A[1],k=Object(h.d)((function(e){return e.data.tables})),w=Object(h.d)((function(e){return e.data.orderHistory})),_=Object(h.d)((function(e){return e.order.checkoutData})),S=Object(h.d)((function(e){return e.data.clients})),I=Object(h.c)(),T=Object(o.f)(),B=null===k||void 0===k||null===(e=k.filter((function(e){return 1==e.libre})))||void 0===e?void 0:e.length,D=(null===k||void 0===k||null===(t=k.filter((function(e){return 0==e.libre})))||void 0===t||t.length,Object(r.useState)(!1)),P=Object(s.a)(D,2),L=P[0],E=P[1],F=Object(r.useState)(!1),R=Object(s.a)(F,2),q=R[0],z=R[1],H=Object(r.useState)(!1),M=Object(s.a)(H,2),W=M[0],Z=M[1],X=Object(r.useState)(""),U=Object(s.a)(X,2),$=U[0],ee=U[1],te=window.location.hash,ne=(S.map((function(e){return e.nom_prenom})),Object(h.d)((function(e){return e.data.orderHistory})),new Date),ce=ne.toISOString().substr(0,10),re=ne.getHours()+":"+ne.getMinutes(),ie=(null===_||void 0===_||null===(n=_.filter((function(e){return e.date>ce})))||void 0===n?void 0:n.length)||0,ae=(null===_||void 0===_||null===(c=_.filter((function(e){return("pending"==e.status||"cooking"==e.status||"ready"==e.status)&&e.date==ce})))||void 0===c?void 0:c.length)||0,se=(null===_||void 0===_||null===(i=_.filter((function(e){return"rejected"==e.status})))||void 0===i?void 0:i.length)||0,oe=(null===w||void 0===w||null===(a=w.filter((function(e){return"completed"==e.status})))||void 0===a?void 0:a.length)||0;Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/getclients",{user_id:v}).then((function(e){I(je({clients:e.data.clients}))}))}),[]);var le=Object(r.useState)([]),de=Object(s.a)(le,2),ue=de[0],be=de[1],he=Object(r.useState)(!1),Oe=Object(s.a)(he,2),me=Oe[0],pe=Oe[1],xe=Object(r.useState)({}),ve=Object(s.a)(xe,2),ge=(ve[0],ve[1],Object(r.useState)({})),Ae=Object(s.a)(ge,2),ye=(Ae[0],Ae[1],Object(r.useState)(!1)),Ne=Object(s.a)(ye,2),ke=Ne[0],we=Ne[1],_e=Object(r.useState)(0),Ie=Object(s.a)(_e,2),De=Ie[0],Pe=Ie[1],Ee=Object(r.useState)(!1),Re=Object(s.a)(Ee,2),qe=Re[0],ze=Re[1],He=Object(r.useState)(""),Ke=Object(s.a)(He,2),Je=Ke[0],Ue=Ke[1],Ye=Object(r.useState)({prenom:"",company:"",code1:"",code2:"",etage:"",interphone:"",name:"",phone:"",address:"",post:"",city:"",message:"",email:"",type:"emporter",nbrCouverts:1,id:Number(Math.floor(Math.random()*Date.now()).toString().substring(11)),date:ce,time:re}),$e=Object(s.a)(Ye,2),et=$e[0],tt=$e[1],nt=function(e){return k.find((function(t){return t.numero==e}))},ct=function(){E(!1),we(!1)},rt=function(){I(Be()),E(!0)},it=function(){var e=Object(p.a)(Object(m.a)().mark((function e(){var t;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(!0),t=localStorage.getItem("caisse_id"),e.next=4,N.a.post("http://141.94.77.9:5000/api/getallorders",{user_id:v,caisse_id:t,customer_id:et.id}).then((function(e){console.log({zboub:e.data}),be(e.data),pe(!1)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),at=function(e){Z(!0),ze(!0);var t=null===S||void 0===S?void 0:S.filter((function(t){var n,c,r;return(null===(n=t.nom_prenom)||void 0===n?void 0:n.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(c=t.telephone)||void 0===c?void 0:c.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))}))[0];t&&tt(Object(Y.a)(Object(Y.a)({},et),{},{id:t.id,prenom:t.nom_prenom,company:t.societe,code1:t.code_1,code2:t.code_2,etage:t.etage,interphone:t.interphone,name:t.nom_prenom,phone:t.telephone,address:t.adresse,post:t.code_postal,city:t.ville,email:t.email}))};return console.log("path",te),Object(G.jsx)("div",{children:Object(G.jsxs)(V.a,{bg:"light",variant:"light",fixed:"bottom",className:"nav-buttom",children:[Object(G.jsxs)(K.a,{children:[Object(G.jsxs)(J.a,{className:"me-auto",children:[Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)(b.a,{variant:"success",className:"nav-buttom-button",children:["Libres ",Object(G.jsx)(Qe.a,{bg:"success",children:B})]})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)(b.a,{variant:"danger",onClick:function(){I(Se()),T("/history/encours")},className:"nav-buttom-button",children:["Encours",Object(G.jsxs)(Qe.a,{bg:"danger",children:[" ",ae]})]})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)(b.a,{variant:"info",className:"nav-buttom-button",children:["Livr\xe9s ",Object(G.jsx)(Qe.a,{bg:"info",children:"0"})]})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)(b.a,{variant:"warning",className:"nav-buttom-button",onClick:function(){I(Se()),T("/history/annules")},children:["Annul\xe9es ",Object(G.jsx)(Qe.a,{bg:"warning",children:se})]})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)(b.a,{className:"nav-buttom-button",variant:"dark",onClick:function(){I(Se()),T("/history/avenir")},children:["Commandes a Venir ",Object(G.jsx)(Qe.a,{bg:"dark",children:ie})]})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)(b.a,{className:"nav-buttom-button",variant:"primary",onClick:function(){I(Se()),T("/history/all")},children:["Termin\xe9es ",Object(G.jsx)(Qe.a,{bg:"primary",children:oe})]})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsx)(b.a,{variant:"warning",className:"nav-buttom-button",onClick:function(){N.a.post("http://141.94.77.9:5000/api/getorder",{user_id:v,order_id:Je}).then((function(e){console.log(e.data),"no data"==e.data?Q.a.fire({icon:"warning",title:"pas de commande avec cet identifiant",showConfirmButton:!1,timer:1500}):"completed"==e.data[0].status?Q.a.fire({icon:"warning",title:"la commande est termin\xe9e ",showConfirmButton:!1,timer:1500}):(console.log(e.data[0].status),T("/checkout/".concat(Je)))}))},children:Object(G.jsx)(l.a,{icon:d.z})})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsx)(Ge.a.Control,{className:"order_id_input",type:"text",placeholder:"Order_id",onChange:function(e){console.log(e.target.value),Ue(e.target.value)}})})]}),Object(G.jsxs)(b.a,{className:"nav-buttom-button nouvelle-cmd-btn",style:{borderRadius:"50px !important"},variant:"success",size:"lg",onClick:function(){return rt()},children:[Object(G.jsx)(l.a,{icon:d.z,style:{marginRight:"1rem"}}),"Nouvelle Commande"]}),te.includes("menu")?Object(G.jsx)(b.a,{className:"nav_butoons-note",onClick:function(){return z(!0)},style:{borderRadius:"50px !important",display:"flex",alignItems:"center",borderColor:"#d63031",backgroundColor:"transparent",marginLeft:"0.5rem"},variant:"secondary",size:"lg",children:Object(G.jsx)(l.a,{icon:d.F,color:"#d63031"})}):""]}),Object(G.jsxs)(fe.a,{show:q,onHide:function(){return z(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Remarque"})}),Object(G.jsx)(fe.a.Body,{children:Object(G.jsxs)(Me.a,{children:[Object(G.jsxs)("h3",{children:[Object(G.jsx)(l.a,{icon:d.F,color:"#d63031",style:{marginRight:"1rem"}}),"Note"]}),Object(G.jsx)(Ge.a.Control,{onChange:function(e){return ee(e.target.value)},as:"textarea",type:"text",placeholder:"Remarque ..."})]})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return z(!1)},children:"Annuler"}),Object(G.jsx)(b.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},onClick:function(){I(Le({remarque:$})),z(!1)},children:"Ajouter"})]})]}),Object(G.jsxs)(fe.a,{show:L,onHide:ct,style:{zIndex:1050,left:-120,top:50},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:Object(G.jsxs)("div",{style:{width:"100%"},children:[Object(G.jsx)("h5",{children:"Choix du mode de consommation"}),"150"!=v?Object(G.jsx)(b.a,{size:"lg",variant:"emporter"==(null===et||void 0===et?void 0:et.type)?"light":"outline-warning",style:{borderColor:"#ff6b6b",color:"#ff6b6b",marginRight:"2rem"},onClick:function(){I(Fe("emporter")),tt(Object(Y.a)(Object(Y.a)({},et),{},{type:"emporter"}))},children:"A emporter"}):"","150"!=v?Object(G.jsx)(b.a,{size:"lg",variant:"livraison"==(null===et||void 0===et?void 0:et.type)?"light":"outline-warning",style:{borderColor:"#ff6b6b",color:"#ff6b6b",marginRight:"2rem"},onClick:function(){I(Fe("livraison")),tt(Object(Y.a)(Object(Y.a)({},et),{},{type:"livraison"}))},children:"Livraison"}):"",Object(G.jsx)(b.a,{size:"lg",variant:"surplace"==(null===et||void 0===et?void 0:et.type)?"light":"outline-warning",style:{borderColor:"#ff6b6b",color:"#ff6b6b"},onClick:function(){I(Fe("surplace")),tt(Object(Y.a)(Object(Y.a)({},et),{},{type:"surplace"}))},children:"sur place"})]})})}),Object(G.jsxs)(fe.a.Body,{children:[ke&&Object(G.jsxs)("div",{className:"histo",children:[Object(G.jsxs)("h1",{style:{textAlign:"center"},children:[" ",Object(G.jsx)("b",{children:"Historique Client"})," ",Object(G.jsx)(l.a,{onClick:function(){we(!1),be([])},className:"times",icon:d.G})]}),Object(G.jsxs)("div",{className:"hhead",children:[Object(G.jsx)("h3",{className:"wid",children:"Type"}),Object(G.jsx)("h3",{className:"wid",children:"Date"}),Object(G.jsx)("h3",{className:"wid",children:"Order"}),Object(G.jsx)("h3",{className:"wid",children:"Prix"}),Object(G.jsx)("h3",{className:"wid",children:"Paiement"})]}),Object(G.jsxs)("div",{className:"hbody",children:[0!=ue.length||me?me?Object(G.jsxs)("div",{style:{display:"flex"},children:[Object(G.jsx)("h3",{children:"Chargement en cours"}),Object(G.jsx)("img",{src:Ve,alt:"loading",width:30})]}):"":Object(G.jsx)("h1",{children:"Aucune Commande trouv\xe9e"}),null===ue||void 0===ue?void 0:ue.map((function(e,t){var n;return Object(G.jsxs)("div",{className:"el",children:[Object(G.jsx)("h5",{className:"wid",children:null===e||void 0===e?void 0:e.order_type}),Object(G.jsx)("h5",{className:"wid",children:null===e||void 0===e?void 0:e.date}),Object(G.jsxs)("h5",{className:"wid",children:["#",null===e||void 0===e?void 0:e.id]}),Object(G.jsxs)("h5",{className:"wid",children:[null===e||void 0===e||null===(n=e.price)||void 0===n?void 0:n.toFixed(2),"\u20ac"]}),Object(G.jsx)("h5",{className:"wid",children:null===e||void 0===e?void 0:e.pay_method}),Object(G.jsx)(l.a,{icon:d.B,onClick:function(){return function(e){var t={table:(null===e||void 0===e?void 0:e.table_number)||"",client_id:(null===e||void 0===e?void 0:e.customer_id)||0,order_id:e.id,message:e.message||"aucune",customer_name:(null===e||void 0===e?void 0:e.customer_name)||"",customer_company:(null===e||void 0===e?void 0:e.customer_company)||"",code1:(null===e||void 0===e?void 0:e.code1)||"",code2:(null===e||void 0===e?void 0:e.code2)||"",interphone:(null===e||void 0===e?void 0:e.interphone)||"",etage:(null===e||void 0===e?void 0:e.etage)||"",table_number:(null===e||void 0===e?void 0:e.table_number)||0,customer_tel:(null===e||void 0===e?void 0:e.customer_tel)||"",customer_adress:null===e||void 0===e?void 0:e.customer_adress,status:null===e||void 0===e?void 0:e.status,orderType:null===e||void 0===e?void 0:e.order_type,paymentType:null===e||void 0===e?void 0:e.pay_method,totalPrice:null===e||void 0===e?void 0:e.price,taxPrice:null===e||void 0===e?void 0:e.tva,tvas:(null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.tva)/100,orderItems:null===e||void 0===e?void 0:e.orderItems,date:null===e||void 0===e?void 0:e.date,time:null===e||void 0===e?void 0:e.time};N.a.post("http://141.94.77.9:5000/api/printOrder",{kitchen:!1,user_id:v,order:Object(Y.a)(Object(Y.a)({new:!1},t),{},{nbrCouverts:1})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}(e)},style:{cursor:"pointer"}})]})}))]})]}),Object(G.jsx)("div",{children:"livraison"==(null===et||void 0===et?void 0:et.type)?Object(G.jsx)("div",{children:Object(G.jsxs)(Ge.a,{auto:!0,children:[Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{name:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsxs)(Ze.a,{children:[(null===(j=et.telephone)||void 0===j?void 0:j.length)>0&&(null===(u=et.telephone)||void 0===u?void 0:u.length)<10?Object(G.jsx)(Qe.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(G.jsx)(Xe.a,{onInputChange:function(e){tt(Object(Y.a)(Object(Y.a)({},et),{},{phone:e}))},onChange:function(e){at(e[0]),console.log(e)},options:S.map((function(e){return e.telephone})),placeholder:"telephone",type:"number",min:"1",max:"5"})]}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.email,type:"email",placeholder:"Email",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{email:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.address,as:"textarea",type:"text",placeholder:"Addresse",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{address:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.company,type:"text",placeholder:"soci\xe9t\xe9",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{company:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.code1,type:"text",placeholder:"code 1",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{code1:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.code2,type:"text",placeholder:"code 2",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{code2:e.target.value}))}})}),Object(G.jsx)(Ze.a,{xs:"6",children:Object(G.jsx)(Ge.a.Control,{value:et.city,type:"text",placeholder:"Ville",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{city:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.interphone,type:"text",placeholder:"interphone",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{interphone:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.etage,type:"text",placeholder:"etage",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{etage:e.target.value}))}})}),Object(G.jsx)(Ze.a,{xs:"6",children:Object(G.jsx)(Ge.a.Control,{value:et.post,type:"postal",placeholder:"Code postal",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{post:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{message:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.date,type:"date",defaultValue:et.date,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{date:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.time,type:"time",defaultValue:et.time,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{time:e.target.value}))}})})]})})]})}):"emporter"==(null===et||void 0===et?void 0:et.type)?Object(G.jsx)("div",{children:Object(G.jsxs)(Ge.a,{auto:!0,children:[Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{name:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsxs)(Ze.a,{children:[(null===(O=et.telephone)||void 0===O?void 0:O.length)>0&&(null===(x=et.telephone)||void 0===x?void 0:x.length)<10?Object(G.jsx)(Qe.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(G.jsx)(Xe.a,{onInputChange:function(e){tt(Object(Y.a)(Object(Y.a)({},et),{},{phone:e})),ze(!1),we(!1)},onChange:function(e){at(e[0]),console.log(e)},options:S.map((function(e){return e.telephone})),placeholder:"telephone"})]})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{message:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.date,type:"date",defaultValue:et.date,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{date:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.time,type:"time",defaultValue:et.time,onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{time:e.target.value}))}})})]})})]})}):Object(G.jsx)("div",{children:Object(G.jsxs)(Ge.a,{auto:!0,children:[Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Xe.a,{onInputChange:function(e){tt(Object(Y.a)(Object(Y.a)({},et),{},{name:e})),ze(!1),we(!1)},onChange:function(e){return at(e[0])},options:S.map((function(e){return e.nom_prenom})),placeholder:"nom/prenom"})})})}),Object(G.jsxs)(Ge.a.Group,{className:"mb-3",children:[Object(G.jsx)(We.a,{children:Object(G.jsxs)(Ze.a,{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(G.jsx)("h3",{children:"Zones :"}),f.map((function(e){return Object(G.jsx)(b.a,{className:"zone_button",style:{marginLeft:"1rem"},onClick:function(){return C(e.id)},variant:y==e.id?"dark":"outline-dark",children:e.nom})}))]})}),Object(G.jsx)(We.a,{children:Object(G.jsxs)(Ze.a,{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(G.jsx)("h3",{children:"Tables :"}),k.filter((function(e){return 1==e.active&&1==e.libre&&e.zone_id==y})).map((function(e){return Object(G.jsx)("div",{className:e.numero==De?"tbl sel":"tbl",onClick:function(){return Pe(e.numero)},children:Object(G.jsx)("h6",{children:Object(G.jsx)("b",{children:e.numero})})})}))]})})]}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:et.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return tt(Object(Y.a)(Object(Y.a)({},et),{},{message:e.target.value}))}})})})})]})})})]}),Object(G.jsxs)(fe.a.Footer,{children:[W?Object(G.jsxs)(b.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},onClick:function(){we(!ke),it()},children:[Object(G.jsx)(l.a,{icon:d.s,style:{marginRight:"5px"}}),"Historiques"]}):"",Object(G.jsx)(b.a,{variant:"outline-secondary",onClick:ct,children:"Annuler"}),Object(G.jsxs)(b.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},onClick:function(){return 0==qe?N.a.post("http://141.94.77.9:5000/api/createClient",{user_id:v,client:{etage:et.etage||0,interphone:et.interphone||0,supprimer:0,societe:et.company||"",nom_prenom:et.name||"",telephone:et.phone||"",adresse:et.address||"",code_postal:et.post||0,ville:et.city||"",email:et.email||"",code_1:et.code1||"",code_2:et.code2||""}}).then((function(e){tt(Object(Y.a)(Object(Y.a)({},et),{},{id:e.data.id})),I(Te({client:Object(Y.a)(Object(Y.a)({},et),{},{id:e.data.id})}))})).catch((function(e){return console.log(e)})):I(Te({client:et})),"surplace"==et.type&&(0==De?Q.a.fire({title:"Selectioner une table !"}):(I(Ce({selectedTable:{id:nt(De).id,nbr:nt(De).numero,ppl:nt(De).nbrePersonne,libre:nt(De).libre,nbrCouverts:1}})),ct(),T("/menu"))),void("surplace"!=et.type&&(ct(),T("/menu")))},children:[Object(G.jsx)(l.a,{icon:d.m,style:{marginRight:"5px"}}),"Cr\xe9er la vente"]})]})]})]})})},Je=n.p+"static/media/serveur.496e23b3.png",Ue=(n(111),He.a.connect("http://localhost:5002")),Ye=function(){var e=z().t,t=(localStorage.getItem("user"),localStorage.getItem("username")||""),n=localStorage.getItem("user_id"),c=Object(h.c)(),i=Object(o.f)();Object(r.useEffect)((function(){Ue.on("a",(function(e){console.log(e)}))}),[Ue]),Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/categories",{user_id:n}).then((function(e){return c(se({categories:e.data.sort((function(e,t){return e.cat_order-t.cat_order}))}))})),N.a.post("http://141.94.77.9:5000/api/products",{user_id:n,category:0}).then((function(e){c(oe({products:e.data.products})),c(le({nSteps:e.data.menuSteps}))}))}),[]),Object(r.useEffect)((function(){var e=localStorage.getItem("caisse_id");N.a.post("http://141.94.77.9:5000/api/getorders",{user_id:n,caisse_id:e}).then((function(e){c(de({orderHistory:e.data})),console.log(e.data);var t=e.data.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{table_number:e.table_number||e.order_id,order_id:e.id})}));console.log("got data",t),t.map((function(e){c(Pe({order:e}))}))})),N.a.post("http://141.94.77.9:5000/api/gettva").then((function(e){c(be({tva_mode:e.data}))}))}),[]);var a=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),i("/")};return Object(G.jsxs)("div",{className:"main_bg",children:[Object(G.jsx)(V.a,{variant:"warning",className:"navbar",children:Object(G.jsxs)(K.a,{className:"main-container",children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsx)(V.a.Brand,{}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)("h6",{className:"nav_link-h6",style:{color:"white",paddingTop:"5px"},children:[Object(G.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"},className:"ico2"}),"Agenda"]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return i("/cloture")},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"5px"},className:"nav_link-h6",children:[Object(G.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"},className:"ico1"}),e("cashier")]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return a()},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"5px"},className:"nav_link-h6",children:[Object(G.jsx)(l.a,{icon:d.E,style:{marginRight:"5px"},className:"ico"}),e("disconnect")]})})]}),Object(G.jsxs)("h6",{style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},className:"nav-link",children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"},className:"server-img"}),Object(G.jsx)("b",{children:t}),Object(G.jsx)(l.a,{onClick:function(){return a()},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(G.jsxs)("div",{className:"x2",children:[Object(G.jsx)(ze,{}),Object(G.jsx)(Ke,{})]})]})},$e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAByBSURBVHja7d0LtGV1fR/wc+5jHgwMI8qAUIqOyFupjSuYqLzEqQwWEavCahpr6j2mTSXSik28p11deq4xJpWFptaei8saVwMRS6HRQWEMASVKIjXODA87CBIcwAkjwwzzuHMfp78/cyC8ZubeO+fs8z/nfD5r/e8eH/fuff577/P77v9+lRuNRgkA6C8DugAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAAAQAHQBAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAHM3NJ9fGq1W0+/9SrTXRHtZtJdGWxbt76L9tNl+OFarbdTFADA/I5XK4TF5XbQVzXZEtC3RNkd7LNq6aN8br9en5vq3y41GY7ZFfzgml0R7R7S3RDt0P7+S/vDt0f402lcjDGyyKgFgv0V/eUzeFe3d0c6INrifX3ki2rej3RDt6ggDky0JAFH404z/RbT/FO2V8/w8O6P9YbTfjyCw3eoFgBcU/iUx+Q/RPhJt8Tz/zAPRPh7tKxEEpucdAKL4n5qO3qOd1KLP93C0fxch4E+tagB4pvi/NyafiXZUi/7kPdHeEyFg/ZwDQBT/NPTwpWhL2vBZPxXtYxEEGlY7AH1c+Msx+WS032nDn08j7u+PEHDti/2PA3sp/tXmkf+SNn3m9EGvjfkstvoB6NPin2rgtW0q/qVmDf9qzKc6qwAQRfn9MflEAZ89XeBwlU0AgD51VbMWttsnIgS8//n/5XNOAUTxPycm34w2XGAH/PZYrfZZ2wEAfXT0f2lMrixwlunOgLeN1+t//oIAEMV/aUw2RFtecD+khXpzhIA7bBIA9EHxPz0m3yn4YDtJt+O/OkLA1vQfnn0K4GMdKP6lZgd8xiYBQJ/4TAeKf6lZ4z/2nBGAOPpP9/enWwYWdrBD3j5Wq33DdgFADx/9nx+Tr3dwESainTRerz/w9AjAZR0u/smYTQOAHtfpWpdq/YefGgH42OhougfxZ6XWPXzgQJwyVqvdbfsAoAeP/tPD9dZlsCjpPT3HpBGAX82k+CcrbSIA9Ki3ZbIcR0d7QwoA52fUOQIAAL3qvIyW5e0pAByf0QKdMVqtDthGAOglI5VKuur/TRkt0gmp2K7IaIHSYwtfZVMBoMecGG1BRsuzIrcAkLzWdgJAj3lNZsvzVAAY1kkA0FcHt8MpADwmAABAX9W2x1IA2CwlAUBfBYDNKQBsymyhVoxWqwfZVgDoBSOVyrKYHJPZYm1KAeDezBYqLdMpNhkAHP23zb2p2K7LcMGcBgBAAGifdSkArNVZANBXNW1tCgB3RZvRWQDQFrmNaqeaf9fAWK22I/5xvwAAAG1xambLc/94vb7j6efu53Ya4PDRavVI2wwA3WykUjk2JkszW6ynav7TASDHCwGNAgDQ7bK8AFAAAID2yvGutuwDgFsBATAC0OYAcF+0nToNAHq6lu1s1vw9AWCsVnvqloDMFvLk0Wp10LYDQDcaqVQWxOSEzBbrrvF6febZIwDPDAlkZFG0V9uEAOhSJ0UbymyZnqn1OQeAxGkAALpVtuf/nx8APBIYAHq7hq3tlhEAdwIAIAC0cwRgrFbbFJNNOg8AevIgdtN4vb7pxUYAnjM0kIlXjlarB9uGAOgmI5XKS2JydGaL9ZwaP7C3oYFMlEv5vUQBAPYn6+H/bggAuXYiAAgAAgAAPEe27wDYWwBITwOc0YkA0FMHry944u9zAsBYrfbMM4J1IgDM3UilkuP1a/eN1+s79zUC8IIhggwcNlqtHmWTAqBLHBvtkMyW6QW1/cUCQI5PBHQaAIBukWPNWjubAOBCQADorZo1qxEAAQAA+jAA3B9tR2YL7hQAAALA/Oxo1vZ9B4CxWi3dKrA+s4U/cbRaHbJNAZCzkUplYUyOz2yx1o/X6zOzGQF40aGCDsuxQwHg+U6KltsB64vW9G4JAInrAADIXVec/++2AOA6AAAEgLlbO5cAsFanAkBPHKzOfgRgrFZ7LCaPCgAA0NW16tHxev2xuYwA7DUxdNArRqvVpbYtAHI0UqkcFpPcHl2/11q+rwCQ42mAU21iADj6n7W18wkA7gQAgNnrmvP/3RgA3AkAgBGANgeAu6NN61wA6MoaNd2s5XMLAGO12q6YbNC5ALBvI5VKuZTfdWobxuv1XXv7H/f3uMI0dHBiRh9m2Wi1ekyEk4f6fmvbeMVg/Dw4Wtmut4/0e/Rl23QDczVx96Xp4OgQ+9c+pWfLb1t48mcbuuIpr2x+J+dkn6fyZxMA3p3hKEB/BYCNVxwTPy+M9k+ipX8fGe1lpX2fwmFP302U9jzTIrU0FHZDtJsiGOzUOTSLfdqX3h7t/GgrmvvX8lJ+z3PP0WT036bm/nVftD+L9o0IBVv6sC+66vz/bAJArk8EXN0HhSsdefxatA9H+8e+Z+YtvUjq2GY7Pdr7S+nVmBuv+EZMPx5BYL0u6tvCnwL170R7c7RBPTIvw9GObrZfivbeaFPRt7fEtBZB4DYBoKP2WcP3dwTpToDOFP9z4ued0f5Y8W+Lg0p7RrZ+FH39xWhH65K+KvynRftW/POb0c5S/FsuHVi+Ndqt0c83RDuxTz53140A7C8APBDtSZ1cWOEfjvb5+Ne3o73O90jbpe3/N6LdE/1+ge7oi+J/eUz+b7SVeqMQab9aG/3+m33wWXM7OH2yWcP3qtxo7Pv6jdFq9fulPUOnuZiMtmSsVpvsseJ/ePy8NtqZvjM6Iu0Io6WjL/s9XdGThX9RTK6K9s/1Rsf892gfWnjyZyd77YONVCqLmgU3p9GkO8br9TccyAhAktt1AOmcU28NKW28Il2E9D3Fv6PSNRefjHVxpa7oueK/oJQu/FT8O+2D0a6P9dGLp1xOKuV3Kmm/tXs2AcAjgdtb/FOg+V/RXuX7IQuXxjqp6Iae8oXSngv96LxV0f6gBz9X153/FwDy8EfRzvC9kNk62XiF0ZjeOPq/rLTnzg/ycVmsl15bJ131DoBuDwC9cSfAxivOjp+ONvOTRmW+2BydoXuL/yti8ik9kaXPxvpZbgQg8wAwVqttjsnDOrstfDnlK52S+de6oat9PNoC3ZCl9MS8qgDQNg+P1+ubWzECkOMowDGj1eqyLj/6f1f8/GXfA1n7j7GeluqGrjz6T1/ILvrL2wdjPb2y2z/ESKWSLuJ+ebcd/XdzAEhO7fLt5kP2/+ylHfsS3dCVfqvkUdm5S6MzH3T0n38AyPGRwN17HcCe2/7eZP/vCh4Q1H1H/+mWznfoia5woQDQFrOq2bN92YU7AQ7QqltuOqIxNPiRxuDg6w8eOu344cHS4M7yUGnGy8ayX3W7Hr09PeCjJ994dvCGv72r1z7TQYO/fPBRC3ceadPN32C5ccLP7vrKmu3TQ+nV8+mFQundHN+67uJLnuyij9G1IwCzDQD3RJsq5fV2rOwDQBT9RY3hoc9NL1xwwfThL1leKu8p9o/b77vNkh7+bKf32gfaMT1Yum/Hwbba7vGWZnvaxEXXXL2mtOfJqP8zwsCUADAnU82avV+zOgUwVqulV6pu0Omzd953vv2Hk8sOeWL3S5Z+YPqgRc8UfwD2Kb3BM72a+X9EuyvCwD/LdUFHKpX0xZ7b9Wgbxuv1iZYFgKbcrgNYOlqtHpvdUf9f3PyGlXfevnX3YYf++5kFw25BApi/49NIQISA26P9wwyXb0UpvxHCWdfquQQA1wHs76j/tjWX7j5s6e3TixYeYr8FaJlfjfaDCAG5PaGza8//90IAyOZOgPO+++fjcdR/ZWNw0K1HAK2X3pi6JkLA+wSA4gNAjrcCZtH5ceT/kd3LDvmA8/wAbZUuRL8qQsBbHIQeeK2eSwB4MNo2AeC5Vv3FzSsnly39tOIPUFgISNcFHK8GvcC2Zq1ubQAYq9XSfdDrM/uwJ4xWqx270G7VLTcNTS5dcn1jcED1ByjOS6J9NUJAx065jlQqi2JyXGb9sn68Xp/1M0vm2nm5XQeQkuBJnZp5Y3ioPrNwwWL7IkDhTov2Lzs4/5OjDWbWJ3Oq0XMNAK4D+Puj/+WThyz5dfsgQMd84qJrru7UbXhdff6/F0YAOrYSZhYMf6ExNDho/wPomKOifaCfDj47OQLgWQBPB4CFC86x7wF03LsEgAICwFitlh5j/7N+DwCrbrnpxOnFCw+13wF03BsvuubqwwWA0s/G6/U5vWpmPldQ5jYKcPRotXpYkTNsDA99xD4HkIVUx84vcoYjlUoKHLm9cXLdfDqu2wNA4UmsMThwsn0OIBtFPxOg64f/BYD5BoCBgeX2N4BsHCUAFBMAcrwVsNA7ASIALLO/AQgAGZlzbZ5PALg32lQ/jwCUBgYW2d8AslH0Rdm5PQNgqlmb2xsAxmq13TH5cWYf/tTRarW4x/HOzOywvwFk47GiZjRSqaS6eUpmn//H4/X67iJGAJLcTgMcHO0VRc2sPDPzhP0NIBubCpzXimgHZfb551WT5xsA+vqJgOXpmU32N4BsPFzgvHriAsBeCwCFrZTy1PSN9jeAbHynFw82BYAcA8D09BdKjYZdDqDz0rnv24wAFBQAxmq1B2OyNbMOKCyVrT575WODuyYet98BdNx3r7v4kiIvzM4tAGwdr9cfLHIEIMdRgFePVquF3Z43uHOibr8D6Lg/KmpGI5XK4pgc1wtH/70WANKreU8qamblqenqwO7JSfseQMdsiHZDgfM75QDrpgDQRkWeBpga2r7zy/Y/gI4Zu+7iS2YKnF/PnP8/0ACQ4yOBC105N77pnJHBHbt+bh8EKNzXo/gXfRDWE48AbkUAWN/vASAZ2r7j3PL09Ix9EaAw6cl/H+jAfHO8BXDetXjeAWCsVtsSk4cy64jCV87qs1auX/D4tg+WZ2bcFwjQftui/dM4+u/E6GtuIwAPjdfrWzoxApDkdhrgyNFq9WWFh4Azz71q+PGtHyrLAADtlG73Oz+K//eLnvFIpZJeA5/bq+APqAYfaADo6wcCPduNZ5z7Xxf84onfGJiccmcAQOv9JNrZUfy/06H599QFgL0aADp2jmb1med+afjxrccOPbnjJ/ZVgJZJF/u9Lor/X/VjbWlXDR4yAtDiEHD2ykdictyqW9e8b3rxwk9NLVl8pH0XYM7SOdU/i1aLwv/X/V5bcgwA90ZLQ97DAsALRgNSYv3yqltvfsfM8PCHZxYO/9L0woWHlMr2aoC9mI52R7Sbon0tCv9dasteTTZr8LyVGwf4UpvRanVtZh2zPdrSsVotu1vzzrttzaW7X7rsSvs4uTh03QadQE7OiqJ/a24LNVKppNPlT0ZbnNPR/3i9fkCnJVrxSMPcTgMsibYixy273CjtsH8D7NVEpst1XGbFvyW1txUBoO+fCAhAT+upJwD28ghA8lrbKwA9HACyGAFwJwAAAkC/BYCxWi09DniLlQVAj8ptVHnLeL1+wI/ib9V7jXMbBThutFpdbJsF4ECMVCoHlfK7sLwlNbdXA0D6XKfYdAE4QKe0sFYKAAVxGgCAXqwlAoAAAECb9dw7APohALgVEAAjAO0MAGO12taYPGilASAAtNWD4/X61pxGAHIcBVg+Wq0ut+0CMB8jlcoRMTm8F4/+Wx0AcnwksNMAAPRSDWlZre3lEYDEaQAAeqmGZDkCIAAAIAD0YQD4cbTdmXWUUwAA9EoA2N2stXkFgLFabSom92TWWSePVqsDtmEA5mKkUhks5fdE2XvG6/WpHEcAktxOA6T3ARxnUwZgjlLtWJTZMrW0xvZ6AEicBgBgrnr6/H87AsBaKxEAAaAtWlpj+2EEQAAAYK569h0AbQkAY7Xaxpg8biUCYASgpR4fr9c35jwCkOMowIrRanWJbRmA2RipVFLNWNHLR//tCgC5XQdQLuV3KwcA+TqlWTty0vLa2g8jAInTAAB0c83oihEAFwIC0M16/hbApNxoNFr6B0er1UNi8kQpv+GTjtt89MtLG844XUeQjUPXbdAJ5LM9/uDO0tDWrTrihVKhPnS8Xt+W9QjAWK2WFvCn1hcAtMRPW1382xIAmtZZXwCQb00VAABAAGiZtdYXAORbU40AAIARgJb5f9EmrDMAOCATzZraHQFgrFabjsk91hsAHJB7xuv16W4aAUhcBwAAmdbSdgYA1wEAQKa1VAAAAAGgpZwCAIBMa2nbAsBYrfZITDZbdwAwL5vH6/VHunEEIHEaAAAyrKECAAAIAC3nOgAAyLCGGgEAACMALbc+WsM6BIA5aTRraHcGgLFabXtM7rceAWBO7h+v17d38whA4jQAAGRWOwUAABAABAAAEABaw62AAJBZ7SwiANwXbZd1CQCzsqtZO7s7AIzVatMxudv6BIBZuXu8Xp/uhRGA5F7rEwDyqZlFBYBJ6xMA8qmZA/oZAPqPAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAMCuNImYy1Ked+7+jfbromf7i5csviMnv2rYBXmjiiCNGhrZuXd+BWX802jsz6oqyANA+m8Zqte8XPdNVt6451S4O8OJ2HfMP1v/J5ZcX/t08Uqls6sf+dgoAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAyMaQL+lt5anpGL/S1v9MFfe0IXSAA0KfWnHb6oF7oY6edrg/62EXXXN3QC/3LKQAAEAAAAAGgdaYz+9wdWp7G9qx6oWH0D/rc7syWZ6K/akJnl6eoAJDbhUY/71DBvSur9Dc1PeX7D/raw5ktzyN9VRM6XDOLCgCP2uhTACjdndNRd3l6eqfvPxAAMpEOSDbph+JqpgBQoNVnr5yKopvNUFN5euYJ338gAORS9K67+JIZ/dB7AeDuzDp3fadmPDgxmU0YKk9O/dD3H/S172e0LHf0Y03oZM0sJACM1WprY/JAJh37N7E8f9upmQ/snvx6LlvYwOTU53z/QV/7Pxktyw2dmvF4vZ5qwt9k0g8PxPKs7aURgI6u3Oe5vsNH3f+llMFlABFEdq8+6603+/6D/nXdxZdsiMm9GSxKOjW6up9rQydqZZEB4NpMOvdrnZz56rNXbhjcubPjV5wO7tx1q68/IHwlg2VYHWFkcz/Xhk7UysICwFit9pcx+VanOzaWo+O34g3t2PWbnZx/ev7/wMTkr/neA8KVpc7dfpekC/8+1ulOGK/X78rgQPVbsRx/2YsjAMnlzZXdCekWk9Ec9rbVZ771+qEnd2zo1PyHt23/k9Vnr9xUAvpeHHmnB5T95w4uwpdjGXK5CG+0WSs6FYQuL3KGhQaAOPpeF5MvdqhzPx/z35DLTje4c9d7y9PFv4lvcNfu7eXJqX/law94lvS9/NcdmO9j0aq5dEIcfaca8flOrYOY/7qeDQBNvx2t6NvPvhftozntbavPWvnD4S3bPlzkg4HKU9PTQ9uefHMc/ef2+E+gs6MA6SK8C0vF3g8/Ge1dMe/c7sH/aLNmFOmHzdpYqMIDQByF72xuaEUNQT8U7Z0x34ncdrobzzj3cwu2bCvmApwIGjGvkRQ8fN0BLxICUiF+Z7RdBc3yt2Ket+XWD3EUPtHsh4cKmmWqhRfGfAt/MmtH3gbYvA//glL7n3e8Mdr5Mb+f57rT3fimc359eMu2r7Xz1sDy9ExjwS+euHz1med+ydccsI8Q8FcxeXu0x9s4mzTacGnMazzXfohinGrG+c0a0k6pBl7QfA5B4cqNDj6bfrRaPba050EUr23Dn09Plbowiv+j3bDjnXfbmo9OLlv6qcbgQLmlCW/35MTwE0+ev/qst37b1xswGxddc/Vxze/mk1r8p1OweE8U/zXd0A8jlcqRpT3PBzi9DX9+bbP4P9ipzzfQyc6N4pw++Buj/XGp1LJj4JQu/1u0M7ul+D81EnDGuZ+Oo/Szh7bvbM0yR7Ab2rb9R8Nbtr1K8QfmOBJwX0zeEC09LXSyRX82PeDm9d1S/JsjAen7+MxmTWnVe1wazZr3xk4W/46PADxvNOAfxeT3or3tAP5MSqy/G4X/7m7e+VbdtubfTC1Z/PvTixYePJ/fjxDx0OCOXe+Lwn+LrzLgAEcDXhWTT0Z7d6oZ8/gT6X0Dl0fh/24398NIpXJys0ZdcAB/5pupRkXhz+Kxw9kEgGcFgTTU8p7SngsFV8ziV9JtG2mI5qtR+H/QSzveqltvvnBmeOjfzixa+CvTCxcctK+j/cGdE5sHJ3avKU9N/0EU/jt9bQEtDgJHx+Qdze/ms6IN7+P/fmfze/n6jO7xb1UQeP2zatSrZ/Er9z9do6Lw35HTZ8kuADwvDLwmJqkd1WwvLe25aOLhZvtRFP17+mHnW3XLTS8vlcuvaQyUT4hpCka7yjONn0Txvzfa+tVnr9ziKwooKAwsismRz2oLSnteYZvaI1H0t/VDP0QYSNdInPasGnV4tM3PqlHrir63v2cCAADQHgO6AAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAAEAAAAAEAABAAAAABAAAQAAAAAQAABAAdAEACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAAgAAIAAAAAIAACAAAAACAAAgAAAAc/f/AYnmS++qhM7oAAAAAElFTkSuQmCC",et=n.p+"static/media/cc.883bea09.png",tt=n.p+"static/media/delivery.c63ca6d5.png",nt=n.p+"static/media/takeout.47a36a20.png",ct=n.p+"static/media/cash.99b68bb2.jpg",rt=n.p+"static/media/surplace.2e0aa439.png",it=n.p+"static/media/hs.dcadad91.png",at=n(126),st=function(e){var t=e.product,n=(e.setAlert,e.order_id,e.setconfirmed,e.confirmed,z().t,Object(h.c)()),c=Object(r.useState)(1),a=Object(s.a)(c,2),o=(a[0],a[1],Object(r.useState)(!1)),l=Object(s.a)(o,2),d=(l[0],l[1],Object(r.useState)(void 0)),j=Object(s.a)(d,2),u=(j[0],j[1],Object(r.useState)(!1)),O=Object(s.a)(u,2),m=O[0],p=O[1];Object(r.useEffect)((function(){console.log(t)}),[]);var x,v=localStorage.getItem("currency");return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(at.a,{}),Object(G.jsxs)("div",{className:"item_container",onClick:function(e){return p(!0)},children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:t.name.substring(0,21)})}),1==t.active?Object(G.jsxs)("div",{children:[Object(G.jsx)("img",{src:t.image,className:"prod_img"}),Object(G.jsxs)("div",{className:"price",children:["".concat(t.price.toFixed(2)),(x="<i>".concat(v,"</i>"),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:x}}))]})]}):Object(G.jsx)("img",{src:it,className:"prod_imgs"})]}),Object(G.jsxs)(fe.a,{show:m,onHide:function(){return p(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Gestion de stock"})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return p(!1)},children:"Retour au tables"}),1==t.active?Object(G.jsx)(b.a,{variant:"danger",onClick:function(){return p(!1),void N.a.post("http://141.94.77.9:5000/api/resetwarehouse",{prod_id:t.id}).then((function(e){console.log(e.data),n(ue({id:t.id})),Q.a.fire({icon:"success",title:"produit mis ajours!",showConfirmButton:!1,timer:1500})}))},children:"Hors stock"}):Object(G.jsx)(b.a,{variant:"primary",onClick:function(){return p(!1),void N.a.post("http://141.94.77.9:5000/api/bringwarehouse",{prod_id:t.id}).then((function(e){console.log(e.data),n(ue({id:t.id})),Q.a.fire({icon:"success",title:"produit mis \xe0 jours !",showConfirmButton:!1,timer:1500})}))},children:"Disponible"})]})]})]})},ot=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=localStorage.getItem("username")||"",a=localStorage.getItem("user_id"),j=Object(r.useState)((new Date).toLocaleTimeString("fa-IR")),u=Object(s.a)(j,2),b=(u[0],u[1],Object(r.useState)({show:!1,msg:"",type:""})),O=Object(s.a)(b,2),m=(O[0],O[1]),p=(localStorage.getItem("caisse_id"),Object(h.d)((function(e){return e.data.coupons})),Object(h.d)((function(e){return e.data.tables})),Object(r.useState)({})),x=Object(s.a)(p,2),v=(x[0],x[1],Object(r.useState)(!1)),f=Object(s.a)(v,2),g=(f[0],f[1],Object(r.useState)(!1)),A=Object(s.a)(g,2),y=(A[0],A[1],Object(r.useState)("")),C=Object(s.a)(y,2),k=(C[0],C[1],Object(o.g)()),w=Object(o.f)(),_=(k.id,z().t),S=Object(h.c)(),I=Object(h.d)((function(e){return e.data.products})),T=Object(h.d)((function(e){return e.data.categories})),B=Object(r.useState)(""),D=Object(s.a)(B,2),P=D[0],L=D[1];Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/products",{user_id:a,category:0}).then((function(e){S(oe({products:e.data.products})),S(le({nSteps:e.data.menuSteps}))})),N.a.post("http://141.94.77.9:5000/api/categories",{user_id:a}).then((function(e){return S(se({categories:e.data.sort((function(e,t){return e.cat_order-t.cat_order}))}))})),console.log(T)}),[]);var E=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),w("/")};localStorage.getItem("currency").replace(/;/g,"").replace(/&/g,"");return Object(G.jsxs)("div",{className:"navbar",children:[Object(G.jsx)(V.a,{style:{height:"60px"},variant:"warning",children:Object(G.jsxs)(K.a,{className:"history-navbar",children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{onClick:function(){return w("/main")},children:Object(G.jsx)("img",{width:"45px",src:$e,className:"table-icon"})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(G.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return w("/cloture")},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(G.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),_("cashier")]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return E()},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(G.jsx)(l.a,{icon:d.E,style:{marginRight:"5px"}}),_("disconnect")]})})]}),Object(G.jsxs)("h6",{className:"client-server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:i}),Object(G.jsx)(l.a,{onClick:function(){return E()},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]}),Object(G.jsxs)("div",{className:"client-search",children:[Object(G.jsx)("label",{children:Object(G.jsx)(l.a,{icon:d.C})}),Object(G.jsx)("input",{type:"text",placeholder:"Chercher...",onChange:function(e){return c(e.target.value)},value:n})]})]})}),Object(G.jsxs)("div",{className:"backoffice",children:[Object(G.jsx)("div",{className:"B_header",children:Object(G.jsx)("select",{name:"",id:"b_office_select",onChange:function(e){L(e.target.value)},children:T.map((function(e,t){return Object(G.jsx)("option",{value:e.id,children:e.name},t)}))})}),Object(G.jsx)("div",{className:"all-produc-menus",children:0!=I.length?Object(G.jsx)("div",{className:"modal-bodyss",children:I.filter((function(e){return""!=P?e.cat_id==P:e.cat_id})).filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())||e.code.includes(n)})).map((function(e,t){return Object(G.jsx)(st,{setAlert:m,product:e})}))}):Object(G.jsxs)("div",{className:"loadingProd",children:[Object(G.jsx)("h1",{children:"Chargement des produits..."}),Object(G.jsx)("img",{src:Ve,alt:"loading"})]})})]}),Object(G.jsx)(Ke,{})]})},lt=n(750),dt=n.p+"static/media/bgg.5f53063d.png",jt=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()},ut=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.shouldPreventDefault,i=void 0===c||c,a=n.delay,o=void 0===a?300:a,l=Object(r.useState)(!1),d=Object(s.a)(l,2),j=d[0],u=d[1],b=Object(r.useRef)(),h=Object(r.useRef)(),O=Object(r.useCallback)((function(t){i&&t.target&&(t.target.addEventListener("touchend",jt,{passive:!1}),h.current=t.target),b.current=setTimeout((function(){e(t),u(!0)}),o)}),[e,o,i]),m=Object(r.useCallback)((function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b.current&&clearTimeout(b.current),n&&!j&&t(),u(!1),i&&h.current&&h.current.removeEventListener("touchend",jt)}),[i,t,j]);return{onMouseDown:function(e){return O(e)},onTouchStart:function(e){return O(e)},onMouseUp:function(e){return m(e)},onMouseLeave:function(e){return m(e,!1)},onTouchEnd:function(e){return m(e)}}},bt=function(e){var t,n,c=e.handleUpdateOrder,i=e.orderTo,a=e.setOrderTo,o=e.setshowRemise,j=e.calcOrder,h=(localStorage.getItem("currency"),Object(r.useState)(!0)),O=Object(s.a)(h,2),m=(O[0],O[1],Object(r.useState)("")),p=Object(s.a)(m,2),x=p[0],v=p[1],f=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 {bksp}"]),g=Object(s.a)(f,2),A=g[0],y=(g[1],Object(r.useRef)()),C=Object(r.useState)(0),N=Object(s.a)(C,2),k=N[0],w=N[1],_=Object(r.useState)(0),S=Object(s.a)(_,2),I=S[0],T=S[1],B=Object(r.useState)(0),D=Object(s.a)(B,2),P=D[0],L=D[1],E=Object(r.useState)(!1),F=Object(s.a)(E,2),R=F[0],q=F[1],z=Object(r.useState)(""),H=Object(s.a)(z,2),M=H[0],W=H[1],Z=function(){var e=JSON.parse(JSON.stringify(i.order)||{}),t=0;if(1==R)t=0,console.log("offert",t,e);else if(k>0){var n,c;t=(null===(n=i.order)||void 0===n?void 0:n.price)-(null===(c=i.order)||void 0===c?void 0:c.price)*k/100,console.log("perc",t)}else if(I>0){var r;t=(null===(r=i.order)||void 0===r?void 0:r.price)-I,console.log("remise",t)}else P>0&&(t=P,console.log("libre",t));console.log("nothing"),e=Object(Y.a)(Object(Y.a)({},e),{},{finalPrice:t}),a(Object(Y.a)(Object(Y.a)({},i),{},{order:e}))};Object(r.useEffect)((function(){Z()}),[R,I,k,P]);var X=function(e){var t=e.e,n=(e.index,t.target.value);v(n),y.current.setInput(n)};return Object(G.jsxs)("div",{className:"remise_modal",children:[Object(G.jsxs)("div",{className:"uper",children:[Object(G.jsx)("h3",{children:"Remise"}),Object(G.jsx)(l.a,{style:{position:"absolute",top:"5px",right:"8px"},onClick:function(){return o(!1)},icon:d.G,size:"2x"})]}),Object(G.jsxs)("div",{className:"con",children:[Object(G.jsxs)(Me.a,{style:{display:"flex"},children:[Object(G.jsx)(Ge.a.Label,{className:"remise_input",children:Object(G.jsx)("b",{children:"Remise (%)"})}),Object(G.jsx)(Ge.a.Control,{onChange:function(e){return X({e:e,index:5})},className:"remise_input",value:"".concat(k," %"),onFocus:function(){W("remisePerc"),y.current.setInput("")}})]}),Object(G.jsxs)(Me.a,{style:{display:"flex"},children:[Object(G.jsx)(Ge.a.Label,{className:"remise_input",children:Object(G.jsx)("b",{children:"Remise (\u20ac)"})}),Object(G.jsx)(Ge.a.Control,{onChange:function(e){return X({e:e,index:5})},className:"remise_input",value:"".concat(null===I||void 0===I?void 0:I.toFixed(2)," \u20ac"),onFocus:function(){W("remise"),y.current.setInput("")}})]}),Object(G.jsxs)(Me.a,{style:{display:"flex"},children:[Object(G.jsx)(Ge.a.Label,{className:"remise_input",children:Object(G.jsx)("b",{children:"Montant libre (\u20ac)"})}),Object(G.jsx)(Ge.a.Control,{onChange:function(e){return X({e:e,index:5})},value:"".concat(null===P||void 0===P?void 0:P.toFixed(2)," \u20ac"),className:"remise_input",onFocus:function(){W("libre"),y.current.setInput("")}})]}),Object(G.jsx)(Me.a,{style:{display:"flex",marginTop:"1rem"},children:Object(G.jsxs)(b.a,{variant:R?"success":"danger",onClick:function(){q(!R),w(Number(x)),T(0),L(0),Z()},style:{width:"150px"},children:[Object(G.jsx)(l.a,{icon:R?d.l:d.G,style:{marginRight:"2.2rem"}}),"Offert !"]})}),Object(G.jsx)(Me.a,{style:{display:"flex",marginTop:"0.5rem"},children:Object(G.jsxs)(b.a,{onClick:function(){return c()},variant:"success",style:{width:"150px",height:"80px"},children:[Object(G.jsx)(l.a,{icon:d.z,style:{marginRight:"1rem"}}),"Confirmer"]})})]}),Object(G.jsxs)("div",{className:"off",children:[Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:"Prix initial : "+(null===(t=i.order)||void 0===t?void 0:t.price.toFixed(2))+"\u20ac"})}),Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:"Nouveau Prix : "+(null===(n=i.order.finalPrice)||void 0===n?void 0:n.toFixed(2))||!1})})]}),Object(G.jsx)(u.a,{theme:"hg-theme-default hg-layout-default myTheme3",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn2",buttons:"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return y.current=e},layoutName:"default",layout:{default:A},onChange:function(e){var t;switch(v(e),console.log("Input changed",e),M){case"remisePerc":Number(e)>100?Q.a.fire({icon:"warning",title:"faut etre inferieur a 100%",showConfirmButton:!1,timer:1500}):(w(Number(e)),console.log(k),T(0),L(0),q(!1));break;case"remise":Number(e)>(null===(t=i.order)||void 0===t?void 0:t.price)?Q.a.fire({icon:"warning",title:"faut etre inferieur a ".concat(j(i.order).price," \u20ac"),showConfirmButton:!1,timer:1500}):(w(0),T(Number(e)),console.log(I),L(0),q(!1));break;case"libre":w(0),T(0),L(Number(e)),console.log(P),q(!1)}v("")},onKeyPress:function(e){console.log("Button pressed",e)}})]})},ht=function(e){var t,n,c,a,j,u,O,m,p,x,v,f,g,A,y,C=e.selectedTable,k=e.setconfirmed,w=e.confirmed,_=localStorage.getItem("username"),S=Object(o.f)(),I=z().t,T=Object(h.c)(),B=C.nbr,D=C.nbrCouverts,P=Object(r.useState)(0),L=Object(s.a)(P,2),E=(L[0],L[1],Object(r.useState)(1)),F=Object(s.a)(E,2),R=F[0],q=F[1],H=Object(h.d)((function(e){return e.data.nSteps})),M=Object(r.useState)(0),W=Object(s.a)(M,2),Z=W[0],X=W[1],V=Object(h.d)((function(e){return e.order.selectedTable.id})),K=Object(h.d)((function(e){return e.order.client})),J=Object(h.d)((function(e){return e.order.remarque})),U=Object(o.g)().order_id,$=Object(h.d)((function(e){return e.order.checkoutData||[]})),ee=Object(r.useState)(0),te=Object(s.a)(ee,2),ne=te[0],ce=te[1],re=Object(h.d)((function(e){return e.order.orders||[]})),ie=Object(r.useState)([]),ae=Object(s.a)(ie,2),se=ae[0],oe=ae[1],le=Object(r.useState)({order:{},key:0}),de=Object(s.a)(le,2),je=de[0],ue=de[1],be=Object(r.useState)(!1),he=Object(s.a)(be,2),Oe=he[0],me=he[1],pe=Object(h.d)((function(e){return e.data.tva_mode})),xe=Object(h.d)((function(e){return e.order.orderType})),ge=Object(r.useState)(0),Ae=Object(s.a)(ge,2),ye=Ae[0],Ce=Ae[1],Ie=Object(h.d)((function(e){return e.data.products})),Te=localStorage.getItem("user_id"),Be=localStorage.getItem("username"),Pe=Object(r.useState)({}),Le=Object(s.a)(Pe,2),Ee=Le[0],Fe=Le[1],Re=$.filter((function(e){return e.order_id==U}))[0];Object(r.useEffect)((function(){var e;void 0!=U&&(console.log(Re),null===Re||void 0===Re||null===(e=Re.orderItems)||void 0===e||e.map((function(e){T(Ne({order:e}))})))}),[]);var qe=function(e){return Ie.find((function(t){return t.id==e}))||{}},ze=function(e){var t;t=null!==e&&void 0!==e&&e.finalPrice?e.finalPrice:0==(null===e||void 0===e?void 0:e.finalPrice)?0:e.price;var n=e.tva;return"surplace"==xe||"livraison"==xe?n=pe.find((function(e){return"surplace"==e.nom})).valeur:"emporter"==xe&&(n=pe.find((function(e){return"emporter"==e.nom})).valeur),ye>0&&(n=ye),e.extras&&e.extras.length&&e.extras.map((function(e){console.log(e.price,e.default_quantity),t+=e.price*e.default_quantity})),e.stepItems&&e.stepItems!={}&&Object.keys(e.stepItems).map((function(n){e.stepItems[n].map((function(e){t+=e.price}))})),1==e.offert?0:{dbPrice:t,price:t*e.qt,tva:t*e.qt*n/100,item_tva:n}};Object(r.useEffect)((function(){var e=JSON.parse(JSON.stringify(re)||[{}]);oe(e),re.map((function(e){if(1==e.is_alcool){var t=pe.find((function(e){return"alcool"==e.nom})).valeur;console.log(t),Ce(t)}}))}),[re]);var Qe=function(){var e=0,t=0,n=[];return se.map((function(c){e+=ze(c).price,t+=ze(c).tva,n.push({value:ze(c).tva,perc:ze(c).item_tva})})),{tot:e,tva:t,tvas:n}},Ge=function(e){var t=e.key,n=e.order,c=e.sign;if(console.log({order:n,sign:c}),"+"==c){var r=Object(Y.a)(Object(Y.a)({},n),{},{qt:n.qt+1});console.log(r),T(ke({key:t,order:r}))}else if(1==n.qt)T(we({key:t}));else{var i=Object(Y.a)(Object(Y.a)({},n),{},{qt:n.qt-1});T(ke({key:t,order:i}))}},Me=function(){return me(!1)},We=function(e){var t=e.extraKey,n=e.sign,c=JSON.parse(JSON.stringify(je.order)||{});"+"==n&&c.extras[t].default_quantity<1?(c.extras[t].default_quantity+=1,console.log(c),ue(Object(Y.a)(Object(Y.a)({},je),{},{order:c}))):c.extras[t].default_quantity>0&&(c.extras[t].default_quantity-=1,console.log(c),ue(Object(Y.a)(Object(Y.a)({},je),{},{order:c})))},Ze=function(){T(ke({key:je.key,order:je.order})),me(!1),rt(!1)},Xe=new Date,Ve=Xe.toISOString().substr(0,10),Ke=Xe.getHours()+":"+Xe.getMinutes(),Je=function(){var e={table:B||"",server:_,from_kiosk:!1,client_id:null===K||void 0===K?void 0:K.id,id:U||"",message:J||(null===K||void 0===K?void 0:K.message)||"aucune",customer_name:(null===K||void 0===K?void 0:K.name)||"",customer_company:(null===K||void 0===K?void 0:K.company)||"",code1:(null===K||void 0===K?void 0:K.code1)||"",code2:(null===K||void 0===K?void 0:K.code2)||"",interphone:(null===K||void 0===K?void 0:K.interphone)||"",etage:(null===K||void 0===K?void 0:K.etage)||"",table_number:V||0,customer_tel:(null===K||void 0===K?void 0:K.phone)||"",customer_adress:null!==K&&void 0!==K&&K.address?"".concat(null===K||void 0===K?void 0:K.address," - ").concat(null===K||void 0===K?void 0:K.city," - ").concat(null===K||void 0===K?void 0:K.post,"\n      code 1 : ").concat((null===K||void 0===K?void 0:K.code1)||""," | code2 : ").concat((null===K||void 0===K?void 0:K.code2)||"","\n       interphone : ").concat((null===K||void 0===K?void 0:K.interphone)||""," | etage : ").concat((null===K||void 0===K?void 0:K.etage)||""):"",status:"pending",orderType:xe||"surplace",paymentType:"Especes",totalPrice:Qe().tot,taxPrice:Qe().tva,tvas:Qe().tvas,orderItems:[],date:(null===K||void 0===K?void 0:K.date)||Ve,time:(null===K||void 0===K?void 0:K.time)||Ke};se.map((function(t){e.orderItems.push(Object(Y.a)(Object(Y.a)({},t),{},{price:t.finalPrice||ze(t).dbPrice,tva:ze(t).item_tva}))})),U?(ce(U),N.a.post("http://141.94.77.9:5000/api/updateorder",{order:e,user_id:Te}).then((function(t){console.log(t.data),N.a.post("http://141.94.77.9:5000/api/printOrder",{kitchen:!0,user_id:Te,order:Object(Y.a)(Object(Y.a)({new:!0},e),{},{tvas:"aspa",table_number:e.table||"",order_id:U,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),T(De({order:Object(Y.a)(Object(Y.a)({},e),{},{table_number:V||Re.table_number||(null===K||void 0===K?void 0:K.id),order_id:U,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})})),console.log({order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})}),He.a.connect("http://141.94.77.9:5002").emit("accept".concat(Te),{order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:U,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})})}))):Ee.order_id?(ce(Ee.order_id),N.a.post("http://141.94.77.9:5000/api/updateorder",{order:e,user_id:Te}).then((function(t){console.log(t.data),N.a.post("http://141.94.77.9:5000/api/printOrder",{kitchen:!0,user_id:Te,order:Object(Y.a)(Object(Y.a)({new:!0},e),{},{tvas:"aspa",table_number:e.table||"",order_id:Ee.order_id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),T(De({order:Object(Y.a)(Object(Y.a)({},e),{},{table_number:V||(null===Re||void 0===Re?void 0:Re.table_number)||(null===K||void 0===K?void 0:K.id),order_id:Ee.order_id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})})),console.log({order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})}),He.a.connect("http://141.94.77.9:5002").emit("accept".concat(Te),{order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:Ee.order_id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})})}))):N.a.post("http://141.94.77.9:5000/api/orders",{client:K,order:e,how_paid:"tout",user_id:Te}).then((function(t){var n,c;ce(t.data.id),N.a.post("http://141.94.77.9:5000/api/printOrder",{kitchen:!0,user_id:Te,order:Object(Y.a)(Object(Y.a)({new:!1},e),{},{tvas:(n=Qe().tvas,c="perc",null===n||void 0===n?void 0:n.reduce((function(e,t){return(e[t[c]]=e[t[c]]||[]).push(t.value),e}),{})),table_number:B||"",order_id:t.data.id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),T(_e({order:Object(Y.a)(Object(Y.a)({},e),{},{table_number:V||(null===K||void 0===K?void 0:K.id),order_id:t.data.id,Date:(new Date).getTime(),nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})})),He.a.connect("http://141.94.77.9:5002").emit("accept".concat(Te),{order:Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D})}),Fe(Object(Y.a)(Object(Y.a)({},e),{},{order_id:t.data.id,Date:new Date,nbrCouverts:(null===K||void 0===K?void 0:K.nbrCouverts)||D}))})).catch((function(e){return console.log(e)}))},Ue=function(){0!=ne&&(S("/checkout/"+ne),T(Se()))},Ye=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},$e=localStorage.getItem("currency"),et=ut((function(){console.log("longpress is triggered")}),(function(){console.log("click is triggered")}),{shouldPreventDefault:!1,delay:500}),tt=Object(r.useState)(!1),nt=Object(s.a)(tt,2),ct=nt[0],rt=nt[1];return Object(G.jsxs)("div",{className:"cart-menu",children:[C.nbr?Object(G.jsx)("h6",{className:"cart-menu-table-nbr",children:"table ".concat(B," - ").concat(D," ").concat(I("couverts"))}):K.name?Object(G.jsx)("h6",{className:"cart-menu-table-nbr",children:"Client ".concat(K.name," - ").concat(K.type,"\n          ")}):U?Object(G.jsxs)("b",{children:["Commande # ",U]}):Object(G.jsx)("br",{}),Object(G.jsxs)(ve.a,{className:"ttt2",children:[Object(G.jsx)("thead",{className:"tbds2",children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:I("article")}),Object(G.jsx)("th",{children:"Qte"}),Object(G.jsx)("th",{children:I("price")})]})}),Object(G.jsx)("tbody",{className:"scro2 ",children:null===se||void 0===se?void 0:se.map((function(e,t){var n,c,r,i,a,s,o,j,u,b,h,O;return Object(G.jsxs)("tr",{className:"catt",style:{backgroundColor:"true"==e.new||1==w?"#55efc4":"transparent",color:"true"==e.new||1==w?"white":"black"},children:[Object(G.jsxs)("td",{className:"mytd",children:[Object(G.jsx)("p",{onClick:function(){ue({order:e,key:t}),rt(!0)},className:"mytd_order-name",children:e.name}),e.extras&&e.extras.length?e.extras.filter((function(e){return e.default_quantity>0})).map((function(e){return Object(G.jsxs)("span",{className:"boba",children:[e.title,"-"]})})):"",e.stepItems&&Object.keys(e.stepItems).length?Object(G.jsx)("div",{children:Object.keys(e.stepItems).map((function(t){return e.stepItems[t].map((function(e){return Object(G.jsxs)("span",{style:{textAlign:"start",color:"#ff6b6b"},children:["-",e.name]})}))}))}):e.is_supp?Object(G.jsx)("div",{className:"order_with_supp_item",children:null===e||void 0===e?void 0:e.suppSelected.map((function(t,n){return Object(G.jsxs)("span",{style:{textAlign:"start",color:"#ff6b6b"},children:["- ",null===e||void 0===e?void 0:e.suppSelected.at(n).name]},t)}))}):null!==e&&void 0!==e&&e.slots?Object(G.jsxs)("div",{children:[Object(G.jsx)("span",{style:{textAlign:"start",color:"grey"},children:null===(n=Object.entries(e.slots)[0])||void 0===n||null===(c=n[1])||void 0===c||null===(r=c.products)||void 0===r||null===(i=r.filter((function(e){return e.checked}))[0])||void 0===i?void 0:i.name}),Object(G.jsx)("br",{}),Object(G.jsx)("span",{style:{textAlign:"start",color:"grey"},children:null===(a=Object.entries(e.slots)[1])||void 0===a||null===(s=a[1])||void 0===s||null===(o=s.products)||void 0===o||null===(j=o.filter((function(e){return e.checked}))[0])||void 0===j?void 0:j.name}),Object(G.jsx)("br",{}),Object(G.jsx)("span",{style:{textAlign:"start",color:"grey"},children:null===(u=Object.entries(e.slots)[2])||void 0===u||null===(b=u[1])||void 0===b||null===(h=b.products)||void 0===h||null===(O=h.filter((function(e){return e.checked}))[0])||void 0===O?void 0:O.name})]}):""]}),Object(G.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",height:"30px"},children:[Object(G.jsx)(l.a,{icon:d.v,color:"#ff6b6b",onClick:function(){return Ge({order:e,key:t,sign:"-"})}}),Object(G.jsx)("p",Object(Y.a)(Object(Y.a)({className:"mytd_order-qty",onClick:function(){ue({order:e,key:t}),me(!0)}},et),{},{children:Object(G.jsx)("b",{children:e.qt})})),Object(G.jsx)(l.a,{icon:d.A,color:"#ff6b6b",onClick:function(){return Ge({order:e,key:t,sign:"+"})},variant:"success"})]}),Object(G.jsx)("td",{style:{height:"30px"},children:Object(G.jsxs)("p",{className:"mytd_order-qty",style:{fontWeight:"bold",display:"flex"},children:[ze(e).price.toFixed(2)," ",Ye("<i>".concat($e,"</i>"))]})})]})}))})]}),Object(G.jsxs)("div",{style:{width:"25%",height:"200px",backgroundColor:"#f1f1f1",position:"absolute",bottom:"0"},children:[Object(G.jsx)("div",{style:{borderBottom:"1px solid white",display:"flex",alignItems:"center",position:"relative",backgroundImage:"url(".concat(dt,")"),objectFit:"contain",width:"100%",height:"50px",paddingTop:"5px"},children:Object(G.jsxs)("h2",{className:"dig",style:{zIndex:"999",color:"#00b894",display:"flex",paddingLeft:"1rem",fontFamily:"DS-DIGIT !important"},children:["Total : ".concat((Qe().tot+Qe().tva).toFixed(2))," ",Ye("<i >".concat($e,"</i>"))]})}),Object(G.jsxs)("div",{style:{display:"flex"},children:[Object(G.jsx)(b.a,{className:"cart_btn btn4",variant:1==w?"danger":"warning",onClick:function(){re&&re.length>0&&(1==w?Ue():0==Qe().tot?Q.a.fire({title:"Attention le montant de la commande est 0 \u20ac !"}):Q.a.fire({title:"confirmer la commande ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"confirmer",denyButtonText:"annuler"}).then((function(e){e.isConfirmed&&(Je(),Q.a.fire({icon:"success",title:"commande confirm\xe9e",showConfirmButton:!1,timer:1500}),k(!0))})))},children:1==w?Object(G.jsxs)(G.Fragment,{children:[0==ne&&Object(G.jsx)(lt.a,{animation:"border",variant:"light"})," ","Finir"]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(l.a,{icon:d.l})," Confirmer"]})}),Object(G.jsx)(b.a,{className:"cart_btn",variant:"success",onClick:function(){Q.a.fire({title:"Ouvrir la caisse pour :",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Faire la monnaie",denyButtonText:"Sans motif",cancelButtonText:"Annuler"}).then((function(e){console.log(e),e.isConfirmed?(N.a.post("http://141.94.77.9:5000/api/pushlog",{user_id:Te,user:Be,faire:"pour Faire la monnaie",title:"Ouverture de tiroir",content:"ouverture de la caisse par le serveur"}),Q.a.fire({icon:"success",title:"Ouvert pour faire la monnaie",showConfirmButton:!1,timer:1e3})):e.isDenied&&(N.a.post("http://141.94.77.9:5000/api/pushlog",{user_id:Te,user:Be,faire:"sans motif",title:"Ouverture de tiroir",content:"ouverture de la caisse par le serveur"}),Q.a.fire({icon:"success",title:"Ouvert sans motif",showConfirmButton:!1,timer:1e3}))}))},children:I("tiroir")}),Object(G.jsx)(b.a,{className:"cart_btn",variant:"danger",onClick:function(){Q.a.fire({title:"Motif d'annulation ",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Aucun",denyButtonText:"Impay\xe9",cancelButtonText:"Fermer"}).then((function(e){if(e.isConfirmed){if(U)N.a.post("http://141.94.77.9:5000/api/cancelorder",{order:Re}),He.a.connect("http://141.94.77.9:5002").emit("accept".concat(Te),{order:Object(Y.a)({},Re)}),T(De({order:Object(Y.a)(Object(Y.a)({},Re),{},{status:"rejected",timeRejection:Ke,rejectedFrom:_,rejected:"Aucun"})}));if(Ee.order_id)N.a.post("http://141.94.77.9:5000/api/cancelorder",{order:Ee}),He.a.connect("http://141.94.77.9:5002").emit("accept".concat(Te),{order:Object(Y.a)({},Ee)}),T(De({order:Object(Y.a)(Object(Y.a)({},Re),{},{status:"rejected",timeRejection:Ke,rejectedFrom:_,rejected:"Aucun"})}));N.a.post("http://141.94.77.9:5000/api/pushlog",{user_id:Te,user:Be,faire:"Aucun",title:"Annulation",content:"Annulation de commande par le serveur"}),Q.a.fire({icon:"success",title:"Annul\xe9 (Aucun)",showConfirmButton:!1,timer:1e3}),T(Se()),S("/main")}else if(e.isDenied){if(U)N.a.post("http://141.94.77.9:5000/api/cancelorder",{order:Re}),He.a.connect("http://141.94.77.9:5002").emit("accept".concat(Te),{order:Object(Y.a)({},Re)}),T(De({order:Object(Y.a)(Object(Y.a)({},Re),{},{status:"rejected",timeRejection:Ke,rejectedFrom:_,rejected:"Impay\xe9"})}));if(Ee.order_id)N.a.post("http://141.94.77.9:5000/api/cancelorder",{order:Ee}),He.a.connect("http://141.94.77.9:5002").emit("accept".concat(Te),{order:Object(Y.a)({},Ee)}),T(De({order:Object(Y.a)(Object(Y.a)({},Re),{},{status:"rejected",timeRejection:Ke,rejectedFrom:_,rejected:"Impay\xe9"})}));N.a.post("http://141.94.77.9:5000/api/pushlog",{user_id:Te,user:Be,faire:"Impay\xe9",title:"Annulation",content:"Annulation de commande par le serveur"}),Q.a.fire({icon:"success",title:"Annul\xe9 (Impay\xe9)",showConfirmButton:!1,timer:1e3}),T(Se()),S("/main")}}))},children:I("cancel")})]})]}),Object(G.jsxs)(fe.a,{dialogClassName:"modal_body",show:Oe,onHide:function(){Me(),q(1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:null===(t=je.order)||void 0===t?void 0:t.name})}),Object(G.jsxs)(fe.a.Body,{children:[Object(G.jsx)("p",{children:null===(n=je.order)||void 0===n?void 0:n.description}),null!==(c=je.order)&&void 0!==c&&c.extras&&null!==(a=je.order)&&void 0!==a&&a.extras.length?null===(j=je.order)||void 0===j?void 0:j.extras.map((function(e,t){return Object(G.jsxs)("tr",{style:{display:"flex",width:"50%"},children:[Object(G.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"30px",width:"25%",marginRight:"1rem"},children:[Object(G.jsx)(l.a,{onClick:function(){return We({extraKey:t,sign:"-"})},icon:d.v,color:"#ff6b6b"}),Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:e.default_quantity})}),Object(G.jsx)(l.a,{onClick:function(){return We({extraKey:t,sign:"+"})},icon:d.A,color:"#ff6b6b"})]}),Object(G.jsxs)("td",{style:{marginRight:"1rem"},children:[" ",Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:e.title})})]}),Object(G.jsxs)("td",{children:[" ",Object(G.jsx)("h5",{children:Object(G.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price.toFixed(2)," ",Ye("<i>".concat($e,"</i>"))]})})]})]})})):null!==(u=je.order)&&void 0!==u&&u.isComp?Object(G.jsxs)(ve.a,{striped:!0,bordered:!0,children:[Object(G.jsx)("thead",{children:Object(G.jsx)("tr",{children:Object.keys((null===(O=je.order)||void 0===O?void 0:O.slots)||{}).map((function(e){return Object(G.jsx)("td",{children:e})}))})}),Object(G.jsx)("tbody",{children:Object.keys((null===(m=je.order)||void 0===m?void 0:m.slots)||{}).map((function(e){var t;return Object(G.jsx)("td",{children:null===(t=je.order)||void 0===t?void 0:t.slots[e].products.map((function(t){return Object(G.jsxs)("div",{style:{display:"flex",cursor:"pointer"},className:t.checked?"checked":"not",onClick:function(){return function(e){var t=e.slotKey,n=e.id;console.log(t,n);var c=JSON.parse(JSON.stringify(je.order)||{});c.slots[t].products.forEach((function(e){e.id==n?e.checked=!0:e.checked=!1,console.log(e.name)})),ue(Object(Y.a)(Object(Y.a)({},je),{},{order:c}))}({slotKey:e,id:t.id})},children:[Object(G.jsx)("img",{src:t.image,width:"30px",height:"30px"}),Object(G.jsxs)("div",{children:[Object(G.jsx)("h6",{children:t.name}),Object(G.jsx)("p",{children:t.description})]}),Object(G.jsxs)("p",{children:[t.price," ",Ye("<i>".concat($e,"</i>"))]})]})}))})}))})]}):(null===(p=je.order)||void 0===p?void 0:p.nsteps)>0?Object(G.jsxs)("div",{children:[Object(G.jsx)("h6",{children:Object(G.jsx)("b",{children:null===(x=H.filter((function(e){var t;return e.menu_id==(null===(t=je.order)||void 0===t?void 0:t.id)}))[0][R])||void 0===x?void 0:x.nom_etape})}),Object(G.jsx)("div",{className:"steps_cont",children:H.filter((function(e){var t;return e.menu_id==(null===(t=je.order)||void 0===t?void 0:t.id)}))[0][R].choice.map((function(e){var t,n;return Object(G.jsxs)("div",{className:null!==(t=je.order)&&void 0!==t&&null!==(n=t.stepItems[R])&&void 0!==n&&n.find((function(t){return t.id==e}))?"prod prod_sel":"prod",onClick:function(){return function(e){var t=e.id,n=e.STP;console.log(n),X(R);var c=JSON.parse(JSON.stringify(je.order)||{}),r=n.max_select;void 0==c.stepItems[R]&&(c.stepItems[R]=[],console.log(c)),c.stepItems[R].length<r&&(c.stepItems[R].find((function(e){return e.id==t}))||(console.log("will push now"),c.stepItems[R].push(qe(t)))),c.stepItems[R].find((function(e){return e.id==t}))||(c.stepItems[R]=[],c.stepItems[R].push(qe(t))),ue(Object(Y.a)(Object(Y.a)({},je),{},{order:c})),console.log("done"),console.log(c)}({id:e,STP:H.filter((function(e){var t;return e.menu_id==(null===(t=je.order)||void 0===t?void 0:t.id)}))[0][R]})},children:[Object(G.jsx)("img",{src:qe(e).image,alt:"",height:"70px",width:"70px"}),Object(G.jsxs)("h6",{style:{display:"flex"},children:[Object(G.jsxs)("b",{children:[" ",qe(e).name," "]}),Object(G.jsx)("span",{children:Object(G.jsxs)("b",{style:{display:"flex",marginLeft:"1rem",color:"#ff6b6b"},children:[qe(e).price," ",Ye("<i>".concat($e,"</i>"))]})})," "]}),Object(G.jsx)("p",{children:qe(e).description})]})}))}),(null===(v=je.order)||void 0===v?void 0:v.nsteps)>=R&&R>0?Object(G.jsx)(b.a,{style:{marginRight:"1rem"},variant:"outline-secondary",onClick:function(){R>1&&q(R-1)},children:"retour"}):"",(null===(f=je.order)||void 0===f?void 0:f.nsteps)>R&&R>0?Object(G.jsx)(b.a,{variant:"outline-warning",onClick:function(){var e;(null===(e=je.order)||void 0===e?void 0:e.nsteps)>R&&Z==R&&q(R+1)},children:"suivant"}):"",(null===(g=je.order)||void 0===g?void 0:g.nsteps)==R?Object(G.jsx)(b.a,{variant:"outline-warning",onClick:function(){Z==R&&Ze()},children:"finir"}):""]}):""]}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"danger",onClick:function(){T(we({key:je.key})),Me(),q(1)},children:"Supprimer"}),Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){Me(),q(1)},children:I("cancel")}),0==(null===(A=je.order)||void 0===A?void 0:A.nsteps)||null!==(y=je.order)&&void 0!==y&&y.isComp?Object(G.jsx)(b.a,{variant:"warning",onClick:function(){return Ze()},children:I("aded")}):""]})]}),ct&&Object(G.jsx)(bt,{setshowRemise:rt,orderTo:je,setOrderTo:ue,handleUpdateOrder:Ze,calcOrder:ze})]})},Ot=function(e){var t=e.setSelectedCategory,n=e.categories,c=e.selectedCategory;return Object(G.jsx)("div",{className:"cat_container",children:n.filter((function(e){return 1==e.state})).map((function(e){return Object(G.jsxs)("div",{style:{background:"".concat(e.color)},className:c==e.id?"cat_item cat_item_selected":"cat_item",onClick:function(){t(e.id)},children:[Object(G.jsx)("img",{width:"50px",height:"50px",src:e.picture,className:"category_img"}),Object(G.jsx)("h6",{className:"cat_name",children:e.name.substring(0,13)+"..."})]})}))})},mt=n(771),pt=(n(312),function(e){var t=e.orderWithSupp,n=e.handleAddOrderWithSupp,c=e.handleaAddDrink,i=e.drinks,a=e.suppSelected,o=e.order_id,j=e.setShowSupplements,u=e.setSuppSelected,b=e.setDrinks,O=Object(r.useState)("sauces"),m=Object(s.a)(O,2),p=m[0],x=m[1],v=Object(h.c)();return Object(G.jsxs)("div",{className:"product_with_supp",children:[Object(G.jsx)(l.a,{icon:d.G,style:{position:"absolute",right:"3%",top:"6%",fontSize:"1.5rem",cursor:"pointer"},onClick:function(){return j(!1),b(null),void u([])}}),Object(G.jsxs)("div",{className:"supp_header",children:[Object(G.jsxs)("div",{className:"supp_img",children:[Object(G.jsx)("img",{width:"50px",height:"50px",src:t.image}),Object(G.jsxs)("h5",{children:[t.name," +"]})]}),Object(G.jsx)("div",{className:"supp_selected_items",children:t.suppSelected.map((function(e,t){return Object(G.jsxs)("div",{className:"selected_item",children:[Object(G.jsx)("img",{width:"50px",height:"50px",src:e.image}),Object(G.jsx)("h5",{children:e.name})]},t)}))})]}),"sauces"==p?Object(G.jsx)("div",{className:"supp_body",children:t.supplement.sauces.map((function(e,c){return Object(G.jsxs)("div",{className:3==a.length&&-1==a.findIndex((function(t){return t.id==e.id}))?"supp_item item_disabled":"supp_item ",onClick:function(){return n(e)},children:[Object(G.jsx)("img",{width:"60px",height:"60px",src:e.image}),Object(G.jsx)("h5",{children:e.name}),-1!=t.suppSelected.findIndex((function(t){return t.id==e.id}))&&Object(G.jsx)(l.a,{icon:d.w,style:{color:"red",fontSize:"1.5rem",position:"absolute",bottom:"-9%"}})]},c)}))}):Object(G.jsx)("div",{className:"supp_body",children:t.supplement.drinks.map((function(e,t){return Object(G.jsxs)("div",{className:"supp_item",onClick:function(){return c(e)},children:[Object(G.jsx)("img",{width:"60px",height:"60px",src:e.image}),Object(G.jsx)("h5",{children:e.name}),(null===i||void 0===i?void 0:i.id)==(null===e||void 0===e?void 0:e.id)?Object(G.jsx)(l.a,{icon:d.l,style:{color:"red",fontSize:"1.5rem",position:"absolute",bottom:"-15%"}}):""]},t)}))}),Object(G.jsxs)("div",{className:"supp_footer",children:["sauces"==p&&Object(G.jsxs)("button",{style:{right:"0"},onClick:function(){return x("drinks")},children:[0==a.length?"Non merci":"Suivant",Object(G.jsx)(l.a,{icon:d.c})]}),"drinks"==p&&Object(G.jsxs)("button",{style:{right:"0"},onClick:function(){v(Ne({order:Object(Y.a)(Object(Y.a)({},t),{},{qt:1,stepItems:{},remise:0,offert:!1,new:o?"true":"false"})})),j(!1),b(null),u([])},children:["Terminer",Object(G.jsx)(l.a,{icon:d.c})]}),"drinks"==p&&Object(G.jsxs)("button",{style:{left:"0"},onClick:function(){return x("sauces")},children:[Object(G.jsx)(l.a,{icon:d.b}),"Pr\xe9cedent"]})]})]})}),xt=function(e){var t,n,c=e.product,a=e.setAlert,o=e.order_id,j=e.setconfirmed,u=(e.confirmed,Object(r.useState)(0)),x=Object(s.a)(u,2),v=(x[0],x[1],z().t),f=Object(h.c)(),g=Object(h.d)((function(e){return e.data.nSteps})),A=Object(h.d)((function(e){return e.data.products})),y=Object(r.useState)(1),C=Object(s.a)(y,2),k=C[0],w=C[1],_=Object(r.useState)(1),S=Object(s.a)(_,2),I=S[0],T=S[1],B=Object(r.useState)(!1),D=Object(s.a)(B,2),P=D[0],L=D[1],E=Object(r.useState)(!1),F=Object(s.a)(E,2),R=F[0],q=F[1],H=Object(h.d)((function(e){return e.order.orderType})),M=Object(r.useState)(void 0),W=Object(s.a)(M,2),Z=W[0],X=W[1],V=Object(r.useState)(!1),K=Object(s.a)(V,2),J=K[0],U=K[1],$=Object(r.useState)(null),ee=Object(s.a)($,2),ne=(ee[0],ee[1]),ce=Object(h.d)((function(e){return e.order.client})),re=Object(h.d)((function(e){return e.data.tva_mode})),ie=Object(r.useState)(0),ae=Object(s.a)(ie,2),se=ae[0],oe=(ae[1],Object(r.useState)({active:null===c||void 0===c?void 0:c.active,cat_id:null===c||void 0===c?void 0:c.cat_id,description:null===c||void 0===c?void 0:c.description,extras:null===c||void 0===c?void 0:c.extras,id:null===c||void 0===c?void 0:c.id,image:null===c||void 0===c?void 0:c.image,isComp:null===c||void 0===c?void 0:c.isComp,is_alcool:null===c||void 0===c?void 0:c.is_alcool,is_cold:null===c||void 0===c?void 0:c.is_cold,is_hot:null===c||void 0===c?void 0:c.is_hot,is_supp:null===c||void 0===c?void 0:c.is_supp,name:null===c||void 0===c?void 0:c.name,nsteps:null===c||void 0===c?void 0:c.nsteps,price:null===c||void 0===c?void 0:c.price,tva:null===c||void 0===c?void 0:c.tva,drink_id:"",suaces_ids:[],suppSelected:[],qt:1,supplement:{drinks:[],sauces:[]}})),le=Object(s.a)(oe,2),de=le[0],je=le[1],be=Object(r.useState)([]),he=Object(s.a)(be,2),Oe=he[0],me=he[1],pe=Object(r.useState)(null),xe=Object(s.a)(pe,2),ve=xe[0],ge=xe[1];Object(r.useEffect)((function(){var e;e=null==ve?Object(te.a)(Oe):[].concat(Object(te.a)(Oe),[ve]);var t=Oe.map((function(e){return e.id}));je(Object(Y.a)(Object(Y.a)({},de),{},{suppSelected:e,suaces_ids:t}))}),[Oe,ve]);var Ae=function(){var e=Object(p.a)(Object(m.a)().mark((function e(t){var n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:-1!=Oe.findIndex((function(e){return e.id==t.id}))?(n=Oe.filter((function(e){return e.id!=t.id})),me(n)):Oe.length<3&&me([].concat(Object(te.a)(Oe),[t]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e;"surplace"==ce.type||"livraison"==ce.type?(e=re.find((function(e){return"surplace"==e.nom})).valeur,ne(e)):"emporter"==ce.type&&(e=re.find((function(e){return"emporter"==e.nom})).valeur,ne(e)),se>0&&ne(e=se),console.log(e)}),[]);var ye=function(e){var t=e.extraKey,n=e.sign;console.log("handleExtra",{extraKey:t,sign:n});var c=JSON.parse(JSON.stringify(Z)||{});"+"==n&&c.extras[t].default_quantity<1?(c.extras[t].default_quantity+=1,console.log(c),X(c)):c.extras[t].default_quantity>0&&(c.extras[t].default_quantity-=1,console.log(c),X(c))},Ce=function(e){var t=e.show,n=e.msg,c=e.type;a({show:t,msg:n,type:c}),setTimeout((function(){a({show:!1,msg:"",type:""})}),1500)},ke=function(e){return A.find((function(t){return t.id==e}))||{}},we=Object(r.useState)(0),_e=Object(s.a)(we,2),Se=_e[0],Ie=_e[1];Object(r.useEffect)((function(){"emporter"==H?Ie(5,5):"surplace"==H?Ie(10):Ie(5,5)}),[]);var Te=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},Be=localStorage.getItem("currency");return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"item_container",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:c.name.substring(0,21)})}),Object(G.jsx)("img",{src:c.image,onClick:function(){var e;if(j(!1),0==(null===c||void 0===c||null===(e=c.extras)||void 0===e?void 0:e.length)&&0==(null===c||void 0===c?void 0:c.nsteps)&&0==(null===c||void 0===c?void 0:c.isComp)&&0==(null===c||void 0===c?void 0:c.is_supp))Object(at.b)("Ajout\xe9e !",{position:"bottom-center",autoClose:1e3,type:"success",hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f(Ne({order:Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1,new:o?"true":"false"})}));else if(null!==c&&void 0!==c&&c.is_supp){var t,n;q(!0),je({active:null===c||void 0===c?void 0:c.active,cat_id:null===c||void 0===c?void 0:c.cat_id,description:null===c||void 0===c?void 0:c.description,extras:null===c||void 0===c?void 0:c.extras,id:null===c||void 0===c?void 0:c.id,image:null===c||void 0===c?void 0:c.image,isComp:null===c||void 0===c?void 0:c.isComp,is_alcool:null===c||void 0===c?void 0:c.is_alcool,is_cold:null===c||void 0===c?void 0:c.is_cold,is_hot:null===c||void 0===c?void 0:c.is_hot,is_supp:null===c||void 0===c?void 0:c.is_supp,name:null===c||void 0===c?void 0:c.name,nsteps:null===c||void 0===c?void 0:c.nsteps,price:null===c||void 0===c?void 0:c.price,tva:null===c||void 0===c?void 0:c.tva,drink_id:"",suaces_ids:[],suppSelected:[],qt:1,supplement:{drinks:Object(te.a)(null===c||void 0===c||null===(t=c.supplement)||void 0===t?void 0:t.drinks),sauces:Object(te.a)(null===c||void 0===c||null===(n=c.supplement)||void 0===n?void 0:n.sauces)}})}else L(!0),X(Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1}))},className:"prod_img"}),Object(G.jsxs)("div",{className:"price",children:["".concat((c.price*Se/100+c.price).toFixed(2)),Te("<i>".concat(Be,"</i>"))]}),Object(G.jsx)(l.a,{onClick:function(e){return U(!0)},icon:d.G,size:"1x",style:{position:"absolute",top:"0px",right:"5px",color:"red",backgroundColor:"white",borderRadius:"25%"}})]}),Object(G.jsx)("div",{className:"supp_modal",children:R?Object(G.jsx)(pt,{setDrinks:ge,setSuppSelected:me,setShowSupplements:q,handleaAddDrink:function(e){e==ve?(ge(null),je(Object(Y.a)(Object(Y.a)({},de),{},{drink_id:e.id,price:c.price}))):(ge(e),je(Object(Y.a)(Object(Y.a)({},de),{},{drink_id:e.id,price:c.price+e.price})))},suppSelected:Oe,drinks:ve,handleAddOrderWithSupp:Ae,orderWithSupp:de,order_id:o}):""}),Object(G.jsxs)(fe.a,{dialogClassName:"modal_body",show:P,onHide:function(){L(!1),w(1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsxs)(fe.a.Title,{children:[Object(G.jsx)("img",{width:"30px",height:"30px",src:c.image}),null===Z||void 0===Z?void 0:Z.name]})}),Object(G.jsxs)(fe.a.Body,{children:[Object(G.jsx)("p",{children:null===Z||void 0===Z?void 0:Z.description}),null!==Z&&void 0!==Z&&Z.extras&&null!==Z&&void 0!==Z&&Z.extras.length?null===Z||void 0===Z?void 0:Z.extras.map((function(e,t){return Object(G.jsxs)("tr",{style:{display:"flex",width:"50%"},children:[Object(G.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"30px",width:"25%",marginRight:"1rem"},children:[Object(G.jsx)(l.a,{onClick:function(){return ye({extraKey:t,sign:"-"})},icon:d.v,color:"#ff6b6b"}),Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:e.default_quantity})}),Object(G.jsx)(l.a,{onClick:function(){return ye({extraKey:t,sign:"+"})},icon:d.A,color:"#ff6b6b"})]}),Object(G.jsxs)("td",{style:{marginRight:"1rem"},children:[" ",Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:e.title})})]}),Object(G.jsxs)("td",{children:[" ",Object(G.jsx)("h5",{children:Object(G.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price.toFixed(2)," ",Te("<i>".concat(Be,"</i>"))]})})]})]})})):null!==Z&&void 0!==Z&&Z.isComp?Object(G.jsx)(mt.a,{variant:"dark",children:Object.keys((null===Z||void 0===Z?void 0:Z.slots)||{}).map((function(e){var t;return Object(G.jsxs)(mt.a.Item,{style:{height:"15rem",width:"100%",textAlign:"center"},className:"chejm",children:[Object(G.jsxs)("h3",{children:[" ",e]}),Object(G.jsxs)("div",{style:(t={display:"flex",justifyContent:"space-around"},Object(O.a)(t,"display","flex"),Object(O.a)(t,"alignItems","center"),Object(O.a)(t,"marginTop","2rem"),t),children:[null===Z||void 0===Z?void 0:Z.slots[e].products.map((function(t){return Object(G.jsxs)("div",{style:{cursor:"pointer",position:"relative"},onClick:function(){return function(e){var t=e.slotKey,n=e.id;console.log(t,n);var c=JSON.parse(JSON.stringify(Z)||{});c.slots[t].products.forEach((function(e){e.id==n?e.checked=!0:e.checked=!1,console.log(e.name)})),X(c)}({slotKey:e,id:t.id})},children:[Object(G.jsx)("h6",{children:Object(G.jsx)("b",{style:{color:t.checked?"#ff6b6b":"black"},children:t.name})}),Object(G.jsx)("img",{src:t.image,width:"50px",height:"50px",style:{borderRadius:"50%",borderColor:t.checked?"#ff6b6b":"black"}}),t.checked?Object(G.jsx)(l.a,{icon:d.l,color:"#ff6b6b",style:{position:"absolute",top:"50px",right:"20px"}}):""]})}))," "]})]})}))}):(null===Z||void 0===Z?void 0:Z.nsteps)>0?Object(G.jsxs)("div",{children:[Object(G.jsx)("h6",{children:Object(G.jsx)("b",{children:null===(t=g.filter((function(e){return(null===e||void 0===e?void 0:e.menu_id)==(null===Z||void 0===Z?void 0:Z.id)}))[0][k])||void 0===t?void 0:t.nom_etape})}),Object(G.jsx)("div",{className:"steps_cont",children:null===(n=g.filter((function(e){return e.menu_id==(null===Z||void 0===Z?void 0:Z.id)}))[0][k])||void 0===n?void 0:n.choice.map((function(e){var t;return Object(G.jsxs)("div",{className:null!==Z&&void 0!==Z&&null!==(t=Z.stepItems[k])&&void 0!==t&&t.find((function(t){return t.id==e}))?"prod_sel prod":"prod",onClick:function(){return function(e){var t=e.id,n=e.STP;console.log("stp",n),T(k);var c=JSON.parse(JSON.stringify(Z)||{}),r=n.max_select;void 0==c.stepItems[k]&&(c.stepItems[k]=[],console.log(c)),c.stepItems[k].length<r&&(c.stepItems[k].find((function(e){return e.id==t}))||(console.log("will push now"),c.stepItems[k].push(ke(t)))),c.stepItems[k].find((function(e){return e.id==t}))||(c.stepItems[k]=[],c.stepItems[k].push(ke(t))),X(c),console.log("done"),console.log(c)}({id:e,STP:g.filter((function(e){return e.menu_id==(null===Z||void 0===Z?void 0:Z.id)}))[0][k]})},children:[Object(G.jsx)("img",{src:ke(e).image,alt:"",height:"70px",width:"70px"}),Object(G.jsxs)("h6",{style:{display:"flex"},children:[Object(G.jsxs)("b",{children:[ke(e).name," "]}),Object(G.jsx)("span",{children:Object(G.jsxs)("b",{style:{display:"flex",marginLeft:"1rem",marginRight:"1rem",color:"#ff6b6b"},children:[ke(e).price," ",Te("<i>".concat(Be,"</i>"))]})})," "]}),Object(G.jsx)("p",{children:ke(e).description})]})}))}),(null===Z||void 0===Z?void 0:Z.nsteps)>=k&&k>0?Object(G.jsx)(b.a,{style:{marginRight:"1rem"},variant:"outline-secondary",onClick:function(){k>1&&w(k-1)},children:"Retour"}):"",(null===Z||void 0===Z?void 0:Z.nsteps)>k&&k>0?Object(G.jsx)(b.a,{variant:"outline-warning",onClick:function(){(null===Z||void 0===Z?void 0:Z.nsteps)>k&&I==k&&w(k+1)},children:"Suivant"}):"",(null===Z||void 0===Z?void 0:Z.nsteps)==k?Object(G.jsx)(b.a,{variant:"outline-warning",onClick:function(){I==k&&(Object(at.b)("Ajout\xe9e !",{position:"bottom-center",autoClose:1e3,type:"success",hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f(Ne({order:Object(Y.a)(Object(Y.a)({},Z),{},{new:o?"true":"false"})})),Ce({show:!0,msg:v("added"),type:"success"}),L(!1),w(1))},children:"Finir"}):""]}):""]}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){L(!1),w(1)},children:v("cancel")}),0==(null===Z||void 0===Z?void 0:Z.nsteps)||null!==Z&&void 0!==Z&&Z.isComp?Object(G.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"warning",onClick:function(){return Object(at.b)("Ajout\xe9e !",{position:"bottom-center",autoClose:1e3,type:"success",hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f(Ne({order:Object(Y.a)(Object(Y.a)({},Z),{},{new:o?"true":"false"})})),Ce({show:!0,msg:v("added"),type:"success"}),void L(!1)},children:v("aded")}):""]})]}),Object(G.jsxs)(fe.a,{show:J,onHide:function(){return U(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Gestion de stock"})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return U(!1)},children:"Retour au tables"}),Object(G.jsx)(b.a,{variant:"danger",onClick:function(){return U(!1),void N.a.post("http://141.94.77.9:5000/api/resetwarehouse",{prod_id:c.id}).then((function(e){console.log(e.data),f(ue({id:c.id})),Q.a.fire({icon:"success",title:"produit mis hors stock !",showConfirmButton:!1,timer:1500})}))},children:"Hors stock"})]})]})]})},vt=function(e){var t=e.selectedCategory,n=e.setAlert,c=e.categories,r=e.order_id,i=e.setconfirmed,a=e.confirmed,s=Object(h.d)((function(e){return e.data.products})),o=c.filter((function(e){return e.id==t}))[0];return Object(G.jsxs)("div",{className:"meni-iteams",children:[Object(G.jsx)("h5",{style:{width:"100%"},children:Object(G.jsx)("b",{children:null===o||void 0===o?void 0:o.name})}),s.filter((function(e){return e.cat_id==t&&1==e.active})).sort((function(e,t){return e.position-t.position})).map((function(e){return Object(G.jsx)(xt,{order_id:r,product:e,setAlert:n,confirmed:a,setconfirmed:i})}))]})},ft=function(e){var t,n,c=e.product,a=e.setAlert,o=e.order_id,j=e.setconfirmed,u=(e.confirmed,Object(r.useState)(0)),m=Object(s.a)(u,2),p=(m[0],m[1],z().t),x=Object(h.c)(),v=Object(h.d)((function(e){return e.data.nSteps})),f=Object(h.d)((function(e){return e.data.products})),g=Object(r.useState)(1),A=Object(s.a)(g,2),y=A[0],C=A[1],k=Object(r.useState)(1),w=Object(s.a)(k,2),_=w[0],S=w[1],I=Object(r.useState)(!1),T=Object(s.a)(I,2),B=T[0],D=T[1],P=Object(r.useState)(void 0),L=Object(s.a)(P,2),E=L[0],F=L[1],R=Object(r.useState)(!1),q=Object(s.a)(R,2),H=q[0],M=q[1],W=Object(r.useState)(null),Z=Object(s.a)(W,2),X=(Z[0],Z[1]),V=Object(h.d)((function(e){return e.order.client})),K=Object(h.d)((function(e){return e.data.tva_mode})),J=Object(r.useState)(0),U=Object(s.a)(J,2),$=U[0];U[1];Object(r.useEffect)((function(){var e;"surplace"==V.type||"livraison"==V.type?(e=K.find((function(e){return"surplace"==e.nom})).valeur,X(e)):"emporter"==V.type&&(e=K.find((function(e){return"emporter"==e.nom})).valeur,X(e)),$>0&&X(e=$),console.log(e)}),[]);var ee=function(e){var t=e.extraKey,n=e.sign;console.log("handleExtra",{extraKey:t,sign:n});var c=JSON.parse(JSON.stringify(E)||{});"+"==n&&c.extras[t].default_quantity<1?(c.extras[t].default_quantity+=1,console.log(c),F(c)):c.extras[t].default_quantity>0&&(c.extras[t].default_quantity-=1,console.log(c),F(c))},te=function(e){var t=e.show,n=e.msg,c=e.type;a({show:t,msg:n,type:c}),setTimeout((function(){a({show:!1,msg:"",type:""})}),1500)},ne=function(e){return f.find((function(t){return t.id==e}))||{}},ce=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},re=localStorage.getItem("currency");return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(at.a,{}),Object(G.jsxs)("div",{className:"item_container",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:c.name.substring(0,21)})}),Object(G.jsx)("img",{src:c.image,onClick:function(){var e;j(!1),0==(null===c||void 0===c||null===(e=c.extras)||void 0===e?void 0:e.length)&&0==(null===c||void 0===c?void 0:c.nsteps)&&0==(null===c||void 0===c?void 0:c.isComp)?x(Ne({order:Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1,new:o?"true":"false"})})):(D(!0),F(Object(Y.a)(Object(Y.a)({},c),{},{qt:1,stepItems:{},remise:0,offert:!1})))},className:"prod_img"}),Object(G.jsxs)("div",{className:"price",children:["".concat(c.price.toFixed(2)),ce("<i>".concat(re,"</i>"))]}),Object(G.jsx)(l.a,{onClick:function(e){return M(!0)},icon:d.G,size:"1x",style:{position:"absolute",top:"0px",right:"5px",color:"red",backgroundColor:"white",borderRadius:"25%"}})]}),Object(G.jsxs)(fe.a,{dialogClassName:"modal_body",show:B,onHide:function(){D(!1),C(1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsxs)(fe.a.Title,{children:[Object(G.jsx)("img",{width:"30px",height:"30px",src:c.image}),null===E||void 0===E?void 0:E.name]})}),Object(G.jsxs)(fe.a.Body,{children:[Object(G.jsx)("p",{children:null===E||void 0===E?void 0:E.description}),null!==E&&void 0!==E&&E.extras&&null!==E&&void 0!==E&&E.extras.length?null===E||void 0===E?void 0:E.extras.map((function(e,t){return Object(G.jsxs)("tr",{style:{display:"flex",width:"50%"},children:[Object(G.jsxs)("td",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"30px",width:"25%",marginRight:"1rem"},children:[Object(G.jsx)(l.a,{onClick:function(){return ee({extraKey:t,sign:"-"})},icon:d.v,color:"#ff6b6b"}),Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:e.default_quantity})}),Object(G.jsx)(l.a,{onClick:function(){return ee({extraKey:t,sign:"+"})},icon:d.A,color:"#ff6b6b"})]}),Object(G.jsxs)("td",{style:{marginRight:"1rem"},children:[" ",Object(G.jsx)("h5",{children:Object(G.jsx)("b",{children:e.title})})]}),Object(G.jsxs)("td",{children:[" ",Object(G.jsx)("h5",{children:Object(G.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price.toFixed(2)," ",ce("<i>".concat(re,"</i>"))]})})]})]})})):null!==E&&void 0!==E&&E.isComp?Object(G.jsx)(mt.a,{variant:"dark",children:Object.keys((null===E||void 0===E?void 0:E.slots)||{}).map((function(e){var t;return Object(G.jsxs)(mt.a.Item,{style:{height:"15rem",width:"100%",textAlign:"center"},children:[Object(G.jsxs)("h3",{children:[" ",e]}),Object(G.jsxs)("div",{style:(t={display:"flex",justifyContent:"space-around"},Object(O.a)(t,"display","flex"),Object(O.a)(t,"alignItems","center"),Object(O.a)(t,"marginTop","2rem"),t),children:[null===E||void 0===E?void 0:E.slots[e].products.map((function(t){return Object(G.jsxs)("div",{style:{cursor:"pointer",position:"relative"},onClick:function(){return function(e){var t=e.slotKey,n=e.id;console.log(t,n);var c=JSON.parse(JSON.stringify(E)||{});c.slots[t].products.forEach((function(e){e.id==n?e.checked=!0:e.checked=!1,console.log(e.name)})),F(c)}({slotKey:e,id:t.id})},children:[Object(G.jsx)("h6",{children:Object(G.jsx)("b",{style:{color:t.checked?"#ff6b6b":"black"},children:t.name})}),Object(G.jsx)("img",{src:t.image,width:"50px",height:"50px",style:{borderRadius:"50%",borderColor:t.checked?"#ff6b6b":"black"}}),t.checked?Object(G.jsx)(l.a,{icon:d.l,color:"#ff6b6b",style:{position:"absolute",top:"50px",right:"20px"}}):""]})}))," "]})]})}))}):(null===E||void 0===E?void 0:E.nsteps)>0?Object(G.jsxs)("div",{children:[Object(G.jsx)("h6",{children:Object(G.jsx)("b",{children:null===(t=v.filter((function(e){return(null===e||void 0===e?void 0:e.menu_id)==(null===E||void 0===E?void 0:E.id)}))[0][y])||void 0===t?void 0:t.nom_etape})}),Object(G.jsx)("div",{className:"steps_cont",children:null===(n=v.filter((function(e){return e.menu_id==(null===E||void 0===E?void 0:E.id)}))[0][y])||void 0===n?void 0:n.choice.map((function(e){var t;return Object(G.jsxs)("div",{className:null!==E&&void 0!==E&&null!==(t=E.stepItems[y])&&void 0!==t&&t.find((function(t){return t.id==e}))?"prod_sel prod":"prod",onClick:function(){return function(e){var t=e.id,n=e.STP;console.log("stp",n),S(y);var c=JSON.parse(JSON.stringify(E)||{}),r=n.max_select;void 0==c.stepItems[y]&&(c.stepItems[y]=[],console.log(c)),c.stepItems[y].length<r&&(c.stepItems[y].find((function(e){return e.id==t}))||(console.log("will push now"),c.stepItems[y].push(ne(t)))),c.stepItems[y].find((function(e){return e.id==t}))||(c.stepItems[y]=[],c.stepItems[y].push(ne(t))),F(c),console.log("done"),console.log(c)}({id:e,STP:v.filter((function(e){return e.menu_id==(null===E||void 0===E?void 0:E.id)}))[0][y]})},children:[Object(G.jsx)("img",{src:ne(e).image,alt:"",height:"70px",width:"70px"}),Object(G.jsxs)("h6",{style:{display:"flex"},children:[Object(G.jsxs)("b",{children:[ne(e).name," "]}),Object(G.jsx)("span",{children:Object(G.jsxs)("b",{style:{display:"flex",marginLeft:"1rem",marginRight:"1rem",color:"#ff6b6b"},children:[ne(e).price," ",ce("<i>".concat(re,"</i>"))]})})," "]}),Object(G.jsx)("p",{children:ne(e).description})]})}))}),(null===E||void 0===E?void 0:E.nsteps)>=y&&y>0?Object(G.jsx)(b.a,{style:{marginRight:"1rem"},variant:"outline-secondary",onClick:function(){y>1&&C(y-1)},children:"Retour"}):"",(null===E||void 0===E?void 0:E.nsteps)>y&&y>0?Object(G.jsx)(b.a,{variant:"outline-warning",onClick:function(){(null===E||void 0===E?void 0:E.nsteps)>y&&_==y&&C(y+1)},children:"Suivant"}):"",(null===E||void 0===E?void 0:E.nsteps)==y?Object(G.jsx)(b.a,{variant:"outline-warning",onClick:function(){_==y&&(x(Ne({order:Object(Y.a)(Object(Y.a)({},E),{},{new:o?"true":"false"})})),te({show:!0,msg:p("added"),type:"success"}),D(!1),C(1))},children:"Finir"}):""]}):""]}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){D(!1),C(1)},children:p("cancel")}),0==(null===E||void 0===E?void 0:E.nsteps)||null!==E&&void 0!==E&&E.isComp?Object(G.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"warning",onClick:function(){return x(Ne({order:Object(Y.a)(Object(Y.a)({},E),{},{new:o?"true":"false"})})),te({show:!0,msg:p("added"),type:"success"}),void D(!1)},children:p("aded")}):""]})]}),Object(G.jsxs)(fe.a,{show:H,onHide:function(){return M(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Gestion de stock"})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return M(!1)},children:"Retour au tables"}),Object(G.jsx)(b.a,{variant:"danger",onClick:function(){return M(!1),void N.a.post("http://141.94.77.9:5000/api/resetwarehouse",{prod_id:c.id}).then((function(e){console.log(e.data),x(ue({id:c.id})),Q.a.fire({icon:"success",title:"produit mis hors stock !",showConfirmButton:!1,timer:1500})}))},children:"Hors stock"})]})]})]})},gt=function(){z().t;var e,t=Object(o.f)(),n=Object(r.useState)(!1),c=Object(s.a)(n,2),i=c[0],a=c[1];var j=Object(h.d)((function(e){return e.order.selectedTable})),b=Object(o.g)(),O=localStorage.getItem("user_id"),m=b.order_id,p=Object(h.d)((function(e){return e.data.categories})),x=Object(r.useState)(null===(e=p[0])||void 0===e?void 0:e.id),v=Object(s.a)(x,2),f=v[0],g=v[1],A=Object(r.useState)({show:!1,msg:"",type:""}),y=Object(s.a)(A,2),C=(y[0],y[1]),k=localStorage.getItem("username")||"",w=Object(r.useState)((new Date).toLocaleTimeString("fa-IR")),_=Object(s.a)(w,2),S=(_[0],_[1]),I=Object(r.useState)({level:0,charging:!1}),T=Object(s.a)(I,2),B=(T[0],T[1],Object(r.useState)(!1)),D=Object(s.a)(B,2),P=D[0],L=D[1],E=Object(r.useState)(""),F=Object(s.a)(E,2),R=(F[0],F[1],Object(h.d)((function(e){return e.data.products})));Object(r.useEffect)((function(){var e=setInterval((function(){return q()}),1e3);return function(){clearInterval(e)}}),[]);var q=function(){S((new Date).toLocaleTimeString("fr-fr").replace(/(.*)\D\d+/,"$1"))},H=Object(h.c)();Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/categories",{user_id:O}).then((function(e){return H(se({categories:e.data.sort((function(e,t){return e.cat_order-t.cat_order}))}))})),N.a.post("http://141.94.77.9:5000/api/products",{user_id:O,category:0}).then((function(e){H(oe({products:e.data.products})),H(le({nSteps:e.data.menuSteps}))}))}),[]);var Q=Object(r.useState)("default"),M=Object(s.a)(Q,2),W=M[0],Z=M[1],X=Object(r.useState)(""),U=Object(s.a)(X,2),Y=U[0],$=U[1];Object(r.useRef)();return Object(G.jsxs)("div",{children:[Object(G.jsx)(V.a,{style:{backgroundColor:"#0dcaf0",height:"70px"},variant:"warning",children:Object(G.jsxs)(K.a,{children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsx)("div",{onClick:function(){a(!0)},style:{cursor:"pointer"},children:Object(G.jsxs)("h6",{style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",padding:"5px"},children:[Object(G.jsx)("b",{children:"Rechercher"}),Object(G.jsx)(l.a,{icon:d.C,style:{marginLeft:"0.5rem"}})]})}),Object(G.jsx)(J.a,{className:"ms-auto",children:Object(G.jsx)(J.a.Link,{onClick:function(){t("/main"),H(Se())},children:Object(G.jsx)("img",{width:"45px",src:$e,className:"table-icon"})})}),Object(G.jsxs)("h6",{className:"menu-server-logout",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:k}),Object(G.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void t("/")},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(G.jsx)("div",{className:"cont_my",children:Object(G.jsxs)(We.a,{style:{height:"85vh",paddingRight:"0 !important",backgroundColor:"white"},children:[Object(G.jsx)(Ze.a,{xs:2,children:Object(G.jsx)(Ot,{selectedCategory:f,setSelectedCategory:g,categories:p})}),Object(G.jsx)(Ze.a,{xs:7,children:Object(G.jsx)(vt,{order_id:m,categories:p,selectedCategory:f,setAlert:C,confirmed:P,setconfirmed:L})}),Object(G.jsx)(Ze.a,{xs:3,children:Object(G.jsx)(ht,{selectedTable:j,confirmed:P,setconfirmed:L})}),Object(G.jsx)(Ke,{})]})}),i?Object(G.jsxs)("div",{className:"all-produc-menu",children:[Object(G.jsxs)("div",{className:"modal-heade",children:[Object(G.jsxs)("div",{className:"input-search-product",children:[Object(G.jsx)("input",{type:"text",placeholder:"Rehercher un produit...",value:Y}),Object(G.jsx)(l.a,{icon:d.C,className:"Sm"})]}),Object(G.jsx)(l.a,{icon:d.G,className:"xm",onClick:function(){a(!1)}})]}),Object(G.jsx)("div",{className:"modal-bodys",children:R.filter((function(e){return e.name.toLowerCase().includes(Y.toLowerCase())||e.code.includes(Y)})).map((function(e,t){return Object(G.jsx)(ft,{order_id:m,setAlert:C,setconfirmed:L,product:e})}))}),Object(G.jsx)("div",{className:"keyboard",children:Object(G.jsx)(u.a,{layoutName:W,onChange:function(e){$(e)},onKeyPress:function(e){console.log("Button pressed",e),"{lock}"==e&&"default"==W&&Z("shift"),"{lock}"==e&&"shift"==W&&Z("default")}})})]}):""]})},At=Object(x.c)({name:"caisse",initialState:{monnaies:[],initialValue:0},reducers:{setMonnaies:function(e,t){e.monnaies=t.payload.monnaies},clearcaisse:function(){return{caisse:""}},setInitialValue:function(e,t){e.initialValue=t.payload.montant}}}),yt=At.reducer,Ct=At.actions,Nt=Ct.setMonnaies,kt=(Ct.clearcaisse,Ct.setInitialValue),wt=yt,_t=n(395),St=n.p+"static/media/coin.3b947962.png",It=n.p+"static/media/billet.8e0c912a.png",Tt=n.p+"static/media/sound.861677ae.mp3",Bt=function(){var e=Object(h.c)(),t=Object(o.f)(),n=Object(r.useState)(new Audio(Tt)),c=Object(s.a)(n,2),a=c[0];c[1];Object(r.useEffect)((function(){a.play()}),[]);var l=localStorage.getItem("caisse_open"),d=localStorage.getItem("caisse_id"),j=localStorage.getItem("user_id"),O=localStorage.getItem("username"),m=(Object(h.d)((function(e){return e.caisse.monnaies})),Object(r.useState)([])),p=Object(s.a)(m,2),x=p[0],v=(p[1],Object(r.useState)(0)),f=Object(s.a)(v,2),g=(f[0],f[1]),A=localStorage.getItem("currency"),y=Object(r.useState)(!0),C=Object(s.a)(y,2),k=C[0],w=C[1],_=Object(r.useState)(""),S=Object(s.a)(_,2),I=(S[0],S[1]),T=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 {bksp}"]),B=Object(s.a)(T,2),D=B[0],P=(B[1],Object(r.useRef)()),L=Object(r.useState)(0),E=Object(s.a)(L,2),F=E[0],R=E[1],q=Object(r.useState)([{value:0,real:.02},{value:0,real:.05},{value:0,real:.1},{value:0,real:.2},{value:0,real:.5},{value:0,real:1},{value:0,real:5},{value:0,real:10},{value:0,real:20},{value:0,real:50},{value:0,real:100},{value:0,real:200},{value:0,real:2},{value:0,real:.2},{value:0,real:.1}]),z=Object(s.a)(q,2),H=z[0],M=z[1],W=function(e){var t=e.e,n=(e.index,t.target.value);I(n);var c=Object(te.a)(H);c[F].value=Number(n),M(c),P.current.setInput(n),g(Z())};Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/getMonnaie",{user_id:j}).then((function(t){e(Nt({monnaies:t.data}))}))}),[]),Object(r.useEffect)((function(){if(a.play(),console.log(a),1==l){var e=new Date,n=("00"+(e.getMonth()+1)).slice(-2)+"/"+("00"+e.getDate()).slice(-2)+"/"+e.getFullYear()+" "+("00"+e.getHours()).slice(-2)+":"+("00"+e.getMinutes()).slice(-2)+":"+("00"+e.getSeconds()).slice(-2);Q.a.fire({icon:"success",title:"caisse Ouvert !",text:"Date ouverture :"+n,showConfirmButton:!1,timer:1500}),t("/main")}}),[k]);var Z=function(){var e=0;return H.map((function(t){e+=t.value*t.real,console.log(e)})),e},U=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})};return Object(G.jsxs)("div",{className:"my_container",children:[Object(G.jsx)(X,{title:"cashierr"}),Object(G.jsx)("div",{className:"toOpenCaisse",children:Object(G.jsxs)("div",{className:"mon_cont",children:[Object(G.jsxs)("div",{className:"piece",children:[Object(G.jsx)("img",{className:"piece-img-coin",src:St,width:64,height:64,style:{position:"absolute"}}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["2 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[12].value,onFocus:function(){R(12),P.current.setInput("")},onChange:function(e){W({e:e,index:12})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[12].value*H[12].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["1 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{onFocus:function(){R(5),P.current.setInput("")},value:H[5].value,onChange:function(e){return W({e:e,index:5})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[5].value*H[5].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["0.5 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[4].value,onFocus:function(){R(4),P.current.setInput("")},onChange:function(e){return W({e:e,index:4})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[4].value*H[4].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["0.2 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[13].value,onFocus:function(){R(13),P.current.setInput("")},onChange:function(e){return W({e:e,index:13})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[13].value*H[13].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["0.1 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[14].value,onFocus:function(){R(14),P.current.setInput("")},onChange:function(e){return W({e:e,index:14})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[14].value*H[14].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsx)(u.a,{theme:"hg-theme-default hg-layout-default myTheme2",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn2",buttons:"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return P.current=e},layoutName:"default",layout:{default:D},onChange:function(e){I(e),console.log("Input changed",e);var t=Object(te.a)(H);t[F].value=Number(e),M(t),I("")},onKeyPress:function(e){console.log("Button pressed",e)}})]}),Object(G.jsxs)("div",{className:"billet",children:[Object(G.jsx)("img",{src:It,width:64,height:64,style:{position:"absolute"}}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["200 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[11].value,onFocus:function(){R(11),P.current.setInput("")},onChange:function(e){return W({e:e,index:11})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[11].value*H[11].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["100 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[10].value,onFocus:function(){R(10),P.current.setInput("")},onChange:function(e){return W({e:e,index:10})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[10].value*H[10].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["50 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[9].value,onFocus:function(){R(9),P.current.setInput("")},onChange:function(e){return W({e:e,index:9})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[9].value*H[9].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["20 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[8].value,onFocus:function(){R(8),P.current.setInput("")},onChange:function(e){return W({e:e,index:8})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[8].value*H[8].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["10 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[7].value,onFocus:function(){R(7),P.current.setInput("")},onChange:function(e){return W({e:e,index:7})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[7].value*H[7].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"mon",children:[Object(G.jsxs)("span",{className:"flex",children:["5 ",U("<i>".concat(A,"</i>"))]}),Object(G.jsx)(_t.a,{value:H[6].value,onFocus:function(){R(6),P.current.setInput("")},onChange:function(e){return W({e:e,index:6})},type:"number",className:"moninput"}),Object(G.jsxs)("span",{className:"flex",children:[H[6].value*H[6].real," ",U("<i>".concat(A,"</i>"))]})]}),Object(G.jsxs)("div",{className:"caisse-ovrir-caisse",children:[Object(G.jsx)("h4",{className:"grand-total",children:Object(G.jsxs)("b",{children:["Grand Total : ",Object(G.jsx)("br",{}),Object(G.jsxs)("span",{style:{display:"flex"},children:[Z().toFixed(2),U("<i>".concat(A,"</i>"))]})]})}),Object(G.jsx)(b.a,{onClick:function(){return function(){if(Z()>0){console.log(x),console.log(Z());var t={caisse_id:d,date:Date.now(),montant:Z(),type:"open"};console.log(t),N.a.post("http://141.94.77.9:5000/api/OpenCaisse",{user_id:j,user:O,montant:Z(),historiquePrint:t,historique_monnaie:x}).then((function(t){var n;console.log(t.data);var c=null===(n=t.data.historiquePrint)||void 0===n?void 0:n.montant;e(kt({montant:c})),localStorage.setItem("caisse_open",1),w(!k)}))}else Q.a.fire({icon:"error",title:"Fond initial est 0 !",showConfirmButton:!1,timer:1500})}()},variant:"warning",className:"open_btn",size:"lg",children:"Ouvrir Caisse"}),Object(G.jsx)(b.a,{onClick:function(){return function(){var t={caisse_id:d,date:Date.now(),montant:30,type:"open"};N.a.post("http://141.94.77.9:5000/api/OpenCaisse",{user_id:j,user:O,montant:30,historiquePrint:t,historique_monnaie:x}).then((function(t){var n;console.log(t.data);var c=null===(n=t.data.historiquePrint)||void 0===n?void 0:n.montant;e(kt({montant:c})),localStorage.setItem("caisse_open",1),w(!k)}))}()},variant:"warning",className:"open_btn-30",size:"lg",children:"Ouvrir avec 30\u20ac"})]})]})]})}),Object(G.jsx)(V.a,{bg:"light",variant:"light",fixed:"bottom",children:Object(G.jsxs)(K.a,{children:[Object(G.jsxs)(V.a.Brand,{href:"#home",children:["Tous droits reserv\xe9es ",Object(G.jsx)("b",{children:"CAISSECONNECT.FR"})," \xa9 2022"]}),Object(G.jsx)(J.a,{className:"me-auto",children:Object(G.jsx)(J.a.Link,{href:"#home"})})]})})]})},Dt=function(){var e,t,n=localStorage.getItem("username")||"",c=localStorage.getItem("user_id"),i=localStorage.getItem("caisse_id"),a=Object(h.d)((function(e){return e.data.coupons})),j=(Object(h.d)((function(e){return e.data.tables})),Object(r.useState)({})),u=Object(s.a)(j,2),O=u[0],m=u[1],p=Object(r.useState)(!1),x=Object(s.a)(p,2),v=x[0],f=x[1],g=Object(r.useState)(!1),A=Object(s.a)(g,2),y=(A[0],A[1],Object(r.useState)("")),C=Object(s.a)(y,2),k=(C[0],C[1]),w=Object(o.g)(),_=Object(o.f)(),S=w.id,I=z().t,T=Object(h.c)();Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/getcoupons",{user_id:c,caisse_id:i}).then((function(e){T(he({coupons:e.data}))}))}),[]);var B=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),_("/")},D=localStorage.getItem("currency").replace(/;/g,"").replace(/&/g,"");return Object(G.jsxs)("div",{className:"navbar",children:[Object(G.jsx)(V.a,{style:{height:"60px"},variant:"warning",children:Object(G.jsxs)(K.a,{className:"history-navbar",children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{onClick:function(){return _("/main")},children:Object(G.jsx)("img",{width:"45px",src:$e,className:"table-icon"})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(G.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return _("/cloture")},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(G.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),I("cashier")]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return B()},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(G.jsx)(l.a,{icon:d.E,style:{marginRight:"5px"}}),I("disconnect")]})})]}),Object(G.jsxs)("h6",{className:"client-server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:n}),Object(G.jsx)(l.a,{onClick:function(){return B()},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]}),Object(G.jsxs)("div",{className:"client-search",children:[Object(G.jsx)("label",{children:Object(G.jsx)(l.a,{icon:d.C})}),Object(G.jsx)("input",{type:"text",placeholder:"Chercher...",onChange:function(e){return k(e.target.value)}})]})]})}),Object(G.jsx)(K.a,{style:{backgroundColor:"white"},fluid:!0,children:Object(G.jsxs)(ve.a,{hover:!0,className:"ttt",children:[Object(G.jsx)("thead",{className:"tbds",children:S?Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Type"}),Object(G.jsx)("th",{children:"Table"}),Object(G.jsx)("th",{children:"date"}),Object(G.jsx)("th",{children:"order"}),Object(G.jsx)("th",{children:"Prix"}),Object(G.jsx)("th",{children:"Paiement "})]}):Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"id"}),Object(G.jsx)("th",{children:"Avoir"}),Object(G.jsx)("th",{children:"Cr\xe9e dans"}),Object(G.jsx)("th",{children:"Expir\xe9e dans"})]})}),Object(G.jsx)("tbody",{className:"scro",children:a.map((function(e,t){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:e.id}),Object(G.jsxs)("td",{children:[e.discount||"N/A",D]}),Object(G.jsx)("td",{children:e.created_at||"N/A"}),Object(G.jsx)("td",{children:e.expires_at||"N/A"})]})}))})]})}),Object(G.jsxs)(fe.a,{show:v,onHide:function(){return f(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Client"})}),Object(G.jsx)(fe.a.Body,{children:Object(G.jsx)("div",{children:Object(G.jsxs)(Ge.a,{auto:!0,children:[Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.nom_prenom,type:"text",placeholder:"nom/prenom",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{nom_prenom:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsxs)(Ze.a,{children:[(null===(e=O.telephone)||void 0===e?void 0:e.length)>0&&(null===(t=O.telephone)||void 0===t?void 0:t.length)<10?Object(G.jsx)(Qe.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(G.jsx)(Ge.a.Control,{value:O.telephone,type:"tel",placeholder:"telephone",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{telephone:e.target.value}))}})]}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.email,type:"email",placeholder:"Email",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{email:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.adresse,as:"textarea",type:"text",placeholder:"adresse",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{adresse:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.societe,type:"text",placeholder:"soci\xe9t\xe9",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{societe:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.code_1,type:"text",placeholder:"code 1",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{code_1:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.code_2,type:"text",placeholder:"code 2",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{code_2:e.target.value}))}})}),Object(G.jsx)(Ze.a,{xs:"6",children:Object(G.jsx)(Ge.a.Control,{value:O.ville,type:"text",placeholder:"Ville",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{ville:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.interphone,type:"text",placeholder:"interphone",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{interphone:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:O.etage,type:"text",placeholder:"etage",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{etage:e.target.value}))}})}),Object(G.jsx)(Ze.a,{xs:"6",children:Object(G.jsx)(Ge.a.Control,{value:O.code_postal,type:"postal",placeholder:"Code postal",onChange:function(e){return m(Object(Y.a)(Object(Y.a)({},O),{},{code_postal:e.target.value}))}})})]})})]})})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return f(!1)},children:"Annuler"}),Object(G.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"primary",onClick:function(){f(!1)},children:"Terminer"})]})]}),Object(G.jsx)(Ke,{})]})},Pt=(n(483),n(484),n(763)),Lt=n(137),Et=n.n(Lt),Ft=function(e){e.data;var t,n,c,r,i,a,s,o,l,d,j,u,b,h,O,m,p,x,v,f=e.recap,g=e.selectedDate,A=e.products,y=e.tvas,C=e.tvasum,N=null===f||void 0===f||null===(t=f.lastOuverture)||void 0===t?void 0:t.date.substr(0,10),k=null===f||void 0===f||null===(n=f.lastOuverture)||void 0===n?void 0:n.date.substr(11,5),w=(new Date).toISOString().substr(11,5),_=N+"  "+k;return console.log(null===(c=f.today)||void 0===c?void 0:c.tva),Object(G.jsxs)("div",{className:"ticketz",children:[Object(G.jsxs)("div",{className:"z-head",children:[Object(G.jsx)("h3",{children:null===(r=f.Restaurant)||void 0===r?void 0:r.name}),Object(G.jsx)("h1",{children:"Ticket Z"}),Object(G.jsx)("p",{children:null===(i=f.Restaurant)||void 0===i?void 0:i.address}),Object(G.jsxs)("p",{children:["Tel : ",null===(a=f.Restaurant)||void 0===a?void 0:a.telephone]})]}),Object(G.jsxs)("div",{className:"z-body",children:[Object(G.jsx)("p",{children:"---------------------------------"}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Impression :"})}),Object(G.jsx)("p",{children:g+" "+w})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Ouverture :"})}),Object(G.jsx)("p",{children:_})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Fermeture :"})}),Object(G.jsx)("p",{children:g+" "+w})]}),Object(G.jsx)("p",{children:"---------------------------------"}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Commandes :"})," ",null===(s=f.today)||void 0===s?void 0:s.nbr]}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Clients :"})," ",Object.keys((null===(o=f.today)||void 0===o?void 0:o.clientGroups)||{}).length]}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Ticket moyen :"})," ",Number((((null===(l=f.today)||void 0===l?void 0:l.total)+(null===(d=f.today)||void 0===d?void 0:d.tva))/(null===(j=f.today)||void 0===j?void 0:j.nbr)).toFixed(2))||0,"\u20ac"]}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Annules :"})," ",(null===(u=f.today)||void 0===u||null===(b=u.logs)||void 0===b?void 0:b.filter((function(e){return"Annulation"==e.title_log})).length)||0]}),Object(G.jsx)("p",{children:"---------------------------------"}),null===A||void 0===A?void 0:A.map((function(e){return Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:e.quantity+" X "+e.name})}),Object(G.jsxs)("p",{children:[e.totalPrice.toFixed(2),"\u20ac"]})]})})),Object(G.jsx)("p",{children:"---------------------------------"}),Object.keys((null===(h=f.today)||void 0===h?void 0:h.groups)||{}).map((function(e){var t,n;return Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsxs)("p",{children:[Object(G.jsxs)("b",{children:[null===(t=f.today)||void 0===t?void 0:t.groups[e].length," X "]}),Object(G.jsx)("b",{children:1==e?"Carte Bancaire":2==e?"Esp\xe9ces":e})]}),Object(G.jsx)("p",{children:(null===(n=f.today)||void 0===n?void 0:n.groups[e].reduce((function(e,t){return e+(t.price+t.price*t.tva/100)}),0).toFixed(2))+"\u20ac"})]})})),Object(G.jsx)("p",{children:"---------------------------------"}),Object.keys(y||{}).map((function(e){return Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsxs)("b",{children:["TVA(",Number(e).toFixed(2),"%)"]})}),Object(G.jsxs)("p",{children:[y[e].toFixed(2),"\u20ac"]})]})})),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Total HT"})}),Object(G.jsxs)("p",{children:[null===(O=f.today)||void 0===O?void 0:O.total.toFixed(2),"\u20ac"]})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Total TTC"})}),Object(G.jsxs)("p",{children:[((null===(m=f.today)||void 0===m?void 0:m.total)+C).toFixed(2),"\u20ac"]})]}),Object(G.jsx)("p",{children:"---------------------------------"}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Fond de caisse initial"})}),Object(G.jsxs)("p",{children:[null===(p=f.lastOuverture)||void 0===p?void 0:p.montant.toFixed(2),"\u20ac"]})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Fond de caisse final"})}),Object(G.jsxs)("p",{children:[((null===(x=f.lastOuverture)||void 0===x?void 0:x.montant)+(null===(v=f.today)||void 0===v?void 0:v.total)+C).toFixed(2),"\u20ac"]})]})]})]})},Rt=n(195),qt=n.n(Rt),zt=function(e){var t,n,c,r,i=e.zHistory;return Object(G.jsxs)("div",{className:"ticketz",children:[Object(G.jsxs)("div",{className:"z-head",children:[Object(G.jsx)("h3",{children:null===(t=i.restaurant)||void 0===t?void 0:t.name}),Object(G.jsx)("h1",{children:"Ticket Z"}),Object(G.jsx)("p",{children:null===(n=i.restaurant)||void 0===n?void 0:n.address}),Object(G.jsxs)("p",{children:["Tel : ",null===(c=i.restaurant)||void 0===c?void 0:c.telephone]})]}),Object(G.jsxs)("div",{className:"z-body",children:[Object(G.jsx)("p",{children:"---------------------------------"}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Impression :"})}),Object(G.jsx)("p",{children:i.impression})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Ouverture :"})}),Object(G.jsx)("p",{children:i.ouverture})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Fermeture :"})}),Object(G.jsx)("p",{children:i.fermeture})]}),Object(G.jsx)("p",{children:"---------------------------------"}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Commandes :"})," ",i.commandes]}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Clients :"})," ",i.clients]}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Ticket moyen :"})," ",i.ticket_moyen,"\u20ac"]}),Object(G.jsxs)("h6",{children:[Object(G.jsx)("b",{children:"Annules :"})," ",i.cancledOrders.length||0]}),Object(G.jsx)("p",{children:"---------------------------------"}),null===(r=i.products)||void 0===r?void 0:r.map((function(e){return Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:e.quantity+" X "+e.name})}),Object(G.jsxs)("p",{children:[e.totalPrice.toFixed(2),"\u20ac"]})]})})),Object(G.jsx)("p",{children:"---------------------------------"}),Object.keys(i.pay_method||{}).map((function(e){var t,n,c;return Object(G.jsx)("div",{className:"b_el",children:Object(G.jsxs)("p",{children:[null===(t=i.pay_method[e])||void 0===t?void 0:t.qt," ",null===(n=i.pay_method[e])||void 0===n?void 0:n.name," : ",null===(c=i.pay_method[e])||void 0===c?void 0:c.prix]})})})),Object(G.jsx)("p",{children:"---------------------------------"}),Object.keys(i.tvas||{}).map((function(e){return Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsxs)("b",{children:["TVA(",Number(e).toFixed(2),"%)"]})}),Object(G.jsxs)("p",{children:[i.tvas[e].toFixed(2),"\u20ac"]})]})})),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Total HT"})}),Object(G.jsxs)("p",{children:[i.ht,"\u20ac"]})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Total TTC"})}),Object(G.jsxs)("p",{children:[i.ttc,"\u20ac"]})]}),Object(G.jsx)("p",{children:"---------------------------------"}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Fond de caisse initial"})}),Object(G.jsxs)("p",{children:[i.fond_initial,"\u20ac"]})]}),Object(G.jsxs)("div",{className:"b_el",children:[Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:"Fond de caisse final"})}),Object(G.jsxs)("p",{children:[i.fond_final,"\u20ac"]})]})]})]})},Ht=function(){var e,t,n,c,i,a,j,u,O,x,v,f,g,A,y,C,k=z().t,w=Object(h.c)(),_=Object(o.f)(),S=localStorage.getItem("username")||"",I=localStorage.getItem("user_id")||"",T=localStorage.getItem("username")||"",B=localStorage.getItem("caisse_id"),D=Object(r.useState)(""),P=Object(s.a)(D,2),L=(P[0],P[1],Object(r.useRef)(null),new Date),E=L.toISOString().substr(0,10),F=Object(r.useState)(E),R=Object(s.a)(F,2),q=R[0],H=(R[1],Object(h.d)((function(e){return e.caisse.initialValue}))),M=Object(h.d)((function(e){return e.data.products})),W=Object(h.d)((function(e){return e.order.checkoutData})),Z=(null===W||void 0===W||null===(e=W.filter((function(e){return"pending"==e.status&&e.date==E})))||void 0===e?void 0:e.length)||0,X=null===W||void 0===W?void 0:W.filter((function(e){return"rejected"==e.status})),U=Object(h.d)((function(e){return e.data.orderHistory}))||[],$=null===U||void 0===U||null===(t=U.slice())||void 0===t?void 0:t.sort((function(e,t){return t.id-e.id})).filter((function(e){return e.paymentsInDb&&e.paymentsInDb.length>0})),te=Object(r.useState)(H),ne=Object(s.a)(te,2),ce=ne[0],re=(ne[1],Object(r.useState)({})),ie=Object(s.a)(re,2),ae=ie[0],se=ie[1],oe=Object(r.useState)(!1),le=Object(s.a)(oe,2),de=le[0],je=(le[1],Object(r.useState)(1)),ue=Object(s.a)(je,2),be=ue[0],he=ue[1],Oe=Object(r.useState)({}),me=Object(s.a)(Oe,2),pe=me[0],xe=me[1],ve=Object(r.useState)({}),ge=Object(s.a)(ve,2),Ae=ge[0],ye=ge[1],Ce=Object(r.useState)(!1),Ne=Object(s.a)(Ce,2),ke=Ne[0],we=Ne[1],_e=Object(r.useState)(!1),Ie=Object(s.a)(_e,2),Te=Ie[0],Be=Ie[1],De=Object(r.useState)(!1),Pe=Object(s.a)(De,2),Le=Pe[0],Fe=Pe[1],Re=Object(r.useState)([]),qe=Object(s.a)(Re,2),ze=qe[0],He=qe[1],Qe=null===ae||void 0===ae||null===(n=ae.lastOuverture)||void 0===n?void 0:n.date.substr(0,10),Ge=null===ae||void 0===ae||null===(c=ae.lastOuverture)||void 0===c?void 0:c.date.substr(11,5),Me=L.toISOString().substr(11,5),We=Qe+"  "+Ge,Ze=function(e){var t=e.id;return null===M||void 0===M?void 0:M.find((function(e){return e.id==t}))};Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/getHistoriqueZcaisse",{user_id:I}).then((function(e){return He(e.data.allHistorique)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)(Object(p.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(q),e.next=3,N.a.post("http://141.94.77.9:5000/api/clotureData",{user_id:I,caisse_id:B,TODAY:q}).then((function(e){console.log("colturedata",e.data),se(e.data);var t=new FormData;t.append("rest_id",I),t.append("page",be),t.append("date",q),N()({method:"post",url:"http://141.94.77.9/menu_premium_v2/index.php/api/order/venteCaisse",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data.data.data),xe(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)}))),[de]);var Xe=null===(i=ae.today)||void 0===i||null===(a=i.orderItems)||void 0===a?void 0:a.map((function(e,t){var n,c;return{id:t,col1:null===(n=Ze({id:e.item_id}))||void 0===n?void 0:n.name,col2:e.quantity,col3:(null===(c=e.price)||void 0===c?void 0:c.toFixed(2))+"\u20ac",col4:(e.price*e.quantity).toFixed(2)+"\u20ac"}})),Ke=0;Object.keys((null===(j=ae.today)||void 0===j?void 0:j.tvas)||{}).map((function(e){var t;Ke+=null===(t=ae.today)||void 0===t?void 0:t.tvas[e]}));return Object(G.jsxs)("div",{children:[Object(G.jsx)(V.a,{variant:"warning",className:"colture_nav",children:Object(G.jsxs)(K.a,{className:"colture_navbar",children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsxs)("h6",{className:"zcaisse_history",onClick:function(){return Fe(!0)},children:[Object(G.jsx)(l.a,{size:"1x",icon:d.s,style:{marginRight:"0.5rem"}}),"Historique"]}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{children:" "}),Object(G.jsx)(J.a.Link,{onClick:function(){_("/main"),w(Se())},children:Object(G.jsx)("img",{width:"45px",src:$e,className:"colture-table-icon"})})]}),Object(G.jsxs)("h6",{className:"cloture-server",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{className:"cloture_server_img",src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:T}),Object(G.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void _("/")},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),ae.today?Object(G.jsxs)("div",{style:{padding:"1rem",display:"flex",width:"100%",height:"93vh",overflow:"hidden",paddingTop:"1rem",backgroundColor:"white"},children:[Object(G.jsx)("div",{style:{width:"30%",height:"100vh"},children:Object(G.jsx)(Ft,{tvas:null===(u=ae.today)||void 0===u?void 0:u.tvas,products:null===(O=ae.today)||void 0===O||null===(x=O.orderItems)||void 0===x?void 0:x.map((function(e){var t;return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:null===(t=Ze({id:e.item_id}))||void 0===t?void 0:t.name})})),data:pe,recap:ae,selectedDate:q,tvasum:Ke})}),Object(G.jsxs)("div",{style:{width:"70%",height:"100vh"},children:[Object(G.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:[Object(G.jsxs)("div",{className:"rec",children:[Object(G.jsx)("h1",{children:Object(G.jsx)("b",{children:Object(G.jsx)(qt.a,{value:ae.commandesTotal,formatValue:function(e){return e.toFixed(0)}})})}),Object(G.jsx)("h5",{children:"Total des commandes"})]}),Object(G.jsxs)("div",{className:"rec",children:[Object(G.jsx)("h1",{children:Object(G.jsx)("b",{children:Object(G.jsx)(qt.a,{value:null===(v=ae.today)||void 0===v?void 0:v.clients,formatValue:function(e){return e.toFixed(0)}})})}),Object(G.jsx)("h5",{children:"Clients total"})]}),Object(G.jsxs)("div",{className:"rec",children:[Object(G.jsx)("h1",{children:Object(G.jsxs)("b",{children:[Object(G.jsx)(qt.a,{value:ae.chiffre,formatValue:function(e){return e.toFixed(2)}})," ",Object(G.jsx)("br",{}),"\u20ac"]})}),Object(G.jsx)("h5",{children:"Chiffre d'affaire"})]}),Object(G.jsxs)("div",{className:"rec",children:[Object(G.jsx)("h1",{children:Object(G.jsxs)("b",{children:[Object(G.jsx)(qt.a,{value:ae.chiffre/ae.commandesTotal,formatValue:function(e){return e.toFixed(2)}}),Object(G.jsx)("br",{}),"\u20ac"]})}),Object(G.jsx)("h5",{children:"Panier moyen"})]})]}),Object(G.jsxs)("div",{style:{width:"100%",height:"300px",marginTop:"1rem"},children:[Object(G.jsx)(Pt.a,{className:"colture-datagrid",loading:0==(null===Xe||void 0===Xe?void 0:Xe.length),pageSize:10,paginationMode:"client",onPageChange:function(e){he(e+1)},rowCount:null===pe||void 0===pe||null===(f=pe.data)||void 0===f?void 0:f.total,rows:void 0==Xe?[]:Xe,columns:[{field:"id",headerName:"#",width:50},{field:"col1",headerName:"Nom",width:180},{field:"col2",headerName:"Quantit\xe9s",width:150},{field:"col3",headerName:"Prix",width:150},{field:"col4",headerName:"Sous-Total",width:150}]}),Object(G.jsxs)("div",{className:"colture_buttons",children:[Object(G.jsxs)("div",{style:{width:"100%",marginTop:"1rem",display:"flex",justifyContent:"center"},children:[Object(G.jsx)(b.a,{className:"colture_buton",onClick:function(){return function(){var e,t,n,c,r,i,a,s,o,l,d,j=[],u={surPlace:0,livraison:0,emporter:0,borne:0};$.map((function(e){return"surplace"==e.order_type?u.surPlace+=1:"emporter"==e.order_type?u.livraison+=1:"livraison"==e.order_type?u.emporter+=1:1==e.from_kiosk?u.borne+=1:void 0}));var b=function(e){var t,n=null===(t=ae.today)||void 0===t?void 0:t.groups[e],c=0;null===n||void 0===n||n.forEach((function(e){c=c+e.price+e.price*e.tva/100})),j.push({qt:n.length,name:e,prix:c})};for(var h in null===(O=ae.today)||void 0===O?void 0:O.groups){var O;b(h)}var m={5.5:0,10:0,20:0};for(var p in null===(x=ae.today)||void 0===x?void 0:x.tvas){var x,v,f=null===(v=ae.today)||void 0===v?void 0:v.tvas[p];for(var g in m)g==p&&(m[g]=f)}var A={restaurant:{name:ae.Restaurant.name,address:ae.Restaurant.address,telephone:ae.Restaurant.telephone},cancledOrders:X,ordersType:u,products:null===(e=ae.today)||void 0===e||null===(t=e.orderItems)||void 0===t?void 0:t.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:Ze({id:e.item_id}).name})})),impression:q+" "+Me,ouverture:We,fermeture:q+" "+Me,commandes:ae.today.nbr,logs:null===(n=ae.today.logs)||void 0===n?void 0:n.filter((function(e){return"Annulation"==e.title_log})),clients:Object.keys((null===(c=ae.today)||void 0===c?void 0:c.clientGroups)||{}).length,ticket_moyen:(((null===(r=ae.today)||void 0===r?void 0:r.total)+Ke)/(null===(i=ae.today)||void 0===i?void 0:i.nbr)).toFixed(2),pay_method:j,tva:m,ht:null===(a=ae.today)||void 0===a?void 0:a.total.toFixed(2),ttc:((null===(s=ae.today)||void 0===s?void 0:s.total)+Ke).toFixed(2),fond_initial:null===(o=ae.lastOuverture)||void 0===o?void 0:o.montant.toFixed(2),fond_final:((null===(l=ae.lastOuverture)||void 0===l?void 0:l.montant)+(null===(d=ae.today)||void 0===d?void 0:d.total)+Ke).toFixed(2)};N.a.post("http://141.94.77.9:5000/api/printzcaisse",{PrintData:A,user_id:I}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}()},style:{marginRight:"1rem"},variant:"outline-info",children:"".concat(k("print")," X ").concat(k("ofCashier"))}),Object(G.jsx)(b.a,{className:"colture_buton",variant:"outline-danger",onClick:function(){return we(!ke)},children:"Visualiser Ticket"})]}),Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"1rem",height:"100px"},children:[Object(G.jsx)("h3",{style:{color:"#ff6b6b",fontWeight:"bold",marginRight:"1rem",width:"max-content"},children:((null===(g=ae.lastOuverture)||void 0===g?void 0:g.montant)+(null===(A=ae.today)||void 0===A?void 0:A.total)+Ke).toFixed(2)+" \u20ac"}),Object(G.jsx)(b.a,{variant:"danger",className:"clot_btn ",onClick:function(){return function(){var e,t,n,c,r,i,a,s,o,l,d,j=[],u={surPlace:0,livraison:0,emporter:0,borne:0};$.map((function(e){return"surplace"==e.order_type?u.surPlace+=1:"emporter"==e.order_type?u.livraison+=1:"livraison"==e.order_type?u.emporter+=1:1==e.from_kiosk?u.borne+=1:void 0}));var b=function(e){var t,n=null===(t=ae.today)||void 0===t?void 0:t.groups[e],c=0;null===n||void 0===n||n.forEach((function(e){c=c+e.price+e.price*e.tva/100})),j.push({qt:n.length,name:e,prix:c})};for(var h in null===(O=ae.today)||void 0===O?void 0:O.groups){var O;b(h)}var m={5.5:0,10:0,20:0};for(var p in null===(x=ae.today)||void 0===x?void 0:x.tvas){var x,v,f=null===(v=ae.today)||void 0===v?void 0:v.tvas[p];for(var g in m)g==p&&(m[g]=f)}var A={restaurant:{name:ae.Restaurant.name,address:ae.Restaurant.address,telephone:ae.Restaurant.telephone},cancledOrders:X,ordersType:u,products:null===(e=ae.today)||void 0===e||null===(t=e.orderItems)||void 0===t?void 0:t.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:Ze({id:e.item_id}).name})})),impression:q+" "+Me,ouverture:We,fermeture:q+" "+Me,commandes:ae.today.nbr,logs:null===(n=ae.today.logs)||void 0===n?void 0:n.filter((function(e){return"Annulation"==e.title_log})),clients:Object.keys((null===(c=ae.today)||void 0===c?void 0:c.clientGroups)||{}).length,ticket_moyen:(((null===(r=ae.today)||void 0===r?void 0:r.total)+Ke)/(null===(i=ae.today)||void 0===i?void 0:i.nbr)).toFixed(2),pay_method:j,tva:m,ht:null===(a=ae.today)||void 0===a?void 0:a.total.toFixed(2),ttc:((null===(s=ae.today)||void 0===s?void 0:s.total)+Ke).toFixed(2),fond_initial:null===(o=ae.lastOuverture)||void 0===o?void 0:o.montant.toFixed(2),fond_final:((null===(l=ae.lastOuverture)||void 0===l?void 0:l.montant)+(null===(d=ae.today)||void 0===d?void 0:d.total)+Ke).toFixed(2)},y={caisse_id:B,date:Date.now(),montant:ce,type:"close"};0==Z?N.a.post("http://141.94.77.9:5000/api/CloseCaisse",{user_id:I,user:S,montant:ce,historiquePrint:y}).then((function(e){localStorage.clear(),w(Ee()),Q.a.fire({position:"center",icon:"success",title:"Caisse ferm\xe9e",showConfirmButton:!1,timer:1500}),N.a.post("http://141.94.77.9:5000/api/historiqueZcaisse",{PrintData:A,user_id:I}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),setTimeout((function(){_("/init")}),1500)})):1==Z?Q.a.fire({position:"center",icon:"error",title:"Il ya ".concat(Z," commande en cours"),showConfirmButton:!1,timer:2500}):Q.a.fire({position:"center",icon:"error",title:"Il ya ".concat(Z," commandes en cours"),showConfirmButton:!1,timer:2500})}()},children:k("close")})]})]})]})]})]}):Object(G.jsxs)("div",{className:"loading-z-caisse",children:[Object(G.jsx)("h1",{children:"Chargement de caisse..."}),Object(G.jsx)("img",{src:Ve,alt:"loading"})]}),Object(G.jsxs)(fe.a,{show:ke,onHide:function(){return we(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0}),";",Object(G.jsx)(fe.a.Body,{children:Object(G.jsx)("div",{className:"z-cais_show_ticket",children:Object(G.jsx)(Ft,{products:null===(y=ae.today)||void 0===y||null===(C=y.orderItems)||void 0===C?void 0:C.map((function(e){var t;return Object(Y.a)(Object(Y.a)({},e),{},{totalPrice:e.price*e.quantity,name:null===(t=Ze({id:e.item_id}))||void 0===t?void 0:t.name})})),data:pe,recap:ae,selectedDate:q,tvasum:Ke})})}),Object(G.jsx)(fe.a.Footer,{children:Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return we(!1)},children:"Fermer"})})]}),Object(G.jsxs)(fe.a,{show:Le,onHide:function(){return Fe(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)("h4",{children:"Historique Z-Caisse"})}),Object(G.jsx)(fe.a.Body,{children:Object(G.jsx)("div",{className:"z-cais_history",children:0==ze.length?"Il n'y a pas d'historique encore ... ":ze.map((function(e,t){return Object(G.jsxs)("div",{className:"z-history",children:[Object(G.jsxs)("h6",{children:[" Du ",e.data.ouverture,"  au ",e.data.fermeture]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(b.a,{variant:"info",onClick:function(){return t=e.data,void N.a.post("http://141.94.77.9:5000/api/printzcaisse",{PrintData:t,user_id:I}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));var t},children:"Imprimer"}),Object(G.jsx)(b.a,{variant:"success",onClick:function(){return function(e){Be(!0),ye(e),console.log(e)}(e.data)},style:{marginLeft:"1rem"},children:"Afficher"})]})]},t)}))})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)("div",{children:Object(G.jsx)(b.a,{variant:"success",onClick:function(){return _("/data/zcaisse")},children:"Zcaisse"})}),Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return Fe(!1)},children:"Fermer"})]})]}),Object(G.jsxs)(fe.a,{show:Te,onHide:function(){return Be(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0}),";",Object(G.jsx)(fe.a.Body,{children:Object(G.jsx)("div",{className:"z-cais_show_ticket",children:Object(G.jsx)(zt,{zHistory:Ae})})}),Object(G.jsx)(fe.a.Footer,{children:Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return Be(!1)},children:"Fermer"})})]})]})},Qt=(n(486),n(487),function(){var e=Object(h.d)((function(e){return e.data})),t=Object(r.useState)({products:e.products,categories:e.categories,nsteps:e.nSteps}),n=Object(s.a)(t,2),c=n[0];n[1];console.log(c);var i=Object(r.useState)(0),a=Object(s.a)(i,2),o=a[0],l=a[1],d=Object(r.useState)(0),j=Object(s.a)(d,2),u=j[0],m=j[1],p=Object(r.useState)(0),x=Object(s.a)(p,2),v=x[0],f=x[1],g=function(e){return c.products.find((function(t){return t.id==e}))||{}};return Object(r.useEffect)((function(){console.log("cat",o),console.log("prod",u),console.log("step",v),console.log(c.nsteps.filter((function(e){return e.product_id==u}))[0])}),[u,o,v]),Object(G.jsxs)("div",{className:"all",children:[Object(G.jsx)("div",{className:"cats",children:c.categories.filter((function(e){return 746==e.id})).map((function(e){return Object(G.jsxs)("div",{className:"cat",onClick:function(){l(e.id),f(0)},children:[Object(G.jsx)("img",Object(O.a)({src:e.picture,alt:"",height:"70px"},"height","70px")),Object(G.jsx)("h6",{children:e.name})]})}))}),Object(G.jsxs)("div",{className:"prods",children:[0==v?c.products.filter((function(e){return e.cat_id==o})).map((function(e){return Object(G.jsxs)("div",{className:"prod",onClick:function(){m(e.id),e.nsteps>v&&f(v+1)},children:[Object(G.jsx)("img",Object(O.a)({src:e.image,alt:"",height:"70px"},"height","70px")),Object(G.jsxs)("h6",{children:[e.name," ",Object(G.jsxs)("span",{children:["- ",e.price," $"]})," "]}),Object(G.jsx)("p",{children:e.description})]})})):c.nsteps.filter((function(e){return e.menu_id==u}))[0][v].choice.map((function(e){return Object(G.jsxs)("div",{className:"prod",children:[Object(G.jsx)("img",Object(O.a)({src:g(e).image,alt:"",height:"70px"},"height","70px")),Object(G.jsxs)("h6",{children:[g(e).name," ",Object(G.jsxs)("span",{children:["- ",g(e).price," $"]})," "]}),Object(G.jsx)("p",{children:g(e).description})]})})),g(u).nsteps>=v&&v>0?Object(G.jsx)(b.a,{onClick:function(){return f(v-1)},children:"retour"}):"",g(u).nsteps>v&&v>0?Object(G.jsx)(b.a,{onClick:function(){console.log(g(u)),g(u).nsteps>v&&f(v+1)},children:"suivant"}):"",g(u).nsteps==v?Object(G.jsx)(b.a,{children:"finir"}):""]}),Object(G.jsx)("div",{className:"cart"})]})}),Gt=(n(488),n.p,function(e){var t,n,c,a,l,d,j,u,b=e.order,O=e.thisDate,m=(e.ping,localStorage.getItem("address")),p=localStorage.getItem("user_id");console.log(b);Object(o.g)().table_id;var x=localStorage.getItem("telephone"),v=Object(r.useState)(b),f=Object(s.a)(v,2),g=f[0],A=f[1],y=(Object(h.d)((function(e){return e.order.checkoutData})),localStorage.getItem("currency")),C=Object(r.useState)(!0),k=Object(s.a)(C,2),w=(k[0],k[1],Object(r.useState)({})),_=Object(s.a)(w,2),S=_[0],I=_[1];Object(r.useEffect)((function(){N.a.post("/api/getRestaurantData",{user_id:p}).then((function(e){console.log(e.data),I(e.data)})).catch((function(e){console.log(e)}))}),[g]),Object(r.useEffect)((function(){A(b)}),[b]),console.log(S),console.log(g);var T,B,D=(T=(null===g||void 0===g?void 0:g.tvas)||[],B="perc",T.reduce((function(e,t){return(e[t[B]]=e[t[B]]||[]).push(t.value),e}),{}));console.log(D);var P=0,L=!1;b.orderItems;if(null===(t=b.orderItems)||void 0===t||t.forEach((function(e){1==e.is_alcool&&(L=!0)})),1==L)P=20;else switch(void 0==b.orderType?b.order_type:b.orderType){case"surplace":case"sur place":default:P=10;break;case"emporter":case"livraison":P=5.5}var E=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})};return Object(G.jsx)(K.a,{fluid:!0,children:Object(G.jsx)("div",{className:"ticket",children:Object(G.jsxs)("div",{className:"ticket_container",children:[Object(G.jsx)("h3",{style:{marginTop:"0.5rem"},children:Object(G.jsx)("b",{children:"Ticket d'encaissement"})}),Object(G.jsxs)("p",{children:[S.name," ",Object(G.jsx)("br",{}),m||"-"+x||""," ",Object(G.jsx)("br",{}),"tel: ",S.telephone]}),Object(G.jsx)("h1",{children:Object(G.jsx)("b",{style:{fontSize:"56px"},children:null===g||void 0===g?void 0:g.order_id})}),Object(G.jsxs)("div",{className:"ticket_item",style:{flexWrap:"wrap"},children:[Object(G.jsxs)("p",{children:["Client :",g.customer_name]}),Object(G.jsxs)("p",{children:["Type :",g.orderType]}),Object(G.jsxs)("p",{children:["Numero :",g.customer_tel]}),Object(G.jsxs)("p",{children:["Adresse:",g.customer_adress]})]}),Object(G.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),g.orderItems&&g.orderItems.map((function(e,t){var n,c;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"ticket_item",children:[Object(G.jsx)("p",{children:t+1+"-"+(null===e||void 0===e?void 0:e.name)}),Object(G.jsxs)("div",{style:{display:"flex",width:"30%",justifyContent:"space-evenly"},children:[Object(G.jsx)("p",{children:void 0==(null===e||void 0===e?void 0:e.qt)?e.quantity:e.qt+"x"}),Object(G.jsxs)("p",{children:["  ".concat(null===e||void 0===e?void 0:e.price.toFixed(2)," ")," ",E("<i>".concat(y,"</i>"))]})]})]}),e.stepItems&&Object.keys(e.stepItems).length?Object(G.jsx)("div",{style:{display:"flex",flexDirection:"column"},className:"step_item",children:Object.keys(e.stepItems).map((function(t){return e.stepItems[t].map((function(e){return Object(G.jsxs)("span",{style:{textAlign:"start",color:"grey"},children:["-",e.name]})}))}))}):(null===e||void 0===e?void 0:e.steps)!=[]?Object(G.jsx)("div",{style:{display:"flex",flexDirection:"column"},className:"step_item",children:null===(n=e.steps)||void 0===n?void 0:n.map((function(e){return Object(G.jsxs)("span",{style:{textAlign:"start",color:"grey"},children:["-",e.name]})}))}):"",(null===e||void 0===e?void 0:e.extras)!=[]?null===e||void 0===e||null===(c=e.extras)||void 0===c?void 0:c.map((function(e){return e.default_quantity>0?Object(G.jsxs)("div",{className:"ticket_extra",children:[Object(G.jsxs)("p",{children:["+ ",e.title]}),Object(G.jsxs)("div",{style:{display:"flex",width:"30%",justifyContent:"space-evenly"},children:[" ",Object(G.jsx)("p",{children:e.default_quantity+"x"}),Object(G.jsxs)("p",{children:["  ".concat(e.price.toFixed(2)," "),E("<i>".concat(y,"</i>"))]})]})]}):""})):""]})})),Object(G.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),Object(G.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(G.jsx)("p",{children:"Total HT : "}),Object(G.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(G.jsxs)("p",{children:[null===g||void 0===g?void 0:g.totalPrice," ",E("<i>".concat(y,"</i>"))]})})]}),(console.log(P),Object(G.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(G.jsxs)("p",{children:["TVA(",P,"%):"]}),Object(G.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(G.jsxs)("p",{children:[((null===g||void 0===g?void 0:g.totalPrice)*P/100).toFixed(2),E("<i>".concat(y,"</i>"))]})})]})),Object(G.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(G.jsx)("p",{children:"Total TTC : "}),Object(G.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(G.jsxs)("p",{children:[((null===g||void 0===g?void 0:g.totalPrice)+(null===g||void 0===g?void 0:g.totalPrice)*P/100).toFixed(2),E("<i>".concat(y,"</i>"))]})})]}),(null===(n=g.paymentsInDb)||void 0===n?void 0:n.length)>0&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("span",{style:{marginBottom:"0.5rem"},children:"-------------------------------------"}),null===(c=g.paymentsInDb)||void 0===c?void 0:c.map((function(e){return Object(G.jsxs)("div",{className:"ticket_item ticket_last",children:[Object(G.jsxs)("p",{children:["Pay\xe9(",e.pay_method,")"]}),Object(G.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(G.jsxs)("p",{children:[e.amount.toFixed(2),E("<i>".concat(y,"</i>"))]})})]})})),Object(G.jsx)("div",{className:"ticket_item ticket_last",children:(null===(a=g.paymentsInDb)||void 0===a?void 0:a.reduce((function(e,t){return e+t.amount}),0))-((null===g||void 0===g?void 0:g.totalPrice)+(null===g||void 0===g?void 0:g.totalPrice)*P/100)>0?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("p",{children:"Rendre monnaie"}),Object(G.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(G.jsxs)("p",{children:[null===(l=(null===(d=g.paymentsInDb)||void 0===d?void 0:d.reduce((function(e,t){return e+t.amount}),0))-((null===g||void 0===g?void 0:g.totalPrice)+(null===g||void 0===g?void 0:g.totalPrice)*P/100))||void 0===l?void 0:l.toFixed(2),E("<i>".concat(y,"</i>"))]})})]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("p",{children:"Reste a payer"}),Object(G.jsx)("div",{style:{display:"flex",width:"20%",justifyContent:"space-evenly"},children:Object(G.jsxs)("p",{children:[Math.abs(null===(j=(null===(u=g.paymentsInDb)||void 0===u?void 0:u.reduce((function(e,t){return e+t.amount}),0))-((null===g||void 0===g?void 0:g.totalPrice)+(null===g||void 0===g?void 0:g.totalPrice)*P/100))||void 0===j?void 0:j.toFixed(2)),E("<i>".concat(y,"</i>"))]})})]})})]}),Object(G.jsx)("p",{children:Object(G.jsx)("b",{children:null!==g&&void 0!==g&&g.part&&"partager"==(null===g||void 0===g?void 0:g.type)?Object(G.jsxs)("p",{style:{display:"flex"},children:["Votre part pour 1/".concat(null===g||void 0===g?void 0:g.part," personnes est : ").concat((((null===g||void 0===g?void 0:g.totalPrice)+(null===g||void 0===g?void 0:g.totalPrice)*P/100)/g.part).toFixed(2),"\n              "),E("<i>".concat(y,"</i>"))]}):""})}),Object(G.jsx)("p",{children:O}),Object(G.jsx)("img",{src:"https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=".concat(null===g||void 0===g?void 0:g.order_id,"&choe=UTF-8+"),width:"40%"}),Object(G.jsxs)("p",{children:["Scanner le numero de Commande ",null===g||void 0===g?void 0:g.order_id]})]})})})}),Mt=(n(496),function(){var e,t,n,c,a,j,O,m,p,x,v,f,g,A,y,C,k,w,_,S=new Date,I=S.getHours()+":"+S.getMinutes(),T=S.toISOString().substr(0,10),B=Object(r.useState)(0),D=Object(s.a)(B,2),P=(D[0],D[1],Object(r.useState)({prenom:"",company:"",code1:"",code2:"",etage:"",interphone:"",name:"",phone:"",address:"",post:"",city:"",message:"",email:"",type:"emporter",nbrCouverts:1,date:T,time:I,id:0})),L=Object(s.a)(P,2),E=L[0],F=L[1],R=Object(r.useState)(!1),q=Object(s.a)(R,2),H=q[0],M=q[1],W=Object(r.useState)(!1),Z=Object(s.a)(W,2),X=Z[0],U=Z[1],$=Object(r.useState)(!1),ne=Object(s.a)($,2),ce=ne[0],re=ne[1],ie=localStorage.getItem("username")||"",ae=Object(o.g)(),se=Object(h.c)(),oe=Object(o.f)(),le=ae.table_id;console.log(ae);var de=Object(h.d)((function(e){return e.order.checkoutData})),je=Object(h.d)((function(e){return e.order.selectedTable})),ue=Object(h.d)((function(e){return e.order.client})),be=Object(h.d)((function(e){return e.data.clients}));console.log(de);var he=de.filter((function(e){return e.order_id==le}))[0]||{};console.log(he),void 0==he.totalPrice&&(he=Object(Y.a)(Object(Y.a)({},he),{},{totalPrice:he.price}));var Oe=new Date(void 0==he.Date?he.date:he.Date),me=null===Oe||void 0===Oe?void 0:Oe.getDate(),pe=null===Oe||void 0===Oe?void 0:Oe.getMonth(),xe=null===Oe||void 0===Oe?void 0:Oe.getFullYear(),ge=null===Oe||void 0===Oe?void 0:Oe.getHours(),Ae=null===Oe||void 0===Oe?void 0:Oe.getMinutes(),ye=Object(r.useState)(!1),Ce=Object(s.a)(ye,2),Ne=Ce[0],ke=Ce[1],we=Object(r.useState)(!1),_e=Object(s.a)(we,2),Se=_e[0],Be=_e[1],De=Object(r.useState)(!1),Pe=Object(s.a)(De,2),Le=Pe[0],Ee=Pe[1],Fe=Object(r.useState)(!1),Re=Object(s.a)(Fe,2),qe=(Re[0],Re[1],Object(r.useState)(!1)),ze=Object(s.a)(qe,2),He=ze[0],Me=ze[1],Ve=Object(r.useState)(!1),Ue=Object(s.a)(Ve,2),Ye=Ue[0],et=(Ue[1],Object(r.useState)(1)),tt=Object(s.a)(et,2),nt=tt[0],ct=tt[1],rt=Object(r.useState)("partager"),it=Object(s.a)(rt,2),at=it[0],st=it[1],ot=Object(r.useState)("Especes"),dt=Object(s.a)(ot,2),jt=dt[0],ut=dt[1],bt=Object(r.useState)(0),ht=Object(s.a)(bt,2),Ot=ht[0],mt=ht[1],pt=Object(r.useState)(0),xt=Object(s.a)(pt,2),vt=xt[0],ft=xt[1],gt=Object(r.useState)(""),At=Object(s.a)(gt,2),yt=At[0],Ct=(At[1],Object(r.useState)(!1)),Nt=Object(s.a)(Ct,2),kt=Nt[0],wt=Nt[1],_t=Object(r.useState)(""),St=Object(s.a)(_t,2),It=(St[0],St[1]),Tt=Object(r.useState)(1),Bt=Object(s.a)(Tt,2),Dt=Bt[0],Pt=Bt[1],Lt=Object(r.useState)("pay"),Et=Object(s.a)(Lt,2),Ft=Et[0],Rt=Et[1],qt=Object(r.useState)(!1),zt=Object(s.a)(qt,2),Ht=(zt[0],zt[1],Object(r.useState)("")),Qt=Object(s.a)(Ht,2),Mt=Qt[0],Wt=Qt[1],Zt=Object(r.useState)([]),Xt=Object(s.a)(Zt,2),Vt=Xt[0],Kt=Xt[1],Jt=localStorage.getItem("user_id"),Ut=function(e){M(!0),he=Object(Y.a)(Object(Y.a)({},he),{},{client_id:e,customer_name:E.name,customer_tel:ue.phone}),N.a.post("http://141.94.77.9:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},he),{},{nbrCouverts:Dt,message:yt,pay_method:jt,amount:Ot,amountPaid:vt})}).then((function(e){console.log(e.data),console.log(Ot),console.log(vt),Kt([].concat(Object(te.a)(Vt),[{type:jt,value:Ot}]));["Glovo","Just-Eat","Deliveroo","Uber Eats","ticket restaurant"].includes(jt);setTimeout((function(){var e,t;vt+Ot>=((null===(e=he)||void 0===e?void 0:e.totalPrice)+(null===(t=he)||void 0===t?void 0:t.totalPrice)*en/100).toFixed(2)&&on()}),1),mt(0)})).catch((function(e){console.log(e)}))},Yt=function(){0==Le?N.a.post("http://141.94.77.9:5000/api/createClient",{user_id:Jt,client:{etage:E.etage||0,interphone:E.interphone||0,supprimer:0,societe:E.company||"",nom_prenom:E.name||"",telephone:E.phone||"",adresse:E.address||"",code_postal:E.post||0,ville:E.city||"",email:E.email||"",code_1:E.code1||"",code_2:E.code2||""}}).then((function(e){Ut(e.data.id)})).catch((function(e){return console.log(e)})):(se(Te({clientone:E})),Ut())},$t=function(e){Ee(!0);var t=null===be||void 0===be?void 0:be.filter((function(t){var n,c,r;return(null===(n=t.nom_prenom)||void 0===n?void 0:n.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(c=t.telephone)||void 0===c?void 0:c.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase()))}))[0];t&&F(Object(Y.a)(Object(Y.a)({},E),{},{id:t.id,prenom:t.nom_prenom,company:t.societe,code1:t.code_1,code2:t.code_2,etage:t.etage,interphone:t.interphone,name:t.nom_prenom,phone:t.telephone,address:t.adresse,post:t.code_postal,city:t.ville,email:t.email}))},en=0,tn=!1;he.orderItems;if(null===(e=he)||void 0===e||null===(t=e.orderItems)||void 0===t||t.forEach((function(e){20==e.tva&&(tn=!0)})),1==tn)en=20;else switch(void 0==he.orderType?he.order_type:he.orderType){case"surplace":case"sur place":default:en=10;break;case"emporter":case"livraison":en=5.5}var nn=function(){var e,t;N.a.post("http://141.94.77.9:5000/api/verifyCoupon",{code:Mt,user_id:Jt,paidamount:null===(e=he)||void 0===e||null===(t=e.totalPrice)||void 0===t?void 0:t.toFixed(2)}).then((function(e){var t=e.data.couponInDb.discount,n=(new Date).toISOString().slice(0,10);e.data.couponInDb.expires_at>n?(mt(Number(e.data.couponInDb.discount+Ot)),ut("ticket restaurant"),Q.a.fire({icon:"success",title:"Coupon valid\xe9 pour ".concat(t," euro"),showConfirmButton:!1,timer:1500})):Q.a.fire({icon:"warning",title:"Validit\xe9 epuis\xe9",showConfirmButton:!1,timer:1500})})).catch((function(e){return Q.a.fire({icon:"warning",title:"Coupon non valide",showConfirmButton:!1,timer:1500})}))},cn=function(){return ke(!1)},rn=me+"-"+pe+"-"+xe+"-"+ge+":"+Ae,an=function(){var e,t,n=(Ot-((null===(e=he)||void 0===e?void 0:e.totalPrice)+(null===(t=he)||void 0===t?void 0:t.totalPrice)*en/100)).toFixed(2);console.log(n),n>0?Q.a.fire({title:"Comment voulez-vous rendre la monnaies ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Avoir",denyButtonText:"Rendre monnaies directement"}).then((function(e){e.isDenied?N.a.post("http://141.94.77.9:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},he),{},{nbrCouverts:Dt,message:yt,pay_method:jt,amount:Ot,amountPaid:vt})}).then((function(e){console.log(e.data),console.log(Ot),console.log(vt),Kt([].concat(Object(te.a)(Vt),[{type:jt,value:Ot}]));["Glovo","Just-Eat","Deliveroo","Uber Eats","ticket restaurant"].includes(jt);setTimeout((function(){var e,t;vt+Ot>=((null===(e=he)||void 0===e?void 0:e.totalPrice)+(null===(t=he)||void 0===t?void 0:t.totalPrice)*en/100).toFixed(2)&&on()}),1),mt(0)})).catch((function(e){console.log(e)})):e.isConfirmed?Q.a.fire({title:"Client existant ?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Oui",denyButtonText:"Non"}).then((function(e){e.isDenied?(M(!0),U(!0)):e.isConfirmed&&(Be(!0),M(!0))})):e.isConfirmed&&""!=he.customer_tel||e.isConfirmed&&""==he.customer_tel?(M(!0),U(!0)):e.isConfirmed&&M(!0)})):N.a.post("http://141.94.77.9:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},he),{},{nbrCouverts:Dt,message:yt,pay_method:jt,amount:Ot,amountPaid:vt})}).then((function(e){console.log(e.data),console.log(Ot),console.log(vt),Kt([].concat(Object(te.a)(Vt),[{type:jt,value:Ot}]));["Glovo","Just-Eat","Deliveroo","Uber Eats","ticket restaurant"].includes(jt);setTimeout((function(){var e,t;vt+Ot>=((null===(e=he)||void 0===e?void 0:e.totalPrice)+(null===(t=he)||void 0===t?void 0:t.totalPrice)*en/100).toFixed(2)&&on()}),1),mt(0)})).catch((function(e){console.log(e)}))},sn=function(){console.log("called"),cn(),nt>1?N.a.post("http://141.94.77.9:5000/api/updatehow_paid",{type:at,order:he}).then((function(e){console.log(e.data),e.data&&oe("/checkout2/".concat(le,"/").concat(at,"/").concat(nt))})).catch((function(e){console.log(e)})):Me(!0)},on=function(){var e,t,n,c,r,i,a,s,o,l,d=0,j=!1;he.orderItems;if(he.orderItems.forEach((function(e){20==e.tva&&(j=!0)})),1==j)d=20;else switch(he.orderType){case"surplace":default:d=10;break;case"emporter":case"livraison":d=5.5}(N.a.post("http://141.94.77.9:5000/api/printFinalOrder",{isavoir:H,user_id:Jt,order:Object(Y.a)(Object(Y.a)({},he),{},{tvas:d,nbrCouverts:Dt,table_number:he.table||"",order_id:he.order_id,Date:new Date,amount:Ot>=(null===(e=he)||void 0===e?void 0:e.totalPrice)+(100*en/(null===(t=he)||void 0===t?void 0:t.totalPrice)).toFixed(2)?((null===(n=he)||void 0===n?void 0:n.totalPrice)+100*en/(null===(c=he)||void 0===c?void 0:c.totalPrice)).toFixed(2)-vt:Ot-vt,amountPaid:Ot,paymentType:jt}),type:"payertout"}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),1==kt)&&N.a.post("http://141.94.77.9:5000/api/printnotefrais",{user_id:Jt,order:Object(Y.a)(Object(Y.a)({},he),{},{tvas:d,nbrCouverts:Dt,table_number:he.table||"",order_id:he.order_id,Date:new Date,amount:Ot>=(null===(a=he)||void 0===a?void 0:a.totalPrice)+((null===(s=he)||void 0===s?void 0:s.totalPrice)*en/100).toFixed(2)?((null===(o=he)||void 0===o?void 0:o.totalPrice)+(null===(l=he)||void 0===l?void 0:l.totalPrice)*en/100).toFixed(2)-vt:Ot-vt,amountPaid:Ot,paymentType:jt})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));var u=(Ot-((null===(r=he)||void 0===r?void 0:r.totalPrice)+(null===(i=he)||void 0===i?void 0:i.totalPrice)*en/100)).toFixed(2),b=Ot.toFixed(2);"ticket restaurant"==jt||1==H?(Q.a.fire({icon:"success",title:"<h5 >"+"le paiement effectu\xe9 avec succ\xe8s avec montant: <span style='color:red'>".concat(b,"\u20ac</span> D'avoir:<span style='color:green'>").concat(u,"\u20ac</span> ")+"</h5>",showConfirmButton:!1,timer:3e3}),re(!1),oe("/main"),se(Ie({order_id:le}))):(Q.a.fire({icon:"success",title:"<h5 >"+"le paiement effectu\xe9 avec succ\xe8s avec montant: <span style='color:red'>".concat(b,"\u20ac</span> du reste:<span style='color:green'>").concat(u,"\u20ac</span> ")+"</h5>",showConfirmButton:!1,timer:3e3}),re(!1),oe("/main"),se(Ie({order_id:le})))},ln=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},dn=localStorage.getItem("currency"),jn=z().t,un=Object(r.useRef)(),bn=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 , {bksp}"]),hn=Object(s.a)(bn,2),On=hn[0];hn[1];return Object(G.jsxs)("div",{style:{backgroundColor:"white"},children:[Object(G.jsx)(V.a,{variant:"warning",className:"navbar",children:Object(G.jsxs)(K.a,{className:"history-navbar",children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{onClick:function(){return oe("/main")},children:Object(G.jsx)("img",{width:"45px",src:$e,className:"table-icon"})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(G.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return oe("/cloture")},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"checkout-cassier",children:[Object(G.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),jn("cashier")]})})]}),Object(G.jsxs)("h6",{className:"chekout-server",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:ie}),Object(G.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void oe("/")},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(G.jsxs)(K.a,{fluid:!0,children:[Object(G.jsxs)(We.a,{className:"row_h",children:[Object(G.jsx)(Ze.a,{xs:8,className:"col_h",children:Object(G.jsxs)("div",{style:{marginTop:"1rem",height:"max-content",padding:"1rem",boxShadow:"rgba(17, 12, 46, 0.15) 0px 48px 100px 0px",overflow:"auto"},children:[Object(G.jsxs)("div",{style:{justifyContent:"space-between",display:"flex"},children:[Object(G.jsxs)("div",{className:"leftt",children:[Object(G.jsx)("h6",{className:"checkout-tbd",children:Object(G.jsx)("b",{children:"Commande"})}),Object(G.jsxs)("h6",{className:"checkout-tbd",children:[Object(G.jsx)(l.a,{icon:d.K,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(G.jsxs)("b",{children:["#",he.order_id]})]}),Object(G.jsxs)("h6",{className:"checkout-tbd",children:[Object(G.jsx)(l.a,{icon:d.s,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(G.jsx)("b",{children:rn})]}),"surplace"==he.orderType&&Object(G.jsxs)("h6",{className:"checkout-tbd",children:[Object(G.jsx)(l.a,{icon:d.K,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(G.jsxs)("b",{children:["Table ",je.nbr]})]})]}),Object.keys(E).length>0?Object(G.jsxs)("div",{className:"rightt",children:[Object(G.jsx)("h6",{className:"checkout-tbd",children:Object(G.jsx)("b",{children:E.name})}),Object(G.jsxs)("h6",{className:"checkout-tbd",children:[Object(G.jsx)(l.a,{icon:d.y,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(G.jsx)("b",{children:E.phone})]}),Object(G.jsxs)("h6",{className:"checkout-tbd",children:[Object(G.jsx)(l.a,{icon:d.u,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(G.jsx)("b",{children:E.address})]}),Object(G.jsxs)("h6",{className:"checkout-tbd",children:[Object(G.jsx)(l.a,{icon:d.n,style:{color:"#ff6b6b",marginRight:"1rem"}}),Object(G.jsx)("b",{children:he.orderType})]})]}):""]}),Object(G.jsxs)(ve.a,{hover:!0,children:[Object(G.jsx)("thead",{className:"tbd",children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Article"}),Object(G.jsx)("th",{children:"Prix"}),Object(G.jsx)("th",{children:"Qt"}),Object(G.jsx)("th",{children:"Total"})]})}),Object(G.jsx)("tbody",{className:"ccc",children:null===(n=he)||void 0===n||null===(c=n.orderItems)||void 0===c?void 0:c.map((function(e,t){var n,c;return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:t}),Object(G.jsxs)("td",{children:[e.name,Object(G.jsx)("br",{})]}),Object(G.jsxs)("td",{style:{display:"flex"},children:[null===(n=e.price)||void 0===n?void 0:n.toFixed(2)," ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsx)("td",{children:e.qt}),Object(G.jsxs)("td",{style:{display:"flex"},children:[null===(c=e.price)||void 0===c?void 0:c.toFixed(2)," ",ln("<i>".concat(dn,"</i>"))]})]})}))})]}),Object(G.jsx)(Ze.a,{xs:3,children:Object(G.jsx)(ve.a,{children:Object(G.jsxs)("tbody",{className:"checkout-tbd",style:{width:"50%",height:"auto",align:"right"},children:[Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:Object(G.jsx)("h6",{className:"checkout-tbd",style:{display:"flex",fontWeight:"bold"},children:"Total HT :"})}),Object(G.jsx)("td",{children:Object(G.jsxs)("span",{style:{color:"#ff6b6b",display:"flex",marginLeft:"0.5rem",fontWeight:"bold"},children:[null===(a=he)||void 0===a||null===(j=a.totalPrice)||void 0===j?void 0:j.toFixed(2)," ",ln("<i>".concat(dn,"</i>"))]})})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:Object(G.jsxs)("h6",{className:"checkout-tbd",style:{display:"flex",fontWeight:"bold"},children:["TVA( ",en,"%)"]})}),Object(G.jsx)("td",{children:Object(G.jsxs)("span",{style:{color:"#ff6b6b",display:"flex",marginLeft:"0.5rem",fontWeight:"bold"},children:[((null===(O=he)||void 0===O?void 0:O.totalPrice)*en/100).toFixed(2),ln("<i>".concat(dn,"</i>"))]})})]}),Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:Object(G.jsxs)("h6",{className:"checkout-tbd",style:{display:"flex",fontWeight:"bold"},children:["TOTAL TTC :"," "]})}),Object(G.jsx)("td",{children:Object(G.jsxs)("span",{style:{color:"#ff6b6b",display:"flex",marginLeft:"0.5rem",fontWeight:"bold"},children:[" ",null===(m=(null===(p=he)||void 0===p?void 0:p.totalPrice)+(null===(x=he)||void 0===x?void 0:x.totalPrice)*en/100)||void 0===m?void 0:m.toFixed(2)," ",ln("<i>".concat(dn,"</i>"))]})})]})]})})}),Object(G.jsxs)("div",{className:"regler-addition-btns",children:[Object(G.jsx)(b.a,{variant:"outline-info",onClick:function(){return ke(!0)},className:"btn_chee",children:"R\xe9gler addition"}),"cooking"!=(null===(v=he)||void 0===v?void 0:v.status)&&"ready"!=(null===(f=he)||void 0===f?void 0:f.status)?Object(G.jsxs)(b.a,{variant:"outline-info",onClick:function(){var e;return oe("/menu/"+(null===(e=he)||void 0===e?void 0:e.order_id))},className:"btn_chee",children:[Object(G.jsx)(l.a,{icon:d.q,style:{marginRight:"0.5rem"}}),"Modifier la commande"]}):""]})]})}),Object(G.jsx)(Ze.a,{xs:4,className:"col_h",children:Object(G.jsx)(Gt,{order:he,thisDate:rn})})]}),Object(G.jsx)(Ke,{}),Object(G.jsxs)(fe.a,{show:Ne,onHide:cn,children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Addition"})}),Object(G.jsxs)(fe.a.Body,{children:[Object(G.jsxs)(We.a,{children:[Object(G.jsxs)(Ze.a,{xs:4,style:{borderRight:"1px solid black"},children:[Object(G.jsxs)("h5",{children:[Object(G.jsx)(l.a,{icon:d.J,style:{color:"#ff6b6b",marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:"Nombre de parts :"})]}),Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",alignItems:"center",marginTop:"15%"},children:[Object(G.jsx)(l.a,{color:"#ff6b6b",icon:d.d,size:"2x",onClick:function(){nt>1&&ct(nt-1)}}),Object(G.jsx)("h3",{children:nt}),Object(G.jsx)(l.a,{color:"#ff6b6b",icon:d.e,size:"2x",onClick:function(){nt<he.nbrCouverts&&ct(nt+1)}})]})]}),Object(G.jsx)(Ze.a,{xs:8,children:Object(G.jsxs)("div",{style:{display:"block",width:"80%",textAlign:"center"},children:[Object(G.jsx)("h5",{children:"Choix de l'addition"}),Object(G.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:[Object(G.jsxs)("div",{onClick:function(){return st("partager")},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(G.jsx)(l.a,{icon:d.h,size:"6x",color:"partager"==at?"#ff6b6b":"grey",className:"faborder"}),Object(G.jsx)("h6",{children:"partager"})]}),Object(G.jsxs)("div",{onClick:function(){return st("repartir")},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(G.jsx)(l.a,{icon:d.i,size:"6x",color:"repartir"==at?"#ff6b6b":"grey",className:"faborder"}),Object(G.jsx)("h6",{children:"Repartir"})]}),Object(G.jsx)(b.a,{variant:"info",onClick:function(){return sn()},className:"btn_che",style:{marginLeft:"2rem",backgroundColor:"#ff6b6b"},children:Object(G.jsx)("b",{children:"Payer tout"})})]})]})})]}),";"]}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return oe("/main")},children:"Annuler"}),Object(G.jsx)(b.a,{variant:"secondary",onClick:cn,children:"Fermer"}),Object(G.jsx)(b.a,{className:"bgcolor",variant:"warning",onClick:function(){return sn()},children:"Payer"})]})]}),Object(G.jsxs)(fe.a,{show:He,onHide:function(){return Me(!1)},children:[X?Object(G.jsx)("div",{className:"trans_client",children:Object(G.jsxs)("div",{className:"client_forms",children:[Object(G.jsxs)(Ge.a,{auto:!0,children:[Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:E.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return F(Object(Y.a)(Object(Y.a)({},E),{},{name:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsxs)(Ze.a,{children:[(null===(g=E.telephone)||void 0===g?void 0:g.length)>0&&(null===(A=E.telephone)||void 0===A?void 0:A.length)<10?Object(G.jsx)(Qe.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(G.jsx)(Xe.a,{onInputChange:function(e){F(Object(Y.a)(Object(Y.a)({},E),{},{phone:e})),Ee(!1)},onChange:function(e){$t(e[0]),console.log(e)},options:be.map((function(e){return e.telephone})),placeholder:"telephone"})]})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:E.message,as:"textarea",type:"text",placeholder:"remarque",onChange:function(e){return F(Object(Y.a)(Object(Y.a)({},E),{},{message:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:E.date,type:"date",defaultValue:E.date,onChange:function(e){return F(Object(Y.a)(Object(Y.a)({},E),{},{date:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:E.time,type:"time",defaultValue:E.time,onChange:function(e){return F(Object(Y.a)(Object(Y.a)({},E),{},{time:e.target.value}))}})})]})})]}),Object(G.jsx)(b.a,{onClick:function(){return Yt()},children:"Valider"})]})}):"",Se?Object(G.jsx)("div",{className:"trans_client",children:Object(G.jsxs)("div",{className:"client_forms",children:[Object(G.jsxs)(Ge.a,{auto:!0,children:[Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsxs)(Ze.a,{children:[(null===(y=E.telephone)||void 0===y?void 0:y.length)>0&&(null===(C=E.telephone)||void 0===C?void 0:C.length)<10?Object(G.jsx)(Qe.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(G.jsx)(Xe.a,{onInputChange:function(e){F(Object(Y.a)(Object(Y.a)({},E),{},{phone:e})),Ee(!1)},onChange:function(e){$t(e[0]),console.log(e)},options:be.map((function(e){return e.telephone})),placeholder:"telephone"})]})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:E.name,type:"text",placeholder:"nom/prenom",onChange:function(e){return F(Object(Y.a)(Object(Y.a)({},E),{},{name:e.target.value}))}})})})})]}),Object(G.jsx)(b.a,{onClick:function(){return Yt()},children:"Valider"})]})}):"",Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"finaliser Commande"})}),Object(G.jsx)(fe.a.Body,{children:Object(G.jsxs)(We.a,{children:[Object(G.jsxs)(Ze.a,{xs:"5",children:[Object(G.jsxs)(Ge.a,{onSubmit:function(e){e.preventDefault(),nn()},children:[Object(G.jsxs)(Ge.a.Label,{children:[" ",Object(G.jsx)("b",{children:"Paiement Re\xe7u"})," "]}),Object(G.jsx)(Ge.a.Control,{onFocus:function(e){Rt("pay"),un.current.setInput("")},placeholder:"0.00",value:vt,onChange:function(e){mt(e.target.value)},readOnly:!0})]}),Object(G.jsxs)("h6",{style:{marginTop:"1rem"},children:[" ",Object(G.jsx)("b",{children:"Reste \xe0 devoir"})," "]}),Object(G.jsx)("h4",{style:{color:"red"},children:Object(G.jsxs)("b",{style:{display:"flex"},children:[" ",((null===(k=he)||void 0===k?void 0:k.totalPrice)+(null===(w=he)||void 0===w?void 0:w.totalPrice)*en/100-vt).toFixed(2),ln("<i>".concat(dn,"</i>"))]})}),Object(G.jsxs)(Ge.a,{onSubmit:function(e){e.preventDefault(),nn()},children:[Object(G.jsxs)(Ge.a.Group,{style:{marginTop:"2rem"},className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(G.jsxs)(Ge.a.Label,{children:[" ",Object(G.jsx)("b",{children:"Details de paiement"})," "]}),Object(G.jsx)("div",{style:{height:"150px",overflow:"auto"},children:Vt.map((function(e){return Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(G.jsx)("h5",{children:e.type}),Object(G.jsxs)("h5",{children:[e.value,"\u20ac"]})]})}))})]}),Object(G.jsxs)(Ge.a.Group,{style:{marginTop:"2rem"},className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(G.jsxs)(Ge.a.Label,{children:[" ",Object(G.jsx)("b",{children:"Scanner code remise"})," "]}),Object(G.jsx)(Ge.a.Control,{rows:1,placeholder:"*11111111111111*",onChange:function(e){return Wt(e.target.value)}})]})]})]}),Object(G.jsxs)(Ze.a,{xs:"5",children:[Object(G.jsxs)(Ge.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(G.jsxs)(Ge.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(G.jsx)(Ge.a.Label,{children:Object(G.jsx)("b",{children:"Addition Total"})}),Object(G.jsx)(Ge.a.Control,{readOnly:!0,type:"number",placeholder:"0.00",value:(he.totalPrice+(null===(_=he)||void 0===_?void 0:_.totalPrice)*en/100).toFixed(2)})]}),Object(G.jsxs)(Ge.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(G.jsxs)(Ge.a.Label,{children:[" ",Object(G.jsx)("b",{children:"Methode de paiement"})," "]}),Object(G.jsxs)(Ge.a.Select,{"aria-label":"Default select example",onChange:function(e){return ut(e.target.value)},children:[Object(G.jsx)("option",{value:"espece",children:"Especes"}),Object(G.jsx)("option",{value:"carte bleu",children:"Carte bleu"}),Object(G.jsx)("option",{value:"ticket restaurant",children:"Ticket restaurant"}),Object(G.jsx)("option",{value:"cheque",children:"Cheque"}),Object(G.jsx)("option",{value:"Glovo",children:"Glovo"}),Object(G.jsx)("option",{value:"Just-Eat",children:"Just-Eat"}),Object(G.jsx)("option",{value:"Deliveroo",children:"Deliveroo"}),Object(G.jsx)("option",{value:"Uber Eats",children:"Uber Eats"})]})]})]}),Object(G.jsxs)(Ge.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(G.jsx)(Ge.a.Label,{children:Object(G.jsx)("b",{children:"Total"})}),Object(G.jsx)(Ge.a.Control,{type:"number",placeholder:"0.00",value:Ot,onChange:function(e){return mt(Number(e.target.value))}})]}),Object(G.jsx)(u.a,{theme:"hg-theme-default hg-layout-default myTheme5",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn3",buttons:"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){console.log(e),un.current=e},layoutName:"default",layout:{default:On},onChange:function(e){for(var t=0,n=0;n<e.length;n++){var c=e[n];if(","==c){if(++t>=2)break}else if(0==n&&","==c){t=2;break}}if(t<2){if(It(e),console.log("Input changed",e),"pay"==Ft){var r=function(e,t){var n=Number(1111.11).toLocaleString(t).replace(/\d+/g,"").split("");return null===e?null:(1==n.length&&n.unshift(""),Number(String(e).replace(new RegExp(n[0].replace(/\s/g," "),"g"),"").replace(n[1],".")))}(e,"fr");console.log(r),mt(r),It("")}else Pt(e),It("");It("")}else It(""),console.log("Input changed",e),"pay"==Ft?(mt(0),un.current.setInput("0"),It("")):(Pt(e),It("")),It("")},onKeyPress:function(e){console.log("Button pressed",e)}})]}),Object(G.jsxs)(Ze.a,{xs:"2",className:"show-pay-modal",children:[Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+.5),un.current.setInput(String(Ot+.5))},children:["0.5 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+1),un.current.setInput(String(Ot+1))},children:["1 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+2),un.current.setInput(String(Ot+2))},children:["2 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+5),un.current.setInput(String(Ot+5))},children:["5 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+10),un.current.setInput(String(Ot+10))},children:["10 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+20),un.current.setInput(String(Ot+20))},children:["20 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+50),un.current.setInput(String(Ot+50))},children:["50 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(Ot+100),un.current.setInput(String(Ot+100))},children:["100 ",ln("<i>".concat(dn,"</i>"))]}),Object(G.jsx)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){var e,t,n,c;mt(((null===(e=he)||void 0===e?void 0:e.totalPrice)+(null===(t=he)||void 0===t?void 0:t.totalPrice)*en/100).toFixed(2)-vt),un.current.setInput(String((null===(n=he)||void 0===n?void 0:n.totalPrice)+(null===(c=he)||void 0===c?void 0:c.totalPrice)*en/100-vt))},children:"Payer Tout"}),Object(G.jsx)(b.a,{variant:"warning",style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){mt(0),un.current.setInput(String(0))},children:"Effacer"})]})]})}),Object(G.jsxs)(fe.a.Footer,{children:[kt?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Ge.a.Label,{style:{fontSize:"24px",fontWeight:"bold"},children:"Nbr couverts"}),Object(G.jsx)(Ge.a.Control,{onFocus:function(e){Rt("couverts"),un.current.setInput("")},style:{width:"120px"},placeholder:"1 Couverts",type:"number",value:Dt,onChange:function(e){return Pt(e.target.value)}})]}):"",Object(G.jsx)(Ge.a.Check,{size:"3x",type:"checkbox",label:"Note de frais",style:{fontSize:"24px",marginRight:"2rem",fontWeight:"bold"},onClick:function(){return wt(!kt)}}),Object(G.jsx)(b.a,{variant:"danger",onClick:function(){return Me(!1)},children:jn("cancel")}),Ye||ce?ce?Object(G.jsx)(b.a,{variant:"success",children:Object(G.jsx)(lt.a,{animation:"border",variant:"light"})}):Object(G.jsx)(b.a,{variant:"outline-danger",onClick:function(){Me(!1),an()},children:"Accompte"}):Object(G.jsx)(b.a,{variant:"success",onClick:function(){Ot>0?(ft(vt+Ot),an(),un.current.setInput("")):console.log("null")},children:"Valider"})]})]})]})]})}),Wt=n(239),Zt=n(407),Xt=function(){var e,t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],j=localStorage.getItem("username")||[],O=Object(o.g)(),m=Object(o.f)(),p=Object(h.c)(),x=O.type,v=O.part,f=O.table_id,g=Object(h.d)((function(e){return e.order.checkoutData})).filter((function(e){return e.order_id==f}))[0]||{},A=Object(r.useState)([]),y=Object(s.a)(A,2),C=y[0],k=y[1],w=Object(r.useState)([]),_=Object(s.a)(w,2),S=_[0],I=_[1],T=Object(r.useState)(!0),B=Object(s.a)(T,2),D=B[0],P=B[1],L=Object(r.useState)("repartir"==x),E=Object(s.a)(L,2),F=E[0],R=E[1],q=Object(r.useState)(0),H=Object(s.a)(q,2),Q=H[0],M=H[1],W=Object(r.useState)(0),Z=Object(s.a)(W,2),X=Z[0],U=Z[1],$=Object(r.useState)(""),ne=Object(s.a)($,2),ce=ne[0],re=(ne[1],Object(r.useState)("espece")),ie=Object(s.a)(re,2),ae=ie[0],se=ie[1],oe=Object(r.useState)(!1),le=Object(s.a)(oe,2),de=le[0],je=le[1],ue=Object(r.useState)(""),be=Object(s.a)(ue,2),he=be[0],Oe=be[1],me=Object(r.useState)(""),pe=Object(s.a)(me,2),xe=(pe[0],pe[1]),ve=Object(r.useState)("pay"),ge=Object(s.a)(ve,2),Ae=ge[0],ye=(ge[1],Object(r.useState)(1)),Ce=Object(s.a)(ye,2),Ne=Ce[0],ke=Ce[1],we=Object(r.useState)(!1),_e=Object(s.a)(we,2),Se=_e[0],Te=(_e[1],Object(r.useState)({})),Be=Object(s.a)(Te,2),De=Be[0],Pe=Be[1],Le=Object(r.useState)([]),Ee=Object(s.a)(Le,2),Fe=Ee[0],Re=Ee[1],qe=Object(r.useState)([]),ze=Object(s.a)(qe,2),He=(ze[0],ze[1],Object(r.useState)(0)),Qe=Object(s.a)(He,2),Me=Qe[0],Xe=(Qe[1],Object(r.useRef)()),Ve=Object(r.useState)(["9 8 7","6 5 4","3 2 1","0 , {bksp}"]),Ke=Object(s.a)(Ve,2),Ue=Ke[0],Ye=(Ke[1],[]),et=0,tt=!1;g.orderItems;if(g.orderItems.forEach((function(e){20==e.tva&&(tt=!0)})),1==tt)et=20;else switch(g.orderType){case"surplace":default:et=10;break;case"emporter":case"livraison":et=5.5}Object(r.useEffect)((function(){}),[Ye]),Object(r.useEffect)((function(){var e,t=[],n=0,c=[];null===g||void 0===g||null===(e=g.orderItems)||void 0===e||e.forEach((function(e){var t=Object.assign({ids:n},e);c.push(t),n++})),console.log(c);var r=[c];console.log(v);for(var i=[],a=1;a<=v;a++)t.push(Object(Y.a)(Object(Y.a)({},g),{},{totalPrice:g.totalPrice,taxPrice:(null===g||void 0===g?void 0:g.totalPrice)*et/100,part:v,type:x,client:a,ids:a})),"partager"==x&&i.push((g.totalPrice+(null===g||void 0===g?void 0:g.totalPrice)*et/100)/v);localStorage.setItem("partageorder",Ye),Re(i);for(var s=1;s<v;s++)r=[].concat(Object(te.a)(r),[[]]);I(r),console.log(r),k(t),console.log(t)}),[]);var nt=localStorage.getItem("user_id"),ct=function(e,t){N.a.post("http://141.94.77.9:5000/api/finalizeorder",{order:Object(Y.a)(Object(Y.a)({},g),{},{message:ce,pay_method:ae,amount:Q,amountPaid:X})}).then((function(n){N.a.post("http://141.94.77.9:5000/api/printFinalOrder",{user_id:nt,order:Object(Y.a)(Object(Y.a)({},g),{},{nbrCouverts:Ne,message:ce,pay_method:ae,amount:Q/v,amountPaid:X,totalPrice:g.totalPrice/v}),type:x,part:v,pricepart:g.totalPrice/v}).then((function(e){})).catch((function(e){return console.log(e)})),U(0),je(!0);for(var r=0;r<=v-1;r++)if(0==c.length){for(var i=[],s=0;s<=v-1;s++)i.push([]);r==De.client-1&&(i[r]=[{type:ae,value:Q}],a(i))}else{var o=c;r==De.client-1&&(o[r]=[].concat(Object(te.a)(o[r]),[{type:ae,value:Q}]),a(o))}var l=e.every((function(e){return 0===e}));0==e[t]?je(!1):console.log("not paid yet"),l&&(m("/main"),p(Ie({order_id:f})))})).catch((function(e){console.log(e)}))},rt=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},it=localStorage.getItem("currency"),at=z().t;var st=function(){for(var e=C.map((function(e,t){return Object(Y.a)(Object(Y.a)({},e),{},{orderItems:Object(te.a)(S[t])})})),t=[],n=[],c=[],r=0;r<e.length;r++){var i=e[r];console.log(i);for(var a=0,s=0,o=0,l=0;l<i.orderItems.length;l++){var d=i.orderItems[l];a=a+d.price+d.tva/100*d.price,s+=d.price,o+=d.tva/100*d.price}t.push(a),n.push(o),c.push(s)}Re(t);for(var j=[],u=0;u<t.length;u++){var b=t[u],h=Object.assign({pricepart:b},e[u]);h.totalPrice=c[u],h.taxPrice=n[u],j.push(h)}k(j),R(!1),P(!D)};return Object(G.jsxs)("div",{style:{backgroundColor:"white",width:"100%"},children:[Object(G.jsx)(V.a,{variant:"warning",style:{backgroundColor:"#ff6b6b",height:"70px"},children:Object(G.jsxs)(K.a,{children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{onClick:function(){return m("/main")},children:Object(G.jsx)("img",{width:"45px",src:$e})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"checkout-2-agenda",children:[Object(G.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return m("/cloture")},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"checkout-2-chasier",children:[Object(G.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),at("cashier")]})})]}),Object(G.jsxs)("h6",{className:"checkout-2-server",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:j})]})]})}),Object(G.jsxs)(fe.a,{show:F,children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Repartir"})}),Object(G.jsx)(fe.a.Body,{children:Object(G.jsx)("div",{style:{display:"flex"},children:Object(G.jsx)(Wt.a,{onDragEnd:function(e){var t=e.source,n=e.destination;if(n){var c=+t.droppableId,r=+n.droppableId;if(c===r){var i=function(e,t,n){var c=Array.from(e),r=c.splice(t,1),i=Object(s.a)(r,1)[0];return c.splice(n,0,i),c}(S[c],t.index,n.index),a=Object(te.a)(S);a[c]=i,I(a)}else{var o=function(e,t,n,c){var r=Array.from(e),i=Array.from(t),a=r.splice(n.index,1),o=Object(s.a)(a,1)[0];i.splice(c.index,0,o);var l={};return l[n.droppableId]=r,l[c.droppableId]=i,l}(S[c],S[r],t,n),l=Object(te.a)(S);l[c]=o[c],l[r]=o[r],I(l)}}},children:null===S||void 0===S?void 0:S.map((function(e,t){return Object(G.jsx)(Wt.c,{droppableId:t.toString(),children:function(n,c){return Object(G.jsxs)("div",Object(Y.a)(Object(Y.a)({ref:n.innerRef,style:(r=c.isDraggingOver,{background:r?"lightblue":"lightgrey",padding:8,width:250})},n.droppableProps),{},{children:[Object(G.jsx)("h6",{children:"personne ".concat(t+1)}),e.map((function(e,t){return Object(G.jsx)(Wt.b,{draggableId:e.ids.toString(),index:t,children:function(t,n){return Object(G.jsx)("div",Object(Y.a)(Object(Y.a)(Object(Y.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:(c=n.isDragging,r=t.draggableProps.style,Object(Y.a)({userSelect:"none",padding:16,margin:"0 0 ".concat(8,"px 0"),background:c?"lightgreen":"grey"},r)),children:Object(G.jsx)("div",{style:{display:"flex",justifyContent:"space-around"},children:e.name})}));var c,r}},e.ids)})),n.placeholder]}));var r}},t)}))})})}),Object(G.jsx)(fe.a.Footer,{children:Object(G.jsx)(b.a,{variant:"primary",onClick:function(){return st()},children:"Terminer"})})]}),Object(G.jsx)("div",{className:"co2",children:null===C||void 0===C?void 0:C.map((function(e){return 0!=Fe[e.client-1]?Object(G.jsxs)("div",{className:"checkout2",children:[Object(G.jsx)(Gt,{order:e,ping:D}),Object(G.jsx)(b.a,{variant:"success",className:"c2btn",onClick:function(){Pe(e),je(!0),console.log(e.client),console.log(Me)},children:"impay\xe9"})]}):Object(G.jsxs)("div",{className:"checkout2",children:[Object(G.jsx)(Gt,{order:e,ping:D}),Object(G.jsx)(b.a,{variant:"outlined",color:"error",className:"c2btn",startIcon:Object(G.jsx)(Zt.a,{}),Disabled:!0,children:"pay\xe9"})]})}))}),Object(G.jsxs)(fe.a,{show:de,onHide:function(){return je(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"finaliser Commande"})}),Object(G.jsx)(fe.a.Body,{children:Object(G.jsxs)(We.a,{children:[Object(G.jsxs)(Ze.a,{xs:"5",children:[Object(G.jsxs)(Ge.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(G.jsx)(Ge.a.Label,{children:"Paiement Re\xe7u"}),Object(G.jsx)(Ge.a.Control,{type:"number",placeholder:"0.00",value:X,onChange:function(e){M(e.target.value)}})]}),Object(G.jsx)("h6",{style:{marginTop:"1rem"},children:"Monnaie"}),Object(G.jsx)("h4",{style:{color:"red"},children:Object(G.jsx)("b",{children:Number(Fe[De.client-1]).toFixed(2)})}),Object(G.jsxs)(Ge.a.Group,{style:{marginTop:"2rem"},className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(G.jsxs)(Ge.a.Label,{children:[" ",Object(G.jsx)("b",{children:"Details de paiement"})," "]}),Object(G.jsx)("div",{style:{height:"150px",overflow:"auto"},children:null===(e=c[De.client-1])||void 0===e?void 0:e.map((function(e){return Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(G.jsx)("h5",{children:e.type}),Object(G.jsxs)("h5",{children:[e.value,"\u20ac"]})]})}))})]})]}),Object(G.jsxs)(Ze.a,{xs:"5",children:[Object(G.jsxs)(Ge.a,{onSubmit:function(e){return e.preventDefault()},children:[Object(G.jsxs)(Ge.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(G.jsx)(Ge.a.Label,{children:"Paiement total"}),Object(G.jsx)(Ge.a.Control,{type:"number",placeholder:"0.00",value:((De.totalPrice+De.taxPrice)/v).toFixed(2)})]}),Object(G.jsxs)(Ge.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(G.jsx)(Ge.a.Label,{children:"Methode de paiement"}),Object(G.jsxs)(Ge.a.Select,{"aria-label":"Default select example",onChange:function(e){return se(e.target.value)},children:[Object(G.jsx)("option",{value:"espece",children:"Especes"}),Object(G.jsx)("option",{value:"carte bleu",children:"Carte bleu"}),Object(G.jsx)("option",{value:"ticket restaurant",children:"Ticket restaurant"}),Object(G.jsx)("option",{value:"cheque",children:"Cheque"}),Object(G.jsx)("option",{value:"Glovo",children:"Glovo"}),Object(G.jsx)("option",{value:"Just-Eat",children:"Just-Eat"}),Object(G.jsx)("option",{value:"Deliveroo",children:"Deliveroo"}),Object(G.jsx)("option",{value:"Uber Eats",children:"Uber Eats"})]})]})]}),Object(G.jsxs)(Ge.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(G.jsx)(Ge.a.Label,{children:Object(G.jsx)("b",{children:"Total"})}),Object(G.jsx)(Ge.a.Control,{type:"number",placeholder:"0.00",value:Q,onChange:function(e){return M(Number(e.target.value))}})]}),Object(G.jsx)(u.a,{theme:"hg-theme-default hg-layout-default myTheme5",display:{"{bksp}":"EFFACER"},buttonTheme:[{class:"key_btn3",buttons:"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}"},{class:"hg-highlight",buttons:"Q q"}],keyboardRef:function(e){return Xe.current=e},layoutName:"default",layout:{default:Ue},onChange:function(e){for(var t=0,n=0;n<e.length;n++){var c=e[n];if(","==c){if(++t>=2)break}else if(0==n&&","==c){t=2;break}}if(xe(e),t<2){if(xe(e),"pay"==Ae){var r=function(e,t){var n=Number(1111.11).toLocaleString(t).replace(/\d+/g,"").split("");return null===e?null:(1==n.length&&n.unshift(""),Oe(Number(String(e).replace(new RegExp(n[0].replace(/\s/g," "),"g"),"").replace(n[1],".")).toString()),Number(String(e).replace(new RegExp(n[0].replace(/\s/g," "),"g"),"").replace(n[1],".")))}(e,"fr");console.log(r),M(r),xe("")}else ke(e),xe("");xe("")}else xe(""),"pay"==Ae?(M(0),Xe.current.setInput("0"),xe("")):(ke(e),xe("")),xe("")},onKeyPress:function(e){console.log("Button pressed",e),"{bksp}"==e&&(Oe(he.slice(0,-1)),M(Number(Q.toString().slice(0,-1))))}})]}),Object(G.jsxs)(Ze.a,{xs:"2",children:[Object(G.jsx)("h4",{children:"Cash"}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+.5),Oe((Q+.5).toString())},children:["0.5 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+1),Oe((Q+1).toString())},children:["1 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+2),Oe((Q+2).toString())},children:["2 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+5),Oe((Q+5).toString())},children:["5 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+10),Oe((Q+10).toString())},children:["10 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+20),Oe((Q+20).toString())},children:["20 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+50),Oe((Q+50).toString())},children:["50 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsxs)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(Q+100),Oe((Q+100).toString())},children:["100 ",rt("<i>".concat(it,"</i>"))]}),Object(G.jsx)(b.a,{style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem"},onClick:function(){M(Number(Fe[De.client-1]).toFixed(2))},children:"Payer Tout"}),Object(G.jsx)(b.a,{variant:"danger",style:{display:"flex",width:"100%",textAlign:"center",marginBottom:"0.5rem",paddingLeft:"2rem"},onClick:function(){M(0),Oe((0).toString())},children:"Effacer"})]})]})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"outline-secondary",onClick:function(){return je(!1)},children:at("cancel")}),Se?Object(G.jsx)(b.a,{variant:"outline-danger",onClick:function(){je(!1),ct()},children:"Accompte"}):Object(G.jsx)(b.a,{variant:"success",onClick:function(){if(Q>0){U(X+Q),Xe.current.setInput(""),Oe("0"),M(0);var e=[],t=0,n=0;for(t=0;t<Fe.length;t++)De.client-1==t?(n=t,e.push((Fe[t]-Q).toFixed(2)<=0?0:(Fe[t]-Q).toFixed(2)),(Fe[t]-Q).toFixed(2)<=0&&je(!1)):e.push(Fe[t]);Re(e),ct(e,n)}else console.log("null")},children:"Valider"})]})]})]})},Vt=n.p+"static/media/borne.aac446c5.png",Kt=(n(660),n.p+"static/media/updateorder.37f478bf.wav"),Jt=n.p+"static/media/born-sound.8be7451a.mp3",Ut=(He.b.connect("http://141.94.77.9:5002"),function(){var e,t,n,c,a,j=Object(r.useState)(new Audio(Jt)),u=Object(s.a)(j,2),O=(u[0],u[1],localStorage.getItem("username")||""),m=Object(h.d)((function(e){return e.data.tables})),p=Object(r.useState)(!1),x=Object(s.a)(p,2),v=x[0],f=x[1],g=Object(r.useState)({}),A=Object(s.a)(g,2),y=A[0],C=A[1],k=Object(h.d)((function(e){return e.data.tva_mode})),w=Object(r.useState)(0),_=Object(s.a)(w,2),S=(_[0],_[1]),I=Object(r.useState)([]),T=Object(s.a)(I,2),B=T[0],D=T[1],P=localStorage.getItem("user_id"),L=new Date,E=L.toISOString().substring(0,10),F=L.getHours()+":"+L.getMinutes();console.log(E,F);Object(h.c)();var R=L.getTime();console.log(R);var q=Object(o.g)().type,H=z().t,Q=Object(o.f)(),M=Object(h.d)((function(e){return e.data.orderHistory}))||[],W=Object(h.d)((function(e){return e.order.checkoutData}));console.log("za",W);var Z=function(e){return i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},X=localStorage.getItem("currency"),U=function(e){var t=e.e;return console.log(t),m.find((function(e){return e.id==t}))},$=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),Q("/")},ne=function(e){Q("/menu/"+e)};Object(r.useEffect)((function(){var e,t=Et.a.clone((null===y||void 0===y?void 0:y.orderItems)||[{}]);console.log("salaaam",t),D(t),null===(e=y.orderItems)||void 0===e||e.map((function(e){if(1==e.is_alcool){var t=k.find((function(e){return"alcool"==e.nom})).valeur;console.log(t),S(t)}}))}),[y]);var ce=function(){var e=0,t=0,n=[];return B.map((function(c){e+=c.price,t+=c.tva,n.push({value:c.tva,perc:c.tva/c.price*100})})),{tot:e,tva:t,tvas:n}},re=Object(r.useState)(new Audio(Kt)),ie=Object(s.a)(re,2);ie[0],ie[1];return Object(G.jsxs)("div",{className:"main_bg",children:[Object(G.jsx)(V.a,{variant:"warning",className:"navbar",children:Object(G.jsxs)(K.a,{className:"history-navbar",children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{onClick:function(){return Q("/main")},children:Object(G.jsx)("img",{width:"45px",src:$e,className:"table-icon"})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(G.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return Q("/cloture")},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(G.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),H("cashier")]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return $()},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(G.jsx)(l.a,{icon:d.E,style:{marginRight:"5px"}}),H("disconnect")]})})]}),Object(G.jsxs)("h6",{className:"server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:O}),Object(G.jsx)(l.a,{onClick:function(){return $()},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(G.jsxs)(Ze.a,{style:{backgroundColor:"white"},fluid:!0,children:[Object(G.jsxs)(ve.a,{hover:!0,className:"ttt",children:[Object(G.jsx)("thead",{className:"tbds",children:Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Type"}),Object(G.jsx)("th",{children:"Table"}),Object(G.jsx)("th",{children:"date"}),Object(G.jsx)("th",{children:"order"}),Object(G.jsx)("th",{children:"Prix"}),"all"==q?Object(G.jsx)("th",{children:"Reglement"}):"","encours"==q?Object(G.jsx)("th",{children:"statut"}):"",Object(G.jsx)("th",{children:"Paiement "})]})}),Object(G.jsx)("tbody",{className:"scro",children:"encours"==q?null===W||void 0===W||null===(e=W.slice())||void 0===e||null===(t=e.sort((function(e,t){return t.id-e.id})))||void 0===t?void 0:t.filter((function(e){return("pending"==e.status||"cooking"==e.status||"ready"==e.status)&&e.date==E})).map((function(e,t){var n,c,r=!1;e.orderItems;if(null===e||void 0===e||null===(n=e.orderItems)||void 0===n||n.forEach((function(e){1==e.is_alcool&&(r=!0)})),1==r)20;else switch(e.orderType){case"surplace":case"sur place":default:10;break;case"emporter":case"livraison":5.5}return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:"pending"==e.status?Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(G.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.q,color:"#42d4cb",onClick:function(){return ne(void 0==e.order_id?e.id:e.order_id)}}),Object(G.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return Q("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):"cooking"==e.status?Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(G.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.K,color:"#42d4cb"}),Object(G.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return Q("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):"ready"==e.status?Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(G.jsx)(l.a,{icon:d.m,color:"green "}),Object(G.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return Q("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):Object(G.jsx)(l.a,{icon:d.m,color:"green "})}),Object(G.jsxs)("td",{children:[void 0==(null===e||void 0===e?void 0:e.orderType)?"de borne":e.orderType,"surplace"==e.orderType?Object(G.jsx)("img",{src:rt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"emporter"==e.orderType?Object(G.jsx)("img",{src:nt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"livraison"==e.orderType?Object(G.jsx)("img",{src:tt,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(G.jsx)("img",{src:Vt,width:40,height:40,style:{marginLeft:"0.5rem"}})]}),Object(G.jsxs)("td",{children:["Table : ",null===(c=U({e:e.table_number}))||void 0===c?void 0:c.numero]}),Object(G.jsx)("td",{children:e.date+"-"+e.time}),Object(G.jsx)("td",{children:"#"+(void 0==e.order_id?e.id:e.order_id)}),Object(G.jsx)("td",{children:Object(G.jsxs)("b",{style:{display:"flex",color:"red"},children:[void 0==e.totalPrice?e.price+e.taxPrice:e.totalPrice+e.taxPrice," ",Z("<i>".concat(X,"</i>"))]})}),Object(G.jsx)("td",{children:"pending"==e.status?Object(G.jsx)("b",{children:"En attente"}):"cooking"==e.status?Object(G.jsx)("b",{style:{color:"orange"},children:" En pr\xe9paration"}):Object(G.jsx)("b",{style:{color:"green"},children:" Pr\xeate"})}),Object(G.jsx)("td",{children:Object(G.jsx)("b",{children:"En cours"})})]})})):"annules"==q?null===W||void 0===W||null===(n=W.slice())||void 0===n||null===(c=n.sort((function(e,t){return t.id-e.id})))||void 0===c?void 0:c.filter((function(e){return"avenir"==q?e.date>E:"rejected"==e.status&&e.date==E})).map((function(e,t){var n,c=!1;e.orderItems;if(e.orderItems.forEach((function(e){1==e.is_alcool&&(c=!0)})),1==c)20;else if("surplace"===e.orderType)10;else 5.5;return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:"pending"==e.status?Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(G.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.q,color:"#42d4cb",onClick:function(){return ne(void 0==e.order_id?e.id:e.order_id)}}),Object(G.jsx)(l.a,{size:"2x",style:{cursor:"pointer"},icon:d.k,color:"#ff6b6b",onClick:function(){return Q("/checkout/"+(void 0==e.order_id?e.id:e.order_id))}})]}):Object(G.jsx)(l.a,{icon:d.G,color:"red"})}),Object(G.jsxs)("td",{children:[e.orderType,"surplace"==e.orderType?Object(G.jsx)("img",{src:rt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"emporter"==e.orderType?Object(G.jsx)("img",{src:nt,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(G.jsx)("img",{src:tt,width:32,height:32,style:{marginLeft:"0.5rem"}})]}),Object(G.jsxs)("td",{children:["Table : ",null===(n=U({e:e.table_number}))||void 0===n?void 0:n.numero]}),Object(G.jsx)("td",{children:e.date+"-"+e.time}),Object(G.jsx)("td",{children:"#"+(void 0==e.order_id?e.id:e.order_id)}),Object(G.jsx)("td",{children:Object(G.jsxs)("b",{style:{display:"flex",color:"red"},children:[void 0==e.totalPrice?e.price+e.tva*e.price/100:e.totalPrice+e.taxPrice," ",Z("<i>".concat(X,"</i>"))]})}),Object(G.jsx)("td",{children:Object(G.jsx)("b",{children:"Annuler"})})]})})):"avenir"==q?"":null===M||void 0===M||null===(a=M.slice())||void 0===a?void 0:a.sort((function(e,t){return t.id-e.id})).filter((function(e){return e.paymentsInDb&&e.paymentsInDb.length>0})).map((function(e,t){var n,c=0,r=!1;e.orderItems;if(e.orderItems.forEach((function(e){1==e.is_alcool&&(r=!0)})),1==r)c=20;else switch(void 0==e.orderType?e.order_type:e.orderType){case"surplace":default:c=10;break;case"emporter":case"livraison":c=5.5}return Object(G.jsxs)("tr",{onClick:function(){return function(e){var t=e.order,n=Et.a.clone(t);(n=Object(Y.a)(Object(Y.a)({},n),{},{order_id:n.id,taxPrice:n.tva,totalPrice:n.price})).orderItems=n.orderItems.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{qt:e.quantity})})),C(n),f(!0)}({order:e})},children:[Object(G.jsx)("td",{children:1==e.source?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(l.a,{icon:d.r,color:"blue",style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:"Enligne"})]}):Object(G.jsx)(l.a,{icon:d.m,color:"green"})}),Object(G.jsxs)("td",{style:{display:"flex"},children:[e.order_type,"surplace"==e.order_type?Object(G.jsx)("img",{src:rt,width:32,height:32,style:{marginLeft:"0.5rem"}}):"emporter"==e.order_type?Object(G.jsx)("img",{src:nt,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(G.jsx)("img",{src:tt,width:32,height:32,style:{marginLeft:"0.5rem"}})]}),Object(G.jsxs)("td",{children:["Table :"," ",(null===(n=U({e:e.table_number}))||void 0===n?void 0:n.numero)||"N/A"]}),Object(G.jsx)("td",{children:e.date+"-"+e.time}),Object(G.jsx)("td",{children:"#"+e.id}),Object(G.jsx)("td",{children:Object(G.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[3!=e.source?(e.price+e.price*c/100).toFixed(2):e.price+e.tva*e.price/100," ",Z("<i>".concat(X,"</i>"))]})}),Object(G.jsx)("td",{children:Object(G.jsx)("b",{style:{display:"flex",color:"#ff6b6b"},children:e.how_paid})}),Object(G.jsx)("td",{children:Object(te.a)(new Set(e.paymentsInDb.map((function(e){return e.pay_method})))).map((function(e){return Object(G.jsxs)("b",{children:[e,"-"]})}))})]})}))})]}),v&&Object(G.jsxs)("div",{className:"preview",children:[Object(G.jsx)(l.a,{onClick:function(){return f(!1)},icon:d.G,size:"2x",style:{position:"absolute",right:"5px"}}),Object(G.jsx)("div",{className:"scr",children:Object(G.jsx)(Gt,{order:y})}),Object(G.jsx)(b.a,{onClick:function(){f(!1);var e,t,n={from_kiosk:!1,table:(null===y||void 0===y?void 0:y.table_number)||"",client_id:(null===y||void 0===y?void 0:y.customer_id)||0,order_id:y.id,message:y.message||"aucune",customer_name:(null===y||void 0===y?void 0:y.customer_name)||"",customer_company:(null===y||void 0===y?void 0:y.customer_company)||"",code1:(null===y||void 0===y?void 0:y.code1)||"",code2:(null===y||void 0===y?void 0:y.code2)||"",interphone:(null===y||void 0===y?void 0:y.interphone)||"",etage:(null===y||void 0===y?void 0:y.etage)||"",table_number:(null===y||void 0===y?void 0:y.table_number)||0,customer_tel:(null===y||void 0===y?void 0:y.customer_tel)||"",customer_adress:null===y||void 0===y?void 0:y.customer_adress,status:null===y||void 0===y?void 0:y.status,orderType:null===y||void 0===y?void 0:y.order_type,paymentType:null===y||void 0===y?void 0:y.pay_method,totalPrice:null===y||void 0===y?void 0:y.price,taxPrice:null===y||void 0===y?void 0:y.tva,tvas:ce().tvas,orderItems:[],date:null===y||void 0===y?void 0:y.date,time:null===y||void 0===y?void 0:y.time};console.log(ce().tvas),B.map((function(e){n.orderItems.push(Object(Y.a)(Object(Y.a)({},e),{},{price:e.price,tva:e.tva}))})),N.a.post("http://141.94.77.9:5000/api/printOrder",{kitchen:!1,user_id:P,order:Object(Y.a)(Object(Y.a)({new:!1},n),{},{tvas:(e=ce().tvas,t="perc",null===e||void 0===e?void 0:e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n.value),e}),{})),Date:new Date,nbrCouverts:1})}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))},variant:"danger",style:{height:"50px",width:"100%",bottom:"0",position:"absolute"},children:"Imprimer"})]})]}),Object(G.jsx)(Ke,{})]})}),Yt=function(){var e,t,n,c=localStorage.getItem("username")||"",a=localStorage.getItem("user_id"),j=Object(h.d)((function(e){return e.data.clients})),u=Object(h.d)((function(e){return e.data.orderHistory}))||[],O=Object(h.d)((function(e){return e.data.tables})),m=Object(r.useState)({}),p=Object(s.a)(m,2),x=p[0],v=p[1],f=Object(r.useState)(!1),g=Object(s.a)(f,2),A=g[0],y=g[1],C=Object(r.useState)(!1),k=Object(s.a)(C,2),w=k[0],_=k[1],S=Object(r.useState)(""),I=Object(s.a)(S,2),T=I[0],B=I[1],D=Object(o.g)(),P=Object(o.f)(),L=D.id,E=z().t,F=Object(h.c)();Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/getclients",{user_id:a}).then((function(e){F(je({clients:e.data.clients}))}))}),[w]);var R=function(){localStorage.removeItem("user"),localStorage.removeItem("username"),P("/")},q=localStorage.getItem("currency"),H=function(e){var t=e.e;return console.log(t),O.find((function(e){return e.id==t}))};return Object(G.jsxs)("div",{className:"navbar",children:[Object(G.jsx)(V.a,{style:{height:"60px"},variant:"warning",children:Object(G.jsxs)(K.a,{className:"history-navbar",children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsxs)(J.a,{className:"ms-auto",children:[Object(G.jsx)(J.a.Link,{onClick:function(){return P("/main")},children:Object(G.jsx)("img",{width:"45px",src:$e,className:"table-icon"})}),Object(G.jsx)(J.a.Link,{children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"agenda",children:[Object(G.jsx)(l.a,{icon:d.j,style:{marginRight:"5px"}}),"Agenda"]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return P("/cloture")},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"caiss-h6",children:[Object(G.jsx)(l.a,{icon:d.k,style:{marginRight:"5px"}}),E("cashier")]})}),Object(G.jsx)(J.a.Link,{onClick:function(){return R()},children:Object(G.jsxs)("h6",{style:{color:"white",paddingTop:"1rem"},className:"log-out",children:[Object(G.jsx)(l.a,{icon:d.E,style:{marginRight:"5px"}}),E("disconnect")]})})]}),Object(G.jsxs)("h6",{className:"client-server-icon",style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:c}),Object(G.jsx)(l.a,{onClick:function(){return R()},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]}),Object(G.jsxs)("div",{className:"client-search",children:[Object(G.jsx)("label",{children:Object(G.jsx)(l.a,{icon:d.C})}),Object(G.jsx)("input",{type:"text",placeholder:"Chercher...",onChange:function(e){return B(e.target.value)}})]})]})}),Object(G.jsx)(K.a,{style:{backgroundColor:"white"},fluid:!0,children:Object(G.jsxs)(ve.a,{hover:!0,className:"ttt",children:[Object(G.jsx)("thead",{className:"tbds",children:L?Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Type"}),Object(G.jsx)("th",{children:"Table"}),Object(G.jsx)("th",{children:"date"}),Object(G.jsx)("th",{children:"order"}),Object(G.jsx)("th",{children:"Prix"}),Object(G.jsx)("th",{children:"Paiement "})]}):Object(G.jsxs)("tr",{children:[Object(G.jsx)("th",{children:"#"}),Object(G.jsx)("th",{children:"Nom/Prenom"}),Object(G.jsx)("th",{children:"Telephone"}),Object(G.jsx)("th",{children:"Email"}),Object(G.jsx)("th",{children:"Adresse"}),Object(G.jsx)("th",{children:"Ville"}),Object(G.jsx)("th",{children:"Code postal"})]})}),Object(G.jsx)("tbody",{className:"scro",children:L?null===u||void 0===u||null===(e=u.slice())||void 0===e?void 0:e.sort((function(e,t){return t.id-e.id})).filter((function(e){return e.customer_id==L})).map((function(e,t){var n,c;return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:Object(G.jsx)(l.a,{icon:d.m,color:"green"})}),Object(G.jsxs)("td",{style:{display:"flex"},children:[e.order_type,"surplace"==e.order_type?Object(G.jsx)("img",{src:rt,width:32,height:32,style:{marginLeft:"0.5rem"}}):Object(G.jsx)("img",{src:tt,width:32,height:32,style:{marginLeft:"0.5rem"}})]}),Object(G.jsxs)("td",{children:["Table :"," ",(null===(n=H({e:e.table_number}))||void 0===n?void 0:n.numero)||"N/A"]}),Object(G.jsx)("td",{children:e.date+"-"+e.time}),Object(G.jsx)("td",{children:"#"+e.id}),Object(G.jsx)("td",{children:Object(G.jsxs)("b",{style:{display:"flex",color:"#ff6b6b"},children:[e.price," ",(c="<i>".concat(q,"</i>"),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))]})}),Object(G.jsxs)("td",{children:[Object(G.jsx)("b",{children:"espece"==e.pay_method?"Especes":"Carte Bancaire"==e.pay_method||1==e.pay_method?"Carte Bancaire":"Especes"}),"espece"==e.pay_method||2==e.pay_method?Object(G.jsx)("img",{src:ct,width:32,height:32,style:{marginLeft:"0.5rem"}}):"Carte Bancaire"==e.pay_method||1==e.pay_method?Object(G.jsx)("img",{src:et,width:32,height:32,style:{marginLeft:"0.5rem"}}):""]})]})})):j.filter((function(e){return e.nom_prenom.toLowerCase().includes(T.toLowerCase())||e.telephone.includes(T)})).map((function(e,t){return Object(G.jsxs)("tr",{className:"client-tr",children:[Object(G.jsx)("td",{children:Object(G.jsx)(l.a,{icon:d.q,color:"#ff6b6b",size:"2x",onClick:function(){v(e),console.log(e),y(!0)}})}),Object(G.jsx)("td",{onClick:function(){return P("/clients/"+e.id)},children:e.nom_prenom||"N/A"}),Object(G.jsx)("td",{children:e.telephone||"N/A"}),Object(G.jsx)("td",{children:e.email||"N/A"}),Object(G.jsx)("td",{children:e.adresse||"N/A"}),Object(G.jsx)("td",{children:e.ville||"N/A"}),Object(G.jsx)("td",{children:e.code_postal||"N/A"})]})}))})]})}),Object(G.jsxs)(fe.a,{show:A,onHide:function(){return y(!1)},children:[Object(G.jsx)(fe.a.Header,{closeButton:!0,children:Object(G.jsx)(fe.a.Title,{children:"Client"})}),Object(G.jsx)(fe.a.Body,{children:Object(G.jsx)("div",{children:Object(G.jsxs)(Ge.a,{auto:!0,children:[Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsx)(We.a,{children:Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.nom_prenom,type:"text",placeholder:"nom/prenom",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{nom_prenom:e.target.value}))}})})})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsxs)(Ze.a,{children:[(null===(t=x.telephone)||void 0===t?void 0:t.length)>0&&(null===(n=x.telephone)||void 0===n?void 0:n.length)<10?Object(G.jsx)(Qe.a,{bg:"danger",children:"Numero pas valide (10 chiffres obligatoire)"}):"",Object(G.jsx)(Ge.a.Control,{value:x.telephone,type:"tel",placeholder:"telephone",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{telephone:e.target.value}))}})]}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.email,type:"email",placeholder:"Email",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{email:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.adresse,as:"textarea",type:"text",placeholder:"adresse",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{adresse:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.societe,type:"text",placeholder:"soci\xe9t\xe9",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{societe:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.code_1,type:"text",placeholder:"code 1",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{code_1:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.code_2,type:"text",placeholder:"code 2",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{code_2:e.target.value}))}})}),Object(G.jsx)(Ze.a,{xs:"6",children:Object(G.jsx)(Ge.a.Control,{value:x.ville,type:"text",placeholder:"Ville",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{ville:e.target.value}))}})})]})}),Object(G.jsx)(Ge.a.Group,{className:"mb-3",children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.interphone,type:"text",placeholder:"interphone",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{interphone:e.target.value}))}})}),Object(G.jsx)(Ze.a,{children:Object(G.jsx)(Ge.a.Control,{value:x.etage,type:"text",placeholder:"etage",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{etage:e.target.value}))}})}),Object(G.jsx)(Ze.a,{xs:"6",children:Object(G.jsx)(Ge.a.Control,{value:x.code_postal,type:"postal",placeholder:"Code postal",onChange:function(e){return v(Object(Y.a)(Object(Y.a)({},x),{},{code_postal:e.target.value}))}})})]})})]})})}),Object(G.jsxs)(fe.a.Footer,{children:[Object(G.jsx)(b.a,{variant:"secondary",onClick:function(){return y(!1)},children:"Annuler"}),Object(G.jsx)(b.a,{style:{backgroundColor:"#ff6b6b",borderColor:"#ff6b6b"},variant:"primary",onClick:function(){y(!1),N.a.post("http://141.94.77.9:5000/api/updateClient",{client_id:x.id,client:x}).then((function(e){return _(!w)})).catch((function(e){return console.log(e)}))},children:"Terminer"})]})]}),Object(G.jsx)(Ke,{})]})},$t=function(){var e=Object(h.c)(),t=Object(o.f)(),n=localStorage.getItem("username")||"";return Object(G.jsxs)("div",{children:[Object(G.jsx)(V.a,{style:{backgroundColor:"#ff6b6b",height:"70px"},variant:"warning",children:Object(G.jsxs)(K.a,{children:[Object(G.jsx)(V.a.Brand,{children:Object(G.jsx)("div",{class:"logo-container",children:Object(G.jsx)("img",{id:"chrome",class:"logo",src:ee})})}),Object(G.jsx)(J.a,{className:"ms-auto",children:Object(G.jsx)(J.a.Link,{onClick:function(){t("/main"),e(Se())},children:Object(G.jsx)("img",{width:"45px",src:$e})})}),Object(G.jsxs)("h6",{style:{color:"white",marginLeft:"1rem",marginTop:"0.5rem",borderLeft:"1px solid white",padding:"5px"},children:[Object(G.jsx)("img",{src:Je,width:32,height:32,style:{marginRight:"0.5rem"}}),Object(G.jsx)("b",{children:n}),Object(G.jsx)(l.a,{onClick:function(){return localStorage.removeItem("user"),localStorage.removeItem("username"),void t("/")},size:"2x",icon:d.E,style:{marginLeft:"0.5rem",paddingTop:"0.5rem"}})]})]})}),Object(G.jsx)("div",{id:"calendar",style:{height:"800px"}})]})},en=n(285),tn=n.n(en),nn=n(399),cn=n(145),rn=n.n(cn),an=n(410),sn=n(408),on=n(764),ln=n(772),dn=n(403),jn=n.n(dn),un=function(){var e,t,n,c,a,o,l,d,j,u,O=Object(h.d)((function(e){return e.data.dataZ})),x=Object(r.useState)(""),v=Object(s.a)(x,2),f=v[0],g=v[1],A=Object(r.useState)(0),y=Object(s.a)(A,2),C=(y[0],y[1],Object(r.useState)({})),k=Object(s.a)(C,2),w=k[0],_=k[1],S=function(){var e=Object(p.a)(Object(m.a)().mark((function e(){var t,n,c,r,i,a;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new nn.a("portrait","pt","a4"),e.next=3,tn()(document.querySelector("#pdf"));case 3:n=e.sent,c=n.toDataURL("image/png"),r=t.getImageProperties(c),i=t.internal.pageSize.getWidth(),a=r.height*i/r.width,t.addImage(c,"PNG",0,0,i,a),t.save("Zcaisse.pdf");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=i.a.useState(rn()("2014-08-18T21:11:54")),T=Object(s.a)(I,2),B=T[0],D=T[1],P=Object(r.useState)(!1),L=Object(s.a)(P,2),E=L[0],F=L[1],R=localStorage.getItem("user_id")||"",q=Object(r.useState)(!1),z=Object(s.a)(q,2),H=(z[0],z[1],Object(h.c)()),Q=Object(r.useState)({username:"",password:""}),M=Object(s.a)(Q,2),W=M[0],Z=M[1];return Object(r.useEffect)((function(){N.a.post("http://141.94.77.9:5000/api/getHistoriqueZcaisse",{user_id:R}).then((function(e){return H(Oe({dataZ:e.data.allHistorique}))})).catch((function(e){return console.log(e)})),console.log(O)}),[]),Object(G.jsxs)("div",{className:"zcaisse_body",children:[Object(G.jsxs)(fe.a,{show:E,onHide:function(){return F(!1)},className:"modal_ZZ",children:[Object(G.jsx)("div",{className:"head_zcaisse",children:Object(G.jsx)("h1",{children:"Zcaisse"})}),Object(G.jsx)(fe.a.Body,{className:"modals",children:Object(G.jsx)("div",{className:"pdf_Z",id:"pdf",children:Object(G.jsx)("div",{style:{border:"solid 1px",padding:"1rem",backgroundColor:"white",width:"95%",height:"100%"},children:Object(G.jsxs)("div",{className:"text_body",children:[Object(G.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItmes:"center",height:"4%"},children:Object(G.jsxs)("h5",{children:[w.ouverture,"/",w.fermeture]})}),0!=(null===(e=w.cancledOrders)||void 0===e?void 0:e.length)?Object(G.jsxs)("h5",{children:["Commandes Annul\xe9s","",":"]}):"",null===(t=w.cancledOrders)||void 0===t?void 0:t.map((function(e,t){return Object(G.jsxs)("div",{className:"cmd_annuler",children:[Object(G.jsxs)("h5",{children:["Annuler par ",e.rejectedFrom,":"]}),0!=w.cancledOrders.length?e.orderItems.map((function(e,t){return Object(G.jsxs)("div",{className:"item_annuler",children:[Object(G.jsx)("h5",{children:e.qt}),Object(G.jsx)("h5",{children:e.name})]},t)})):"",Object(G.jsx)("hr",{style:{width:"100%"}})]},t)})),0!=(null===(n=w.products)||void 0===n?void 0:n.length)?Object(G.jsxs)("h5",{children:["Liste Des Produits","",":"]}):"",null===(c=w.products)||void 0===c?void 0:c.map((function(e,t){return Object(G.jsx)("div",{children:Object(G.jsx)("div",{classNam:"prod_z",children:Object(G.jsxs)("h6",{children:["-",e.name]})})})})),Object(G.jsxs)("div",{children:[Object(G.jsx)("hr",{style:{width:"100%"}}),null===(a=w.pay_method)||void 0===a?void 0:a.map((function(e,t){return Object(G.jsx)("div",{children:Object(G.jsxs)("h5",{children:[e.name,":",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:e.qt})]})},t)})),Object(G.jsx)("hr",{style:{width:"100%"}}),Object(G.jsxs)("h5",{children:["Annuler:",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:null===(o=w.cancledOrders)||void 0===o?void 0:o.length})]}),Object(G.jsxs)("h5",{children:["Commandes:",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:w.commandes})]}),Object(G.jsxs)("h5",{children:["Ticket Moyen:",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:w.clients})]}),Object(G.jsx)("hr",{style:{width:"100%"}}),Object(G.jsxs)("h5",{children:["De Borne:",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:null===(l=w.ordersType)||void 0===l?void 0:l.borne})]}),Object(G.jsxs)("h5",{children:["Emporter:",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:null===(d=w.ordersType)||void 0===d?void 0:d.emporter})]}),Object(G.jsxs)("h5",{children:["Sur Place:",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:null===(j=w.ordersType)||void 0===j?void 0:j.surPlace})]}),Object(G.jsxs)("h5",{children:["Livraison:",Object(G.jsx)("b",{style:{marginLeft:"1rem"},children:null===(u=w.ordersType)||void 0===u?void 0:u.livraison})]}),Object(G.jsx)("hr",{style:{width:"100%"}}),Object(G.jsxs)("h5",{children:["Ticket Moyen:",Object(G.jsxs)("b",{style:{marginLeft:"1rem"},children:[w.ticket_moyen,"\xa3"]})]}),Object(G.jsxs)("h5",{children:["Total TTC:",Object(G.jsxs)("b",{style:{marginLeft:"1rem"},children:[w.ttc,"\xa3"]})]}),Object(G.jsxs)("h5",{children:["Total HT:",Object(G.jsxs)("b",{style:{marginLeft:"1rem"},children:[w.ht,"\xa3"]})]}),Object(G.jsx)("hr",{style:{width:"100%"}}),Object(G.jsxs)("h5",{children:["Fond Initial:",Object(G.jsxs)("b",{style:{marginLeft:"1rem"},children:[w.fond_initial,"\xa3"]})]}),Object(G.jsxs)("h5",{children:["Fond Final:",Object(G.jsxs)("b",{style:{marginLeft:"1rem"},children:[w.fond_final,"\xa3"]})]})]})]})})})}),Object(G.jsx)(b.a,{variant:"success",onClick:function(){return S()},children:"Telecharger PDF"})]}),Object(G.jsx)("div",{className:"Zcaisse_header",children:Object(G.jsx)("h1",{children:"Zcaisse Historiques"})}),Object(G.jsxs)("div",{className:"zcaisse_container",children:[Object(G.jsxs)("div",{className:"filter_z",children:[Object(G.jsx)(sn.a,{dateAdapter:an.a,children:Object(G.jsx)(on.a,{label:"Date Zcaisse",inputFormat:"MM/DD/YYYY",value:B,onChange:function(e){var t="";D(e),e.$M<10&&(t="0"+String(parseInt(e.$M)+1)),g(e.$y+"-"+t+"-"+e.$D),console.log("date selected",f),console.log(O[0].data.ouverture),console.log(B)},renderInput:function(e){return Object(G.jsx)(ln.a,Object(Y.a)({},e))}})}),Object(G.jsx)(jn.a,{fontSize:"large",color:"inherit",className:"relo",onClick:function(){return N.a.post("http://141.94.77.9:5000/api/getHistoriqueZcaisse",{user_id:R}).then((function(e){return H(Oe({dataZ:e.data.allHistorique}))})).catch((function(e){return console.log(e)})),void console.log(O)}})]}),Object(G.jsx)("div",{className:"zCaisse",children:0!=O.length?null===O||void 0===O?void 0:O.filter((function(e){return e.data.ouverture.includes(f)})).map((function(e,t){return Object(G.jsxs)("div",{className:"history",children:[Object(G.jsx)("b",{children:e.id}),Object(G.jsx)("b",{children:e.data.ouverture}),Object(G.jsx)("b",{children:e.data.fermeture}),Object(G.jsx)("b",{children:Object(G.jsx)("button",{style:{backgroundColor:"#08C18A",color:"white"},onClick:function(){return t=e.data,console.log(t),F(!0),void _(t);var t},children:"Afficher"})}),Object(G.jsx)("b",{children:Object(G.jsx)("button",{style:{backgroundColor:"transparent",color:"#08C18A"},onClick:function(){return t=e.data,void N.a.post("http://141.94.77.9:5000/api/printzcaisse",{PrintData:t,user_id:R}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}));var t},children:"imprimer"})})]},t)})):""}),R?"":Object(G.jsx)("div",{className:"login_modal",children:Object(G.jsxs)("div",{className:"Login_zcaisse",children:[Object(G.jsx)("h2",{children:"Login"}),Object(G.jsx)("input",{type:"text",onChange:function(e){return Z(Object(Y.a)(Object(Y.a)({},W),{},{username:e.target.value}))},placeholder:"Nom utilisateur"}),Object(G.jsx)("input",{type:"password",onChange:function(e){return Z(Object(Y.a)(Object(Y.a)({},W),{},{password:e.target.value}))},placeholder:"Mot de passe"}),Object(G.jsx)("button",{onClick:function(){N.a.post("http://141.94.77.9:5000/api/initZcaisse",Object(Y.a)({},W)).then((function(e){localStorage.setItem("user_id",e.data.user.id),H(Oe({dataZ:e.data.history})),console.log(e.data),console.log(O)}))},children:"se connecter"})]})})]})]})},bn=He.a.connect("http://141.94.77.9:5002");var hn=function(){var e=Object(r.useState)(new Audio(Kt)),t=Object(s.a)(e,2),n=t[0],c=(t[1],Object(r.useState)(new Audio(Jt))),i=Object(s.a)(c,2),a=(i[0],i[1],Object(h.c)()),l=localStorage.getItem("user_id");return bn.on("update".concat(l),(function(e){n.play(),"cooking"==e.status?Q.a.fire({icon:"success",title:"<h5 >"+"La commande <span style='color:green'>".concat(e.order_id,"</span> en pr\xe9paration")+"</h5>",showConfirmButton:!1,timer:2500}):"ready"==e.status?Q.a.fire({icon:"success",title:"<h5 >"+"La commande <span style='color:green'>".concat(e.order_id,"\u20ac</span> et pr\xe9te")+"</h5>",showConfirmButton:!1,timer:2500}):Q.a.fire({icon:"success",title:"<h5 >"+"La commande <span style='color:green'>".concat(e.order_id,"\u20ac</span> a \xe9t\xe9 annul\xe9")+"</h5>",showConfirmButton:!1,timer:2500}),a(De({order:e}))})),Object(G.jsx)("div",{className:"App",children:Object(G.jsxs)(o.c,{children:[Object(G.jsx)(o.a,{exact:!0,path:"/",element:Object(G.jsx)(U,{})}),Object(G.jsx)(o.a,{path:"/init",element:Object(G.jsx)(pe,{})}),Object(G.jsx)(o.a,{path:"/main",element:Object(G.jsx)(Ye,{})}),Object(G.jsx)(o.a,{path:"/menu",element:Object(G.jsx)(gt,{})}),Object(G.jsx)(o.a,{path:"/menu/:order_id",element:Object(G.jsx)(gt,{})}),Object(G.jsx)(o.a,{path:"/caisse",element:Object(G.jsx)(Bt,{})}),Object(G.jsx)(o.a,{path:"/cloture",element:Object(G.jsx)(Ht,{})}),Object(G.jsx)(o.a,{path:"/calendar",element:Object(G.jsx)($t,{})}),Object(G.jsx)(o.a,{path:"/history/:type",element:Object(G.jsx)(Ut,{})}),Object(G.jsx)(o.a,{path:"/clients",element:Object(G.jsx)(Yt,{})}),Object(G.jsx)(o.a,{path:"/data/zcaisse",element:Object(G.jsx)(un,{})}),Object(G.jsx)(o.a,{path:"/avoires",element:Object(G.jsx)(Dt,{})}),Object(G.jsx)(o.a,{path:"/backoffice",element:Object(G.jsx)(ot,{})}),Object(G.jsx)(o.a,{path:"/clients/:id",element:Object(G.jsx)(Yt,{})}),Object(G.jsx)(o.a,{path:"/checkout2/:table_id/:type/:part",element:Object(G.jsx)(Xt,{})}),Object(G.jsx)(o.a,{path:"/checkout/:table_id",element:Object(G.jsx)(Mt,{})}),Object(G.jsx)(o.a,{path:"/test",element:Object(G.jsx)(Qt,{})})]})})},On=(n(678),n(57)),mn=n(100),pn=n(404),xn=n.n(pn),vn=Object(On.c)({auth:P,message:y,data:me,order:Re,caisse:wt}),fn={key:"root",version:1,storage:xn.a},gn=Object(mn.g)(fn,vn),An=Object(x.a)({reducer:gn,middleware:function(e){return e({serializableCheck:{ignoredActions:[mn.a,mn.f,mn.b,mn.c,mn.d,mn.e]}})}}),yn=n(219),Cn=(n(681),n(682),n(405)),Nn=Object(mn.h)(An);Object(a.render)(Object(G.jsx)(h.a,{store:An,children:Object(G.jsx)(yn.a,{children:Object(G.jsx)(Cn.a,{loading:null,persistor:Nn,children:Object(G.jsx)(hn,{})})})}),document.getElementById("root"))}},[[683,1,2]]]);
//# sourceMappingURL=main.4d54fb5c.chunk.js.map