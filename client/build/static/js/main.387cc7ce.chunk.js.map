{"version":3,"sources":["../node_modules/express/lib sync","Slices/message.js","Services/authServices.js","Slices/auth.js","i18/en/index.js","i18/fr/index.js","i18/index.js","Components/LoginModal.js","Components/AuthCard.js","Components/Auth.js","Components/Navi.js","Screens/Home.js","Shared/logo.png","Shared/initbg.mp4","Slices/data.js","Screens/Init.js","Slices/order.js","Components/Tables.js","Components/Zones.js","Shared/bg.jpeg","Shared/loading.gif","Components/NaviBottom.js","Shared/serveur.png","Screens/Main.js","Shared/table.png","Shared/cc.png","Shared/delivery.png","Shared/takeout.png","Shared/cash.jpg","Shared/surplace.png","Shared/hs.png","Components/ProductStock.js","Screens/Backoffice.js","Shared/bgg.png","Components/useLongPress.js","Components/RemiseModal.js","Components/CartMenu.js","Components/Category.js","Components/SuppModal.js","Components/Item.js","Components/MenuItems.js","Components/Product.js","Screens/Menu.js","Slices/caisse.js","Shared/coin.png","Shared/billet.png","Shared/sound.mp3","Screens/Caisse.js","Screens/Avoires.js","Components/TicketZ.js","Components/TicketH.js","Screens/Cloture.js","Screens/Test.js","Components/Ticket.js","Shared/aprc.png","Screens/Checkout.js","Screens/CheckoutTwo.js","Shared/borne.png","Shared/updateorder.wav","Shared/born-sound.mp3","Screens/History.js","Screens/Clients.js","Screens/CalendarScreen.js","Screens/Zcaisse.js","App.js","store.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","messageSlice","createSlice","name","initialState","reducers","setMessage","state","action","message","payload","clearMessage","reducer","actions","authService","login","username","password","axios","post","API_URL","then","response","data","token","console","log","localStorage","setItem","JSON","stringify","tva","address","telephone","logout","removeItem","user","parse","getItem","register","createAsyncThunk","thunkAPI","first_name","last_name","email","AuthService","dispatch","toString","rejectWithValue","isLoggedIn","authSlice","restore","extraReducers","fulfilled","rejected","English","success","verifyUserAndPassword","access","auth","cashier","connect","connecter","reset","freeTable","busytables","newTable","nbrCouverts","validate","backToTable","couverts","artice","price","surplace","tiroir","cancel","added","disconnect","closureHistory","selectDate","print","latestClosure","TotalInit","close","ofCashier","confirm","cashierr","Francais","aded","i18n","use","initReactI18next","init","resources","en","translation","fr","lng","fallbackLng","interpolation","escapeValue","useTranslation","LoginModal","setShowLogin","setClickable","t","useState","input","setInput","layout","keyboard","useRef","myLayout","setMyLayout","caise_open","navigate","useNavigate","useDispatch","useEffect","table","x","final","i","j","randomIndex","Math","floor","random","length","randomItem","splice","push","randomize","className","style","display","icon","faUnlock","color","split","map","marginRight","faTimes","onClick","size","theme","buttonTheme","class","buttons","keyboardRef","r","current","layoutName","default","onChange","onKeyPress","button","justifyContent","marginTop","Button","unwrap","res","Swal","fire","title","showConfirmButton","timer","catch","err","faSignInAlt","faTrash","AuthCard","showLogin","clickable","src","width","height","alt","Auth","users","undefined","Navi","Home","Navbar","bg","variant","fixed","Container","Brand","href","Nav","Link","dataSlice","zones","tables","categories","products","nSteps","orderHistory","clients","tva_mode","coupons","dataZ","isallowedLivraison","isallowedEmporter","ping","storeCoupon","storeClients","storeDataz","storeZones","storeTables","storeCategories","storeProducts","storeNSteps","storeOrderHistory","storeTvaMode","updateProduct","prodIndex","findIndex","prod","copy","con","active","updateEmporter","updateLivraison","setPing","Init","show","msg","alert","setAlert","credentials","setCredentials","session","setSession","showPassword","setShowPassword","sessionActive","user_id","position","logo","textAlign","fontSize","fontWeight","target","value","type","placeholder","autocomplete","faEye","right","bottom","faEyeSlash","checked","for","viewBox","stroke","fill","points","x1","y1","x2","y2","process","staff","currency","is_open","setTimeout","faLockOpen","Alert","orderSlice","orders","checkoutData","currentOrders","selectedTable","client","remarque","orderType","ordersPartage","partNotPaid","setRemarque","storeSelectedTable","setNbrCouverts","setNewCurrentOrder","order","setNewOrder","ordersCopy","is_supp","qt","setOrderChange","key","deleteOrder","filter","_","index","clearOrders","clearData","addNewcheckoutData","some","order_id","addNewcheckoutDataFromDB","el","orderFromDb","orderItems","item","quantity","taxPrice","order_type","deletecheckoutData","setCheckoutChange","initClient","deleteClientandTable","cancelOrder","forEach","setType","setOrderPartage","editordersPartage","amount","partId","Copy","clearOrdersPartage","setPartNotPaid","updateReapartirItems","disIndex","Number","destination","droppableId","sourceIndex","source","itemId","draggableId","repatirId","totalPrice","Tables","selectedZone","rowLayout","Array","useSelector","setSelectedTable","showModal","setShowModal","zone_id","find","onTableClick","nbr","numero","ppl","nbrePersonne","libre","myorder","one","table_number","status","flexWrap","Table","Modal","onHide","Header","closeButton","Title","faUtensils","Body","from","backgroundColor","borderColor","Footer","faCheck","Zones","setSelectedZone","setShow","faBars","top","cursor","left","zone","marginLeft","nom","Offcanvas","placement","faDesktop","faUsers","faMotorcycle","faAddressBook","faStickyNote","faCashRegister","faBorderAll","faHistory","NaviBottom","ordersHistory","freeTables","showNote","setShowNote","showHistoryButton","setshowHistoryButton","note","setnote","path","window","location","hash","curr","nom_prenom","Date","date","toISOString","substr","time","getHours","getMinutes","avenir","enCours","annuler","orderNbr","setOrderHistory","orderLoding","setOrderLoding","showHistory","setshowHistory","Table_nbr","setTable_nbr","old","setOld","textorder_id","settextorder_id","prenom","company","code1","code2","etage","interphone","phone","city","now","substring","setClient","handleClose","handleNewOrder","handleGetOrders","caisse_id","customer_id","zboub","handleSelection","selectedClient","toLowerCase","includes","societe","code_1","code_2","adresse","code_postal","ville","Badge","faPlus","Form","Control","borderRadius","alignItems","FormGroup","as","zIndex","loading","toFixed","pay_method","faPrint","newOrder","client_id","customer_name","customer_company","customer_tel","customer_adress","paymentType","tvas","kitchen","new","handlePrint","auto","Group","Row","Col","onInputChange","options","min","max","xs","defaultValue","supprimer","faCheckSquare","socket","io","Main","on","sort","a","b","cat_order","category","menuSteps","newData","handleDisconnect","paddingTop","faCalendarAlt","faSignOutAlt","borderLeft","padding","serveur","ProductStock","product","setconfirmed","confirmed","showstock","setshowstock","rawHTML","image","React","createElement","dangerouslySetInnerHTML","__html","hs","prod_id","History","setFilter","toLocaleTimeString","params","useParams","storeid","setstoreid","replace","tableIcon","faSearch","cat_id","preventDefault","event","isTouchEvent","touches","useLongPress","onLongPress","shouldPreventDefault","delay","longPressTriggered","setLongPressTriggered","timeout","start","useCallback","addEventListener","passive","clear","shouldTriggerClick","clearTimeout","removeEventListener","onMouseDown","onTouchStart","onMouseUp","onMouseLeave","onTouchEnd","RemiseModal","handleUpdateOrder","orderTo","setOrderTo","setshowRemise","calcOrder","remisePerc","setremisePerc","remise","setremise","setlibre","offert","setoffert","selected","setselected","handleRemise","finalPrice","onChangeInput","Label","onFocus","CartMenu","step","setstep","nsteps","checkOutData","late_order_id","setlate_order_id","newOrders","setnewOrders","ShowModifyModal","setShowModifyModal","rab_tva","setRab_tva","newCommande","setNewCommande","currentOrder","findProductWithId","valeur","extras","extra","default_quantity","stepItems","Object","dbPrice","item_tva","is_alcool","tva_alcool","calcTotal","tot","perc","handlePlusOrMinus","sign","handleExtra","extraKey","handlePlaceOrder","server","from_kiosk","emit","how_paid","reduce","rv","getTime","handleFinish","renderHTML","longPressEvent","showRemise","suppSelected","at","slots","entries","faMinusCircle","faPlusCircle","borderBottom","backgroundImage","objectFit","paddingLeft","fontFamily","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","result","isConfirmed","Spinner","animation","cancelButtonText","faire","content","isDenied","timeRejection","rejectedFrom","dialogClassName","description","isComp","striped","bordered","slotKey","handleSlotSelect","nstep","menu_id","nom_etape","choice","slot","STP","max_select","handleStepSelect","Category","setSelectedCategory","selectedCategory","cat","background","picture","SuppModal","orderWithSupp","handleAddOrderWithSupp","handleaAddDrink","drinks","setShowSupplements","setSuppSelected","setDrinks","page","setPage","supplement","sauces","sauce","faMinusSquare","drink","faAngleDoubleRight","faAngleDoubleLeft","Item","showPreview","setShowPreview","showSupplements","newProduct","setnewProduct","setTva","is_cold","is_hot","drink_id","suaces_ids","setOrderWithSupp","supplements","saucesIds","filtred","handleAlert","toast","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","Carousel","MenuItems","Product","Menu","shows","setShows","setDate","level","charging","timerID","setInterval","tick","clearInterval","setLayout","paddingRight","caisseSlice","monnaies","initialValue","setMonnaies","clearcaisse","caisse","setInitialValue","montant","Caisse","Audio","aud","audio","play","caisse_open","historique_monnaie","setTotal","setping","setSelected","real","lay","setlay","newarr","calcMontant","dateStr","getMonth","slice","getDate","getFullYear","getSeconds","text","coin","FormControl","billet","historiquePrint","caisse_initial_value","handleOpenCaisse","handleOpenCaisse30","editClient","setEditClient","showEdit","setShowEdit","setSearch","fluid","hover","coupon","discount","created_at","expires_at","TicketZ","recap","selectedDate","tvasum","ouvDate","lastOuverture","ouvTime","nowTime","ouverture","today","Restaurant","clientGroups","total","logs","title_log","groups","acc","TicketH","zHistory","restaurant","impression","fermeture","commandes","ticket_moyen","cancledOrders","prix","ht","ttc","fond_initial","fond_final","Cloture","annules","completd","paymentsInDb","finalValue","setrecap","setpage","setdata","setzHistory","previewTicket","setPreviewTicket","previewZ","setPreviewZ","previewHistory","setPreviewHistory","history","setHistory","findProduct","allHistorique","TODAY","bodyFormData","FormData","append","method","url","headers","rows","col1","item_id","col2","col3","col4","overflow","commandesTotal","formatValue","chiffre","DataGrid","pageSize","paginationMode","onPageChange","rowCount","columns","field","headerName","orderTypes","surPlace","livraison","emporter","borne","elementt","sum","ticket","newTva","E","PrintData","ordersType","handleCloseCaisse","showZcaisse","Test","dataLocal","selectedProduct","setselectedProduct","setStep","product_id","prods","Ticket","thisDate","table_id","toShowOrder","settoShowOrder","setrestaurant","element","marginBottom","flexDirection","steps","abs","part","Checkout","clientone","setclientone","isavoir","setisavoir","showform","setshowform","load","setLoad","ordersData","thisOrder","o","orderDate","curr_date","curr_month","curr_year","curr_hour","curr_min","showtwo","setshowtwo","showPay","setShowPay","accompte","setPart","typeRepart","settypeRepart","setpaymentType","setAmount","amountPaid","setamountPaid","notefrais","setnotefrais","setCoupon","payments","setpayments","handlefinal","handleExit","handleCreate","handleVerifyCoupon","paidamount","couponInDb","handleFinal","restAvoir","reso","handleAddition","amountss","boxShadow","faPhone","faMapMarkerAlt","faCircle","align","faEdit","borderRight","faAngleLeft","faAngleRight","faBorderNone","onSubmit","readOnly","controlId","Select","v","stringValue","locale","parts","toLocaleString","unshift","String","RegExp","numberFromLocaleString","Check","label","CheckoutTwo","orderesPartage","check","getkeyborad","setkeyborad","oredertopay","setordertopay","partageorder","ids","items","repartirOrder","totalamount","totalamountPaid","onDragEnd","ind","provided","snapshot","ref","innerRef","isDraggingOver","droppableProps","draggableProps","dragHandleProps","isDragging","draggableStyle","userSelect","grid","margin","handlefinish","handleprint","arryofswitch","pricepart","ts","isAllZero","every","orderToPrint","newPayment","handlePayment","bornSound","selectedOrder","setSelectedOrder","myTime","handleEditOrder","clone","updateSound","takeout","delivery","toOrder","handlePreview","faGlobe","Set","words","pay","search","cash","cc","CalendarScreen","Zcaisse","dateSelected","setdateSelected","setel","createPDF","pdf","jsPDF","html2canvas","document","querySelector","img","toDataURL","imgProperties","getImageProperties","pdfWidth","internal","getWidth","pdfHeight","addImage","save","dayjs","setValue","setshow","border","alignItmes","p","classNam","m","LocalizationProvider","dateAdapter","AdapterDayjs","MobileDatePicker","inputFormat","newValue","month","$M","parseInt","$y","$D","renderInput","TextField","App","ev","returnValue","soundUpdate","exact","Clients","Avoires","Backoffice","rootReducer","combineReducers","authReducer","messageReducer","dataReducer","orderReducer","caisseReducer","persistConfig","version","storage","persistedReducer","persistReducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","render","getElementById"],"mappings":"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","file":"static/js/main.387cc7ce.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 527;","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {};\r\n\r\nconst messageSlice = createSlice({\r\n  name: \"message\",\r\n  initialState,\r\n  reducers: {\r\n    setMessage: (state, action) => {\r\n      return { message: action.payload };\r\n    },\r\n    clearMessage: () => {\r\n      return { message: \"\" };\r\n    },\r\n  },\r\n});\r\n\r\nconst { reducer, actions } = messageSlice;\r\n\r\nexport const { setMessage, clearMessage } = actions;\r\nexport default reducer;\r\n","import axios from \"axios\";\r\n\r\nconst API_URL =\r\n  process.env.REACT_APP_API_HOST +\r\n  \":\" +\r\n  process.env.REACT_APP_API_PORT +\r\n  \"/api/\";\r\n\r\n// const register = (first_name, last_name, email, password) => {\r\n//   return axios.post(API_URL + \"register\", {\r\n//     first_name,\r\n//     last_name,\r\n//     email,\r\n//     password,\r\n//   });\r\n// };\r\n\r\nconst login = (username, password) => {\r\n  return axios\r\n    .post(API_URL + \"login\", {\r\n      username,\r\n      password,\r\n    })\r\n    .then((response) => {\r\n      if (response.data.token) {\r\n        console.log(response.data);\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data.token));\r\n        localStorage.setItem(\"username\", response.data.username);\r\n        localStorage.setItem(\"tva\", response.data.tva);\r\n        localStorage.setItem(\"address\", response.data.address);\r\n        localStorage.setItem(\"telephone\", response.data.telephone);\r\n      }\r\n\r\n      return response.data;\r\n    });\r\n};\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem(\"user\");\r\n};\r\n\r\nconst authService = {\r\n  login,\r\n  logout,\r\n};\r\n\r\nexport default authService;\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { setMessage } from \"./message\";\r\n\r\nimport AuthService from \"../Services/authServices\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\nexport const register = createAsyncThunk(\r\n  \"auth/register\",\r\n  async ({ first_name, last_name, email, password }, thunkAPI) => {\r\n    try {\r\n      const response = await AuthService.register(\r\n        first_name,\r\n        last_name,\r\n        email,\r\n        password\r\n      );\r\n      console.log(response);\r\n      thunkAPI.dispatch(setMessage(response.data.message));\r\n      return response.data;\r\n    } catch (error) {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n      thunkAPI.dispatch(setMessage(message));\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  }\r\n);\r\n\r\nexport const login = createAsyncThunk(\r\n  \"auth/login\",\r\n  async ({ username, password }, thunkAPI) => {\r\n    try {\r\n      const data = await AuthService.login(username, password);\r\n      console.log(data);\r\n      return { user: data };\r\n    } catch (error) {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n      thunkAPI.dispatch(setMessage(message));\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  }\r\n);\r\n\r\nexport const logout = createAsyncThunk(\"auth/logout\", async () => {\r\n  await AuthService.logout();\r\n});\r\n\r\nconst initialState = user\r\n  ? { isLoggedIn: true, user }\r\n  : { isLoggedIn: false, user: null };\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    restore: (state, action) => {\r\n      state.isLoggedIn = true;\r\n      state.user = action.payload.user;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [register.fulfilled]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n    },\r\n    [register.rejected]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n    },\r\n    [login.fulfilled]: (state, action) => {\r\n      state.isLoggedIn = true;\r\n      state.user = action.payload.user;\r\n    },\r\n    [login.rejected]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n      state.user = null;\r\n    },\r\n    [logout.fulfilled]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n      state.user = null;\r\n    },\r\n  },\r\n});\r\n\r\nconst { reducer } = authSlice;\r\nexport const { restore } = authSlice.actions;\r\nexport default reducer;\r\n","const English = {\r\n  success: \"success\",\r\n  verifyUserAndPassword: \"verify username and password\",\r\n  username: \"username\",\r\n  password: \"password\",\r\n  access: \"access\",\r\n  auth: \"authentication\",\r\n  cashier: \"cashier\",\r\n  connect: \"connect\",\r\n  connecter: \"Login \",\r\n  reset: \"reset\",\r\n  freeTable: \"free table\",\r\n  busytables: \"busy table\",\r\n  newTable: \"new table\",\r\n  nbrCouverts: \"number of person\",\r\n  validate: \"validate\",\r\n  backToTable: \"back to tables\",\r\n  couverts: \"person\",\r\n  artice: \"article\",\r\n  price: \"price\",\r\n  surplace: \"Direct \",\r\n  tiroir: \"cash register\",\r\n  cancel: \"cancel\",\r\n  added: \"added\",\r\n  disconnect: \"disconnect\",\r\n  closureHistory: \"closure history\",\r\n  selectDate: \"select a date\",\r\n  print: \"print\",\r\n  latestClosure: \"latest closure\",\r\n  TotalInit: \"initial cashier total\",\r\n  close: \"close\",\r\n  ofCashier: \"of cash register\",\r\n  confirm: \"Confirm\",\r\n  cashierr: \"Cash Register\",\r\n};\r\nexport default English;\r\n","const Francais = {\r\n  success: \"success\",\r\n  verifyUserAndPassword: \"verifier utilisateur et mot de passe\",\r\n  username: \"utilisateur\",\r\n  password: \"mot de passe\",\r\n  access: \"acceder\",\r\n  auth: \"authentification\",\r\n  cashier: \"caisse\",\r\n  connect: \"Connexion\",\r\n  connecter: \"Se connecter\",\r\n  reset: \"reset\",\r\n  freeTable: \"table libre\",\r\n  busytables: \"table en cours\",\r\n  newTable: \"Nouvelle Table\",\r\n  nbrCouverts: \"nombre de couverts\",\r\n  validate: \"valider\",\r\n  backToTable: \"retour Au Tables\",\r\n  couverts: \"couverts\",\r\n  artice: \"Nom\",\r\n  price: \"prix\",\r\n  surplace: \"sur place \",\r\n  tiroir: \"Tiroir\",\r\n  cancel: \"Annuler\",\r\n  aded: \"ajouter\",\r\n  disconnect: \"déconnexion\",\r\n  closureHistory: \"historique de clôtures\",\r\n  selectDate: \"séléctionner une date\",\r\n  print: \"imprimer\",\r\n  latestClosure: \"Derniere Clôture\",\r\n  TotalInit: \"total de caisse initial\",\r\n  close: \"clôturer\",\r\n  ofCashier: \"de caisse\",\r\n  cashierr: \"Caisse\",\r\n  confirm: \"OK\",\r\n};\r\nexport default Francais;\r\n","import i18n from \"i18next\";\r\nimport { useTranslation, initReactI18next } from \"react-i18next\";\r\nimport English from \"./en\";\r\nimport Francais from \"./fr\";\r\ni18n.use(initReactI18next).init({\r\n  resources: {\r\n    en: {\r\n      translation: English,\r\n    },\r\n    fr: {\r\n      translation: Francais,\r\n    },\r\n  },\r\n  lng: \"fr\",\r\n  fallbackLng: \"en\",\r\n  interpolation: {\r\n    escapeValue: false,\r\n  },\r\n});\r\nexport default useTranslation;\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCogs,\r\n  faSignInAlt,\r\n  faTimes,\r\n  faTrash,\r\n  faUnlock,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { login } from \"../Slices/auth\";\r\nimport { useNavigate } from \"react-router\";\r\nimport useTranslation from \"./../i18\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst LoginModal = ({ user, setShowLogin, setClickable }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const [input, setInput] = useState(\"\");\r\n  const [layout, setLayout] = useState(\"default\");\r\n  const keyboard = useRef();\r\n  const [myLayout, setMyLayout] = useState([]);\r\n\r\n  let caise_open = localStorage.getItem(\"caisse_open\");\r\n\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const handleLogin = () => {\r\n    localStorage.setItem(\"username\", user);\r\n    dispatch(login({ username: user, password: input }))\r\n      .unwrap()\r\n      .then((res) => {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: `Connectée`,\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n        caise_open == true ? navigate(\"/main\") : navigate(\"/caisse\");\r\n      })\r\n      .catch((err) => {\r\n        Swal.fire({\r\n          icon: \"error\",\r\n          title: `Verifier Mot de passe`,\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n      });\r\n  };\r\n  const randomize = () => {\r\n    let table = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \" \", \" \"];\r\n    let x = \"\";\r\n    let final = [];\r\n\r\n    let i = 0;\r\n    let j = 0;\r\n    do {\r\n      do {\r\n        let randomIndex = Math.floor(Math.random() * table.length);\r\n        var randomItem = table[randomIndex];\r\n        if (randomItem != \" \") {\r\n          x = x + randomItem + \" \";\r\n        } else {\r\n          x = x + randomItem;\r\n        }\r\n\r\n        i += 1;\r\n        table.splice(randomIndex, 1);\r\n        console.log(\"inner\");\r\n      } while (i != 3);\r\n      final.push(x);\r\n      x = \"\";\r\n      i = 0;\r\n      j += 1;\r\n      console.log(\"outter\");\r\n    } while (j != 4);\r\n    console.log(final);\r\n    setMyLayout([...final]);\r\n  };\r\n  const onChange = (input) => {\r\n    if (input.length < 12) {\r\n      setInput(input);\r\n    }\r\n    console.log(\"Input changed\", input);\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n  };\r\n\r\n  const onChangeInput = (event) => {\r\n    const input = event.target.value;\r\n    setInput(input);\r\n    keyboard.current.setInput(input);\r\n  };\r\n  useEffect(() => {\r\n    randomize();\r\n  }, []);\r\n  return (\r\n    <div className=\"login_container\">\r\n      <div style={{ display: \"flex\" }}>\r\n        <div className=\"mdp_container\">\r\n          <FontAwesomeIcon icon={faUnlock} className=\"mdp_icon\" color=\"white\" />\r\n          <div className=\"input\">\r\n            {input.split(\"\").map((e) => (\r\n              <h1 style={{ color: \"white\" }}>*</h1>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <FontAwesomeIcon\r\n          style={{ marginRight: \"1.2rem\" }}\r\n          icon={faTimes}\r\n          onClick={() => {\r\n            setShowLogin(false);\r\n            setClickable(true);\r\n          }}\r\n          size=\"3x\"\r\n        />\r\n      </div>\r\n\r\n      <Keyboard\r\n        theme={\"hg-theme-default hg-layout-default myTheme\"}\r\n        buttonTheme={[\r\n          {\r\n            class: \"key_btn\",\r\n            buttons: \"0 1 2 3 4 5 6 7 8 9  \",\r\n          },\r\n          {\r\n            class: \"hg-highlight\",\r\n            buttons: \"Q q\",\r\n          },\r\n        ]}\r\n        keyboardRef={(r) => (keyboard.current = r)}\r\n        layoutName={layout}\r\n        layout={{\r\n          default: myLayout,\r\n        }}\r\n        onChange={onChange}\r\n        onKeyPress={onKeyPress}\r\n      />\r\n\r\n      <div\r\n        style={{ display: \"flex\", justifyContent: \"center\", marginTop: \"3rem\" }}\r\n      >\r\n        <Button className=\"my_btn x5\" onClick={() => handleLogin()}>\r\n          <FontAwesomeIcon\r\n            icon={faSignInAlt}\r\n            size=\"1x\"\r\n            color=\"#0dcaf0\"\r\n            style={{ marginRight: \"0.5rem\" }}\r\n          />\r\n          {t(\"connecter\")}\r\n        </Button>\r\n        <Button\r\n          className=\"my_btn x5\"\r\n          onClick={() => {\r\n            setInput(\"\");\r\n            keyboard.current.setInput(\"\");\r\n          }}\r\n        >\r\n          <FontAwesomeIcon\r\n            icon={faTrash}\r\n            size=\"1x\"\r\n            color=\"#0dcaf0\"\r\n            style={{ marginRight: \"0.5rem\" }}\r\n          />\r\n          {t(\"cancel\")}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginModal;\r\n","import React, { useState } from \"react\";\r\nimport LoginModal from \"./LoginModal\";\r\nimport useTranslation from \"./../i18\";\r\n\r\n\r\nconst AuthCard = ({ user }) => {\r\n  const { t } = useTranslation();\r\n  const [showLogin, setShowLogin] = useState(false);\r\n  const [clickable, setClickable] = useState(true);\r\n\r\n  return (\r\n    <div\r\n      className=\"auth_card\"\r\n      onClick={() => {\r\n        if (clickable == true) {\r\n          setShowLogin(!showLogin);\r\n          setClickable(false);\r\n        }\r\n      }}\r\n    >\r\n      <span>\r\n        <img src=\"http://141.94.77.9/caisse/icons/waiter.png\" width=\"128px\" height=\"128px\" alt=\"\" />\r\n      </span>\r\n      <h6>{user}</h6>\r\n      {showLogin && (\r\n        <LoginModal\r\n          user={user}\r\n          setShowLogin={setShowLogin}\r\n          setClickable={setClickable}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthCard;\r\n","import React, { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport AuthCard from \"./AuthCard\";\r\nimport useTranslation from \"./../i18\";\r\n\r\nconst Auth = () => {\r\n  const { t } = useTranslation();\r\n  let users = localStorage.getItem(\"staff\")?.split(\",\") || [];\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (users[0] == undefined) {\r\n      navigate(\"/init\");\r\n    }\r\n  }, []);\r\n  return (\r\n    <div className=\"auth_window\">\r\n      <div style={{ display: \"flex\" }}>\r\n        {users.map((user) => (\r\n          <AuthCard user={user} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","import React from \"react\";\r\n\r\nimport useTranslation from \"./../i18\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport { faFingerprint } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Navi = ({ title }) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"my_navbar\">\r\n      <h4 className=\"logo\">\r\n         \r\n        {t(`${title}`)}\r\n      </h4>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navi;\r\n","import React, { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport Auth from \"../Components/Auth\";\r\nimport Navi from \"../Components/Navi\";\r\nimport \"./Styles.css\";\r\nimport axios from \"axios\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div className=\"my_container\">\r\n      <Navi title=\"connect\" />\r\n      <Auth />\r\n      <Navbar bg=\"light\" variant=\"light\" fixed=\"bottom\">\r\n        <Container>\r\n          <Navbar.Brand href=\"#home\">\r\n            Tous droits reservées <b>CAISSECONNECT.FR</b> © 2022\r\n          </Navbar.Brand>\r\n          <Nav className=\"me-auto\">\r\n            <Nav.Link href=\"#home\"></Nav.Link>\r\n          </Nav>\r\n        </Container>\r\n      </Navbar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","export default __webpack_public_path__ + \"static/media/logo.3c484734.png\";","export default __webpack_public_path__ + \"static/media/initbg.11e4f645.mp4\";","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nconst initialState = {\r\n  zones: [],\r\n  tables: [],\r\n  categories: [],\r\n  products: [],\r\n  nSteps: [],\r\n  orderHistory: [],\r\n  clients: [],\r\n  tva_mode: [],\r\n  coupons:[],\r\n  dataZ:[],\r\n  isallowedLivraison:false,\r\n  isallowedEmporter:false,\r\n  ping:false\r\n\r\n};\r\n\r\nconst dataSlice = createSlice({\r\n  name: \"data\",\r\n  initialState,\r\n  reducers: {\r\n    storeCoupon:(state,action)=>{   \r\n      state.coupons=action.payload.coupons\r\n      console.log(state.coupons)\r\n    },\r\n    storeClients: (state, action) => {\r\n      state.clients = action.payload.clients;\r\n    },\r\n    storeDataz: (state, action) => {\r\n      state.dataZ = action.payload.dataZ;\r\n    },\r\n    storeZones: (state, action) => {\r\n      state.zones = action.payload.zones;\r\n    },\r\n    storeTables: (state, action) => {\r\n      state.tables = action.payload.tables;\r\n    },\r\n    storeCategories: (state, action) => {\r\n      state.categories = action.payload.categories;\r\n    },\r\n    storeProducts: (state, action) => {\r\n      state.products = action.payload.products;\r\n    },\r\n    storeNSteps: (state, action) => {\r\n      state.nSteps = action.payload.nSteps;\r\n    },\r\n    storeOrderHistory: (state, action) => {\r\n      state.orderHistory = action.payload.orderHistory;\r\n    },\r\n    storeTvaMode: (state, action) => {\r\n      state.tva_mode = action.payload.tva_mode;\r\n    },\r\n    updateProduct: (state, action) => {\r\n      let prodIndex = state.products.findIndex(\r\n        (prod) => prod.id == action.payload.id\r\n      );\r\n      let copy = [...state.products];\r\n      let con=0\r\n      copy[prodIndex].active==0?con=1:con=0\r\n      copy[prodIndex] = { ...copy[prodIndex], active:con };\r\n      state.products = copy;\r\n    },\r\n    updateEmporter: (state, action) => {\r\nstate.isallowedEmporter=!state.isallowedEmporter\r\n    },\r\n    updateLivraison: (state, action) => {\r\n      state.isallowedLivraison=!state.isallowedLivraison\r\n          },\r\n\r\n    setPing :(state,action)=>{\r\n      state.ping =action.payload\r\n    }\r\n  },\r\n});\r\n\r\nconst { reducer } = dataSlice;\r\nexport const {\r\n  storeZones,\r\n  storeTables,\r\n  storeCategories,\r\n  storeProducts,\r\n  storeNSteps,\r\n  storeOrderHistory,\r\n  storeClients,\r\n  updateProduct,\r\n  storeTvaMode,\r\n  storeCoupon,\r\n  storeDataz,\r\n  setPing\r\n  \r\n} = dataSlice.actions;\r\nexport default reducer;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Container, Form, Button, Alert, FloatingLabel } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router\";\r\nimport useTranslation from \"./../i18\";\r\nimport video from \"./../Shared/initbg.mp4\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { faEye, faEyeDropper, faEyeSlash, faLockOpen } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { storeClients } from \"../Slices/data\";\r\n\r\nimport \"./Styles.css\";\r\nconst Init = () => {\r\n  const dispatch = useDispatch();\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const [alert, setAlert] = useState({ show: false, variant: \"\", msg: \"\" });\r\n  const [credentials, setCredentials] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  });\r\n  const [session, setSession] = useState(false)\r\n  const [showPassword, setShowPassword] = useState(\"password\")\r\n\r\n\r\n  useEffect(() => {\r\n  let sessionActive = localStorage.getItem(\"session\")\r\n  let user_id = localStorage.getItem(\"user_id\")\r\n  if(sessionActive&&user_id){\r\n    navigate(\"/main\")\r\n  }\r\n  \r\n  \r\n  }, [])\r\n  \r\n  const submitCreds = () => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/init\",\r\n        {\r\n          ...credentials,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        localStorage.setItem(\"staff\", res.data.staff);\r\n        localStorage.setItem(\"user_id\", res.data.user_id);\r\n        localStorage.setItem(\"session\",session)\r\n        localStorage.setItem(\"currency\", res.data.currency);\r\n        dispatch(storeClients({ clients: res.data.clients }));\r\n        setAlert({ show: true, msg: t(\"success\"), variant: \"success\" });\r\n        axios\r\n          .post(\r\n            process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/getCaisse\",\r\n            {\r\n              user_id: res.data.user_id,\r\n            }\r\n          )\r\n          .then((res) => {\r\n            localStorage.setItem(\"caisse_id\", res.data.id);\r\n            localStorage.setItem(\r\n              \"caisse_open\",\r\n              res.data.is_open == true ? 1 : 0\r\n            );\r\n          });\r\n        setTimeout(() => {\r\n          navigate(\"/\");\r\n        }, 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        localStorage.removeItem(\"staff\");\r\n        setAlert({\r\n          show: true,\r\n          msg: t(\"verifyUserAndPassword\"),\r\n          variant: \"danger\",\r\n        });\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"authincation h-100 c\">\r\n      <div className=\"container h-100\">\r\n        <div className=\"row justify-content-center h-100 align-items-center\">\r\n          <div className=\"col-md-6\" >\r\n            <div className=\"authincation-content\" >\r\n              <div className=\"row no-gutters\" >\r\n                <div className=\"col-xl-12\" style={{position:\"relative\"}} >\r\n                  <div className=\"row\" >\r\n                    <div className=\"col-5 mx-auto top\">\r\n                      <br />\r\n                      <div className=\"text-center \" >\r\n                        <img\r\n                          className=\"logo-compact \"\r\n                          src={logo}\r\n                          width=\"100%\"\r\n                          alt=\"\"\r\n                        />\r\n                        <h1 style={{color:\"red\",textAlign:\"center\",fontSize:\"small\",marginTop:\"1rem\",fontWeight:\"700\",width:\"100%\"}} >Assistant:ILAN <br/> + 33 6 25 25 54 52</h1>\r\n                      </div>\r\n\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"auth-form\">\r\n                    <h4 className=\"text-center mb-4\">\r\n                      Connectez-vous à votre compte\r\n                    </h4>\r\n                    <form>\r\n                      <div className=\"form-group\">\r\n                        <label className=\"mb-1 pull-left\">\r\n                          <strong>{t(\"username\")}</strong>\r\n                        </label>\r\n                        <input\r\n                          onChange={(e) =>\r\n                            setCredentials({\r\n                              ...credentials,\r\n                              username: e.target.value,\r\n                            })\r\n                          }\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Nom d'utilisateur\"\r\n                          autocomplete=\"off\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\" >\r\n                        <label className=\"mb-1 pull-left\">\r\n                          <strong>{t(\"password\")}</strong>\r\n                        </label>\r\n                        {showPassword==\"password\"?<FontAwesomeIcon icon={faEye} onClick={()=>setShowPassword(\"text\")} style={{position:\"absolute\",right:\"4%\" ,bottom:\"27.5%\"}} />:\r\n                        <FontAwesomeIcon icon={faEyeSlash} onClick={()=>setShowPassword(\"password\")}  style={{position:\"absolute\",right:\"4%\" ,bottom:\"27.5%\"}}/>\r\n                        }\r\n                        <input\r\n                          onChange={(e) =>\r\n                            setCredentials({\r\n                              ...credentials,\r\n                              password: e.target.value,\r\n                            })\r\n                          }\r\n                          type={showPassword}\r\n                          className=\"form-control\"\r\n                          placeholder=\"Mot de passe\"\r\n                          autocomplete=\"new-password\"\r\n                          v-model=\"User.MotDePasse\"\r\n                          \r\n                        />\r\n                       \r\n                      </div>\r\n                      <div className=\"form-row d-flex justify-content-between mt-4 mb-2\">\r\n                        <div className=\"form-group\">\r\n                          <div className=\"custom-control custom-checkbox ml-1\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              className=\"custom-control-input\"\r\n                              id=\"basic_checkbox_1\"\r\n                              onChange={(e)=>setSession(e.target.checked)}\r\n                            />\r\n                            <label\r\n                              className=\"custom-control-label\"\r\n                              for=\"basic_checkbox_1\"\r\n                            >\r\n                              Gardez-moi connecté\r\n                            </label>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div\r\n                        className=\"alert alert-danger alert-dismissible fade show hidden\"\r\n                        id=\"error\"\r\n                      >\r\n                        <svg\r\n                          viewBox=\"0 0 24 24\"\r\n                          width=\"24\"\r\n                          height=\"24\"\r\n                          stroke=\"currentColor\"\r\n                          stroke-width=\"2\"\r\n                          fill=\"none\"\r\n                          stroke-linecap=\"round\"\r\n                          stroke-linejoin=\"round\"\r\n                          className=\"mr-2\"\r\n                        >\r\n                          <polygon points=\"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2\"></polygon>\r\n                          <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                          <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n                        </svg>\r\n                        <strong id=\"errorMessage\"></strong>\r\n                      </div>\r\n                    </form>\r\n                    <div className=\"text-center col-12\">\r\n                      <Button\r\n                        variant=\"warning\"\r\n                        size=\"lg\"\r\n                        onClick={() => submitCreds()}\r\n                      >\r\n                        <FontAwesomeIcon icon={faLockOpen} /> Se connecter\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {alert.show ? (\r\n              <Alert variant={alert.variant}>{alert.msg}</Alert>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Init;\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  orders: [],\r\n  checkoutData: [],\r\n  currentOrders: [],\r\n  selectedTable: {},\r\n  client: {},\r\n  nbrCouverts: 0,\r\n  remarque: \"\",\r\n  orderType:\"sur place\",\r\n  ordersPartage :[],\r\n  partNotPaid:0\r\n};\r\n\r\n\r\n\r\nconst orderSlice = createSlice({\r\n  name: \"order\",\r\n  initialState,\r\n  reducers: {\r\n    setRemarque: (state, action) => {\r\n      state.remarque = action.payload.remarque;\r\n    },\r\n    storeSelectedTable: (state, action) => {\r\n      console.log(action.payload);\r\n      state.selectedTable = action.payload.selectedTable;\r\n    },\r\n    setNbrCouverts: (state, action) => {\r\n      state.nbrCouverts = action.payload.nbrCouverts;\r\n    },\r\n    setNewCurrentOrder: (state, action) => {\r\n      state.currentOrders = [...state.currentOrders, action.payload.order];\r\n    },\r\n    setNewOrder: (state, action) => {\r\n      let i = state.orders.findIndex(\r\n        (order) => order.id == action.payload.order.id\r\n      );\r\n      let ordersCopy = [...state.orders];\r\n     \r\n      if(i!=-1 && !action.payload.order.is_supp){\r\n        ordersCopy[i]={...ordersCopy[i],qt:ordersCopy[i].qt+1}\r\n        state.orders=[...ordersCopy]\r\n      }else{\r\n        state.orders = [...state.orders, action.payload.order];\r\n      }\r\n    \r\n   \r\n    },\r\n    setOrderChange: (state, action) => {\r\n      let i = state.orders.findIndex(\r\n        (order) => order.id == action.payload.order.id\r\n      );\r\n      let ordersCopy = [...state.orders];\r\n\r\n      ordersCopy[action.payload.key] = action.payload.order;\r\n      state.orders = [...ordersCopy];\r\n    },\r\n    deleteOrder: (state, action) => {\r\n      state.orders = state.orders.filter(\r\n        (_, index) => index != action.payload.key\r\n      );\r\n    },\r\n    clearOrders: (state, action) => {\r\n      state.orders = [];\r\n    },\r\n    clearData: (state, action) => {\r\n      state.checkoutData = [];\r\n    },\r\n    addNewcheckoutData: (state, action) => {\r\n      let check = state.checkoutData.some(\r\n        (e) => e.order_id == action.payload.order.order_id\r\n      );\r\n      if(!check){\r\n        state.checkoutData = [...state.checkoutData, action.payload.order];\r\n        \r\n      }   \r\n      \r\n     \r\n    },\r\n    addNewcheckoutDataFromDB: (state, action) => {\r\n      let i = state.checkoutData.findIndex(\r\n        (el) => el.order_id == action.payload.order.order_id\r\n      );\r\n     \r\n      \r\n      if (i == -1) {\r\n        let orderFromDb = action.payload.order.orderItems.map(item=>{\r\n          return item = {...item,qt:item.quantity}\r\n         \r\n        })\r\n        let taxPrice = action.payload.order.tva*action.payload.order.price/100\r\n        \r\n        state.checkoutData = [...state.checkoutData, {...action.payload.order,orderItems:orderFromDb,orderType:action.payload.order.order_type,taxPrice:taxPrice}];\r\n      }\r\n    },\r\n    deletecheckoutData: (state, action) => {\r\n      state.checkoutData = state.checkoutData.filter(\r\n        (x) => x.order_id != action.payload.order_id\r\n      );\r\n    },\r\n    setCheckoutChange: (state, action) => {\r\n      let i = state.checkoutData.findIndex(\r\n        (order) => order.order_id == action.payload.order.order_id\r\n      );\r\n      let ordersCopy = [...state.checkoutData];\r\n      ordersCopy[i] = action.payload.order;\r\n      state.checkoutData = [...ordersCopy];\r\n    },\r\n    initClient: (state, action) => {\r\n     \r\n      state.client = action.payload.client;\r\n    },\r\n    deleteClientandTable: (state, action) => {\r\n      state.client = {};\r\n      state.selectedTable = {};\r\n    },\r\n    cancelOrder:(state,action)=>{\r\n      \r\n      let x=[...state.checkoutData]\r\n      x.forEach(e=>{\r\n        if ( e.order_id==action.payload.order_id){\r\n          e=action.payload\r\n      \r\n          state.checkoutData=[]\r\n        }\r\n        \r\n      })\r\n      \r\n    },\r\n    setType :(state,action)=>{\r\n      state.orderType = action.payload\r\n    },\r\n    setOrderPartage:(state,action)=>{\r\n  \r\n     state.ordersPartage= action.payload\r\n    \r\n    },\r\n    editordersPartage:(state,action)=>{\r\n      if(action.payload.amount<=0){\r\n        state.partNotPaid = state.partNotPaid -1\r\n      }\r\n      let i = state.ordersPartage.findIndex(\r\n        (order) => order.partId == action.payload.partId\r\n      );\r\n      let Copy = [...state.ordersPartage];\r\n      Copy[i] = action.payload;\r\n      state.ordersPartage = [...Copy];\r\n    },\r\n    clearOrdersPartage:(state,action)=>{\r\n      state.ordersPartage =[]\r\n    },\r\n    setPartNotPaid :(state,action)=>{\r\n      state.partNotPaid= action.payload\r\n    },\r\n    updateReapartirItems:(state,action)=>{\r\n      let copy = [...state.ordersPartage]\r\n      let disIndex =Number(action.payload.destination.droppableId)\r\n      let sourceIndex =Number(action.payload.source.droppableId)\r\n      let itemId =Number(action.payload.draggableId)\r\n      if(disIndex!=sourceIndex){\r\n        copy[disIndex]={\r\n          ...copy[disIndex],\r\n          orderItems:[...copy[disIndex].orderItems,copy[sourceIndex].orderItems.filter(el=>el.repatirId==itemId)[0]],\r\n          totalPrice:copy[disIndex].totalPrice+copy[sourceIndex].orderItems.filter(el=>el.repatirId==itemId)[0].price,\r\n          amount:copy[disIndex].totalPrice+copy[sourceIndex].orderItems.filter(el=>el.repatirId==itemId)[0].price\r\n        }\r\n        copy[sourceIndex]={\r\n          ...copy[sourceIndex],\r\n          orderItems:copy[sourceIndex].orderItems.filter(el=>el.repatirId!=itemId),\r\n          totalPrice: copy[sourceIndex].totalPrice-copy[sourceIndex].orderItems.filter(el=>el.repatirId==itemId)[0].price,\r\n          amount:copy[sourceIndex].totalPrice-copy[sourceIndex].orderItems.filter(el=>el.repatirId==itemId)[0].price\r\n        }\r\n       state.ordersPartage =[...copy]\r\n      }\r\n      \r\n    }\r\n    \r\n\r\n    \r\n  },\r\n});\r\n\r\nconst { reducer } = orderSlice;\r\nexport const {\r\n  storeSelectedTable,\r\n  setNbrCouverts,\r\n  setNewOrder,\r\n  setOrderChange,\r\n  deleteOrder,\r\n  addNewcheckoutData,\r\n  clearOrders,\r\n  deletecheckoutData,\r\n  initClient,\r\n  deleteClientandTable,\r\n  setNewCurrentOrder,\r\n  setCheckoutChange,\r\n  addNewcheckoutDataFromDB,\r\n  setRemarque,\r\n  cancelOrder,\r\n  clearData,\r\n  setType,\r\n  setOrderPartage,\r\n  editordersPartage,\r\n  clearOrdersPartage,\r\n  setPartNotPaid,\r\n  updateReapartirItems\r\n} = orderSlice.actions;\r\nexport default reducer;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, Modal, Table } from \"react-bootstrap\";\r\nimport useTranslation from \"./../i18\";\r\nimport { initClient, setType, storeSelectedTable } from \"../Slices/order\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport { faCheck, faUtensils } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Tables = ({ selectedZone }) => {\r\n  const { t } = useTranslation();\r\n  let rowLayout = [...Array(12).keys()];\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const orders = useSelector((state) => state.order.checkoutData);\r\n  const [selectedTable, setSelectedTable] = useState({});\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [ppl, setPpl] = useState(0);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const table = (e) => {\r\n    return tables\r\n      .filter((t) => t.zone_id == selectedZone)\r\n      .find((table) => table.position == e);\r\n  };\r\n  const onTableClick = (e) => {\r\n    if (table(e) != undefined && table(e).active != 0) {\r\n      setSelectedTable({\r\n        id: table(e).id,\r\n        nbr: table(e).numero,\r\n        ppl: table(e).nbrePersonne,\r\n        libre: table(e).libre,\r\n        nbrCouverts: 1,\r\n      });\r\n      if (table(e).libre == false) {\r\n        let myorder = orders.filter(\r\n          (one) => one.table_number == table(e).id && one.status!=\"completed\"\r\n        )[0];\r\n\r\n        navigate(`/checkout/${myorder.order_id}`);\r\n      } else {\r\n        setShowModal(true);\r\n      }\r\n    }\r\n  };\r\n  const toMenu = () => {\r\n    setShowModal(false);\r\n    console.log(selectedTable);\r\n    dispatch(storeSelectedTable({ selectedTable }));\r\n    dispatch(initClient({ client: { type: \"sur place\" } }));\r\n    dispatch(setType(\"sur place\"))\r\n    setTimeout(() => {\r\n      navigate(\"/menu\");\r\n    }, 300);\r\n  };\r\n\r\n  const handleCheckout = () => {\r\n    navigate(`/checkout/${selectedTable.id}`);\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginTop: \"1rem\" }}>\r\n      <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n        <Table style={{  }}>\r\n          <tbody>\r\n            <tr>\r\n              {rowLayout.map((e) => (\r\n                <td>\r\n                  <Button \r\n                    className={\r\n                      table(e)?.type == \"rond\" ? \"table_btn round\" : \"table_btn\" \r\n                    }\r\n                    variant={\r\n                      table(e)\r\n                        ? table(e)?.active\r\n                          ? table(e)?.libre\r\n                            ? \"success\"\r\n                            : \"danger\"\r\n                          : \"secondary\"\r\n                        : \"dark\"\r\n                    }\r\n                    onClick={() => onTableClick(e)}\r\n                  >\r\n                    {table(e)?.numero}\r\n                  </Button>\r\n                </td>\r\n              ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 12)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 24)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 36)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 48)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 60)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n      </div>\r\n      <Modal show={showModal} onHide={() => setShowModal(false)}>\r\n        {selectedTable.libre == true ? (\r\n          <>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>\r\n                <h5 style={{ fontSize: \"24px\" }}>\r\n                  <FontAwesomeIcon\r\n                    icon={faUtensils}\r\n                    style={{ marginRight: \"1rem\" }}\r\n                  />\r\n                  {t(\"newTable\")}\r\n                </h5>\r\n              </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              {t(\"nbrCouverts\")}\r\n              {Array.from({ length: selectedTable.ppl }, (_, i) => i + 1).map(\r\n                (e) => (\r\n                  <Button\r\n                    className=\"ml\"\r\n                    onClick={() => {\r\n                      setSelectedTable({ ...selectedTable, nbrCouverts: e });\r\n                      console.log(selectedTable);\r\n                    }}\r\n                    variant={\r\n                      selectedTable?.nbrCouverts == e ? \"warning\" : \"dark\"\r\n                    }\r\n                    style={{\r\n                      backgroundColor:\r\n                        selectedTable?.nbrCouverts == e ? \"#ff6b6b\" : \"black\",\r\n                      borderColor:\r\n                        selectedTable?.nbrCouverts == e ? \"#ff6b6b\" : \"black\",\r\n                    }}\r\n                  >\r\n                    {e}\r\n                  </Button>\r\n                )\r\n              )}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\r\n                {t(\"cancel\")}\r\n              </Button>\r\n              <Button\r\n                style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n                variant=\"warning\"\r\n                onClick={() => toMenu()}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCheck}\r\n                  style={{ marginRight: \"0.5rem\" }}\r\n                />\r\n                {t(\"validate\")}\r\n              </Button>\r\n            </Modal.Footer>\r\n          </>\r\n        ) : (\r\n          <Modal.Body>\r\n            <Button variant=\"danger\" onClick={() => handleCheckout()}>\r\n              Checkout !\r\n            </Button>\r\n          </Modal.Body>\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tables;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { storeTables, storeZones } from \"../Slices/data\";\r\nimport { Button, Offcanvas, Stack } from \"react-bootstrap\";\r\nimport Tables from \"./Tables\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faAddressBook,\r\n  faBars,\r\n  faBorderAll,\r\n  faCashRegister,\r\n  faDesktop,\r\n  faHistory,\r\n  faMotorcycle,\r\n  faStickyNote,\r\n  faUsers,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nconst Zones = () => {\r\n  const ping = useSelector((state) => state.data.ping);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [selectedZone, setSelectedZone] = useState(\"\");\r\n  const zones = useSelector((state) => state.data.zones);\r\n  const checkoutData = useSelector((state) => state.order.checkoutData);\r\n  const [show, setShow] = useState(false);\r\n  \r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  useEffect(() => {\r\n    \r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getUserZones\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n      \r\n        dispatch(storeZones({ zones: res.data.zones }));\r\n        dispatch(storeTables({ tables: res.data.tables }));\r\n        setSelectedZone(zones[0]?.id);\r\n      });\r\n  }, [checkoutData,ping]);\r\n\r\n  return (\r\n    <div>\r\n      <FontAwesomeIcon\r\n        icon={faBars}\r\n        style={{\r\n          position: \"absolute\",\r\n          right: \"1rem\",\r\n          top: \"1rem\",\r\n          cursor: \"pointer\",\r\n        }}\r\n        size=\"2x\"\r\n        color=\"white\"\r\n        onClick={handleShow}\r\n      />\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          marginTop: \"1.5rem\",\r\n          height: \"45px\",\r\n        }}\r\n      >\r\n        <h2 className=\"plan-restuarnat\"  style={{ position: \"absolute\", left: \"3.5%\" }}>\r\n          <b>Plan du Restaurant</b>\r\n        </h2>\r\n        {zones.map((zone) => (\r\n          <Button\r\n          className=\"zone_button\"\r\n            style={{ marginLeft: \"1rem\" }}\r\n            onClick={() => setSelectedZone(zone.id)}\r\n            variant={selectedZone == zone.id ? \"dark\" : \"outline-dark\"}\r\n          >\r\n            {zone.nom}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n      <Tables selectedZone={selectedZone} />\r\n      <Offcanvas placement=\"end\" show={show} onHide={handleClose}>\r\n        <Offcanvas.Header closeButton>\r\n          <Offcanvas.Title>menu</Offcanvas.Title>\r\n        </Offcanvas.Header>\r\n        <Offcanvas.Body>\r\n          <div className=\"my_offcanvas\">\r\n            <div className=\"offcanvas_item\" onClick={()=>navigate(\"/backoffice\")}>\r\n              <FontAwesomeIcon icon={faDesktop} />\r\n              <p>Accéder aux back-Office</p>\r\n            </div>\r\n            <div\r\n              className=\"offcanvas_item\"\r\n              onClick={() => navigate(\"/clients\")}\r\n            >\r\n              <FontAwesomeIcon icon={faUsers} />\r\n              <p>Gestion des clients</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faMotorcycle} />\r\n              <p>Commandes a livrer</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faAddressBook} />\r\n              <p>Commandes a emporter</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\" onClick={()=>navigate(\"/avoires\")}>\r\n              <FontAwesomeIcon icon={faStickyNote} />\r\n              <p>Gestion des avoirs</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\" onClick={()=>navigate(\"/cloture\")}>\r\n              <FontAwesomeIcon icon={faCashRegister} />\r\n              <p>Cloture de caisse</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faBorderAll} />\r\n              <p>Cumuler les tables</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faHistory} />\r\n              <p>Rappel ticket</p>\r\n            </div>\r\n          </div>\r\n        </Offcanvas.Body>\r\n      </Offcanvas>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Zones;\r\n","export default __webpack_public_path__ + \"static/media/bg.74e24a49.jpeg\";","export default __webpack_public_path__ + \"static/media/loading.30c0aa7c.gif\";","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Badge,\r\n  Breadcrumb,\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n  Tab,\r\n  Tabs,\r\n} from \"react-bootstrap\";\r\n\r\nimport Swal from \"sweetalert2\";\r\n\r\nimport {\r\n  storeCategories,\r\n  storeNSteps,\r\n  storeOrderHistory,\r\n  storeProducts,\r\n  storeTvaMode,\r\n} from \"../Slices/data\";\r\nimport { addNewcheckoutDataFromDB, setType } from \"../Slices/order\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport {\r\n  clearOrders,\r\n  deleteClientandTable,\r\n  initClient,\r\n  setRemarque,\r\n  storeSelectedTable,\r\n} from \"../Slices/order\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport {\r\n  faCheckSquare,\r\n  faEdit,\r\n  faHistory,\r\n  faLockOpen,\r\n  faPlus,\r\n  faPrint,\r\n  faStickyNote,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport timespan from \"jsonwebtoken/lib/timespan\";\r\nimport { Typeahead } from \"react-bootstrap-typeahead\";\r\nimport axios from \"axios\";\r\nimport { storeClients } from \"../Slices/data\";\r\nimport loading from \"../Shared/loading.gif\";\r\nimport { BiTransfer } from \"react-icons/bi\";\r\n\r\nconst NaviBottom = () => {\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const zones = useSelector((state) => state.data.zones);\r\n  const [selectedZone, setSelectedZone] = useState(\"\");\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const ordersHistory = useSelector((state) => state.data.orderHistory);\r\n  const checkoutData = useSelector((state) => state.order.checkoutData);\r\n  const clients = useSelector((state) => state.data.clients);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  let freeTables = tables?.filter((table) => table.libre == true)?.length;\r\n\r\n  let busyTables = tables?.filter((table) => table.libre == false)?.length;\r\n\r\n  const [show, setShow] = useState(false);\r\n  const [showNote, setShowNote] = useState(false);\r\n  const [showHistoryButton, setshowHistoryButton] = useState(false);\r\n\r\n  const [note, setnote] = useState(\"\");\r\n\r\n  var ID = function () {\r\n    return Number(\r\n      Math.floor(Math.random() * Date.now())\r\n        .toString()\r\n        .substring(11)\r\n    );\r\n  };\r\n\r\n  const path = window.location.hash;\r\n\r\n  let clientsData = clients.map((client) => client.nom_prenom);\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substr(0, 10);\r\n  var time = curr.getHours() + \":\" + curr.getMinutes();\r\n  let avenir = checkoutData?.filter((e) => e.date > date)?.length || 0;\r\n  let enCours =\r\n    checkoutData?.filter((e) => (e.status == \"pending\" ||e.status==\"cooking\"||e.status==\"ready\")&& e.date == date)\r\n      ?.length || 0;\r\n  let annuler =\r\n    checkoutData?.filter((e) => e.status == \"rejected\")?.length || 0;\r\n\r\n  let orderNbr =\r\n    ordersHistory?.filter((e) => e.status == \"completed\")?.length || 0;\r\n  const handleAddNote = () => {\r\n    dispatch(setRemarque({ remarque: note }));\r\n    setShowNote(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getclients\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeClients({ clients: res.data.clients }));\r\n      });\r\n  }, []);\r\n  const [orderHistory, setOrderHistory] = useState([]);\r\n\r\n  const [orderLoding, setOrderLoding] = useState(false);\r\n  const [selectedTable, setSelectedTable] = useState({});\r\n  const [newClient, setnewClient] = useState({});\r\n  const [showHistory, setshowHistory] = useState(false);\r\n  const [Table_nbr, setTable_nbr] = useState(0);\r\n  const [old, setOld] = useState(false);\r\n  const [textorder_id, settextorder_id] = useState(\"\");\r\n\r\n  const [client, setClient] = useState({\r\n    prenom: \"\",\r\n    company: \"\",\r\n    code1: \"\",\r\n    code2: \"\",\r\n    etage: \"\",\r\n    interphone: \"\",\r\n    name: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    post: \"\",\r\n    city: \"\",\r\n    message: \"\",\r\n    email: \"\",\r\n    type: \"emporter\",\r\n    nbrCouverts: 1,\r\n    id: ID(),\r\n    date: date,\r\n    time: time,\r\n  });\r\n\r\n  const table = (e) => {\r\n    return tables.find((table) => table.numero == e);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setShow(false);\r\n    setshowHistory(false);\r\n  };\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleNewOrder = () => {\r\n    dispatch(deleteClientandTable());\r\n    handleShow();\r\n  };\r\n\r\n  const handleGetOrders = async () => {\r\n    setOrderLoding(true);\r\n    const caisse_id = localStorage.getItem(\"caisse_id\");\r\n    await axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getallorders\",\r\n        {\r\n          user_id,\r\n          caisse_id,\r\n          customer_id: client.id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log({ zboub: res.data });\r\n        setOrderHistory(res.data);\r\n        setOrderLoding(false);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  // const handleCreate = async () => {\r\n  //   if (old == false) {\r\n  //     await axios\r\n  //       .post(\"/api/createClient\", {\r\n  //         user_id,\r\n  //         client: {\r\n  //           etage: client.etage || 0,\r\n  //           interphone: client.interphone || 0,\r\n  //           supprimer: 0,\r\n  //           societe: client.company || \"\",\r\n  //           nom_prenom: client.name || \"\",\r\n  //           telephone: client.phone || \"\",\r\n  //           adresse: client.address || \"\",\r\n  //           code_postal: client.post || 0,\r\n  //           ville: client.city || \"\",\r\n  //           email: client.email || \"\",\r\n  //           code_1: client.code1 || \"\",\r\n  //           code_2: client.code2 || \"\",\r\n  //         },\r\n  //       })\r\n  //       .then((res) => {\r\n  //         setClient({ ...client, id: res.data.id });\r\n  //        console.log({ client: client.id, data: res.data });\r\n  //       })\r\n  //       .catch((err) => console.log(err));\r\n  //   }\r\n  //   if (client?.type == \"sur place\") {\r\n  //     console.log(table(Table_nbr).id);\r\n  //     dispatch(\r\n  //       storeSelectedTable({\r\n  //         selectedTable: {\r\n  //           id: table(Table_nbr).id,\r\n  //           nbr: table(Table_nbr).numero,\r\n  //           ppl: table(Table_nbr).nbrePersonne,\r\n  //           libre: table(Table_nbr).libre,\r\n  //           nbrCouverts: 1,\r\n  //         },\r\n  //       })\r\n  //     );\r\n  //     handleClose();\r\n  //     navigate(\"/menu\");\r\n  //   }\r\n  //   dispatch(initClient({ client }));\r\n\r\n  // };\r\n  const handleCreate = () => {\r\n    if (old == false) {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/createClient\",\r\n          {\r\n            user_id,\r\n            client: {\r\n              etage: client.etage || 0,\r\n              interphone: client.interphone || 0,\r\n              supprimer: 0,\r\n              societe: client.company || \"\",\r\n              nom_prenom: client.name || \"\",\r\n              telephone: client.phone || \"\",\r\n              adresse: client.address || \"\",\r\n              code_postal: client.post || 0,\r\n              ville: client.city || \"\",\r\n              email: client.email || \"\",\r\n              code_1: client.code1 || \"\",\r\n              code_2: client.code2 || \"\",\r\n            },\r\n          }\r\n        )\r\n        .then((res) => {\r\n\r\n          setClient({ ...client, id: res.data.id });\r\n          dispatch(initClient({ client: { ...client, id: res.data.id } }));\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      dispatch(initClient({ client }));\r\n    }\r\n    if (client.type == \"sur place\") {\r\n      \r\n    if (Table_nbr==0)\r\n    {\r\n      Swal.fire({\r\n        title: \"Selectioner une table !\",\r\n      });\r\n    }\r\n    else{\r\n      dispatch(\r\n        storeSelectedTable({\r\n          selectedTable: {\r\n            id: table(Table_nbr).id,\r\n            nbr: table(Table_nbr).numero,\r\n            ppl: table(Table_nbr).nbrePersonne,\r\n            libre: table(Table_nbr).libre,\r\n            nbrCouverts: 1,\r\n          },\r\n        })\r\n      );\r\n      handleClose();\r\n      \r\n      navigate(\"/menu\");\r\n    }     \r\n    }\r\nif(client.type!=\"sur place\")\r\n{\r\n  handleClose();\r\n    navigate(\"/menu\");\r\n}\r\n    \r\n  };\r\n\r\n  const handleSelection = (x) => {\r\n    setshowHistoryButton(true);\r\n    setOld(true);\r\n    let selectedClient = clients?.filter(\r\n      (e) =>\r\n        e.nom_prenom?.toLowerCase().includes(x?.toLowerCase()) ||\r\n        e.telephone?.toLowerCase().includes(x?.toLowerCase()) ||\r\n        e.email?.toLowerCase().includes(x?.toLowerCase())\r\n    )[0];\r\n\r\n   \r\n    if (selectedClient) {\r\n      setClient({\r\n        ...client,\r\n        id: selectedClient.id,\r\n        prenom: selectedClient.nom_prenom,\r\n        company: selectedClient.societe,\r\n        code1: selectedClient.code_1,\r\n        code2: selectedClient.code_2,\r\n        etage: selectedClient.etage,\r\n        interphone: selectedClient.interphone,\r\n        name: selectedClient.nom_prenom,\r\n        phone: selectedClient.telephone,\r\n        address: selectedClient.adresse,\r\n        post: selectedClient.code_postal,\r\n        city: selectedClient.ville,\r\n        email: selectedClient.email,\r\n      });\r\n    }\r\n  };\r\n  //test\r\n\r\n  const handlePrint = (newOrder) => {\r\n    \r\n    let order = {\r\n      table: newOrder?.table_number || \"\",\r\n      client_id: newOrder?.customer_id || 0,\r\n      order_id: newOrder.id,\r\n      message: newOrder.message || \"aucune\",\r\n      customer_name: newOrder?.customer_name || \"\",\r\n      customer_company: newOrder?.customer_company || \"\",\r\n      code1: newOrder?.code1 || \"\",\r\n      code2: newOrder?.code2 || \"\",\r\n      interphone: newOrder?.interphone || \"\",\r\n      etage: newOrder?.etage || \"\",\r\n      table_number: newOrder?.table_number || 0,\r\n      customer_tel: newOrder?.customer_tel || \"\",\r\n      customer_adress: newOrder?.customer_adress,\r\n      status: newOrder?.status,\r\n      orderType: newOrder?.order_type,\r\n      paymentType: newOrder?.pay_method,\r\n      totalPrice: newOrder?.price,\r\n      taxPrice: newOrder?.tva,\r\n      tvas: (newOrder?.price * newOrder?.tva) / 100,\r\n      orderItems: newOrder?.orderItems,\r\n      date: newOrder?.date,\r\n      time: newOrder?.time,\r\n    };\r\n    // console.log(calcTotal().tvas);\r\n    // newOrders.map((one) => {\r\n    //   order.orderItems.push({\r\n    //     ...one,\r\n    //     price: one.price,\r\n    //     tva: one.tva,\r\n    //   });\r\n    // });\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printOrder\",\r\n        {\r\n          kitchen: false,\r\n          user_id: user_id,\r\n          order: {\r\n            new: false,\r\n            ...order,\r\n\r\n            // Date: new Date(),\r\n            nbrCouverts: 1,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  console.log(\"path\", path);\r\n  return (\r\n    <div>\r\n      <Navbar bg=\"light\" variant=\"light\" fixed=\"bottom\" className=\"nav-buttom\">\r\n        <Container>\r\n          <Nav className=\"me-auto\">\r\n            <Nav.Link>\r\n              <Button variant=\"success\" className=\"nav-buttom-button\">\r\n                Libres <Badge bg=\"success\">{freeTables}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                variant=\"danger\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/encours\");\r\n                }}\r\n                className=\"nav-buttom-button\"\r\n              >\r\n                En cours<Badge bg=\"danger\"> {enCours}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button variant=\"info\" className=\"nav-buttom-button\">\r\n                Livrés <Badge bg=\"info\">0</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                variant=\"warning\"\r\n                className=\"nav-buttom-button\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/annules\");\r\n                }}\r\n              >\r\n                Annulées <Badge bg=\"warning\">{annuler}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                className=\"nav-buttom-button\"\r\n                variant=\"dark\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/avenir\");\r\n                }}\r\n              >\r\n                Commandes a Venir <Badge bg=\"dark\">{avenir}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                className=\"nav-buttom-button\"\r\n                variant=\"primary\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/all\");\r\n                }}\r\n              >\r\n                Terminées <Badge bg=\"primary\">{orderNbr}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n          \r\n            <Nav.Link>\r\n              <Button\r\n                variant=\"warning\"\r\n                className=\"nav-buttom-button\"\r\n                onClick={() => {\r\n                  axios\r\n                    .post(\r\n                      process.env.REACT_APP_API_HOST +\r\n                        \":\" +\r\n                        process.env.REACT_APP_API_PORT +\r\n                        \"/api/getorder\",\r\n                      {\r\n                        user_id: user_id,\r\n                        order_id: textorder_id,\r\n                      }\r\n                    )\r\n                    .then((res) => {\r\n                      // dispatch(storeClients({ clients: res.data.clients }));\r\n                      console.log(res.data);\r\n                      if (res.data == \"no data\") {\r\n                        Swal.fire({\r\n                          icon: \"warning\",\r\n                          title: `pas de commande avec cet identifiant`,\r\n                          showConfirmButton: false,\r\n                          timer: 1500,\r\n                        });\r\n                      }else if(res.data[0].status==\"completed\"){\r\n                        Swal.fire({\r\n                          icon: \"warning\",\r\n                          title: `la commande est terminée `,\r\n                          showConfirmButton: false,\r\n                          timer: 1500,\r\n                        });\r\n                      }\r\n                       else  {\r\n                        console.log(res.data[0].status);\r\n                        navigate(`/checkout/${textorder_id}`);\r\n                      }\r\n                    });\r\n                }}\r\n              >\r\n                <FontAwesomeIcon icon={faPlus} />\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Form.Control\r\n                 className=\"order_id_input\"\r\n                type=\"text\"\r\n                placeholder=\"Order_id\"\r\n                onChange={(e) => {\r\n                  console.log(e.target.value);\r\n                  settextorder_id(e.target.value);\r\n                }}\r\n              />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <Button\r\n            className=\"nav-buttom-button nouvelle-cmd-btn\"\r\n            style={{ borderRadius: \"50px !important\" }}\r\n            variant=\"success\"\r\n            size=\"lg\"\r\n            onClick={() => handleNewOrder()}\r\n          >\r\n            <FontAwesomeIcon icon={faPlus} style={{ marginRight: \"1rem\" }} />\r\n            Nouvelle Commande\r\n          </Button>\r\n          {path.includes(\"menu\") ? (\r\n            <Button\r\n              className=\"nav_butoons-note\"\r\n              onClick={() => setShowNote(true)}\r\n              style={{\r\n                borderRadius: \"50px !important\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                borderColor: \"#d63031\",\r\n                backgroundColor: \"transparent\",\r\n                marginLeft: \"0.5rem\",\r\n              }}\r\n              variant=\"secondary\"\r\n              size=\"lg\"\r\n            >\r\n              <FontAwesomeIcon icon={faStickyNote} color=\"#d63031\" />\r\n            </Button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Container>\r\n\r\n        <Modal show={showNote} onHide={() => setShowNote(false)}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Remarque</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <FormGroup>\r\n              <h3>\r\n                <FontAwesomeIcon\r\n                  icon={faStickyNote}\r\n                  color=\"#d63031\"\r\n                  style={{ marginRight: \"1rem\" }}\r\n                />\r\n                Note\r\n              </h3>\r\n              <Form.Control\r\n                onChange={(e) => setnote(e.target.value)}\r\n                as=\"textarea\"\r\n                type=\"text\"\r\n                placeholder=\"Remarque ...\"\r\n              ></Form.Control>\r\n            </FormGroup>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={() => setShowNote(false)}>\r\n              Annuler\r\n            </Button>\r\n            <Button\r\n              variant=\"warning\"\r\n              style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n              onClick={handleAddNote}\r\n            >\r\n              Ajouter\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n\r\n        <Modal\r\n          show={show}\r\n          onHide={handleClose}\r\n          style={{ zIndex: 1050, left: -120, top: 50 }}\r\n        >\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>\r\n              <div style={{ width: \"100%\" }}>\r\n                <h5>Choix du mode de consommation</h5>\r\n                {user_id!='150'?<Button\r\n                  size=\"lg\"\r\n                  variant={\r\n                    client?.type == \"emporter\" ? \"light\" : \"outline-warning\"\r\n                  }\r\n                  style={{\r\n                    borderColor: \"#ff6b6b\",\r\n                    color: \"#ff6b6b\",\r\n                    marginRight: \"2rem\",\r\n                  }}\r\n                  onClick={() => {dispatch(setType(\"emporter\")) ;setClient({ ...client, type: \"emporter\" })}}\r\n                >\r\n                  A emporter\r\n                </Button>:''}\r\n                \r\n\r\n{user_id!='150'? <Button\r\n                  size=\"lg\"\r\n                  variant={\r\n                    client?.type == \"livraison\" ? \"light\" : \"outline-warning\"\r\n                  }\r\n                  style={{\r\n                    borderColor: \"#ff6b6b\",\r\n                    color: \"#ff6b6b\",\r\n                    marginRight: \"2rem\",\r\n                  }}\r\n                  onClick={() => {dispatch(setType(\"livraison\")) ;setClient({ ...client, type: \"livraison\" })}}\r\n                >\r\n                  Livraison\r\n                </Button>:\"\"}\r\n               \r\n                <Button\r\n                  size=\"lg\"\r\n                  variant={\r\n                    client?.type == \"sur place\" ? \"light\" : \"outline-warning\"\r\n                  }\r\n                  style={{ borderColor: \"#ff6b6b\", color: \"#ff6b6b\" }}\r\n                  onClick={() => {dispatch(setType(\"sur place\"))  ;setClient({ ...client, type: \"sur place\" })}}\r\n                >\r\n                  sur place\r\n                </Button>\r\n              </div>\r\n            </Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            {showHistory && (\r\n              <div className=\"histo\">\r\n                <h1 style={{ textAlign: \"center\" }}>\r\n                  {\" \"}\r\n                  <b>Historique Client</b>{\" \"}\r\n                  <FontAwesomeIcon\r\n                    onClick={() => {\r\n                      setshowHistory(false);\r\n                      setOrderHistory([]);\r\n                    }}\r\n                    className=\"times\"\r\n                    icon={faTimes}\r\n                  />\r\n                </h1>\r\n                <div className=\"hhead\">\r\n                  <h3 className=\"wid\">Type</h3>\r\n                  <h3 className=\"wid\">Date</h3>\r\n                  <h3 className=\"wid\">Order</h3>\r\n                  <h3 className=\"wid\">Prix</h3>\r\n                  <h3 className=\"wid\">Paiement</h3>\r\n                </div>\r\n                <div className=\"hbody\">\r\n                  {orderHistory.length == 0 && !orderLoding ? (\r\n                    <h1>Aucune Commande trouvée</h1>\r\n                  ) : orderLoding ? (\r\n                    <div style={{ display: \"flex\" }}>\r\n                      <h3>Chargement en cours</h3>\r\n                      <img src={loading} alt=\"loading\" width={30} />\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                  {orderHistory?.map((order, key) => (\r\n                    <div className=\"el\">\r\n                      <h5 className=\"wid\">{order?.order_type}</h5>\r\n                      <h5 className=\"wid\">{order?.date}</h5>\r\n                      <h5 className=\"wid\">#{order?.id}</h5>\r\n                      <h5 className=\"wid\">{order?.price?.toFixed(2)}€</h5>\r\n                      <h5 className=\"wid\">{order?.pay_method}</h5>\r\n                      <FontAwesomeIcon\r\n                        icon={faPrint}\r\n                        onClick={() => handlePrint(order)}\r\n                        style={{ cursor: \"pointer\" }}\r\n                      />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                {/* <Button className=\"impr_btn\" style={{ marginBottom: \"1rem\" }}>\r\n                  Imprimer\r\n                </Button> */}\r\n              </div>\r\n            )}\r\n            <div>\r\n              {client?.type == \"livraison\" ? (\r\n                <div>\r\n                  <Form auto>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.name}\r\n                            type=\"text\"\r\n                            placeholder=\"nom/prenom\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, name: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          {client.telephone?.length > 0 &&\r\n                          client.telephone?.length < 10 ? (\r\n                            <Badge bg=\"danger\">\r\n                              Numero pas valide (10 chiffres obligatoire)\r\n                            </Badge>\r\n                          ) : (\r\n                            \"\"\r\n                          )}\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setClient({ ...client, phone: e });\r\n                              \r\n                            }}\r\n                            onChange={(e) => {\r\n                              handleSelection(e[0]);\r\n                              console.log(e);\r\n                            }}\r\n                            options={clients.map((client) => client.telephone)}\r\n                            placeholder=\"telephone\"\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            max=\"5\"\r\n                          />\r\n                        </Col>\r\n\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.email}\r\n                            type=\"email\"\r\n                            placeholder=\"Email\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, email: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.address}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"Addresse\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                address: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.company}\r\n                            type=\"text\"\r\n                            placeholder=\"société\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                company: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.code1}\r\n                            type=\"text\"\r\n                            placeholder=\"code 1\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, code1: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.code2}\r\n                            type=\"text\"\r\n                            placeholder=\"code 2\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, code2: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n\r\n                        <Col xs=\"6\">\r\n                          <Form.Control\r\n                            value={client.city}\r\n                            type=\"text\"\r\n                            placeholder=\"Ville\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, city: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.interphone}\r\n                            type=\"text\"\r\n                            placeholder=\"interphone\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                interphone: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.etage}\r\n                            type=\"text\"\r\n                            placeholder=\"etage\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, etage: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col xs=\"6\">\r\n                          <Form.Control\r\n                            value={client.post}\r\n                            type=\"postal\"\r\n                            placeholder=\"Code postal\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, post: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.message}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"remarque\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                message: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.date}\r\n                            type=\"date\"\r\n                            defaultValue={client.date}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, date: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.time}\r\n                            type=\"time\"\r\n                            defaultValue={client.time}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, time: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  </Form>\r\n                </div>\r\n              ) : client?.type == \"emporter\" ? (\r\n                <div>\r\n                  <Form auto>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.name}\r\n                            type=\"text\"\r\n                            placeholder=\"nom/prenom\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, name: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          {client.telephone?.length > 0 &&\r\n                          client.telephone?.length < 10 ? (\r\n                            <Badge bg=\"danger\">\r\n                              Numero pas valide (10 chiffres obligatoire)\r\n                            </Badge>\r\n                          ) : (\r\n                            \"\"\r\n                          )}\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setClient({ ...client, phone: e });\r\n                              setOld(false);\r\n                              setshowHistory(false);\r\n                            }}\r\n                            onChange={(e) => {\r\n                              handleSelection(e[0]);\r\n                              console.log(e);\r\n                            }}\r\n                            options={clients.map((client) => client.telephone)}\r\n                            placeholder=\"telephone\"\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.message}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"remarque\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                message: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.date}\r\n                            type=\"date\"\r\n                            defaultValue={client.date}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, date: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.time}\r\n                            type=\"time\"\r\n                            defaultValue={client.time}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, time: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  </Form>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <Form auto>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setClient({ ...client, name: e });\r\n                              setOld(false);\r\n                              setshowHistory(false);\r\n                            }}\r\n                            onChange={(e) => handleSelection(e[0])}\r\n                            options={clients.map((client) => client.nom_prenom)}\r\n                            placeholder=\"nom/prenom\"\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col\r\n                        style={{\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          flexWrap: \"wrap\",\r\n                        }}\r\n                        >\r\n                          <h3>Zones :</h3>\r\n                          {zones.map((zone) => (\r\n                            <Button\r\n                              className=\"zone_button\"\r\n                              style={{ marginLeft: \"1rem\" }}\r\n                              onClick={() => setSelectedZone(zone.id)}\r\n                              variant={selectedZone == zone.id ? \"dark\" : \"outline-dark\"}\r\n                             \r\n                            >\r\n                              {zone.nom}\r\n                            </Button>\r\n                          ))}\r\n                        </Col>\r\n                      </Row>\r\n                      <Row>\r\n                        <Col\r\n                          style={{\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            flexWrap: \"wrap\",\r\n                          }}\r\n                        >\r\n                          <h3>Tables :</h3>\r\n                          {tables\r\n                            .filter((e) => e.active == true && e.libre == true && e.zone_id == selectedZone)\r\n                            .map((el) => (\r\n                              <div\r\n                                className={\r\n                                  el.numero == Table_nbr ? \"tbl sel\" : \"tbl\"\r\n                                }\r\n                                onClick={() => setTable_nbr(el.numero)}\r\n                              >\r\n                                <h6>\r\n                                  <b>{el.numero}</b>\r\n                                </h6>\r\n                              </div>\r\n                            ))}\r\n                          {/* <Form.Control\r\n                              value={Table_nbr}\r\n                              type=\"number\"\r\n                              placeholder=\"Numero de la table\"\r\n                              onChange={(e) => setTable_nbr(e.target.value)}\r\n                            /> */}\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.message}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"remarque\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, message: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  </Form>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            {showHistoryButton ? (\r\n              <Button\r\n                variant=\"warning\"\r\n                style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n                onClick={() => {\r\n                  setshowHistory(!showHistory);\r\n                  handleGetOrders();\r\n                }}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faHistory}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Historiques\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <Button variant=\"outline-secondary\" onClick={handleClose}>\r\n              Annuler\r\n            </Button>\r\n            <Button\r\n              variant=\"warning\"\r\n              style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n              onClick={() => handleCreate()}\r\n            >\r\n              <FontAwesomeIcon\r\n                icon={faCheckSquare}\r\n                style={{ marginRight: \"5px\" }}\r\n              />\r\n              Créer la vente\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </Navbar>\r\n      {/* <div>\r\n            <h3>\r\n              <FontAwesomeIcon\r\n                icon={faPencilAlt}\r\n                style={{ width: \"24\", marginRight: \"0.5rem\" }}\r\n              />\r\n              Remarque\r\n            </h3>\r\n            <Form.Control\r\n              type=\"textarea\"\r\n              as=\"textarea\"\r\n              placeholder=\"note\"\r\n              style={{ width: \"300px\", marginRight: \"300px\" }}\r\n              onChange={(e) =>\r\n                setnewProduct({ ...newProduct, note: e.target.value })\r\n              }\r\n            ></Form.Control>\r\n          </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NaviBottom;\r\n","export default __webpack_public_path__ + \"static/media/serveur.496e23b3.png\";","import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport Zones from \"../Components/Zones\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport TableStats from \"../Components/TableStats\";\r\nimport useTranslation from \"./../i18\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport bg from \"./../Shared/bg.jpeg\";\r\nimport io, { Socket } from \"socket.io-client\";\r\n\r\nimport \"./Styles.css\";\r\n\r\nimport {\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faSignOutAlt,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  addNewcheckoutDataFromDB,\r\n  deleteClientandTable,\r\n} from \"../Slices/order\";\r\nimport {\r\n  storeCategories,\r\n  storeNSteps,\r\n  storeOrderHistory,\r\n  storeProducts,\r\n  storeTvaMode,\r\n} from \"../Slices/data\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport $ from \"jquery\";\r\n\r\nconst socket =io.connect(\"http://localhost:5002\")\r\nconst Main = () => {\r\n  const { t } = useTranslation();\r\n  const currentToken = localStorage.getItem(\"user\");\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\nuseEffect(() => {\r\n  socket.on(\"a\",(data)=>{\r\n    console.log(data)\r\n  })\r\n}, [socket])\r\n\r\n  useEffect(() => {\r\n    \r\n    \r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/categories\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) =>\r\n        dispatch(\r\n          storeCategories({\r\n            categories: res.data.sort((a, b) => a.cat_order - b.cat_order),\r\n          })\r\n        )\r\n      );\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/products\",\r\n        {\r\n          user_id,\r\n          category: 0,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeProducts({ products: res.data.products }));\r\n        dispatch(storeNSteps({ nSteps: res.data.menuSteps }));\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const caisse_id = localStorage.getItem(\"caisse_id\");\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getorders\",\r\n        {\r\n          user_id,\r\n          caisse_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeOrderHistory({ orderHistory: res.data }));\r\n        console.log(res.data);\r\n        let newData = res.data.map((order) => ({\r\n          ...order,\r\n          table_number: order.table_number || order.order_id,\r\n          order_id: order.id,\r\n        }));\r\n        /*  .filter((order) => order.order_type == \"surplace\"); */\r\n        console.log(\"got data\", newData);\r\n        newData.map((data) => {\r\n          dispatch(addNewcheckoutDataFromDB({ order: data }));\r\n        });\r\n      });\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/gettva\"\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeTvaMode({ tva_mode: res.data }));\r\n      });\r\n  }, []);\r\n\r\n\r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"main_bg\">\r\n      <Navbar variant=\"warning\" className=\"navbar\">\r\n        <Container className=\"main-container\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Navbar.Brand>\r\n            {/* <div\r\n              id=\"circle\"\r\n              style={{ background: connect ? \"green\" : \"red\" }}\r\n            ></div> */}\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link>\r\n              <h6\r\n                className=\"nav_link-h6\"\r\n                style={{ color: \"white\", paddingTop: \"5px\" }}\r\n                // onClick={() => navigate(\"/calendar\")}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                  className=\"ico2\"\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"5px\" }}\r\n                className=\"nav_link-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                  className=\"ico1\"\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"5px\" }}\r\n                className=\"nav_link-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                  className=\"ico\"\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n            className=\"nav-link\"\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n              className=\"server-img\"\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <div className=\"x2\">\r\n      \r\n        <Zones />\r\n        <NaviBottom />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/cc.883bea09.png\";","export default __webpack_public_path__ + \"static/media/delivery.c63ca6d5.png\";","export default __webpack_public_path__ + \"static/media/takeout.47a36a20.png\";","export default __webpack_public_path__ + \"static/media/cash.99b68bb2.jpg\";","export default __webpack_public_path__ + \"static/media/surplace.2e0aa439.png\";","export default __webpack_public_path__ + \"static/media/hs.dcadad91.png\";","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { Modal, Button, Table, Carousel } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCheck,\r\n  faEdit,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPencilAlt,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport hs from \"./../Shared/hs.png\";\r\nimport useTranslation from \"./../i18\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setNewOrder } from \"../Slices/order\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { updateProduct } from \"../Slices/data\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\n\r\nconst ProductStock = ({ product, setAlert, order_id,setconfirmed,confirmed }) => {\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch(); \r\n  const [selected, setselected] = useState(1);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [newProduct, setnewProduct] = useState(undefined);\r\n  const [showstock, setshowstock] = useState(false);\r\n  useEffect(() => {\r\n   console.log(product)\r\n  }, []);\r\n  const handleStockD = () => {\r\n    setshowstock(false);\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/bringwarehouse\",\r\n        { prod_id: product.id }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        dispatch(updateProduct({ id: product.id }));\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"produit mis à jours !\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n      });\r\n  };\r\n  const handleStock = () => {\r\n    setshowstock(false);\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/resetwarehouse\",\r\n        { prod_id: product.id }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        dispatch(updateProduct({ id: product.id }));\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"produit mis ajours!\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n      });\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  return (\r\n    <>\r\n    <ToastContainer />\r\n   <div className=\"item_container\"onClick={(e) => setshowstock(true)}>\r\n      <p>\r\n        <b>{product.name.substring(0, 21)}</b>\r\n      </p>\r\n      {product.active==1?<div>\r\n      <img src={product.image}  className=\"prod_img\" />\r\n      <div className=\"price\">\r\n        {`${product.price.toFixed(2)}`}\r\n        {renderHTML(`<i>${currency}</i>`)}\r\n      </div>\r\n      </div>: <img src={hs}  className=\"prod_imgs\" />}\r\n      \r\n    \r\n     \r\n      \r\n    </div>\r\n       \r\n    <Modal show={showstock} onHide={() => setshowstock(false)}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Gestion de stock</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setshowstock(false)}>\r\n          Retour au tables\r\n        </Button>\r\n     {product.active==1?<Button variant=\"danger\" onClick={() => handleStock()}>\r\n          Hors stock\r\n        </Button>:<Button variant=\"primary\" onClick={() => handleStockD()}>\r\n          Disponible\r\n        </Button>}\r\n        \r\n      </Modal.Footer>\r\n    </Modal>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default ProductStock","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport loading from \"../Shared/loading.gif\";\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n  Table,\r\n  Col,\r\n} from \"react-bootstrap\";\r\nimport {\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCheckSquare,\r\n  faEdit,\r\n  faSignOutAlt,\r\n  faSearch,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport useTranslation from \"./../i18\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport cc from \"./../Shared/cc.png\";\r\nimport delivery from \"./../Shared/delivery.png\";\r\nimport takeout from \"./../Shared/takeout.png\";\r\nimport cash from \"./../Shared/cash.jpg\";\r\nimport surplace from \"./../Shared/surplace.png\";\r\nimport $ from \"jquery\";\r\nimport axios from \"axios\";\r\nimport { storeCategories, storeCoupon, storeNSteps, storeProducts } from \"../Slices/data\";\r\n\r\nimport ProductStock from \"../Components/ProductStock\";\r\n\r\nconst History = () => {\r\n const   chej=[];\r\n const [filter, setFilter] = useState(\"\");\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const [date, setDate] = useState(new Date().toLocaleTimeString(\"fa-IR\"));\r\n  const [alert, setAlert] = useState({ show: false, msg: \"\", type: \"\" });\r\n  const caisse_id = localStorage.getItem(\"caisse_id\");\r\n  const coupons = useSelector((state) => state.data.coupons);\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const [editClient, setEditClient] = useState({});\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [ping, setping] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const { id } = params;\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const products = useSelector((state) => state.data.products);\r\n  const categories = useSelector((state) => state.data.categories);\r\n\r\n  const [storeid, setstoreid] = useState(\"\")\r\n\r\n  const tick = () => {\r\n    setDate(new Date().toLocaleTimeString(\"fr-fr\").replace(/(.*)\\D\\d+/, \"$1\"));\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/products\",\r\n        {\r\n          user_id,\r\n          category: 0,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeProducts({ products: res.data.products }));\r\n        dispatch(storeNSteps({ nSteps: res.data.menuSteps }));\r\n      });\r\n      axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/categories\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) =>\r\n        dispatch(\r\n          storeCategories({\r\n            categories: res.data.sort((a, b) => a.cat_order - b.cat_order),\r\n          })\r\n        )\r\n      );\r\n      console.log(categories)\r\n  }, []);\r\n \r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\").replace(/;/g, '').replace(/&/g, '');\r\n  \r\n  const table = ({ e }) => {\r\n    console.log(e);\r\n    return tables.find((table) => table.id == e);\r\n  };\r\n\r\n  return (\r\n    <div className=\"navbar\">\r\n      <Navbar\r\n        style={{  height: \"60px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"caiss-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"log-out\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"client-server-icon\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n          <div className=\"client-search\">\r\n            <label>\r\n              <FontAwesomeIcon icon={faSearch} />\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Chercher...\"\r\n              onChange={(e) => setFilter(e.target.value)}\r\n              value={filter}\r\n            />\r\n          </div>\r\n        </Container>\r\n      </Navbar>\r\n      <div className=\"backoffice\">\r\n        <div className=\"B_header\">\r\n       \r\n            <select name=\"\" id=\"b_office_select\"  onChange={(e)=>{setstoreid(e.target.value) }} >\r\n            <option  value=\"\">Voirs tous</option>\r\n             {categories.map((e,key)=><option  key={key} value={e.id}>{e.name}</option>)} \r\n            </select>\r\n         \r\n        </div>\r\n      <div className=\"all-produc-menus\" >    \r\n        {products.length!=0? <div className=\"modal-bodyss\">\r\n            {\r\n             \r\n              products.filter(e=>storeid!=''?e.cat_id==storeid:e.cat_id).filter(e=>e.name.toLowerCase().includes(filter.toLowerCase())||e.code.includes(filter)).map((product,key)=><ProductStock setAlert={setAlert}  product={product} />\r\n\r\n              )\r\n              \r\n            }\r\n          </div>:<div className=\"loadingProd\">\r\n   \r\n   <h1>Chargement des produits...</h1>\r\n   <img src={loading} alt=\"loading\" />\r\n </div>  }       \r\n        </div>\r\n        </div>    \r\n      <NaviBottom />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","export default __webpack_public_path__ + \"static/media/bgg.5f53063d.png\";","import { useCallback, useRef, useState } from \"react\";\r\n\r\nconst useLongPress = (\r\n  onLongPress,\r\n  onClick,\r\n  { shouldPreventDefault = true, delay = 300 } = {}\r\n) => {\r\n  const [longPressTriggered, setLongPressTriggered] = useState(false);\r\n  const timeout = useRef();\r\n  const target = useRef();\r\n\r\n  const start = useCallback(\r\n    (event) => {\r\n      if (shouldPreventDefault && event.target) {\r\n        event.target.addEventListener(\"touchend\", preventDefault, {\r\n          passive: false,\r\n        });\r\n        target.current = event.target;\r\n      }\r\n      timeout.current = setTimeout(() => {\r\n        onLongPress(event);\r\n        setLongPressTriggered(true);\r\n      }, delay);\r\n    },\r\n    [onLongPress, delay, shouldPreventDefault]\r\n  );\r\n\r\n  const clear = useCallback(\r\n    (event, shouldTriggerClick = true) => {\r\n      timeout.current && clearTimeout(timeout.current);\r\n      shouldTriggerClick && !longPressTriggered && onClick();\r\n      setLongPressTriggered(false);\r\n      if (shouldPreventDefault && target.current) {\r\n        target.current.removeEventListener(\"touchend\", preventDefault);\r\n      }\r\n    },\r\n    [shouldPreventDefault, onClick, longPressTriggered]\r\n  );\r\n\r\n  return {\r\n    onMouseDown: (e) => start(e),\r\n    onTouchStart: (e) => start(e),\r\n    onMouseUp: (e) => clear(e),\r\n    onMouseLeave: (e) => clear(e, false),\r\n    onTouchEnd: (e) => clear(e),\r\n  };\r\n};\r\n\r\nconst isTouchEvent = (event) => {\r\n  return \"touches\" in event;\r\n};\r\n\r\nconst preventDefault = (event) => {\r\n  if (!isTouchEvent(event)) return;\r\n\r\n  if (event.touches.length < 2 && event.preventDefault) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\nexport default useLongPress;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Form, FormGroup } from \"react-bootstrap\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport {\r\n  faCheck,\r\n  faCross,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPlus,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst RemiseModal = ({\r\n  handleUpdateOrder,\r\n  orderTo,\r\n  setOrderTo,\r\n  setshowRemise,\r\n  calcOrder,\r\n}) => {\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const [ping, setping] = useState(true);\r\n  const [input, setInput] = useState(\"\");\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 {bksp}\",\r\n  ]);\r\n  const keyboard = useRef();\r\n  const [remisePerc, setremisePerc] = useState(0);\r\n  const [remise, setremise] = useState(0);\r\n  const [libre, setlibre] = useState(0);\r\n  const [offert, setoffert] = useState(false);\r\n  const [selected, setselected] = useState(\"\");\r\n\r\n  const handleRemise = () => {\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    let finalPrice = 0;\r\n    if (offert == true) {\r\n      finalPrice = 0;\r\n      console.log(\"offert\", finalPrice,copy);\r\n    } else if (remisePerc > 0) {\r\n      finalPrice =\r\n      orderTo.order?.price -\r\n        (orderTo.order?.price * remisePerc) / 100;\r\n      console.log(\"perc\", finalPrice);\r\n    } else if (remise > 0) {\r\n      finalPrice = orderTo.order?.price - remise;\r\n      console.log(\"remise\", finalPrice);\r\n     \r\n    } else if (libre > 0) {\r\n      finalPrice = libre;\r\n      console.log(\"libre\", finalPrice);\r\n    }\r\n    console.log(\"nothing\");\r\n    copy = { ...copy, finalPrice };\r\n    setOrderTo({ ...orderTo, order: copy });\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleRemise();\r\n  }, [offert, remise, remisePerc, libre]);\r\n\r\n  const onChange = (input) => {\r\n    setInput(input);\r\n    console.log(\"Input changed\", input);\r\n    switch (selected) {\r\n      case \"remisePerc\":\r\n        if (Number(input) > 100) {\r\n          Swal.fire({\r\n            icon: \"warning\",\r\n            title: \"faut etre inferieur a 100%\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          setremisePerc(Number(input));\r\n          console.log(remisePerc);\r\n          setremise(0);\r\n          setlibre(0);\r\n          setoffert(false);\r\n        }\r\n        break;\r\n      case \"remise\":\r\n        if (Number(input) > orderTo.order?.price) {\r\n          Swal.fire({\r\n            icon: \"warning\",\r\n            title: `faut etre inferieur a ${calcOrder(orderTo.order).price} €`,\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          setremisePerc(0);\r\n          setremise(Number(input));\r\n          console.log(remise);\r\n          setlibre(0);\r\n          setoffert(false);\r\n        }\r\n        break;\r\n      case \"libre\":\r\n        setremisePerc(0);\r\n        setremise(0);\r\n        setlibre(Number(input));\r\n        console.log(libre);\r\n        setoffert(false);\r\n        break;\r\n    }\r\n\r\n    // handleRemise();\r\n    // let newarr = [...lay];\r\n    // newarr[selected].value = Number(input);\r\n    // setlay(newarr);\r\n    setInput(\"\");\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n  };\r\n\r\n  const onChangeInput = ({ e, index }) => {\r\n    const input = e.target.value;\r\n    setInput(input);\r\n    keyboard.current.setInput(input);\r\n    // setTotal(calcMontant());\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  return (\r\n    <div className=\"remise_modal\">\r\n      <div className=\"uper\">\r\n        <h3>Remise</h3>\r\n        <FontAwesomeIcon\r\n          style={{ position: \"absolute\", top: \"5px\", right: \"8px\" }}\r\n          onClick={() => setshowRemise(false)}\r\n          icon={faTimes}\r\n          size=\"2x\"\r\n        />\r\n      </div>\r\n      <div className=\"con\">\r\n        <FormGroup style={{ display: \"flex\" }}>\r\n          <Form.Label className=\"remise_input\">\r\n            <b>Remise (%)</b>\r\n          </Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChangeInput({ e, index: 5 })}\r\n            className=\"remise_input\"\r\n            value={`${remisePerc} %`}\r\n            onFocus={() => {\r\n              setselected(\"remisePerc\");\r\n              keyboard.current.setInput(\"\");\r\n            }}\r\n          ></Form.Control>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\" }}>\r\n          <Form.Label className=\"remise_input\">\r\n            <b>Remise (€)</b>\r\n          </Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChangeInput({ e, index: 5 })}\r\n            className=\"remise_input\"\r\n            value={`${remise?.toFixed(2)} €`}\r\n            onFocus={() => {\r\n              setselected(\"remise\");\r\n              keyboard.current.setInput(\"\");\r\n            }}\r\n          ></Form.Control>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\" }}>\r\n          <Form.Label className=\"remise_input\">\r\n            <b>Montant libre (€)</b>\r\n          </Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChangeInput({ e, index: 5 })}\r\n            value={`${libre?.toFixed(2)} €`}\r\n            className=\"remise_input\"\r\n            onFocus={() => {\r\n              setselected(\"libre\");\r\n              keyboard.current.setInput(\"\");\r\n            }}\r\n          ></Form.Control>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\", marginTop: \"1rem\" }}>\r\n          <Button\r\n            variant={offert ? \"success\" : \"danger\"}\r\n            onClick={() => {\r\n              setoffert(!offert);\r\n              setremisePerc(Number(input));\r\n              setremise(0);\r\n              setlibre(0);\r\n              handleRemise();\r\n            }}\r\n            style={{\r\n              width: \"150px\",\r\n            }}\r\n          >\r\n            <FontAwesomeIcon\r\n              icon={offert ? faCheck : faTimes}\r\n              style={{ marginRight: \"2.2rem\" }}\r\n            />\r\n            Offert !\r\n          </Button>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\", marginTop: \"0.5rem\" }}>\r\n          <Button\r\n            onClick={() => handleUpdateOrder()}\r\n            variant={\"success\"}\r\n            style={{\r\n              width: \"150px\",\r\n              height: \"80px\",\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faPlus} style={{ marginRight: \"1rem\" }} />\r\n            Confirmer\r\n          </Button>\r\n        </FormGroup>\r\n      </div>\r\n      <div className=\"off\">\r\n        <h5>\r\n          <b>\r\n            {\"Prix initial : \" +\r\n              orderTo.order?.price.toFixed(2) +\r\n              \"€\"}\r\n          </b>\r\n        </h5>\r\n        <h5>\r\n          <b>\r\n            {\"Nouveau Prix : \" + orderTo.order.finalPrice?.toFixed(2) ||\r\n              0 + \"€\"}\r\n          </b>\r\n        </h5>\r\n      </div>\r\n      <Keyboard\r\n        theme={\"hg-theme-default hg-layout-default myTheme3\"}\r\n        display={{\r\n          \"{bksp}\": \"EFFACER\",\r\n        }}\r\n        buttonTheme={[\r\n          {\r\n            class: \"key_btn2\",\r\n            buttons: \"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}\",\r\n          },\r\n          {\r\n            class: \"hg-highlight\",\r\n            buttons: \"Q q\",\r\n          },\r\n        ]}\r\n        keyboardRef={(r) => (keyboard.current = r)}\r\n        layoutName={\"default\"}\r\n        layout={{\r\n          default: myLayout,\r\n        }}\r\n        onChange={onChange}\r\n        onKeyPress={onKeyPress}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RemiseModal;\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Table, Button, Alert, Modal, Spinner } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport image from \"./../Shared/bgg.png\";\r\nimport cartbg from \"./../Shared/cartbg.png\";\r\nimport {\r\n  addNewcheckoutData,\r\n\r\n  clearOrders,\r\n \r\n  deleteOrder,\r\n  setCheckoutChange,\r\n \r\n  setNewOrder,\r\n  setOrderChange,\r\n} from \"../Slices/order\";\r\nimport useTranslation from \"./../i18\";\r\nimport {\r\n  faCheck,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport Swal from \"sweetalert2\";\r\nimport axios from \"axios\";\r\nimport useLongPress from \"./useLongPress\";\r\nimport RemiseModal from \"./RemiseModal\";\r\n// import { forEach } from \"lodash\";\r\n// import e from \"cors\";\r\nimport io from \"socket.io-client\";\r\nimport { setPing } from \"../Slices/data\";\r\n\r\nconst CartMenu = ({ selectedTable, setconfirmed, confirmed }) => {\r\n  const ping = useSelector((state) => state.data.ping);\r\n  const username = localStorage.getItem(\"username\")\r\n  const navigate = useNavigate();\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const { nbr, nbrCouverts } = selectedTable;\r\n  const [total, setTotal] = useState(0);\r\n  const [step, setstep] = useState(1);\r\n  const nsteps = useSelector((state) => state.data.nSteps);\r\n  const [selected, setselected] = useState(0);\r\n  const table_number = useSelector((state) => state.order.selectedTable.id);\r\n  const client = useSelector((state) => state.order.client);\r\n  const remarque = useSelector((state) => state.order.remarque);\r\n\r\n  const params = useParams();\r\n  const { order_id } = params;\r\n  const checkOutData = useSelector((state) => state.order.checkoutData || []);\r\n  const [late_order_id, setlate_order_id] = useState(0);\r\n\r\n  const orders = useSelector((state) => state.order.orders || []);\r\n\r\n  const [newOrders, setnewOrders] = useState([]);\r\n  const [orderTo, setOrderTo] = useState({ order: {}, key: 0 });\r\n  const [ShowModifyModal, setShowModifyModal] = useState(false);\r\n\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const orderType = useSelector((state) => state.order.orderType);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n  const products = useSelector((state) => state.data.products);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const user = localStorage.getItem(\"username\");\r\n  const [newCommande, setNewCommande] = useState({})\r\n  const currentOrder = checkOutData.filter((e) => e.order_id == order_id)[0];\r\n  // const tva = localStorage.getItem(\"tva\");\r\n\r\n  useEffect(() => {\r\n\r\n    if (order_id != undefined) {\r\n      console.log(currentOrder);\r\n      currentOrder?.orderItems?.map((item) => {\r\n        dispatch(setNewOrder({ order: item }));\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const findProductWithId = (id) => {\r\n    return products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  const calcOrder = (order) => {\r\n    //test\r\n\r\n    let price;\r\n    if (order?.finalPrice) {\r\n      price = order.finalPrice;\r\n    } else if (order?.finalPrice == 0) {\r\n      price = 0;\r\n    } else {\r\n      price = order.price;\r\n    }\r\n    //\r\n\r\n    let tva = order.tva;\r\n    if (orderType == \"sur place\" || orderType == \"livraison\") {\r\n      tva = tva_mode.find((e) => e.nom == \"sur place\").valeur;\r\n    } else if (orderType == \"emporter\") {\r\n      tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n    }\r\n    if (rab_tva > 0) {\r\n      tva = rab_tva;\r\n    }\r\n    if (order.extras && order.extras.length) {\r\n     \r\n      order.extras.map((extra) => {\r\n        console.log(extra.price, extra.default_quantity);\r\n        price += extra.price * extra.default_quantity;\r\n      });\r\n    }\r\n    if (order.stepItems && order.stepItems != {}) {\r\n      Object.keys(order.stepItems).map((e) => {\r\n        order.stepItems[e].map((item) => {\r\n          price += item.price;\r\n        });\r\n      });\r\n    }\r\n\r\n    if (order.offert == true) {\r\n      return 0;\r\n    } else\r\n      return {\r\n        dbPrice: price,\r\n        price: price * order.qt,\r\n        tva: (price * order.qt * tva) / 100,\r\n        item_tva: tva,\r\n      };\r\n  };\r\n\r\n  useEffect(() => {\r\n    let copy = JSON.parse(JSON.stringify(orders) || [{}]);\r\n   \r\n    setnewOrders(copy);\r\n    orders.map((order) => {\r\n      if (order.is_alcool == true) {\r\n        let tva_alcool = tva_mode.find((e) => e.nom == \"alcool\").valeur;\r\n        console.log(tva_alcool);\r\n        setRab_tva(tva_alcool);\r\n      }\r\n    });\r\n  }, [orders]);\r\n\r\n  const calcTotal = () => {\r\n    let tot = 0;\r\n    let tva = 0;\r\n    let tvas = [];\r\n    newOrders.map((order) => {\r\n      tot += calcOrder(order).price;\r\n      tva += calcOrder(order).tva;\r\n      tvas.push({\r\n        value: calcOrder(order).tva,\r\n        perc: calcOrder(order).item_tva,\r\n      });\r\n    });\r\n    return { tot, tva, tvas };\r\n  };\r\n\r\n  var groupBy = function (xs, key) {\r\n    return xs?.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n\r\n  const handlePlusOrMinus = ({ key, order, sign }) => {\r\n    console.log({ order, sign });\r\n    if (sign == \"+\") {\r\n      let newOrder = { ...order, qt: order.qt + 1 };\r\n      console.log(newOrder);\r\n      dispatch(setOrderChange({ key, order: newOrder }));\r\n    } else {\r\n      if (order.qt == 1) {\r\n        dispatch(deleteOrder({ key }));\r\n      } else {\r\n        let newOrder = { ...order, qt: order.qt - 1 };\r\n        dispatch(setOrderChange({ key, order: newOrder }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => setShowModifyModal(false);\r\n\r\n  const handleExtra = ({ extraKey, sign }) => {\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    if (sign == \"+\" && copy.extras[extraKey].default_quantity < 1) {\r\n      copy.extras[extraKey].default_quantity += 1;\r\n      console.log(copy);\r\n      setOrderTo({ ...orderTo, order: copy });\r\n    } else {\r\n      if (copy.extras[extraKey].default_quantity > 0) {\r\n        copy.extras[extraKey].default_quantity -= 1;\r\n        console.log(copy);\r\n        setOrderTo({ ...orderTo, order: copy });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSlotSelect = ({ slotKey, id }) => {\r\n    console.log(slotKey, id);\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    copy.slots[slotKey].products.forEach((prod) => {\r\n      prod.id == id ? (prod.checked = true) : (prod.checked = false);\r\n      console.log(prod.name);\r\n    });\r\n    setOrderTo({ ...orderTo, order: copy });\r\n  };\r\n\r\n  const handleStepSelect = ({ id, STP }) => {\r\n    console.log(STP);\r\n    setselected(step);\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    let max_select = STP.max_select;\r\n    if (copy.stepItems[step] == undefined) {\r\n      copy.stepItems[step] = [];\r\n      console.log(copy);\r\n    }\r\n    if (copy.stepItems[step].length < max_select) {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        console.log(\"will push now\");\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n    {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        copy.stepItems[step] = [];\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n\r\n    setOrderTo({ ...orderTo, order: copy });\r\n    console.log(\"done\");\r\n    console.log(copy);\r\n  };\r\n\r\n  const handleUpdateOrder = () => {\r\n    dispatch(setOrderChange({ key: orderTo.key, order: orderTo.order }));\r\n    setShowModifyModal(false);\r\n    setshowRemise(false);\r\n  };\r\n\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substr(0, 10);\r\n  var time = curr.getHours() + \":\" + curr.getMinutes();\r\n\r\n\r\n  const handleConfirm = () => {\r\n    if (confirmed == true) {\r\n      handleFinish();\r\n    } else if (calcTotal().tot == 0) {\r\n      Swal.fire({\r\n        title: \"Attention le montant de la commande est 0 € !\",\r\n      });\r\n    } else {\r\n      Swal.fire({\r\n        title: \"confirmer la commande ?\",\r\n        showDenyButton: true,\r\n        showCancelButton: false,\r\n        confirmButtonText: \"confirmer\",\r\n        denyButtonText: `annuler`,\r\n      }).then((result) => {\r\n        /* Read more about isConfirmed, isDenied below */\r\n        if (result.isConfirmed) {\r\n          handlePlaceOrder();\r\n          Swal.fire({\r\n            icon: \"success\",\r\n            title: \"commande confirmée\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n          setconfirmed(true);\r\n        }\r\n      });\r\n    }\r\n    // setconfirmed(true);\r\n  };\r\n\r\n  const handlePlaceOrder = () => {\r\n    \r\n    let order = {\r\n      table: nbr || \"\",\r\n      server:username,\r\n      from_kiosk:false,\r\n      client_id: client?.id,\r\n      id: order_id ? order_id : \"\",\r\n      message: remarque || client?.message || \"aucune\",\r\n      customer_name: client?.name || \"\",\r\n      customer_company: client?.company || \"\",\r\n      code1: client?.code1 || \"\",\r\n      code2: client?.code2 || \"\",\r\n      interphone: client?.interphone || \"\",\r\n      etage: client?.etage || \"\",\r\n      table_number: table_number || 0,\r\n      customer_tel: client?.phone || \"\",\r\n      customer_adress: client?.address\r\n        ? `${client?.address} - ${client?.city} - ${client?.post}\r\n      code 1 : ${client?.code1 || \"\"} | code2 : ${client?.code2 || \"\"}\r\n       interphone : ${client?.interphone || \"\"} | etage : ${client?.etage || \"\"\r\n        }`\r\n        : \"\",\r\n      status: \"pending\",\r\n      orderType: orderType || \"sur place\",\r\n      paymentType: \"Especes\",\r\n      totalPrice: calcTotal().tot,\r\n      taxPrice: calcTotal().tva,\r\n      tvas: calcTotal().tvas,\r\n      orderItems: [],\r\n      date: client?.date || date,\r\n      time: client?.time || time,\r\n    };\r\n  \r\n    newOrders.map((one) => {\r\n      order.orderItems.push({\r\n        ...one,\r\n        price: one.finalPrice || calcOrder(one).dbPrice,\r\n        tva: calcOrder(one).item_tva,\r\n      });\r\n    });\r\n  \r\n\r\n    if (order_id) {\r\n      setlate_order_id(order_id);\r\n\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/updateorder\",\r\n          {\r\n            order: order,\r\n            user_id: user_id,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          axios\r\n            .post(\r\n              process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/printOrder\",\r\n              {\r\n                kitchen: true,\r\n                user_id: user_id,\r\n                order: {\r\n                  new: true,\r\n                  ...order,\r\n                  tvas: \"aspa\",\r\n                  table_number: order.table || \"\",\r\n                  order_id: order_id,\r\n                  Date: new Date(),\r\n                  nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n                },\r\n              }\r\n            )\r\n            .then((res) => console.log(res.data))\r\n            .catch((err) => console.log(err));\r\n          dispatch(\r\n            setCheckoutChange({\r\n              order: {\r\n                ...order,\r\n                table_number:\r\n                  table_number || currentOrder.table_number || client?.id,\r\n                order_id: order_id,\r\n                Date: new Date(),\r\n                nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n              },\r\n            })\r\n          );\r\n          console.log({\r\n            order: {\r\n              ...order,\r\n              order_id: res.data.id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...order,\r\n              order_id: order_id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n        });\r\n    } else if (newCommande.order_id) {\r\n      setlate_order_id(newCommande.order_id);\r\n\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/updateorder\",\r\n          {\r\n            order: order,\r\n            user_id: user_id,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          axios\r\n            .post(\r\n              process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/printOrder\",\r\n              {\r\n                kitchen: true,\r\n                user_id: user_id,\r\n                order: {\r\n                  new: true,\r\n                  ...order,\r\n                  tvas: \"aspa\",\r\n                  table_number: order.table || \"\",\r\n                  order_id: newCommande.order_id,\r\n                  Date: new Date(),\r\n                  nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n                },\r\n              }\r\n            )\r\n            .then((res) => console.log(res.data))\r\n            .catch((err) => console.log(err));\r\n          dispatch(\r\n            setCheckoutChange({\r\n              order: {\r\n                ...order,\r\n                table_number:\r\n                  table_number || currentOrder?.table_number || client?.id,\r\n                order_id: newCommande.order_id,\r\n                Date: new Date(),\r\n                nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n              },\r\n            })\r\n          );\r\n          console.log({\r\n            order: {\r\n              ...order,\r\n              order_id: res.data.id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...order,\r\n              order_id: newCommande.order_id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n        });\r\n    }\r\n\r\n    else {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/orders\",\r\n          {\r\n            client,\r\n            order: order,\r\n            how_paid: \"tout\",\r\n            user_id: user_id,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          setlate_order_id(res.data.id);\r\n    \r\n          axios\r\n            .post(\r\n              process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/printOrder\",\r\n              {\r\n                kitchen: true,\r\n                user_id: user_id,\r\n                order: {\r\n                  new: false,\r\n                  ...order,\r\n                  tvas: groupBy(calcTotal().tvas, \"perc\"),\r\n                  table_number: nbr || \"\",\r\n                  order_id: res.data.id,\r\n                  Date: new Date(),\r\n                  nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n                },\r\n              }\r\n            )\r\n            .then((res) => console.log(res.data))\r\n            .catch((err) => console.log(err));\r\n          dispatch(\r\n            addNewcheckoutData({\r\n              order: {\r\n                ...order,\r\n                table_number: table_number || client?.id,\r\n                order_id: res.data.id,\r\n                Date: new Date().getTime(),\r\n                nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n              },\r\n            })\r\n          );\r\n          let socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...order,\r\n              order_id: res.data.id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n          setNewCommande({\r\n\r\n            ...order,\r\n            order_id: res.data.id,\r\n            Date: new Date(),\r\n            nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  };\r\n\r\n  const handleFinish = () => {\r\n    if (late_order_id != 0) {\r\n      navigate(\"/checkout/\" + late_order_id);\r\n      dispatch(clearOrders());\r\n    }\r\n    // console.log(order_id);\r\n    // if (selectedTable.nbr || order_id) {\r\n    //   console.log(\"nbr\", table_number);\r\n    //   console.log(\"order\", order_id);\r\n    //   console.log(\"late_order\", late_order_id);\r\n    //   navigate(\"/checkout/\" + table_number || order_id);\r\n    // } else {\r\n    //   console.log(\"else =======>\");\r\n    //   navigate(`/checkout/${client?.id}`);\r\n    // }\r\n  };\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  ///////////////////////////////////////////////////////////\r\n  const onLongPress = () => {\r\n    console.log(\"longpress is triggered\");\r\n  };\r\n\r\n  const onClick = () => {\r\n    console.log(\"click is triggered\");\r\n  };\r\n\r\n  const defaultOptions = {\r\n    shouldPreventDefault: false,\r\n    delay: 500,\r\n  };\r\n  const longPressEvent = useLongPress(onLongPress, onClick, defaultOptions);\r\n\r\n  const [showRemise, setshowRemise] = useState(false);\r\n\r\n  const handleTiroir = () => {\r\n    Swal.fire({\r\n      title: \"Ouvrir la caisse pour :\",\r\n      showDenyButton: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Faire la monnaie\",\r\n      denyButtonText: `Sans motif`,\r\n      cancelButtonText: \"Annuler\",\r\n    }).then((result) => {\r\n      console.log(result);\r\n      /* Read more about isConfirmed, isDenied below */\r\n      if (result.isConfirmed) {\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"pour Faire la monnaie\",\r\n            title: \"Ouverture de tiroir\",\r\n            content: \"ouverture de la caisse par le serveur\",\r\n          }\r\n        );\r\n\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Ouvert pour faire la monnaie\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n      } else if (result.isDenied) {\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"sans motif\",\r\n            title: \"Ouverture de tiroir\",\r\n            content: \"ouverture de la caisse par le serveur\",\r\n          }\r\n        );\r\n\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Ouvert sans motif\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleAnnuler = () => {\r\n    Swal.fire({\r\n      title: \"Motif d'annulation \",\r\n      showDenyButton: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Aucun\",\r\n      denyButtonText: `Impayé`,\r\n      cancelButtonText: \"Fermer\",\r\n    }).then((result) => {\r\n    \r\n\r\n      /* Read more about isConfirmed, isDenied below */\r\n      if (result.isConfirmed) {\r\n        if (order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: currentOrder,\r\n            }\r\n          ).then(()=>dispatch(setPing(!ping)));\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...currentOrder\r\n\r\n            },\r\n          });\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Aucun\"} }));\r\n        }\r\n        if (newCommande.order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: newCommande,\r\n            }\r\n          ).then(()=>dispatch(setPing(!ping)));\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...newCommande\r\n\r\n            },\r\n          });\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Aucun\"} }));\r\n        }\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"Aucun\",\r\n            title: \"Annulation\",\r\n            content: \"Annulation de commande par le serveur\",\r\n          }\r\n        );\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Annulé (Aucun)\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n\r\n        dispatch(clearOrders());\r\n        navigate(\"/main\");\r\n      } else if (result.isDenied) {\r\n        if (order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: currentOrder,\r\n            }\r\n          ).then(()=>dispatch(setPing(!ping)));\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...currentOrder\r\n\r\n            },\r\n          });\r\n\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Impayé\"} }));\r\n        }\r\n        if (newCommande.order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: newCommande,\r\n            }\r\n          ).then(()=>dispatch(setPing(!ping)));\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...newCommande\r\n\r\n            },\r\n          });\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Impayé\"} }));\r\n        }\r\n\r\n\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"Impayé\",\r\n            title: \"Annulation\",\r\n            content: \"Annulation de commande par le serveur\",\r\n          }\r\n        );\r\n\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Annulé (Impayé)\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n        dispatch(clearOrders());\r\n        navigate(\"/main\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"cart-menu\">\r\n      {selectedTable.nbr ? (\r\n        <h6 className=\"cart-menu-table-nbr\">{`table ${nbr} - ${nbrCouverts} ${t(\r\n          \"couverts\"\r\n        )}`}</h6>\r\n      ) : client.name? (\r\n        <h6 className=\"cart-menu-table-nbr\">{`Client ${client.name} - ${client.type}\r\n          `}</h6>\r\n      ) : \r\n        order_id?<b>Commande # {order_id}</b>:<br/>\r\n      }\r\n      <Table className=\"ttt2\">\r\n        <thead className=\"tbds2\">\r\n          <tr>\r\n            <th>{t(\"article\")}</th>\r\n            <th>Qte</th>\r\n            <th>{t(\"price\")}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody\r\n          className=\"scro2 \"\r\n         \r\n        >\r\n          {newOrders?.map((order, key) => (\r\n            <tr\r\n              className=\"catt\"\r\n              style={{\r\n                backgroundColor:\r\n                  order.new == \"true\" || confirmed == true\r\n                    ? \"#55efc4\"\r\n                    : \"transparent\",\r\n                color:\r\n                  order.new == \"true\" || confirmed == true ? \"white\" : \"black\",\r\n              }}\r\n            >\r\n              <td className=\"mytd\">\r\n                <p\r\n                  onClick={() => {\r\n                    setOrderTo({ order, key });\r\n                    setshowRemise(true);\r\n                  }}\r\n                  className=\"mytd_order-name\"\r\n                >\r\n                  {order.name}\r\n                </p>\r\n                {order.extras && order.extras.length\r\n                  ? order.extras\r\n                    .filter((el) => el.default_quantity > 0)\r\n                    .map((extra) => (\r\n                      <span className=\"boba\">{extra.title}-</span>\r\n                    ))\r\n                  : \"\"}\r\n                {order.stepItems && Object.keys(order.stepItems).length ? (\r\n                  <div>\r\n                    {Object.keys(order.stepItems).map((key) =>\r\n                      order.stepItems[key].map((el) => (\r\n                        <span\r\n                          style={{\r\n                            textAlign: \"start\",\r\n                            color: \"#ff6b6b\",\r\n                          }}\r\n                        >\r\n                          -{el.name}\r\n                        </span>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n                ) : order.is_supp ? (\r\n                  <div className=\"order_with_supp_item\">\r\n\r\n                    {order?.suppSelected.map((key, el) => (\r\n                      <span \r\n                      key={key}\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"#ff6b6b\",\r\n                        }}\r\n                      >\r\n                     - {order?.suppSelected.at(el).name}\r\n                      </span>\r\n                    ))}\r\n\r\n\r\n\r\n                  </div>\r\n                )\r\n\r\n                  : order?.slots ? (\r\n                    <div>\r\n                      <span\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"grey\",\r\n                        }}\r\n                      >\r\n                        {\r\n                          Object.entries(order.slots)[0]?.[1]?.products?.filter(\r\n                            (e) => e.checked\r\n                          )[0]?.name\r\n                        }\r\n                      </span>\r\n                      <br />\r\n                      <span\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"grey\",\r\n                        }}\r\n                      >\r\n                        {\r\n                          Object.entries(order.slots)[1]?.[1]?.products?.filter(\r\n                            (e) => e.checked\r\n                          )[0]?.name\r\n                        }\r\n                      </span>\r\n                      <br />\r\n                      <span\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"grey\",\r\n                        }}\r\n                      >\r\n                        {\r\n                          Object.entries(order.slots)[2]?.[1]?.products?.filter(\r\n                            (e) => e.checked\r\n                          )[0]?.name\r\n                        }\r\n                      </span>\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n              </td>\r\n              <td\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-evenly\",\r\n                  height: \"30px\",\r\n                }}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faMinusCircle}\r\n                  color=\"#ff6b6b\"\r\n                  onClick={() => handlePlusOrMinus({ order, key, sign: \"-\" })}\r\n                />\r\n                <p\r\n                  className=\"mytd_order-qty\"\r\n                  onClick={() => {\r\n                    setOrderTo({ order, key });\r\n                    setShowModifyModal(true);\r\n                  }}\r\n                  {...longPressEvent}\r\n                >\r\n                  <b>{order.qt}</b>\r\n                </p>\r\n\r\n                <FontAwesomeIcon\r\n                  icon={faPlusCircle}\r\n                  color=\"#ff6b6b\"\r\n                  onClick={() => handlePlusOrMinus({ order, key, sign: \"+\" })}\r\n                  variant=\"success\"\r\n                />\r\n              </td>\r\n              <td\r\n                style={{\r\n                  height: \"30px\",\r\n                }}\r\n              >\r\n                <p\r\n                  className=\"mytd_order-qty\"\r\n                  style={{\r\n                    fontWeight: \"bold\",\r\n                    display: \"flex\",\r\n                  }}\r\n                >\r\n                  {calcOrder(order).price.toFixed(2)}{\" \"}\r\n                  {renderHTML(`<i>${currency}</i>`)}\r\n                </p>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n        {/* <div class=\"zigzag-section\"></div> */}\r\n      </Table>\r\n\r\n      <div\r\n        style={{\r\n          width: \"25%\",\r\n          height: \"200px\",\r\n          backgroundColor: \"#f1f1f1\",\r\n          position: \"absolute\",\r\n          bottom: \"0\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            borderBottom: \"1px solid white\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            position: \"relative\",\r\n            backgroundImage: `url(${image})`,\r\n            objectFit: \"contain\",\r\n            width: \"100%\",\r\n            height: \"50px\",\r\n            paddingTop: \"5px\",\r\n          }}\r\n        >\r\n          <h2\r\n            className=\"dig\"\r\n            style={{\r\n              zIndex: \"999\",\r\n              color: \"#00b894\",\r\n              display: \"flex\",\r\n              paddingLeft: \"1rem\",\r\n              fontFamily: \"DS-DIGIT !important\",\r\n            }}\r\n          >\r\n            {`Total : ${(calcTotal().tot).toFixed(2)}`}{\" \"}\r\n            {renderHTML(`<i >${currency}</i>`)}\r\n          </h2>\r\n        </div>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n          }}\r\n        >\r\n          <Button\r\n            className=\"cart_btn btn4\"\r\n            variant={confirmed == true ? \"danger\" : \"warning\"}\r\n            onClick={() => {\r\n              if (orders && orders.length > 0) {\r\n                handleConfirm();\r\n              }\r\n            }}\r\n          >\r\n            {confirmed == true ? (\r\n              <>\r\n                {late_order_id == 0 && (\r\n                  <Spinner animation=\"border\" variant=\"light\" />\r\n                )}{\" \"}\r\n                Finir\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FontAwesomeIcon icon={faCheck} /> Confirmer\r\n              </>\r\n            )}\r\n          </Button>\r\n          <Button\r\n            className=\"cart_btn\"\r\n            variant=\"success\"\r\n            onClick={() => handleTiroir()}\r\n          >\r\n            {t(\"tiroir\")}\r\n          </Button>\r\n          <Button className=\"cart_btn\" variant=\"danger\" onClick={handleAnnuler}>\r\n            {t(\"cancel\")}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <Modal\r\n        dialogClassName=\"modal_body\"\r\n        show={ShowModifyModal}\r\n        onHide={() => {\r\n          handleClose();\r\n          setstep(1);\r\n        }}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{orderTo.order?.name}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>{orderTo.order?.description}</p>\r\n          {orderTo.order?.extras && orderTo.order?.extras.length ? (\r\n            orderTo.order?.extras.map((extra, key) => (\r\n              <tr\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"50%\",\r\n                }}\r\n              >\r\n                <td\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-evenly\",\r\n                    alignItems: \"center\",\r\n                    height: \"30px\",\r\n                    width: \"25%\",\r\n                    marginRight: \"1rem\",\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"-\" })}\r\n                    icon={faMinusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                  <h5>\r\n                    <b>{extra.default_quantity}</b>\r\n                  </h5>\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"+\" })}\r\n                    icon={faPlusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                </td>\r\n                <td style={{ marginRight: \"1rem\" }}>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b>{extra.title}</b>\r\n                  </h5>\r\n                </td>\r\n                <td>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                      {extra.price.toFixed(2)}{\" \"}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </b>\r\n                  </h5>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : orderTo.order?.isComp ? (\r\n            <Table striped bordered>\r\n              <thead>\r\n                <tr>\r\n                  {Object.keys(orderTo.order?.slots || {}).map((slotKey) => (\r\n                    <td>{slotKey}</td>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {Object.keys(orderTo.order?.slots || {}).map((slotKey) => (\r\n                  <td>\r\n                    {orderTo.order?.slots[slotKey].products.map((prod) => (\r\n                      <div\r\n                        style={{ display: \"flex\", cursor: \"pointer\" }}\r\n                        className={prod.checked ? \"checked\" : \"not\"}\r\n                        onClick={() =>\r\n                          handleSlotSelect({ slotKey, id: prod.id })\r\n                        }\r\n                      >\r\n                        <img src={prod.image} width=\"30px\" height=\"30px\" />\r\n                        <div>\r\n                          <h6>{prod.name}</h6>\r\n                          <p>{prod.description}</p>\r\n                        </div>\r\n                        <p>\r\n                          {prod.price} {renderHTML(`<i>${currency}</i>`)}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                  </td>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          ) : orderTo.order?.nsteps > 0 ? (\r\n            <div>\r\n              <h6>\r\n                <b>\r\n                  {\r\n                    nsteps.filter(\r\n                      (nstep) => nstep.menu_id == orderTo.order?.id\r\n                    )[0][step]?.nom_etape\r\n                  }\r\n                </b>\r\n              </h6>\r\n              <div className=\"steps_cont\">\r\n                {nsteps\r\n                  .filter((nstep) => nstep.menu_id == orderTo.order?.id)[0]\r\n                [step].choice.map((slot) => (\r\n                  <div\r\n                    className={\r\n                      orderTo.order?.stepItems[step]?.find(\r\n                        (el) => el.id == slot\r\n                      )\r\n                        ? \"prod prod_sel\"\r\n                        : \"prod\"\r\n                    }\r\n                    onClick={() =>\r\n                      handleStepSelect({\r\n                        id: slot,\r\n                        STP: nsteps.filter(\r\n                          (nstep) => nstep.menu_id == orderTo.order?.id\r\n                        )[0][step],\r\n                      })\r\n                    }\r\n                  >\r\n                    <img\r\n                      src={findProductWithId(slot).image}\r\n                      alt=\"\"\r\n                      height=\"70px\"\r\n                      width=\"70px\"\r\n                    />\r\n                    <h6 style={{ display: \"flex\" }}>\r\n                      <b> {findProductWithId(slot).name} </b>\r\n                      <span>\r\n                        <b\r\n                          style={{\r\n                            display: \"flex\",\r\n                            marginLeft: \"1rem\",\r\n                            color: \"#ff6b6b\",\r\n                          }}\r\n                        >\r\n                          {findProductWithId(slot).price}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </b>\r\n                      </span>{\" \"}\r\n                    </h6>\r\n                    <p>{findProductWithId(slot).description}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {orderTo.order?.nsteps >= step && step > 0 ? (\r\n                <Button\r\n                  style={{ marginRight: \"1rem\" }}\r\n                  variant=\"outline-secondary\"\r\n                  onClick={() => {\r\n                    if (step > 1) {\r\n                      setstep(step - 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  retour\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {orderTo.order?.nsteps > step && step > 0 ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (orderTo.order?.nsteps > step && selected == step) {\r\n                      setstep(step + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  suivant\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {orderTo.order?.nsteps == step ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (selected == step) {\r\n                      handleUpdateOrder();\r\n                    }\r\n                  }}\r\n                >\r\n                  finir\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button\r\n            variant=\"danger\"\r\n            onClick={() => {\r\n              dispatch(deleteOrder({ key: orderTo.key }));\r\n              handleClose();\r\n              setstep(1);\r\n            }}\r\n          >\r\n            Supprimer\r\n          </Button>\r\n          <Button\r\n            variant=\"secondary\"\r\n            onClick={() => {\r\n              handleClose();\r\n              setstep(1);\r\n            }}\r\n          >\r\n            {t(\"cancel\")}\r\n          </Button>\r\n          {orderTo.order?.nsteps == 0 || orderTo.order?.isComp ? (\r\n            <Button variant=\"warning\" onClick={() => handleUpdateOrder()}>\r\n              {t(\"aded\")}\r\n            </Button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n      {showRemise && (\r\n        <RemiseModal\r\n          setshowRemise={setshowRemise}\r\n          orderTo={orderTo}\r\n          setOrderTo={setOrderTo}\r\n          handleUpdateOrder={handleUpdateOrder}\r\n          calcOrder={calcOrder}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartMenu;\r\n","import React from \"react\";\r\nimport { Stack } from \"react-bootstrap\";\r\n\r\nconst Category = ({ setSelectedCategory, categories, selectedCategory }) => {\r\n  function getRandomColor() {\r\n    var letters = \"0123456789ABCDEF\";\r\n    var color = \"#\";\r\n    for (var i = 0; i < 6; i++) {\r\n      color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n  }\r\n\r\n  return (\r\n    <div className=\"cat_container\">\r\n      {categories\r\n        .filter((cat) => cat.state == true)\r\n        .map((category) => (\r\n          <div\r\n            style={{ background: `${category.color}` }}\r\n            className={\r\n              selectedCategory == category.id\r\n                ? \"cat_item cat_item_selected\"\r\n                : \"cat_item\"\r\n            }\r\n            onClick={() => {\r\n              setSelectedCategory(category.id);\r\n            }}\r\n          >\r\n            <img width=\"50px\" height=\"50px\" src={category.picture} className=\"category_img\"/>\r\n            <h6 className=\"cat_name\"> \r\n              {category.name.substring(0, 13) + \"...\"}\r\n            </h6>\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Category;\r\n","import {\r\n  faAngleDoubleLeft,\r\n  faAngleDoubleRight,\r\n \r\n  faCheck,\r\n  faMinusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Cursor } from \"mongoose\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setNewOrder } from \"../Slices/order\";\r\n\r\nconst SuppModal = ({ orderWithSupp,handleAddOrderWithSupp,handleaAddDrink,drinks,suppSelected ,order_id, setShowSupplements,setSuppSelected,setDrinks}) => {\r\n  const [page, setPage] = useState(\"sauces\");\r\n  const dispatch= useDispatch()\r\n  const hadnleClose= ()=>{\r\n    setShowSupplements(false);\r\n    setDrinks(null);\r\n    setSuppSelected([])\r\n\r\n  }\r\n  const handleTerminer =()=>{\r\n    dispatch(setNewOrder({\r\n      order: {\r\n        ...orderWithSupp,\r\n        qt: 1,\r\n        stepItems: {},\r\n        remise: 0,\r\n        offert: false,\r\n        new: order_id ? \"true\" : \"false\",\r\n      },\r\n    }));\r\n    setShowSupplements(false);\r\n    setDrinks(null);\r\n    setSuppSelected([])\r\n\r\n  }\r\n  return (\r\n    <div className=\"product_with_supp\">\r\n      <FontAwesomeIcon icon={faTimes} style={{position:\"absolute\", right:\"3%\",top:\"6%\",fontSize:\"1.5rem\",cursor:\"pointer\" }} onClick={()=>hadnleClose()}/>\r\n      <div className=\"supp_header\">\r\n        <div className=\"supp_img\">\r\n          <img width=\"50px\" height=\"50px\" src={orderWithSupp.image} />\r\n          <h5>{orderWithSupp.name} +</h5>\r\n        </div>\r\n\r\n        <div className=\"supp_selected_items\">\r\n            {orderWithSupp.suppSelected.map((item,key)=>(\r\n               <div className=\"selected_item\" key={key}>\r\n               <img width=\"50px\" height=\"50px\" src={item.image} />\r\n               <h5>{item.name}</h5>\r\n             </div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n      {page==\"sauces\"?<div className=\"supp_body\">\r\n        {orderWithSupp.supplement.sauces.map((sauce, key) => (\r\n          <div className={suppSelected.length==3 && suppSelected.findIndex(e=>e.id==sauce.id)==-1 ?\"supp_item item_disabled\":\"supp_item \"} key={key} onClick={()=>handleAddOrderWithSupp(sauce)}>\r\n            <img width=\"60px\" height=\"60px\" src={sauce.image} />\r\n            <h5>{sauce.name}</h5>\r\n           { orderWithSupp.suppSelected.findIndex(e=>e.id==sauce.id)!=-1 && <FontAwesomeIcon icon={faMinusSquare} style={{color:\"red\",fontSize:\"1.5rem\",position:\"absolute\" ,bottom:\"-9%\"}} />}\r\n          </div>\r\n        ))}\r\n      </div>:\r\n      <div className=\"supp_body\">\r\n      {orderWithSupp.supplement.drinks.map((drink, key) => (\r\n        <div className=\"supp_item\" key={key}\r\n        onClick={()=>handleaAddDrink(drink)}\r\n        >\r\n          <img width=\"60px\" height=\"60px\" src={drink.image} />\r\n          <h5>{drink.name}</h5>\r\n          {drinks?.id==drink?.id?<FontAwesomeIcon icon={faCheck} style={{color:\"red\",fontSize:\"1.5rem\",position:\"absolute\" ,bottom:\"-15%\"}} />:\"\"}\r\n        </div>\r\n      ))}\r\n    </div>\r\n      }\r\n      <div className=\"supp_footer\">\r\n      { page == \"sauces\" && <button style={{ right: \"0\" }} onClick={() => setPage(\"drinks\")}>\r\n          {suppSelected.length==0 ? \"Non merci\" : \"Suivant\"}\r\n          <FontAwesomeIcon icon={faAngleDoubleRight} />\r\n        </button>}\r\n        {page == \"drinks\" && (\r\n          <button style={{ right: \"0\" }} onClick={handleTerminer}>\r\n            \r\n            Terminer\r\n            <FontAwesomeIcon icon={faAngleDoubleRight} />\r\n          </button>\r\n        )}\r\n        {page == \"drinks\" && (\r\n          <button style={{ left: \"0\" }}\r\n          onClick={()=>setPage(\"sauces\")}\r\n          >\r\n            <FontAwesomeIcon icon={faAngleDoubleLeft} />\r\n            Précedent\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SuppModal;\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { Modal, Button, Table, Carousel } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCheck,\r\n  faEdit,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPencilAlt,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport useTranslation from \"./../i18\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setNewOrder } from \"../Slices/order\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { updateProduct } from \"../Slices/data\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport SuppModal from \"./SuppModal\";\r\nimport { set } from \"mongoose\";\r\n\r\nconst Item = ({ product, setAlert, order_id,setconfirmed,confirmed }) => {\r\n  const [index, setIndex] = useState(0);\r\n\r\n  const handleSelect = (selectedIndex, e) => {\r\n    setIndex(selectedIndex);\r\n  };\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const nsteps = useSelector((state) => state.data.nSteps);\r\n  const products = useSelector((state) => state.data.products);\r\n  const [step, setstep] = useState(1);\r\n  const [selected, setselected] = useState(1);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [showSupplements, setShowSupplements] = useState(false);\r\n  const orderType = useSelector((state) => state.order.orderType);\r\n  const [newProduct, setnewProduct] = useState(undefined);\r\n  const [showstock, setshowstock] = useState(false);\r\n  const [tva, setTva] = useState(null);\r\n  const client = useSelector((state) => state.order.client);\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n  const [orderWithSupp, setOrderWithSupp] = useState({\r\n    active:product?.active,\r\n    cat_id:product?.cat_id,\r\n    description:product?.description,\r\n    extras:product?.extras,\r\n    id:product?.id,\r\n    image:product?.image,\r\n    isComp:product?.isComp,\r\n    is_alcool:product?.is_alcool,\r\n    is_cold:product?.is_cold,\r\n    is_hot: product?.is_hot,\r\n    is_supp:product?.is_supp,\r\n    name:product?.name,\r\n    nsteps:product?.nsteps,\r\n    price:product?.price,\r\n    tva:product?.tva,\r\n    drink_id:\"\",\r\n    suaces_ids:[],\r\n    suppSelected:[],\r\n    qt:1,\r\n    supplement:{\r\n      drinks:[],\r\n      sauces:[]\r\n    }\r\n   \r\n \r\n  })\r\n  const [suppSelected, setSuppSelected] = useState([])\r\n  const [drinks, setDrinks] = useState(null)\r\n  useEffect(() => {\r\n    \r\n   \r\n    let supplements\r\n    if(drinks==null){\r\n      supplements=[...suppSelected]\r\n    }else{\r\n      supplements=[...suppSelected,drinks]\r\n     \r\n    }\r\n    let saucesIds =suppSelected.map(e=>e.id)\r\n    \r\n    setOrderWithSupp({...orderWithSupp,suppSelected:supplements,suaces_ids:saucesIds})\r\n  \r\n  }, [suppSelected,drinks])\r\n\r\n  var check\r\n  const handleAddOrderWithSupp= async (sauce)=>{\r\n       check= suppSelected.findIndex(e=>e.id==sauce.id)\r\n       if(check!=-1){\r\n        let filtred=  suppSelected.filter(e=>e.id!=sauce.id)\r\n     \r\n      \r\n     setSuppSelected(filtred);\r\n  \r\n     \r\n       }else{\r\n        if(suppSelected.length<3)\r\n      { setSuppSelected([...suppSelected,sauce]);}\r\n      \r\n        \r\n    \r\n       }\r\n    \r\n  }\r\nconst  handleaAddDrink =(drink)=>{\r\nif(drink==drinks){\r\n  setDrinks(null)\r\n  setOrderWithSupp({...orderWithSupp,drink_id:drink.id,price:product.price})\r\n}  \r\nelse{\r\n  setDrinks(drink)\r\n  setOrderWithSupp({...orderWithSupp,drink_id:drink.id,price:product.price+drink.price})\r\n}\r\n\r\n\r\n  }\r\n  useEffect(() => {\r\n    let tva;\r\n    if (client.type == \"sur place\" || client.type == \"livraison\") {\r\n      tva = tva_mode.find((e) => e.nom == \"sur place\").valeur;\r\n      setTva(tva);\r\n    } else if (client.type == \"emporter\") {\r\n      tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n      setTva(tva);\r\n    }\r\n    if (rab_tva > 0) {\r\n      tva = rab_tva;\r\n      setTva(tva);\r\n    }\r\n    console.log(tva);\r\n  }, []);\r\n\r\n  const selectProduct = () => {\r\n    setconfirmed(false)\r\n    if (\r\n      product?.extras?.length == 0 &&\r\n      product?.nsteps == 0 &&\r\n      product?.isComp == false &&\r\n      product?.is_supp == false\r\n    ) {\r\n      toast(\"Ajoutée !\", {\r\n        position: \"bottom-center\",\r\n        autoClose: 1000,\r\n        type: \"success\",\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      dispatch(\r\n        setNewOrder({\r\n          order: {\r\n            ...product,\r\n            qt: 1,\r\n            stepItems: {},\r\n            remise: 0,\r\n            offert: false,\r\n            new: order_id ? \"true\" : \"false\",\r\n          },\r\n        })\r\n      );\r\n    }else if(product?.is_supp){\r\n      setShowSupplements(true)\r\n      setOrderWithSupp(\r\n        {\r\n          active:product?.active,\r\n    cat_id:product?.cat_id,\r\n    description:product?.description,\r\n    extras:product?.extras,\r\n    id:product?.id,\r\n    image:product?.image,\r\n    isComp:product?.isComp,\r\n    is_alcool:product?.is_alcool,\r\n    is_cold:product?.is_cold,\r\n    is_hot: product?.is_hot,\r\n    is_supp:product?.is_supp,\r\n    name:product?.name,\r\n    nsteps:product?.nsteps,\r\n    price:product?.price,\r\n    tva:product?.tva,\r\n    drink_id:\"\",\r\n    suaces_ids:[],\r\n    suppSelected:[],\r\n    qt:1,\r\n    supplement:{\r\n      drinks:[...product?.supplement?.drinks],\r\n      sauces:[...product?.supplement?.sauces]\r\n    }\r\n        }\r\n      )\r\n    }\r\n    else {\r\n      setShowPreview(true);\r\n      setnewProduct({\r\n        ...product,\r\n        qt: 1,\r\n        stepItems: {},\r\n        remise: 0,\r\n        offert: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSlotSelect = ({ slotKey, id }) => {\r\n    console.log(slotKey, id);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    copy.slots[slotKey].products.forEach((prod) => {\r\n      prod.id == id ? (prod.checked = true) : (prod.checked = false);\r\n      console.log(prod.name);\r\n    });\r\n    setnewProduct(copy);\r\n  };\r\n\r\n  const handleExtra = ({ extraKey, sign }) => {\r\n    console.log(\"handleExtra\", { extraKey, sign });\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    if (sign == \"+\" && copy.extras[extraKey].default_quantity < 1) {\r\n      copy.extras[extraKey].default_quantity += 1;\r\n      console.log(copy);\r\n      setnewProduct(copy);\r\n    } else {\r\n      if (copy.extras[extraKey].default_quantity > 0) {\r\n        copy.extras[extraKey].default_quantity -= 1;\r\n        console.log(copy);\r\n        setnewProduct(copy);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAlert = ({ show, msg, type }) => {\r\n    setAlert({ show, msg, type });\r\n    setTimeout(() => {\r\n      setAlert({ show: false, msg: \"\", type: \"\" });\r\n    }, 1500);\r\n  };\r\n\r\n  const handleNewOrderToCart = () => {\r\n    toast(\"Ajoutée !\", {\r\n      position: \"bottom-center\",\r\n      autoClose: 1000,\r\n      type: \"success\",\r\n      hideProgressBar: true,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n  };\r\n\r\n  const handleNewOrderWithStepsToCart = () => {\r\n    toast(\"Ajoutée !\", {\r\n      position: \"bottom-center\",\r\n      autoClose: 1000,\r\n      type: \"success\",\r\n      hideProgressBar: true,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n    setstep(1);\r\n  };\r\n\r\n  const findProductWithId = (id) => {\r\n    return products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  const handleStepSelect = ({ id, STP }) => {\r\n    console.log(\"stp\",STP);\r\n    setselected(step);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    let max_select = STP.max_select;\r\n    if (copy.stepItems[step] == undefined) {\r\n      copy.stepItems[step] = [];\r\n      console.log(copy);\r\n    }\r\n    if (copy.stepItems[step].length < max_select) {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        console.log(\"will push now\");\r\n        copy.stepItems[step].push(findProductWithId(id)); \r\n      }\r\n    }\r\n    {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        copy.stepItems[step] = [];\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n    setnewProduct(copy);\r\n    console.log(\"done\");\r\n    console.log(copy);\r\n  };\r\n\r\n  const handleStock = () => {\r\n    setshowstock(false);\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/resetwarehouse\",\r\n        { prod_id: product.id }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        dispatch(updateProduct({ id: product.id }));\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"produit mis hors stock !\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n      });\r\n  };\r\nconst [addtva, setaddtva] = useState(0)\r\n\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  return (\r\n    <>\r\n      \r\n      <div className=\"item_container\">\r\n        <p>\r\n          <b>{product.name.substring(0, 21)}</b>\r\n        </p>\r\n        {product.image!=''?<img src={product.image} onClick={selectProduct} className=\"prod_img\" />:''}\r\n        \r\n        <div className=\"price\">\r\n          {`${(product.price).toFixed(2)}`}\r\n          {renderHTML(`<i>${currency}</i>`)}\r\n        </div>\r\n        <FontAwesomeIcon\r\n          onClick={(e) => setshowstock(true)}\r\n          icon={faTimes}\r\n          size=\"1x\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"0px\",\r\n            right: \"5px\",\r\n            color: \"red\",\r\n            backgroundColor: \"white\",\r\n            borderRadius: \"25%\",\r\n          }}\r\n        />\r\n      </div>\r\n        <div className=\"supp_modal\">\r\n         { showSupplements? <SuppModal setDrinks={setDrinks} setSuppSelected={setSuppSelected} setShowSupplements={setShowSupplements} handleaAddDrink={handleaAddDrink} suppSelected={suppSelected} drinks={drinks} handleAddOrderWithSupp={handleAddOrderWithSupp} orderWithSupp={orderWithSupp} order_id ={order_id}/>:\"\"}\r\n        </div>\r\n      <Modal\r\n        dialogClassName=\"modal_body\"\r\n        show={showPreview}\r\n        onHide={() => {\r\n          setShowPreview(false);\r\n          setstep(1);\r\n        }}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>\r\n            <img width=\"30px\" height=\"30px\" src={product.image} />\r\n            {newProduct?.name}\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>{newProduct?.description}</p>\r\n\r\n          {newProduct?.extras && newProduct?.extras.length ? (\r\n            newProduct?.extras.map((extra, key) => (\r\n              <tr\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"50%\",\r\n                }}\r\n              >\r\n                <td\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-evenly\",\r\n                    alignItems: \"center\",\r\n                    height: \"30px\",\r\n                    width: \"25%\",\r\n                    marginRight: \"1rem\",\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"-\" })}\r\n                    icon={faMinusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                  <h5>\r\n                    <b>{extra.default_quantity}</b>\r\n                  </h5>\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"+\" })}\r\n                    icon={faPlusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                </td>\r\n                <td style={{ marginRight: \"1rem\" }}>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b>{extra.title}</b>\r\n                  </h5>\r\n                </td>\r\n                <td>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                      {extra.price.toFixed(2)}{\" \"}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </b>\r\n                  </h5>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : newProduct?.isComp ? (\r\n            // <Table>\r\n            //   <thead className=\"comphead\">\r\n            //     <tr>\r\n            //       {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n            //         <td>{slotKey}</td>\r\n            //       ))}\r\n            //     </tr>\r\n            //   </thead>\r\n            //   <tbody>\r\n            //     {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n            //       <td>\r\n            //         {newProduct?.slots[slotKey].products.map((prod) => (\r\n            //           <div\r\n            //             style={{\r\n            //               cursor: \"pointer\",\r\n            //               position: \"relative\",\r\n            //             }}\r\n            //             // className={prod.checked ? \"checked\" : \"not\"}\r\n            //             onClick={() =>\r\n            //               handleSlotSelect({ slotKey, id: prod.id })\r\n            //             }\r\n            //           >\r\n            //             <h6>\r\n            //               <b\r\n            //                 style={{\r\n            //                   color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n            //                 }}\r\n            //               >\r\n            //                 {prod.name}\r\n            //               </b>\r\n            //             </h6>\r\n            //             <img\r\n            //               src={prod.image}\r\n            //               width=\"50px\"\r\n            //               height=\"50px\"\r\n            //               style={{\r\n            //                 borderRadius: \"50%\",\r\n            //                 borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n            //               }}\r\n            //             />\r\n            //             {/* <div className=\"price\">\r\n            //               {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n            //             </div> */}\r\n            //             {prod.checked ? (\r\n            //               <FontAwesomeIcon\r\n            //                 icon={faCheck}\r\n            //                 color=\"#ff6b6b\"\r\n            //                 style={{\r\n            //                   position: \"absolute\",\r\n            //                   top: \"5px\",\r\n            //                   right: \"5px\",\r\n            //                 }}\r\n            //               />\r\n            //             ) : (\r\n            //               \"\"\r\n            //             )}\r\n            //           </div>\r\n            //         ))}\r\n            //       </td>\r\n            //     ))}\r\n            //   </tbody>\r\n            // </Table>\r\n            <Carousel variant=\"dark\">\r\n               {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n              \r\n                     <Carousel.Item  style={{ height:\"15rem\",width:\"100%\" ,textAlign:\"center\"}} className=\"chejm\" >\r\n                      <h3> {slotKey}</h3>\r\n                      <div style={{display:\"flex\",justifyContent:\"space-around\", display:\"flex\",\r\n                          alignItems:\"center\",marginTop:\"2rem\"\r\n                           }}>\r\n                      {newProduct?.slots[slotKey].products.map((prod) => (\r\n                      <div\r\n                        style={{\r\n                          cursor: \"pointer\",\r\n                          position: \"relative\",\r\n                          \r\n                      \r\n                          \r\n                         \r\n                         \r\n                        }}\r\n                        // className={prod.checked ? \"checked\" : \"not\"}\r\n                        onClick={() =>\r\n                          handleSlotSelect({ slotKey, id: prod.id })\r\n                        }\r\n                      >\r\n                        <h6>\r\n                          <b\r\n                            style={{\r\n                              color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                            }}\r\n                          >\r\n                            {prod.name}\r\n                          </b>\r\n                        </h6>\r\n                        <img\r\n                          src={prod.image}\r\n                          width=\"50px\"\r\n                          height=\"50px\"\r\n                          style={{\r\n                            borderRadius: \"50%\",\r\n                            borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                          }}\r\n                        />\r\n                        {/* <div className=\"price\">\r\n                          {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n                        </div> */}\r\n                        {prod.checked ? (\r\n                          <FontAwesomeIcon\r\n                            icon={faCheck}\r\n                            color=\"#ff6b6b\"\r\n                            style={{\r\n                              position: \"absolute\",\r\n                              top: \"50px\",\r\n                              right: \"20px\",\r\n                            }}\r\n                          />\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                      </div>\r\n                    ))} </div>\r\n               \r\n                     {/* <Carousel.Caption>\r\n                       <h5>First slide label</h5>\r\n                       <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>\r\n                     </Carousel.Caption> */}\r\n                   </Carousel.Item>\r\n                  ))}\r\n         \r\n          </Carousel>   \r\n          ) : newProduct?.nsteps > 0 ? (\r\n            <div>\r\n              <h6>\r\n                <b>\r\n                  {\r\n                    nsteps.filter(\r\n                      (nstep) => nstep?.menu_id == newProduct?.id\r\n                    )[0][step]?.nom_etape\r\n                  }\r\n                </b>\r\n              </h6>\r\n              <div className=\"steps_cont\">\r\n                {nsteps\r\n                  .filter((nstep) => nstep.menu_id == newProduct?.id)[0]\r\n                  [step]?.choice.map((slot) => (\r\n                    <div\r\n                      className={\r\n                        newProduct?.stepItems[step]?.find((el) => el.id == slot)\r\n                          ? \"prod_sel prod\"\r\n                          : \"prod\"\r\n                      }\r\n                      onClick={() =>\r\n                        handleStepSelect({\r\n                          id: slot,\r\n                          STP: nsteps.filter(\r\n                            (nstep) => nstep.menu_id == newProduct?.id\r\n                          )[0][step],\r\n                        })\r\n                      }\r\n                    >\r\n                      <img\r\n                        src={findProductWithId(slot).image}\r\n                        alt=\"\"\r\n                        height=\"70px\"\r\n                        width=\"70px\"\r\n                      />\r\n                      <h6 style={{ display: \"flex\" }}>\r\n                        <b>{findProductWithId(slot).name} </b>\r\n                        <span>\r\n                          <b\r\n                            style={{\r\n                              display: \"flex\",\r\n                              marginLeft: \"1rem\",\r\n                              marginRight: \"1rem\",\r\n                              color: \"#ff6b6b\",\r\n                            }}\r\n                          >\r\n                            {findProductWithId(slot).price}{\" \"}\r\n                            {renderHTML(`<i>${currency}</i>`)}\r\n                          </b>\r\n                        </span>{\" \"}\r\n                      </h6>\r\n                      <p>{findProductWithId(slot).description}</p>\r\n                      {/* {newProduct?.stepItems[step]?.find(\r\n                          (el) => el.id == slot\r\n                        )\r\n                          ? \"selected\"\r\n                          : \"not\"} */}\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n              {newProduct?.nsteps >= step && step > 0 ? (\r\n                <Button\r\n                  style={{ marginRight: \"1rem\" }}\r\n                  variant=\"outline-secondary\"\r\n                  onClick={() => {\r\n                    if (step > 1) {\r\n                      setstep(step - 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  Retour\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {newProduct?.nsteps > step && step > 0 ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (newProduct?.nsteps > step && selected == step) {\r\n                      setstep(step + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  Suivant\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {newProduct?.nsteps == step ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (selected == step) {\r\n                      handleNewOrderWithStepsToCart();\r\n                    }\r\n                  }}\r\n                >\r\n                  Finir\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          {/* <div>\r\n            <h3>\r\n              <FontAwesomeIcon\r\n                icon={faPencilAlt}\r\n                style={{ width: \"24\", marginRight: \"0.5rem\" }}\r\n              />\r\n              Remarque\r\n            </h3>\r\n            <Form.Control\r\n              type=\"textarea\"\r\n              as=\"textarea\"\r\n              placeholder=\"note\"\r\n              style={{ width: \"300px\", marginRight: \"300px\" }}\r\n              onChange={(e) =>\r\n                setnewProduct({ ...newProduct, note: e.target.value })\r\n              }\r\n            ></Form.Control>\r\n          </div> */}\r\n\r\n          <Button\r\n            variant=\"secondary\"\r\n            onClick={() => {\r\n              setShowPreview(false);\r\n              setstep(1);\r\n            }}\r\n          >\r\n            {t(\"cancel\")}\r\n          </Button>\r\n          {newProduct?.nsteps == 0 || newProduct?.isComp ? (\r\n            <Button\r\n              style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n              variant=\"warning\"\r\n              onClick={() => handleNewOrderToCart()}\r\n            >\r\n              {t(\"aded\")}\r\n            </Button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n     \r\n      <Modal show={showstock} onHide={() => setshowstock(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Gestion de stock</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setshowstock(false)}>\r\n            Retour au tables\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={() => handleStock()}>\r\n            Hors stock\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Item;\r\n","import React, { useEffect } from \"react\";\r\nimport { Spinner } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Item from \"./Item\";\r\n\r\nconst MenuItems = ({ selectedCategory, setAlert, categories, order_id,setconfirmed,confirmed }) => {\r\n  const products = useSelector((state) => state.data.products);\r\n  let category = categories.filter((cat) => cat.id == selectedCategory)[0];\r\n\r\n  return (\r\n    <div className=\"meni-iteams\">\r\n      <h5 style={{ width: \"100%\" }}>\r\n        <b>{category?.name}</b>\r\n      </h5>\r\n      {products\r\n        .filter((e) => e.cat_id == selectedCategory && e.active == true)\r\n        .sort((a, b) => a.position - b.position)\r\n        .map((product) => (\r\n          <Item order_id={order_id} product={product} setAlert={setAlert} confirmed={confirmed} setconfirmed={setconfirmed} />\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MenuItems;\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { Modal, Button, Table, Carousel } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCheck,\r\n  faEdit,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPencilAlt,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport useTranslation from \"./../i18\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setNewOrder } from \"../Slices/order\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { updateProduct } from \"../Slices/data\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nconst Product = ({ product, setAlert, order_id,setconfirmed,confirmed }) => {\r\n    const [index, setIndex] = useState(0);\r\n\r\n  const handleSelect = (selectedIndex, e) => {\r\n    setIndex(selectedIndex);\r\n  };\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const nsteps = useSelector((state) => state.data.nSteps);\r\n  const products = useSelector((state) => state.data.products);\r\n  const [step, setstep] = useState(1);\r\n  const [selected, setselected] = useState(1);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [newProduct, setnewProduct] = useState(undefined);\r\n  const [showstock, setshowstock] = useState(false);\r\n  const [tva, setTva] = useState(null);\r\n  const client = useSelector((state) => state.order.client);\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let tva;\r\n    if (client.type == \"sur place\" || client.type == \"livraison\") {\r\n      tva = tva_mode.find((e) => e.nom == \"sur place\").valeur;\r\n      setTva(tva);\r\n    } else if (client.type == \"emporter\") {\r\n      tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n      setTva(tva);\r\n    }\r\n    if (rab_tva > 0) {\r\n      tva = rab_tva;\r\n      setTva(tva);\r\n    }\r\n    console.log(tva);\r\n  }, []);\r\n\r\n  const selectProduct = () => {\r\n    setconfirmed(false)\r\n    if (\r\n      product?.extras?.length == 0 &&\r\n      product?.nsteps == 0 &&\r\n      product?.isComp == false\r\n    ) {\r\n    \r\n      dispatch(\r\n        setNewOrder({\r\n          order: {\r\n            ...product,\r\n            qt: 1,\r\n            stepItems: {},\r\n            remise: 0,\r\n            offert: false,\r\n            new: order_id ? \"true\" : \"false\",\r\n          },\r\n        })\r\n        \r\n      );\r\n     \r\n    } else {\r\n      setShowPreview(true);\r\n      setnewProduct({\r\n        ...product,\r\n        qt: 1,\r\n        stepItems: {},\r\n        remise: 0,\r\n        offert: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSlotSelect = ({ slotKey, id }) => {\r\n    console.log(slotKey, id);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    copy.slots[slotKey].products.forEach((prod) => {\r\n      prod.id == id ? (prod.checked = true) : (prod.checked = false);\r\n      console.log(prod.name);\r\n    });\r\n    setnewProduct(copy);\r\n  };\r\n\r\n  const handleExtra = ({ extraKey, sign }) => {\r\n    console.log(\"handleExtra\", { extraKey, sign });\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    if (sign == \"+\" && copy.extras[extraKey].default_quantity < 1) {\r\n      copy.extras[extraKey].default_quantity += 1;\r\n      console.log(copy);\r\n      setnewProduct(copy);\r\n    } else {\r\n      if (copy.extras[extraKey].default_quantity > 0) {\r\n        copy.extras[extraKey].default_quantity -= 1;\r\n        console.log(copy);\r\n        setnewProduct(copy);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAlert = ({ show, msg, type }) => {\r\n    setAlert({ show, msg, type });\r\n    setTimeout(() => {\r\n      setAlert({ show: false, msg: \"\", type: \"\" });\r\n    }, 1500);\r\n  };\r\n\r\n  const handleNewOrderToCart = () => {\r\n   \r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n  };\r\n\r\n  const handleNewOrderWithStepsToCart = () => {\r\n    \r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n    setstep(1);\r\n  };\r\n\r\n  const findProductWithId = (id) => {\r\n    return products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  const handleStepSelect = ({ id, STP }) => {\r\n    console.log(\"stp\",STP);\r\n    setselected(step);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    let max_select = STP.max_select;\r\n    if (copy.stepItems[step] == undefined) {\r\n      copy.stepItems[step] = [];\r\n      console.log(copy);\r\n    }\r\n    if (copy.stepItems[step].length < max_select) {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        console.log(\"will push now\");\r\n        copy.stepItems[step].push(findProductWithId(id)); \r\n      }\r\n    }\r\n    {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        copy.stepItems[step] = [];\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n    setnewProduct(copy);\r\n    console.log(\"done\");\r\n    console.log(copy);\r\n  };\r\n\r\n  const handleStock = () => {\r\n    setshowstock(false);\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/resetwarehouse\",\r\n        { prod_id: product.id }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        dispatch(updateProduct({ id: product.id }));\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"produit mis hors stock !\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n      });\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  return (\r\n    <>\r\n    <ToastContainer />\r\n    <div className=\"item_container\">\r\n      <p>\r\n        <b>{product.name.substring(0, 21)}</b>\r\n      </p>\r\n      {product.image!=''?<img src={product.image} onClick={selectProduct} className=\"prod_img\" />:''}\r\n      \r\n      <div className=\"price\">\r\n        {`${product.price.toFixed(2)}`}\r\n        {renderHTML(`<i>${currency}</i>`)}\r\n      </div>\r\n      <FontAwesomeIcon\r\n        onClick={(e) => setshowstock(true)}\r\n        icon={faTimes}\r\n        size=\"1x\"\r\n        style={{\r\n          position: \"absolute\",\r\n          top: \"0px\",\r\n          right: \"5px\",\r\n          color: \"red\",\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"25%\",\r\n        }}\r\n      />\r\n    </div>\r\n\r\n    <Modal\r\n      dialogClassName=\"modal_body\"\r\n      show={showPreview}\r\n      onHide={() => {\r\n        setShowPreview(false);\r\n        setstep(1);\r\n      }}\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          <img width=\"30px\" height=\"30px\" src={product.image} />\r\n          {newProduct?.name}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <p>{newProduct?.description}</p>\r\n\r\n        {newProduct?.extras && newProduct?.extras.length ? (\r\n          newProduct?.extras.map((extra, key) => (\r\n            <tr\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"50%\",\r\n              }}\r\n            >\r\n              <td\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-evenly\",\r\n                  alignItems: \"center\",\r\n                  height: \"30px\",\r\n                  width: \"25%\",\r\n                  marginRight: \"1rem\",\r\n                }}\r\n              >\r\n                <FontAwesomeIcon\r\n                  onClick={() => handleExtra({ extraKey: key, sign: \"-\" })}\r\n                  icon={faMinusCircle}\r\n                  color=\"#ff6b6b\"\r\n                />\r\n                <h5>\r\n                  <b>{extra.default_quantity}</b>\r\n                </h5>\r\n                <FontAwesomeIcon\r\n                  onClick={() => handleExtra({ extraKey: key, sign: \"+\" })}\r\n                  icon={faPlusCircle}\r\n                  color=\"#ff6b6b\"\r\n                />\r\n              </td>\r\n              <td style={{ marginRight: \"1rem\" }}>\r\n                {\" \"}\r\n                <h5>\r\n                  <b>{extra.title}</b>\r\n                </h5>\r\n              </td>\r\n              <td>\r\n                {\" \"}\r\n                <h5>\r\n                  <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                    {extra.price.toFixed(2)}{\" \"}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </b>\r\n                </h5>\r\n              </td>\r\n            </tr>\r\n          ))\r\n        ) : newProduct?.isComp ? (\r\n          // <Table>\r\n          //   <thead className=\"comphead\">\r\n          //     <tr>\r\n          //       {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n          //         <td>{slotKey}</td>\r\n          //       ))}\r\n          //     </tr>\r\n          //   </thead>\r\n          //   <tbody>\r\n          //     {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n          //       <td>\r\n          //         {newProduct?.slots[slotKey].products.map((prod) => (\r\n          //           <div\r\n          //             style={{\r\n          //               cursor: \"pointer\",\r\n          //               position: \"relative\",\r\n          //             }}\r\n          //             // className={prod.checked ? \"checked\" : \"not\"}\r\n          //             onClick={() =>\r\n          //               handleSlotSelect({ slotKey, id: prod.id })\r\n          //             }\r\n          //           >\r\n          //             <h6>\r\n          //               <b\r\n          //                 style={{\r\n          //                   color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n          //                 }}\r\n          //               >\r\n          //                 {prod.name}\r\n          //               </b>\r\n          //             </h6>\r\n          //             <img\r\n          //               src={prod.image}\r\n          //               width=\"50px\"\r\n          //               height=\"50px\"\r\n          //               style={{\r\n          //                 borderRadius: \"50%\",\r\n          //                 borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n          //               }}\r\n          //             />\r\n          //             {/* <div className=\"price\">\r\n          //               {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n          //             </div> */}\r\n          //             {prod.checked ? (\r\n          //               <FontAwesomeIcon\r\n          //                 icon={faCheck}\r\n          //                 color=\"#ff6b6b\"\r\n          //                 style={{\r\n          //                   position: \"absolute\",\r\n          //                   top: \"5px\",\r\n          //                   right: \"5px\",\r\n          //                 }}\r\n          //               />\r\n          //             ) : (\r\n          //               \"\"\r\n          //             )}\r\n          //           </div>\r\n          //         ))}\r\n          //       </td>\r\n          //     ))}\r\n          //   </tbody>\r\n          // </Table>\r\n          <Carousel variant=\"dark\">\r\n             {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n            \r\n                   <Carousel.Item  style={{ height:\"15rem\",width:\"100%\" ,textAlign:\"center\"}}>\r\n                    <h3> {slotKey}</h3>\r\n                    <div style={{display:\"flex\",justifyContent:\"space-around\", display:\"flex\",\r\n                        alignItems:\"center\",marginTop:\"2rem\"\r\n                         }}>\r\n                    {newProduct?.slots[slotKey].products.map((prod) => (\r\n                    <div\r\n                      style={{\r\n                        cursor: \"pointer\",\r\n                        position: \"relative\",\r\n                        \r\n                    \r\n                        \r\n                       \r\n                       \r\n                      }}\r\n                      // className={prod.checked ? \"checked\" : \"not\"}\r\n                      onClick={() =>\r\n                        handleSlotSelect({ slotKey, id: prod.id })\r\n                      }\r\n                    >\r\n                      <h6>\r\n                        <b\r\n                          style={{\r\n                            color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                          }}\r\n                        >\r\n                          {prod.name}\r\n                        </b>\r\n                      </h6>\r\n                      <img\r\n                        src={prod.image}\r\n                        width=\"50px\"\r\n                        height=\"50px\"\r\n                        style={{\r\n                          borderRadius: \"50%\",\r\n                          borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                        }}\r\n                      />\r\n                      {/* <div className=\"price\">\r\n                        {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n                      </div> */}\r\n                      {prod.checked ? (\r\n                        <FontAwesomeIcon\r\n                          icon={faCheck}\r\n                          color=\"#ff6b6b\"\r\n                          style={{\r\n                            position: \"absolute\",\r\n                            top: \"50px\",\r\n                            right: \"20px\",\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </div>\r\n                  ))} </div>\r\n             \r\n                   {/* <Carousel.Caption>\r\n                     <h5>First slide label</h5>\r\n                     <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>\r\n                   </Carousel.Caption> */}\r\n                 </Carousel.Item>\r\n                ))}\r\n       \r\n        </Carousel>   \r\n        ) : newProduct?.nsteps > 0 ? (\r\n          <div>\r\n            <h6>\r\n              <b>\r\n                {\r\n                  nsteps.filter(\r\n                    (nstep) => nstep?.menu_id == newProduct?.id\r\n                  )[0][step]?.nom_etape\r\n                }\r\n              </b>\r\n            </h6>\r\n            <div className=\"steps_cont\">\r\n              {nsteps\r\n                .filter((nstep) => nstep.menu_id == newProduct?.id)[0]\r\n                [step]?.choice.map((slot) => (\r\n                  <div\r\n                    className={\r\n                      newProduct?.stepItems[step]?.find((el) => el.id == slot)\r\n                        ? \"prod_sel prod\"\r\n                        : \"prod\"\r\n                    }\r\n                    onClick={() =>\r\n                      handleStepSelect({\r\n                        id: slot,\r\n                        STP: nsteps.filter(\r\n                          (nstep) => nstep.menu_id == newProduct?.id\r\n                        )[0][step],\r\n                      })\r\n                    }\r\n                  >\r\n                    <img\r\n                      src={findProductWithId(slot).image}\r\n                      alt=\"\"\r\n                      height=\"70px\"\r\n                      width=\"70px\"\r\n                    />\r\n                    <h6 style={{ display: \"flex\" }}>\r\n                      <b>{findProductWithId(slot).name} </b>\r\n                      <span>\r\n                        <b\r\n                          style={{\r\n                            display: \"flex\",\r\n                            marginLeft: \"1rem\",\r\n                            marginRight: \"1rem\",\r\n                            color: \"#ff6b6b\",\r\n                          }}\r\n                        >\r\n                          {findProductWithId(slot).price}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </b>\r\n                      </span>{\" \"}\r\n                    </h6>\r\n                    <p>{findProductWithId(slot).description}</p>\r\n                    {/* {newProduct?.stepItems[step]?.find(\r\n                        (el) => el.id == slot\r\n                      )\r\n                        ? \"selected\"\r\n                        : \"not\"} */}\r\n                  </div>\r\n                ))}\r\n            </div>\r\n            {newProduct?.nsteps >= step && step > 0 ? (\r\n              <Button\r\n                style={{ marginRight: \"1rem\" }}\r\n                variant=\"outline-secondary\"\r\n                onClick={() => {\r\n                  if (step > 1) {\r\n                    setstep(step - 1);\r\n                  }\r\n                }}\r\n              >\r\n                Retour\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {newProduct?.nsteps > step && step > 0 ? (\r\n              <Button\r\n                variant=\"outline-warning\"\r\n                onClick={() => {\r\n                  if (newProduct?.nsteps > step && selected == step) {\r\n                    setstep(step + 1);\r\n                  }\r\n                }}\r\n              >\r\n                Suivant\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {newProduct?.nsteps == step ? (\r\n              <Button\r\n                variant=\"outline-warning\"\r\n                onClick={() => {\r\n                  if (selected == step) {\r\n                    handleNewOrderWithStepsToCart();\r\n                  }\r\n                }}\r\n              >\r\n                Finir\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        {/* <div>\r\n          <h3>\r\n            <FontAwesomeIcon\r\n              icon={faPencilAlt}\r\n              style={{ width: \"24\", marginRight: \"0.5rem\" }}\r\n            />\r\n            Remarque\r\n          </h3>\r\n          <Form.Control\r\n            type=\"textarea\"\r\n            as=\"textarea\"\r\n            placeholder=\"note\"\r\n            style={{ width: \"300px\", marginRight: \"300px\" }}\r\n            onChange={(e) =>\r\n              setnewProduct({ ...newProduct, note: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </div> */}\r\n\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={() => {\r\n            setShowPreview(false);\r\n            setstep(1);\r\n          }}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>\r\n        {newProduct?.nsteps == 0 || newProduct?.isComp ? (\r\n          <Button\r\n            style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n            variant=\"warning\"\r\n            onClick={() => handleNewOrderToCart()}\r\n          >\r\n            {t(\"aded\")}\r\n          </Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Modal.Footer>\r\n    </Modal>\r\n    <Modal show={showstock} onHide={() => setshowstock(false)}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Gestion de stock</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setshowstock(false)}>\r\n          Retour au tables\r\n        </Button>\r\n        <Button variant=\"danger\" onClick={() => handleStock()}>\r\n          Hors stock\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default Product","import axios from \"axios\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Col, Container, Nav, Navbar, Row } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport CartMenu from \"../Components/CartMenu\";\r\nimport Category from \"../Components/Category\";\r\nimport MenuItems from \"../Components/MenuItems\";\r\nimport { storeCategories, storeNSteps, storeProducts } from \"../Slices/data\";\r\nimport useTranslation from \"./../i18\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport {\r\n  faGlobe,\r\n  faSearch,\r\n  faSignOutAlt,\r\n  faTimes,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { clearOrders } from \"../Slices/order\";\r\n\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport $ from \"jquery\";\r\nimport Item from \"../Components/Item\";\r\nimport Product from \"../Components/Product\";\r\n\r\nconst Menu = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const [shows, setShows] = useState(false);\r\n  function handleClose(){\r\n    setShows(false)\r\n  }\r\n  function handleShow() {\r\n    setShows(true);\r\n  }\r\n\r\n  const selectedTable = useSelector((state) => state.order.selectedTable);\r\n  const params = useParams();\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const { order_id } = params;\r\n  const categories = useSelector((state) => state.data.categories);\r\n  const [selectedCategory, setSelectedCategory] = useState(categories[0]?.id);\r\n  const [alert, setAlert] = useState({ show: false, msg: \"\", type: \"\" });\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const [date, setDate] = useState(new Date().toLocaleTimeString(\"fa-IR\"));\r\n  const [battery, setBattery] = useState({ level: 0, charging: false });\r\n  const [confirmed, setconfirmed] = useState(false);\r\n\r\n  const [serachbar, setSerachbar] = useState(\"\");\r\n\r\n  const products = useSelector((state) => state.data.products);\r\n\r\n  // const handleChange = ({ target: { level, charging } }) => {\r\n  //   setBattery({ level, charging });\r\n  // };\r\n\r\n  // useEffect(() => {\r\n  //   let battery;\r\n  //   navigator.getBattery().then((bat) => {\r\n  //     battery = bat;\r\n  //     battery.addEventListener(\"levelchange\", handleChange);\r\n  //     battery.addEventListener(\"chargingchange\", handleChange);\r\n  //     handleChange({ target: battery });\r\n  //   });\r\n  //   return () => {\r\n  //     battery.removeEventListener(\"levelchange\", handleChange);\r\n  //     battery.removeEventListener(\"chargingchange\", handleChange);\r\n  //   };\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    const timerID = setInterval(() => tick(), 1000);\r\n    \r\n    return () => {\r\n      clearInterval(timerID);\r\n   \r\n    };\r\n    \r\n  }, []);\r\n\r\n  const tick = () => {\r\n    setDate(new Date().toLocaleTimeString(\"fr-fr\").replace(/(.*)\\D\\d+/, \"$1\"));\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    // if (selectedTable.nbr == undefined) {\r\n    //   navigate(\"/main\");\r\n    // }\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/categories\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) =>\r\n        dispatch(\r\n          storeCategories({\r\n            categories: res.data.sort((a, b) => a.cat_order - b.cat_order),\r\n          })\r\n        )\r\n      );\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/products\",\r\n        {\r\n          user_id,\r\n          category: 0,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeProducts({ products: res.data.products }));\r\n        dispatch(storeNSteps({ nSteps: res.data.menuSteps }));\r\n      });\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   axios\r\n  //     .post(process.env.REACT_APP_API_HOST+\":\"+process.env.REACT_APP_API_PORT+\"/api/products\", { user_id, category: selectedCategory })\r\n  //     .then((res) => dispatch(storeProducts({ products: res.data })));\r\n  // }, [selectedCategory]);\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n  //keypord\r\n  const [myLayout, setLayout] = useState(\"default\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const keyboard = useRef();\r\n  const onChange = (input) => {\r\n    setFilter(input)\r\n  };\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n    if(button==\"{lock}\"&&myLayout==\"default\"){\r\n      setLayout(\"shift\")\r\n    }\r\n    if(button==\"{lock}\"&&myLayout==\"shift\"){\r\n      setLayout(\"default\")\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Navbar\r\n        style={{ backgroundColor: \"#0dcaf0\", height: \"70px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container>\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <div onClick={()=>handleShow()} style={{cursor:\"pointer\"}}>\r\n          <h6\r\n           \r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n             \r\n            <b>Rechercher</b>\r\n            <FontAwesomeIcon icon={faSearch}  style={{marginLeft:\"0.5rem\"}} />\r\n            </h6>\r\n          </div>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link\r\n              onClick={() => {\r\n                navigate(\"/main\");\r\n                dispatch(clearOrders());\r\n              }}\r\n            >\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"menu-server-logout\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <div className=\"cont_my\">\r\n        <Row\r\n          style={{\r\n            height: \"85vh\",\r\n            paddingRight: \"0 !important\",\r\n            backgroundColor: \"white\",\r\n          }}\r\n        >\r\n          <Col xs={2}>\r\n            <Category\r\n              selectedCategory={selectedCategory}\r\n              setSelectedCategory={setSelectedCategory}\r\n              categories={categories}\r\n            />\r\n          </Col>\r\n          <Col xs={7}>\r\n            <MenuItems\r\n              order_id={order_id}\r\n              categories={categories}\r\n              selectedCategory={selectedCategory}\r\n              setAlert={setAlert}\r\n              confirmed={confirmed}\r\n              setconfirmed={setconfirmed}\r\n            />\r\n          </Col>\r\n          <Col xs={3}>\r\n            <CartMenu\r\n              selectedTable={selectedTable}\r\n              confirmed={confirmed}\r\n              setconfirmed={setconfirmed}\r\n            />\r\n          </Col>\r\n          \r\n        </Row>\r\n      </div>\r\n      {shows ? (\r\n        <div className=\"all-produc-menu\" >\r\n          <div className=\"modal-heade\">\r\n            <div className=\"input-search-product\" >\r\n              \r\n              <input type=\"text\" placeholder=\"Rehercher un produit...\"  value={filter}/>\r\n              <FontAwesomeIcon icon={faSearch} className=\"Sm\" />\r\n            </div>\r\n\r\n            <FontAwesomeIcon icon={faTimes} className=\"xm\" onClick={()=>handleClose()} />\r\n          </div>\r\n          <div className=\"modal-bodys\">\r\n            {\r\n              products.filter(e=>e.name.toLowerCase().includes(filter.toLowerCase())||e.code.includes(filter)).map((product,key)=><Product order_id={order_id} setAlert={setAlert} setconfirmed={setconfirmed} product={product} />\r\n\r\n              )\r\n              \r\n            }\r\n          </div>\r\n          <div className=\"keyboard\">\r\n            <Keyboard\r\n       \r\n            layoutName={myLayout}\r\n                  \r\n              onChange={onChange}\r\n              onKeyPress={onKeyPress}\r\n            />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <NaviBottom />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  monnaies: [],\r\n  initialValue: 0,\r\n};\r\n\r\nconst caisseSlice = createSlice({\r\n  name: \"caisse\",\r\n  initialState,\r\n  reducers: {\r\n    setMonnaies: (state, action) => {\r\n      state.monnaies = action.payload.monnaies;\r\n    },\r\n    clearcaisse: () => {\r\n      return { caisse: \"\" };\r\n    },\r\n    setInitialValue: (state, action) => {\r\n      state.initialValue = action.payload.montant;\r\n    },\r\n  },\r\n});\r\n\r\nconst { reducer, actions } = caisseSlice;\r\n\r\nexport const { setMonnaies, clearcaisse, setInitialValue } = actions;\r\nexport default reducer;\r\n","export default __webpack_public_path__ + \"static/media/coin.3b947962.png\";","export default __webpack_public_path__ + \"static/media/billet.8e0c912a.png\";","export default __webpack_public_path__ + \"static/media/sound.861677ae.mp3\";","import axios from \"axios\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setInitialValue, setMonnaies } from \"../Slices/caisse\";\r\nimport { Button, Container, FormControl, Nav, Navbar } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router\";\r\nimport Navi from \"../Components/Navi\";\r\nimport coin from \"./../Shared/coin.png\";\r\nimport billet from \"./../Shared/billet.png\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport Swal from \"sweetalert2\";\r\nimport aud from \"./../Shared/sound.mp3\";\r\n\r\nconst Caisse = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const [audio, setaudio] = useState(new Audio(aud));\r\n\r\n  useEffect(() => {\r\n    audio.play();\r\n  }, []);\r\n\r\n  const caisse_open = localStorage.getItem(\"caisse_open\");\r\n  const caisse_id = localStorage.getItem(\"caisse_id\");\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const user = localStorage.getItem(\"username\");\r\n  const monnaies = useSelector((state) => state.caisse.monnaies);\r\n  const [historique_monnaie, setHistorique_monnaie] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const [ping, setping] = useState(true);\r\n  const [input, setInput] = useState(\"\");\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 {bksp}\",\r\n  ]);\r\n  const keyboard = useRef();\r\n  const [selected, setSelected] = useState(0);\r\n  const [lay, setlay] = useState([\r\n    { value: 0, real: 0.02 },\r\n    { value: 0, real: 0.05 },\r\n    { value: 0, real: 0.1 },\r\n    { value: 0, real: 0.2 },\r\n    { value: 0, real: 0.5 },\r\n    { value: 0, real: 1 },\r\n    { value: 0, real: 5 },\r\n    { value: 0, real: 10 },\r\n    { value: 0, real: 20 },\r\n    { value: 0, real: 50 },\r\n    { value: 0, real: 100 },\r\n    { value: 0, real: 200 },\r\n    { value: 0, real: 2 },\r\n    { value: 0, real: 0.2 },\r\n    { value: 0, real: 0.1 },\r\n  ]);\r\n\r\n  const onChange = (input) => {\r\n    setInput(input);\r\n    console.log(\"Input changed\", input);\r\n    let newarr = [...lay];\r\n    newarr[selected].value = Number(input);\r\n    setlay(newarr);\r\n    setInput(\"\");\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n  };\r\n\r\n  const onChangeInput = ({ e, index }) => {\r\n    const input = e.target.value;\r\n    setInput(input);\r\n    let newarr = [...lay];\r\n    newarr[selected].value = Number(input);\r\n    setlay(newarr);\r\n    keyboard.current.setInput(input);\r\n    setTotal(calcMontant());\r\n  };\r\n\r\n  ////////////////////////\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getMonnaie\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(setMonnaies({ monnaies: res.data }));\r\n      });\r\n  }, []);\r\n  useEffect(() => {\r\n    audio.play();\r\n    console.log(audio);\r\n    if (caisse_open == true) {\r\n      let date = new Date();\r\n      let dateStr =\r\n        (\"00\" + (date.getMonth() + 1)).slice(-2) +\r\n        \"/\" +\r\n        (\"00\" + date.getDate()).slice(-2) +\r\n        \"/\" +\r\n        date.getFullYear() +\r\n        \" \" +\r\n        (\"00\" + date.getHours()).slice(-2) +\r\n        \":\" +\r\n        (\"00\" + date.getMinutes()).slice(-2) +\r\n        \":\" +\r\n        (\"00\" + date.getSeconds()).slice(-2);\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \"caisse Ouvert !\",\r\n        text: \"Date ouverture :\" + dateStr,\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      navigate(\"/main\");\r\n    }\r\n  }, [ping]);\r\n\r\n  const handleHistoriqueMonnaie = ({ key, qt, monnaie }) => {\r\n    let copy = JSON.parse(JSON.stringify(historique_monnaie) || []);\r\n    copy[key] = {\r\n      value: monnaie.value,\r\n      type: monnaie.id,\r\n      qt: qt,\r\n    };\r\n    setHistorique_monnaie(copy);\r\n  };\r\n\r\n  const calcMontant = () => {\r\n    let montant = 0;\r\n    lay.map((el) => {\r\n      montant += el.value * el.real;\r\n      console.log(montant);\r\n    });\r\n    return montant;\r\n  };\r\n\r\n  const handleOpenCaisse30 = () => {\r\n    let historiquePrint = {\r\n      caisse_id: caisse_id,\r\n      date: Date.now(),\r\n      montant: 30,\r\n      type: \"open\",\r\n    };\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/OpenCaisse\",\r\n        {\r\n          user_id,\r\n          user,\r\n          montant: 30,\r\n          historiquePrint,\r\n          historique_monnaie,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        let caisse_initial_value = res.data.historiquePrint?.montant;\r\n        dispatch(setInitialValue({ montant: caisse_initial_value }));\r\n        localStorage.setItem(\"caisse_open\", 1);\r\n        setping(!ping);\r\n      });\r\n  };\r\n\r\n  const handleOpenCaisse = () => {\r\n    if (calcMontant() > 0) {\r\n      console.log(historique_monnaie);\r\n      console.log(calcMontant());\r\n      let historiquePrint = {\r\n        caisse_id: caisse_id,\r\n        date: Date.now(),\r\n        montant: calcMontant(),\r\n        type: \"open\",\r\n      };\r\n      console.log(historiquePrint);\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/OpenCaisse\",\r\n          {\r\n            user_id,\r\n            user,\r\n            montant: calcMontant(),\r\n            historiquePrint,\r\n            historique_monnaie,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          let caisse_initial_value = res.data.historiquePrint?.montant;\r\n          dispatch(setInitialValue({ montant: caisse_initial_value }));\r\n          localStorage.setItem(\"caisse_open\", 1);\r\n          setping(!ping);\r\n        });\r\n    } else {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Fond initial est 0 !\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n    }\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n\r\n  return (\r\n    <div className=\"my_container\">\r\n      <Navi title=\"cashierr\" />\r\n      <div className=\"toOpenCaisse\">\r\n        {/* <h1\r\n          style={{\r\n            backgroundColor: \"#ff6b6b\",\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          Monnaies\r\n        </h1> */}\r\n        <div className=\"mon_cont\">\r\n          {/* {monnaies.map((monnaie, key) => (\r\n            <div className=\"monn\">\r\n              <div>\r\n                <p>{`${monnaie.type} ${monnaie.name}`}</p>\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"0\"\r\n                  onChange={(e) =>\r\n                    handleHistoriqueMonnaie({\r\n                      monnaie,\r\n                      key,\r\n                      qt: e.target.value,\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          ))} */}\r\n          <div className=\"piece\">\r\n            <img\r\n              className=\"piece-img-coin\"\r\n              src={coin}\r\n              width={64}\r\n              height={64}\r\n              style={{ position: \"absolute\" }}\r\n            />\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">2 {renderHTML(`<i>${currency}</i>`)}</span>\r\n              <FormControl\r\n                value={lay[12].value}\r\n                onFocus={() => {\r\n                  setSelected(12);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => {\r\n                  onChangeInput({ e, index: 12 });\r\n                }}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[12].value * lay[12].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">1 {renderHTML(`<i>${currency}</i>`)}</span>\r\n              <FormControl\r\n                onFocus={() => {\r\n                  setSelected(5);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                value={lay[5].value}\r\n                onChange={(e) => onChangeInput({ e, index: 5 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[5].value * lay[5].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                0.5 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[4].value}\r\n                onFocus={() => {\r\n                  setSelected(4);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 4 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[4].value * lay[4].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                0.2 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[13].value}\r\n                onFocus={() => {\r\n                  setSelected(13);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 13 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[13].value * lay[13].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                0.1 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[14].value}\r\n                onFocus={() => {\r\n                  setSelected(14);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 14 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[14].value * lay[14].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n\r\n            <Keyboard\r\n              theme={\"hg-theme-default hg-layout-default myTheme2\"}\r\n              display={{\r\n                \"{bksp}\": \"EFFACER\",\r\n              }}\r\n              buttonTheme={[\r\n                {\r\n                  class: \"key_btn2\",\r\n                  buttons: \"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}\",\r\n                },\r\n                {\r\n                  class: \"hg-highlight\",\r\n                  buttons: \"Q q\",\r\n                },\r\n              ]}\r\n              keyboardRef={(r) => (keyboard.current = r)}\r\n              layoutName={\"default\"}\r\n              layout={{\r\n                default: myLayout,\r\n              }}\r\n              onChange={onChange}\r\n              onKeyPress={onKeyPress}\r\n            />\r\n          </div>\r\n          <div className=\"billet\">\r\n            <img\r\n              src={billet}\r\n              width={64}\r\n              height={64}\r\n              style={{ position: \"absolute\" }}\r\n            />\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                200 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[11].value}\r\n                onFocus={() => {\r\n                  setSelected(11);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 11 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[11].value * lay[11].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                100 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[10].value}\r\n                onFocus={() => {\r\n                  setSelected(10);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 10 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[10].value * lay[10].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                50 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[9].value}\r\n                onFocus={() => {\r\n                  setSelected(9);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 9 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[9].value * lay[9].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                20 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[8].value}\r\n                onFocus={() => {\r\n                  setSelected(8);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 8 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[8].value * lay[8].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                10 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[7].value}\r\n                onFocus={() => {\r\n                  setSelected(7);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 7 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[7].value * lay[7].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">5 {renderHTML(`<i>${currency}</i>`)}</span>\r\n              <FormControl\r\n                value={lay[6].value}\r\n                onFocus={() => {\r\n                  setSelected(6);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 6 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[6].value * lay[6].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"caisse-ovrir-caisse\">\r\n              <h4 className=\"grand-total\">\r\n                <b>\r\n                  Grand Total : <br />\r\n                  <span style={{ display: \"flex\" }}>\r\n                    {calcMontant().toFixed(2)}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </span>\r\n                </b>\r\n              </h4>\r\n              <Button\r\n                onClick={() => handleOpenCaisse()}\r\n                variant=\"warning\"\r\n                className=\"open_btn\"\r\n                size=\"lg\"\r\n              >\r\n                Ouvrir Caisse\r\n              </Button>\r\n              <Button\r\n            \r\n                onClick={() => handleOpenCaisse30()}\r\n                variant=\"warning\"\r\n                className=\"open_btn-30\"\r\n                size=\"lg\"\r\n              >\r\n               Ouvrir avec 30€\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Navbar bg=\"light\" variant=\"light\" fixed=\"bottom\">\r\n        <Container>\r\n          <Navbar.Brand href=\"#home\">\r\n            Tous droits reservées <b>CAISSECONNECT.FR</b> © 2022\r\n          </Navbar.Brand>\r\n          <Nav className=\"me-auto\">\r\n            <Nav.Link href=\"#home\"></Nav.Link>\r\n          </Nav>\r\n        </Container>\r\n      </Navbar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Caisse;\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n  Table,\r\n  Col,\r\n} from \"react-bootstrap\";\r\nimport {\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCheckSquare,\r\n  faEdit,\r\n  faSignOutAlt,\r\n  faSearch,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport useTranslation from \"./../i18\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport cc from \"./../Shared/cc.png\";\r\nimport delivery from \"./../Shared/delivery.png\";\r\nimport takeout from \"./../Shared/takeout.png\";\r\nimport cash from \"./../Shared/cash.jpg\";\r\nimport surplace from \"./../Shared/surplace.png\";\r\nimport $ from \"jquery\";\r\nimport axios from \"axios\";\r\nimport { storeCoupon } from \"../Slices/data\";\r\n\r\nconst History = () => {\r\n const   chej=[];\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const caisse_id = localStorage.getItem(\"caisse_id\");\r\n  const coupons = useSelector((state) => state.data.coupons);\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const [editClient, setEditClient] = useState({});\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [ping, setping] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const { id } = params;\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n\r\n  \r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getcoupons\",\r\n        {\r\n          user_id:user_id,\r\n          caisse_id:caisse_id,\r\n        \r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeCoupon( {coupons:res.data} ));\r\n      });\r\n\r\n  }, []);\r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\").replace(/;/g, '').replace(/&/g, '');\r\n  \r\n  const table = ({ e }) => {\r\n    console.log(e);\r\n    return tables.find((table) => table.id == e);\r\n  };\r\n\r\n  return (\r\n    <div className=\"navbar\">\r\n      <Navbar\r\n        style={{  height: \"60px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"caiss-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"log-out\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"client-server-icon\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n          <div className=\"client-search\">\r\n            <label>\r\n              <FontAwesomeIcon icon={faSearch} />\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Chercher...\"\r\n              onChange={(e) => setSearch(e.target.value)}\r\n            />\r\n          </div>\r\n        </Container>\r\n      </Navbar>\r\n      <Container style={{ backgroundColor: \"white\" }} fluid>\r\n        <Table hover className=\"ttt\">\r\n          <thead className=\"tbds\">\r\n            {id ? (\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Type</th>\r\n                <th>Table</th>\r\n                <th>date</th>\r\n                <th>order</th>\r\n                <th>Prix</th>\r\n                <th>Paiement </th>\r\n              </tr>\r\n            ) : (\r\n              <tr>\r\n                <th>id</th>\r\n                <th>Avoir</th>\r\n                <th>Crée dans</th>\r\n                <th>Expirée dans</th>\r\n              </tr>\r\n            )}\r\n          </thead>\r\n          <tbody className=\"scro\">\r\n            {coupons.map((coupon,key)=>(\r\n                <tr>\r\n                <td >\r\n                  {coupon.id}\r\n                </td>\r\n                <td>{coupon.discount||\"N/A\"}{currency}</td>\r\n                <td>{  coupon.created_at||\"N/A\"}</td>\r\n                <td>{ coupon.expires_at||\"N/A\"}</td>\r\n              </tr>\r\n            ))}\r\n                    \r\n                  \r\n          </tbody>\r\n        </Table>\r\n      </Container>\r\n      <Modal show={showEdit} onHide={() => setShowEdit(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Client</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div>\r\n            <Form auto>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.nom_prenom}\r\n                      type=\"text\"\r\n                      placeholder=\"nom/prenom\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          nom_prenom: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    {editClient.telephone?.length > 0 &&\r\n                    editClient.telephone?.length < 10 ? (\r\n                      <Badge bg=\"danger\">\r\n                        Numero pas valide (10 chiffres obligatoire)\r\n                      </Badge>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    <Form.Control\r\n                      value={editClient.telephone}\r\n                      type=\"tel\"\r\n                      placeholder=\"telephone\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          telephone: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.email}\r\n                      type=\"email\"\r\n                      placeholder=\"Email\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, email: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.adresse}\r\n                      as=\"textarea\"\r\n                      type=\"text\"\r\n                      placeholder=\"adresse\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          adresse: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.societe}\r\n                      type=\"text\"\r\n                      placeholder=\"société\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          societe: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.code_1}\r\n                      type=\"text\"\r\n                      placeholder=\"code 1\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, code_1: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.code_2}\r\n                      type=\"text\"\r\n                      placeholder=\"code 2\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, code_2: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n\r\n                  <Col xs=\"6\">\r\n                    <Form.Control\r\n                      value={editClient.ville}\r\n                      type=\"text\"\r\n                      placeholder=\"Ville\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, ville: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.interphone}\r\n                      type=\"text\"\r\n                      placeholder=\"interphone\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          interphone: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.etage}\r\n                      type=\"text\"\r\n                      placeholder=\"etage\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, etage: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col xs=\"6\">\r\n                    <Form.Control\r\n                      value={editClient.code_postal}\r\n                      type=\"postal\"\r\n                      placeholder=\"Code postal\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          code_postal: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n            </Form>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowEdit(false)}>\r\n            Annuler\r\n          </Button>\r\n          <Button\r\n            style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n            variant=\"primary\"\r\n            onClick={() => {\r\n              setShowEdit(false);\r\n      \r\n            }}\r\n          >\r\n            Terminer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <NaviBottom />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nconst TicketZ = ({ data, recap, selectedDate, products, tvas , tvasum}) => {\r\n  let ouvDate = recap?.lastOuverture?.date.substr(0, 10);\r\n  let ouvTime = recap?.lastOuverture?.date.substr(11, 5);\r\n  var curr = new Date();\r\n  let nowTime = curr.toISOString().substr(11, 5);\r\n  let ouverture = ouvDate + \"  \" + ouvTime;\r\n  console.log(recap.today?.tva);\r\n  // var tvasum = 0;\r\n \r\n  // let tvas = _.groupBy(recap.today?.orderItems, function (b) {\r\n  //   return b.tva_perc;\r\n  // });\r\n  // console.log(recap.today?.orderItems);\r\n  // Object.keys(tvas).forEach(\r\n  //   (key) => (tvas[key] = tvas[key].reduce((acc, curr) => acc + curr.tva, 0))\r\n  // );\r\n  // console.log(tvas);\r\n  return (\r\n    <div className=\"ticketz\">\r\n      <div className=\"z-head\">\r\n        <h3>{recap.Restaurant?.name}</h3>\r\n        <h1>Ticket Z</h1>\r\n        <p>{recap.Restaurant?.address}</p>\r\n        <p>Tel : {recap.Restaurant?.telephone}</p>\r\n      </div>\r\n      <div className=\"z-body\">\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Impression :</b>\r\n          </p>\r\n          <p>{selectedDate + \" \" + nowTime}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Ouverture :</b>\r\n          </p>\r\n          <p>{ouverture}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fermeture :</b>\r\n          </p>\r\n          <p>{selectedDate + \" \" + nowTime}</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <h6>\r\n          <b>Commandes :</b> {recap.today?.nbr}\r\n        </h6>\r\n        <h6>\r\n          <b>Clients :</b> {Object.keys(recap.today?.clientGroups || {}).length}\r\n        </h6>\r\n        <h6>\r\n          <b>Ticket moyen :</b>{\" \"}\r\n          {Number(\r\n            (\r\n              (recap.today?.total + recap.today?.tva) /\r\n              recap.today?.nbr\r\n            ).toFixed(2)\r\n          ) || 0}\r\n          €\r\n        </h6>\r\n        <h6>\r\n          <b>Annules :</b>{\" \"}\r\n          {recap.today?.logs?.filter((e) => e.title_log == \"Annulation\")\r\n            .length || 0}\r\n        </h6>\r\n        <p>---------------------------------</p>\r\n        {products?.map((item) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n              <b>{item.quantity + \" X \" + item.name}</b>\r\n            </p>\r\n            <p>{item.totalPrice.toFixed(2)}€</p>\r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys(recap.today?.groups || {}).map((key) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n              <b>{recap.today?.groups[key].length} X </b>\r\n              <b>{key == 1 ? \"Carte Bancaire\" : key == 2 ? \"Espéces\" : key}</b>\r\n            </p>\r\n            <p>\r\n              {recap.today?.groups[key]\r\n                .reduce(\r\n                  (acc, curr) =>\r\n                    acc + (curr.price + (curr.price * curr.tva) / 100),\r\n                  0\r\n                )\r\n                .toFixed(2) + \"€\"}\r\n            </p>\r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys(tvas || {}).map((key) => {\r\n          // tvasum = tvasum + tvas[key];\r\n          return (\r\n            <div className=\"b_el\">\r\n              <p>\r\n                <b>TVA({Number(key).toFixed(2)}%)</b>\r\n              </p>\r\n              <p>{tvas[key].toFixed(2)}€</p>\r\n            </div>\r\n          );\r\n        })}\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total HT</b>\r\n          </p>\r\n          <p>{(recap.today?.total-tvasum).toFixed(2)}€</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total TTC</b>\r\n          </p>\r\n          <p>{(recap.today?.total ).toFixed(2)}€</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse initial</b>\r\n          </p>\r\n          <p>{recap.lastOuverture?.montant.toFixed(2)}€</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse final</b>\r\n          </p>\r\n          <p>\r\n            {(\r\n              recap.lastOuverture?.montant +\r\n              recap.today?.total \r\n             \r\n            ).toFixed(2)}\r\n            €\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketZ;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nconst TicketH = ({ zHistory}) => {\r\n  \r\n \r\n  return (\r\n    <div className=\"ticketz\">\r\n      <div className=\"z-head\">\r\n        <h3>{zHistory.restaurant?.name}</h3>\r\n        <h1>Ticket Z</h1>\r\n        <p>{zHistory.restaurant?.address}</p>\r\n        <p>Tel : {zHistory.restaurant?.telephone}</p>\r\n      </div>\r\n      <div className=\"z-body\">\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Impression :</b>\r\n          </p>\r\n          <p>{zHistory.impression}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Ouverture :</b>\r\n          </p>\r\n          <p>{zHistory.ouverture}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fermeture :</b>\r\n          </p>\r\n          <p>{zHistory.fermeture}</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <h6>\r\n          <b>Commandes :</b> {zHistory.commandes}\r\n        </h6>\r\n        <h6>\r\n          <b>Clients :</b> {zHistory.clients}\r\n        </h6>\r\n        <h6>\r\n          <b>Ticket moyen :</b>{\" \"}\r\n          {zHistory.ticket_moyen}€\r\n         \r\n        </h6>\r\n        <h6>\r\n          <b>Annules :</b>{\" \"}\r\n          {zHistory.cancledOrders.length || 0}\r\n        </h6>\r\n        <p>---------------------------------</p>\r\n        {zHistory.products?.map((item) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n              <b>{item.quantity + \" X \" + item.name}</b>\r\n            </p>\r\n            <p>{item.totalPrice.toFixed(2)}€</p>\r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys(zHistory.pay_method|| {}).map((key) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n            \r\n        {zHistory.pay_method[key]?.qt} {zHistory.pay_method[key]?.name} : {zHistory.pay_method[key]?.prix}\r\n            </p>\r\n            \r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys( zHistory.tvas || {}).map((key) => {\r\n          // tvasum = tvasum + tvas[key];\r\n          return (\r\n            <div className=\"b_el\">\r\n              <p>\r\n                <b>TVA({Number(key).toFixed(2)}%)</b>\r\n              </p>\r\n              <p>{zHistory.tvas[key].toFixed(2)}€</p>\r\n            </div>\r\n          );\r\n        })}\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total HT</b>\r\n          </p>\r\n          <p>{zHistory.ht}€</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total TTC</b>\r\n          </p>\r\n          <p>{zHistory.ttc}€</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse initial</b>\r\n          </p>\r\n          <p>{zHistory.fond_initial}€</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse final</b>\r\n          </p>\r\n          <p>\r\n            {zHistory.fond_final}€\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketH;\r\n","import useTranslation from \"./../i18\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Dropdown from \"react-dropdown\";\r\nimport \"react-dropdown/style.css\";\r\nimport LinkIcon from '@mui/icons-material/Link';\r\nimport {\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n} from \"react-bootstrap\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { faHistory, faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport $ from \"jquery\";\r\nimport { clearData, clearOrders } from \"../Slices/order\";\r\nimport { DataGrid, GridRowsProp, GridColDef } from \"@mui/x-data-grid\";\r\nimport TicketZ from \"../Components/TicketZ\";\r\nimport AnimatedNumber from \"animated-number-react\";\r\nimport _ from \"lodash\";\r\nimport { storeCategories, storeNSteps, storeProducts } from \"../Slices/data\";\r\nimport loading from \"../Shared/loading.gif\";\r\nimport TicketH from \"../Components/TicketH\";\r\n\r\nconst Cloture = () => {\r\n  \r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const user = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\") || \"\";\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const caisse_id = localStorage.getItem(\"caisse_id\");\r\n  const [copySuccess, setCopySuccess] = useState('');\r\n  const textAreaRef = useRef(null);\r\n  const copyToClipBoard = async copyMe => {\r\n    try {\r\n      await navigator.clipboard.writeText(copyMe);\r\n      setCopySuccess('Copied!');\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"success\",\r\n        title: \"lien copiée\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n    } catch (err) {\r\n      setCopySuccess('Failed to copy!');\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"success\",\r\n        title: \"Error\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n    }\r\n  };\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substr(0, 10);\r\n  const options = [date, \"two\", \"three\"];\r\n  const defaultOption = options[0];\r\n\r\n  const [selectedDate, setSelectedDate] = useState(date);\r\n  const initialValue = useSelector((state) => state.caisse.initialValue);\r\n  const products = useSelector((state) => state.data.products);\r\n  const checkoutData = useSelector((state) => state.order.checkoutData);\r\n  let enCours =\r\n    checkoutData?.filter((e) => e.status == \"pending\" && e.date == date)\r\n      ?.length || 0;\r\n  const annules =checkoutData?.filter((e) => e.status == \"rejected\")\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n  const completd = orders?.slice()?.sort((a, b) => b.id - a.id).filter((item) => item.paymentsInDb && item.paymentsInDb.length > 0)\r\n  const [finalValue, setFinalValue] = useState(initialValue);\r\n  const [recap, setrecap] = useState({});\r\n  const [ping, setping] = useState(false);\r\n  const [page, setpage] = useState(1);\r\n  const [data, setdata] = useState({});\r\n  const [zHistory, setzHistory] = useState({});\r\n  const [previewTicket, setPreviewTicket] = useState(false);\r\n  const [previewZ, setPreviewZ] = useState(false);\r\n  const [previewHistory, setPreviewHistory] = useState(false);\r\n  const [history, setHistory] = useState([])\r\n\r\n  let ouvDate = recap?.lastOuverture?.date.substr(0, 10);\r\n  let ouvTime = recap?.lastOuverture?.date.substr(11, 5);\r\n  let nowTime = curr.toISOString().substr(11, 5);\r\n  let ouverture = ouvDate + \"  \" + ouvTime;\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const handleCloseCaisse = () => {\r\n    let pay_method = [];\r\n    let orderTypes={\r\n      surPlace:0,\r\n      livraison:0,\r\n      emporter:0,\r\n      borne:0\r\n    }\r\n    completd.map(e=>{\r\n      if(e.order_type==\"sur place\"){\r\n        return orderTypes.surPlace +=1\r\n      }\r\n      if(e.order_type==\"emporter\"){\r\n        return orderTypes.livraison +=1\r\n      }\r\n      if(e.order_type==\"livraison\"){\r\n        return orderTypes.emporter +=1\r\n      }\r\n      if(e.from_kiosk==1){\r\n        return orderTypes.borne +=1\r\n      }\r\n        \r\n      \r\n    })\r\n   \r\n    for (const key in recap.today?.groups) {\r\n      let elementt = recap.today?.groups[key];\r\n     \r\n      let sum = 0;\r\n\r\n      elementt?.forEach((ticket) => {\r\n        sum = sum + ticket.price + (ticket.price * ticket.tva) / 100;\r\n      });\r\n      pay_method.push({ qt: elementt.length, name: key, prix: sum });\r\n    \r\n    }\r\n  \r\n   let newTva ={\r\n    5.5 : 0,\r\n    10:  0,\r\n    20 :0\r\n   }\r\n   \r\n   for (const key in recap.today?.tvas) {\r\n\r\n    let E = recap.today?.tvas[key];\r\n  for( let j in newTva){\r\n    if(j==key){\r\n     newTva[j]=E\r\n    }\r\n  }\r\n    \r\n    \r\n   }\r\n    let PrintData = {\r\n      restaurant: {\r\n        name: recap.Restaurant.name,\r\n        address: recap.Restaurant.address,\r\n        telephone: recap.Restaurant.telephone,\r\n      },\r\n      cancledOrders:annules,\r\n      ordersType:orderTypes,\r\n      products: recap.today?.orderItems?.map((e) => ({\r\n        ...e,\r\n        totalPrice: e.price * e.quantity,\r\n        name: findProduct({ id: e.item_id }).name,\r\n      })),\r\n      impression: selectedDate + \" \" + nowTime,\r\n      ouverture: ouverture,\r\n      fermeture: selectedDate + \" \" + nowTime,\r\n      commandes: recap.today.nbr,\r\n      logs: recap.today.logs?.filter((e) => e.title_log == \"Annulation\"),\r\n      clients: Object.keys(recap.today?.clientGroups || {}).length,\r\n      ticket_moyen: (\r\n        (recap.today?.total + tvasum) /\r\n        recap.today?.nbr\r\n      ).toFixed(2),\r\n\r\n      pay_method: pay_method,\r\n      tva: newTva,\r\n      ht: recap.today?.total.toFixed(2),\r\n      ttc: (recap.today?.total+tvasum).toFixed(2),\r\n      fond_initial: recap.lastOuverture?.montant.toFixed(2),\r\n      fond_final:\r\n      (\r\n        recap.lastOuverture?.montant +\r\n        recap.today?.total +\r\n        tvasum \r\n      ).toFixed(2)\r\n    };\r\n    let historiquePrint = {\r\n      caisse_id: caisse_id,\r\n      date: Date.now(),\r\n      montant: finalValue,\r\n      type: \"close\",\r\n    };\r\n    if(enCours ==0)\r\n    {\r\n      axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/CloseCaisse\",\r\n        {\r\n          user_id: user_id,\r\n          user: user,\r\n          montant: finalValue,\r\n          historiquePrint,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        \r\n        localStorage.clear();\r\n        dispatch(clearData())\r\n        Swal.fire({\r\n          position: \"center\",\r\n          icon: \"success\",\r\n          title: \"Caisse fermée\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n        axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/historiqueZcaisse\",\r\n          { PrintData, user_id }\r\n        )\r\n        .then((res) => console.log(res.data))\r\n        .catch((err) => console.log(err));\r\n        setTimeout(() => {\r\n          navigate(\"/init\");\r\n        }, 1500);\r\n      });\r\n\r\n  \r\n    }\r\n    \r\n    else if(enCours==1){\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"error\",\r\n        title: `Il ya ${enCours} commande en cours`,\r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }\r\n    else{\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"error\",\r\n        title: `Il ya ${enCours} commandes en cours`,\r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }\r\n \r\n  };\r\n  let findProduct = ({ id }) => {\r\n    return products?.find((el) => el.id == id);\r\n  };\r\nuseEffect(() => {\r\n\r\n  axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/getHistoriqueZcaisse\",\r\n          { user_id }\r\n        )\r\n        .then((res) => setHistory(res.data.allHistorique))\r\n        .catch((err) => console.log(err));\r\n}, [])\r\n\r\n  useEffect(async () => {\r\n \r\n    \r\n    await axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/clotureData\",\r\n        { user_id, caisse_id, TODAY: selectedDate }\r\n      )\r\n      .then((res) => {\r\n     \r\n        setrecap(res.data);\r\n        var bodyFormData = new FormData();\r\n        bodyFormData.append(\"rest_id\", user_id);\r\n        bodyFormData.append(\"page\", page);\r\n        bodyFormData.append(\"date\", selectedDate);\r\n        axios({\r\n          method: \"post\",\r\n          url: \"http://141.94.77.9/menu_premium_v2/index.php/api/order/venteCaisse\",\r\n          data: bodyFormData,\r\n          headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        })\r\n          .then(function (response) {\r\n            console.log(response.data.data.data);\r\n            setdata(response.data);\r\n            \r\n          })\r\n          .catch(function (response) {\r\n            //handle error\r\n            console.log(response);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [ping]);\r\n  const columns = [\r\n    { field: \"id\", headerName: \"#\", width: 50 },\r\n    { field: \"col1\", headerName: \"Nom\", width: 180 },\r\n    { field: \"col2\", headerName: \"Quantités\", width: 150 },\r\n    { field: \"col3\", headerName: \"Prix\", width: 150 },\r\n    { field: \"col4\", headerName: \"Sous-Total\", width: 150 },\r\n  ];\r\n\r\n  let rows = recap.today?.orderItems?.map((e, key) => ({\r\n    id: key,\r\n    col1: findProduct({ id: e.item_id })?.name,\r\n    col2: e.quantity,\r\n    col3: e.price?.toFixed(2) + \"€\",\r\n    col4: (e.price * e.quantity).toFixed(2) + \"€\",\r\n  }));\r\n\r\n  \r\n  // const rows = [\r\n  //   { id: 1, col1: \"Hello\", col2: \"World\" },\r\n  //   { id: 2, col1: \"DataGridPro\", col2: \"is Awesome\" },\r\n  //   { id: 3, col1: \"MUI\", col2: \"is Amazing\" },\r\n  // ];\r\n  var tvasum = 0;\r\n  Object.keys(recap.today?.tvas || {}).map((key) => {\r\n    tvasum = tvasum + recap.today?.tvas[key];\r\n  });\r\n  \r\n  const handlePrint = () => {\r\n    \r\n    let pay_method = [];\r\n    let orderTypes={\r\n      surPlace:0,\r\n      livraison:0,\r\n      emporter:0,\r\n      borne:0\r\n    }\r\n    completd.map(e=>{\r\n      if(e.order_type==\"sur place\"){\r\n        return orderTypes.surPlace +=1\r\n      }\r\n      if(e.order_type==\"emporter\"){\r\n        return orderTypes.livraison +=1\r\n      }\r\n      if(e.order_type==\"livraison\"){\r\n        return orderTypes.emporter +=1\r\n      }\r\n      if(e.from_kiosk==1){\r\n        return orderTypes.borne +=1\r\n      }\r\n        \r\n      \r\n    })\r\n   \r\n    for (const key in recap.today?.groups) {\r\n      let elementt = recap.today?.groups[key];\r\n     \r\n      let sum = 0;\r\n\r\n      elementt?.forEach((ticket) => {\r\n        sum = sum + ticket.price + (ticket.price * ticket.tva) / 100;\r\n      });\r\n      pay_method.push({ qt: elementt.length, name: key, prix: sum });\r\n    \r\n    }\r\n  \r\n   let newTva ={\r\n    5.5 : 0,\r\n    10:  0,\r\n    20 :0\r\n   }\r\n   \r\n   for (const key in recap.today?.tvas) {\r\n\r\n    let E = recap.today?.tvas[key];\r\n  for( let j in newTva){\r\n    if(j==key){\r\n     newTva[j]=E\r\n    }\r\n  }\r\n    \r\n    \r\n   }\r\n   \r\n    let PrintData = {\r\n      restaurant: {\r\n        name: recap.Restaurant.name,\r\n        address: recap.Restaurant.address,\r\n        telephone: recap.Restaurant.telephone,\r\n      },\r\n      cancledOrders:annules,\r\n      ordersType:orderTypes,\r\n      products: recap.today?.orderItems?.map((e) => ({\r\n        ...e,\r\n        totalPrice: e.price * e.quantity,\r\n        name: findProduct({ id: e.item_id }).name,\r\n      })),\r\n      impression: selectedDate + \" \" + nowTime,\r\n      ouverture: ouverture,\r\n      fermeture: selectedDate + \" \" + nowTime,\r\n      commandes: recap.today.nbr,\r\n      logs: recap.today.logs?.filter((e) => e.title_log == \"Annulation\"),\r\n      clients: Object.keys(recap.today?.clientGroups || {}).length,\r\n      ticket_moyen: (\r\n        (recap.today?.total + tvasum) /\r\n        recap.today?.nbr\r\n      ).toFixed(2),\r\n\r\n      pay_method: pay_method,\r\n      tva: newTva,\r\n      ht: recap.today?.total.toFixed(2),\r\n      ttc: (recap.today?.total+tvasum).toFixed(2),\r\n      fond_initial: recap.lastOuverture?.montant.toFixed(2),\r\n      fond_final:\r\n      (\r\n        recap.lastOuverture?.montant +\r\n        recap.today?.total +\r\n        tvasum \r\n      ).toFixed(2)\r\n    };\r\n   \r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printzcaisse\",\r\n        { PrintData, user_id }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n    \r\n  };\r\n  const showZcaisse =(data)=>{\r\n    setPreviewZ(true);\r\n    setzHistory(data)\r\n    console.log(data)\r\n  }\r\n  const handlePrintHistory=(PrintData)=>{\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printzcaisse\",\r\n        { PrintData, user_id }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Navbar\r\n       \r\n        variant=\"warning\"\r\n        className=\"colture_nav\"\r\n      >\r\n        <Container className=\"colture_navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n        <h6 className=\"zcaisse_history\" onClick={()=>setPreviewHistory(true)}>\r\n        <FontAwesomeIcon\r\n             \r\n              size=\"1x\"\r\n              icon={faHistory}\r\n              style={{ marginRight: \"0.5rem\"}}\r\n            />\r\n          Historique\r\n        </h6>\r\n          <Nav className=\"ms-auto\">\r\n            {/* <Dropdown\r\n              options={options}\r\n              value={defaultOption}\r\n              placeholder=\"Select an option\"\r\n            /> */}\r\n            <Nav.Link> </Nav.Link>\r\n            <Nav.Link\r\n              onClick={() => {\r\n                navigate(\"/main\");\r\n                dispatch(clearOrders());\r\n              }}\r\n            >\r\n              <img\r\n                width=\"45px\"\r\n                src={tableIcon}\r\n                className=\"colture-table-icon\"\r\n              />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"cloture-server\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              className=\"cloture_server_img\"\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      {recap.today ? (\r\n        <div\r\n          style={{\r\n            padding: \"1rem\",\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n            height: \"93vh\",\r\n            overflow: \"hidden\",\r\n            paddingTop: \"1rem\",\r\n            backgroundColor: \"white\",\r\n          }}\r\n        >\r\n          <div style={{ width: \"30%\", height: \"100vh\" }}>\r\n            {/* <h6>{t(\"closureHistory\")}</h6>\r\n          <p>{t(\"selectDate\")}</p>\r\n          <input\r\n            type=\"date\"\r\n            defaultValue={date}\r\n            onChange={(e) => {\r\n              setSelectedDate(e.target.value);\r\n              setping(!ping);\r\n            }}\r\n          /> */}\r\n\r\n            <TicketZ\r\n           \r\n              tvas={recap.today?.tvas}\r\n              products={recap.today?.orderItems?.map((e) => ({\r\n                ...e,\r\n                totalPrice: e.price * e.quantity,\r\n                name: findProduct({ id: e.item_id })?.name,\r\n              }))}\r\n              data={data}\r\n              recap={recap}\r\n              selectedDate={selectedDate}\r\n              tvasum ={tvasum}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              width: \"70%\",\r\n              height: \"100vh\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.commandesTotal}\r\n                      formatValue={(value) => value.toFixed(0)}\r\n                    />\r\n                  </b>\r\n                </h1>\r\n                <h5>Total des commandes</h5>\r\n              </div>\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.today?.clients}\r\n                      formatValue={(value) => value.toFixed(0)}\r\n                    />\r\n                  </b>\r\n                </h1>\r\n                <h5>Clients total</h5>\r\n              </div>\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.chiffre}\r\n                      formatValue={(value) => value.toFixed(2)}\r\n                    />{\" \"}\r\n                    <br />€\r\n                  </b>\r\n                </h1>\r\n                <h5>Chiffre d'affaire</h5>\r\n              </div>\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.chiffre / recap.commandesTotal}\r\n                      formatValue={(value) => value.toFixed(2)}\r\n                    />\r\n                    <br />€\r\n                  </b>\r\n                </h1>\r\n                <h5>Panier moyen</h5>\r\n              </div>\r\n            </div>\r\n            <div style={{ width: \"100%\", height: \"300px\", marginTop: \"1rem\" }}>\r\n              <DataGrid\r\n                className=\"colture-datagrid\"\r\n                loading={rows?.length == 0}\r\n                pageSize={10}\r\n                paginationMode=\"client\"\r\n                onPageChange={(e) => {\r\n                  setpage(e + 1);\r\n                }}\r\n                rowCount={data?.data?.total}\r\n                rows={rows == undefined ? [] : rows}\r\n                columns={columns}\r\n              />\r\n              <div className=\"colture_buttons\">\r\n                <div\r\n                  style={{\r\n                    width: \"100%\",\r\n                    marginTop: \"1rem\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                  }}\r\n                >\r\n                  <Button\r\n                    className=\"colture_buton\"\r\n                    onClick={() => handlePrint()}\r\n                    style={{ marginRight: \"1rem\" }}\r\n                    variant=\"outline-info\"\r\n                  >{`${t(\"print\")} X ${t(\"ofCashier\")}`}</Button>\r\n                  <Button\r\n                    className=\"colture_buton\"\r\n                    variant=\"outline-danger\"\r\n                    onClick={() => setPreviewTicket(!previewTicket)}\r\n                  >\r\n                    Visualiser Ticket\r\n                  </Button>\r\n                </div>\r\n\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                    marginTop: \"1rem\",\r\n                    height: \"100px\",\r\n                  }}\r\n                >\r\n                  <h3\r\n                    style={{\r\n                      color: \"#ff6b6b\",\r\n                      fontWeight: \"bold\",\r\n                      marginRight: \"1rem\",\r\n                      width: \"max-content\",\r\n                    }}\r\n                  >\r\n                    {(\r\n                      recap.lastOuverture?.montant +\r\n                      recap.today?.total +\r\n                      tvasum\r\n                    ).toFixed(2) + \" €\"}\r\n                  </h3>\r\n                  <Button\r\n                    variant=\"danger\"\r\n                    className=\"clot_btn \"\r\n                    onClick={() => handleCloseCaisse()}\r\n                  >\r\n                    {t(\"close\")}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"loading-z-caisse\">\r\n          <h1>Chargement de caisse...</h1>\r\n          <img src={loading} alt=\"loading\" />\r\n        </div>\r\n      )}\r\n\r\n      <Modal show={previewTicket} onHide={() => setPreviewTicket(false)}>\r\n        <Modal.Header closeButton></Modal.Header>;\r\n        <Modal.Body>\r\n          <div className=\"z-cais_show_ticket\">\r\n            <TicketZ\r\n              products={recap.today?.orderItems?.map((e) => ({\r\n                ...e,\r\n                totalPrice: e.price * e.quantity,\r\n                name: findProduct({ id: e.item_id })?.name,\r\n              }))}\r\n              data={data}\r\n              recap={recap}\r\n              selectedDate={selectedDate}\r\n              tvasum ={tvasum}\r\n            />\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setPreviewTicket(false)}>\r\n            Fermer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <Modal show={previewHistory} onHide={() => setPreviewHistory(false)}>\r\n        <Modal.Header closeButton>\r\n          <h4>Historique Z-Caisse</h4>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"z-cais_history\">\r\n            {history.length==0? \"Il n'y a pas d'historique encore ... \":  history.map((el,key)=>(\r\n              <div key={key} className='z-history'>\r\n                <h6> Du {el.data.ouverture}  au {el.data.fermeture}</h6>\r\n                <div>\r\n                <Button variant=\"info\" onClick={() => handlePrintHistory(el.data)}>\r\n            Imprimer\r\n          </Button>\r\n          <Button variant=\"success\" onClick={() => showZcaisse(el.data)} style={{marginLeft:\"1rem\"}} >\r\n            Afficher\r\n          </Button>\r\n         \r\n                </div>\r\n        \r\n\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div>\r\n          <Button variant=\"success\" onClick={() => navigate('/data/zcaisse')} >\r\n           Zcaisse\r\n          </Button>         \r\n          </div>\r\n        \r\n          <Button variant=\"secondary\" onClick={() => setPreviewHistory(false)}>\r\n            Fermer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <Modal show={previewZ} onHide={() => setPreviewZ(false)}>\r\n        <Modal.Header closeButton></Modal.Header>;\r\n        <Modal.Body>\r\n          <div className=\"z-cais_show_ticket\">\r\n            <TicketH zHistory={zHistory} />\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setPreviewZ(false)}>\r\n            Fermer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cloture;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport mimic from \"./../mimic.json\";\r\nimport \"./testStyle.css\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nconst Test = () => {\r\n  const dataLocal = useSelector((state) => state.data);\r\n\r\n  const [data, setData] = useState({\r\n    products: dataLocal.products,\r\n    categories: dataLocal.categories,\r\n    nsteps: dataLocal.nSteps,\r\n  });\r\n\r\n  console.log(data);\r\n\r\n  const [selectedCategory, setSelectedCategory] = useState(0);\r\n  const [selectedProduct, setselectedProduct] = useState(0);\r\n  const [step, setStep] = useState(0);\r\n\r\n  const handleAddChoice = () => {};\r\n\r\n  const findProductWithId = (id) => {\r\n    return data.products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"cat\", selectedCategory);\r\n    console.log(\"prod\", selectedProduct);\r\n    console.log(\"step\", step);\r\n    console.log(\r\n      data.nsteps.filter((nstep) => nstep.product_id == selectedProduct)[0]\r\n    );\r\n  }, [selectedProduct, selectedCategory, step]);\r\n\r\n  return (\r\n    <div className=\"all\">\r\n      <div className=\"cats\">\r\n        {data.categories\r\n          .filter((cat) => cat.id == 746)\r\n          .map((cat) => (\r\n            <div\r\n              className=\"cat\"\r\n              onClick={() => {\r\n                setSelectedCategory(cat.id);\r\n                setStep(0);\r\n              }}\r\n            >\r\n              <img src={cat.picture} alt=\"\" height=\"70px\" height=\"70px\" />\r\n              <h6>{cat.name}</h6>\r\n            </div>\r\n          ))}\r\n      </div>\r\n      <div className=\"prods\">\r\n        {step == 0\r\n          ? data.products\r\n              .filter((prods) => prods.cat_id == selectedCategory)\r\n              .map((prod) => (\r\n                <div\r\n                  className=\"prod\"\r\n                  onClick={() => {\r\n                    setselectedProduct(prod.id);\r\n                    if (prod.nsteps > step) {\r\n                      setStep(step + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  <img src={prod.image} alt=\"\" height=\"70px\" height=\"70px\" />\r\n                  <h6>\r\n                    {prod.name} <span>- {prod.price} $</span>{\" \"}\r\n                  </h6>\r\n                  <p>{prod.description}</p>\r\n                </div>\r\n              ))\r\n          : data.nsteps\r\n              .filter((nstep) => nstep.menu_id == selectedProduct)[0]\r\n              [step].choice.map((slot) => (\r\n                <div className=\"prod\">\r\n                  <img\r\n                    src={findProductWithId(slot).image}\r\n                    alt=\"\"\r\n                    height=\"70px\"\r\n                    height=\"70px\"\r\n                  />\r\n                  <h6>\r\n                    {findProductWithId(slot).name}{\" \"}\r\n                    <span>- {findProductWithId(slot).price} $</span>{\" \"}\r\n                  </h6>\r\n                  <p>{findProductWithId(slot).description}</p>\r\n                </div>\r\n              ))}\r\n        {findProductWithId(selectedProduct).nsteps >= step && step > 0 ? (\r\n          <Button onClick={() => setStep(step - 1)}>retour</Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {findProductWithId(selectedProduct).nsteps > step && step > 0 ? (\r\n          <Button\r\n            onClick={() => {\r\n              console.log(findProductWithId(selectedProduct));\r\n              if (findProductWithId(selectedProduct).nsteps > step) {\r\n                setStep(step + 1);\r\n              }\r\n            }}\r\n          >\r\n            suivant\r\n          </Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {findProductWithId(selectedProduct).nsteps == step ? (\r\n          <Button>finir</Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <div className=\"cart\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Test;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport QRCode from \"react-qr-code\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router\";\r\nimport aprc from \"./../Shared/aprc.png\";\r\n\r\nconst Ticket = ({ order, thisDate, ping }) => {\r\n  const address = localStorage.getItem(\"address\");\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  \r\n\r\n  const params = useParams();\r\n  const { table_id } = params;\r\n  const telephone = localStorage.getItem(\"telephone\");\r\n  const [toShowOrder, settoShowOrder] = useState(order);\r\n  const ordersData = useSelector((state) => state.order.checkoutData);\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const [isBusy, setIsBusy] = useState(true);\r\n  const [restaurant, setrestaurant] = useState({});\r\n  // let toShowOrder = ordersData.filter((o) => o.order_id == table_id)[0] || {};\r\n\r\n  // useEffect(() => {\r\n  //   if (toShowOrder?.orderItems && toShowOrder?.orderItems.length) {\r\n  //     setIsBusy(false);\r\n  //     console.log(toShowOrder?.orderItems);\r\n  //   }\r\n  // }, [toShowOrder]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\"/api/getRestaurantData\", { user_id })\r\n      .then((res) => {\r\n       \r\n        setrestaurant(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [toShowOrder]);\r\n\r\n  useEffect(() => {\r\n    settoShowOrder(order);\r\n  }, [order]);\r\n\r\n\r\n\r\n  \r\n  \r\n  var groupBy = function (xs, key) {\r\n    return xs.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n\r\n  let tvass = groupBy(toShowOrder?.tvas || [], \"perc\");\r\n\r\n\r\n  const calcOrder = (order) => {\r\n    let price = order.price;\r\n    let tva = order.tva;\r\n    if (order.extras && order.extras.length) {\r\n    \r\n      order.extras.map((extra) => {\r\n     \r\n        price += extra.price * extra.default_quantity;\r\n      });\r\n    }\r\n    if (order.stepItems && order.stepItems != {}) {\r\n      Object.keys(order.stepItems).map((e) => {\r\n        order.stepItems[e].map((item) => {\r\n          price += item.price;\r\n         \r\n        });\r\n      });\r\n    }\r\n    return { price: price * order.qt, tva: (price * order.qt * tva) / 100 };\r\n  };\r\n\r\n  let tva = 0;\r\n  let is_alcool = false;\r\n  let test = order.orderItems;\r\n  order.orderItems?.forEach((element) => {\r\n    if (element.is_alcool == true) {\r\n      is_alcool = true;\r\n    }\r\n  });\r\n  if (is_alcool == true) {\r\n    tva = 20;\r\n  } else {\r\n    let is = order.orderType == undefined ? order.order_type : order.orderType;\r\n    switch (is) {\r\n      case \"sur place\":\r\n        tva = 10;\r\n        break;\r\n      case \"emporter\":\r\n        tva = 5.5;\r\n        break;\r\n      case \"livraison\":\r\n        tva = 5.5;\r\n        break;\r\n      default:\r\n        tva = 10;\r\n        break;\r\n    }\r\n  }\r\n  // let tax = (toShowOrder.taxPrice * calcTotal(toShowOrder?.orderItems)) / 100;\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  // useEffect(() => {\r\n  //   if (order.part > 1) {\r\n  //     let copy = JSON.parse(JSON.stringify(order) || {});\r\n  //     copy = { ...copy };\r\n  //     settoShowOrder(copy);\r\n  //   }\r\n  // }, [ping]);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <div className=\"ticket\">\r\n        <div className=\"ticket_container\">\r\n          <h3 style={{ marginTop: \"0.5rem\" }}>\r\n            <b>Ticket d'encaissement</b>\r\n          </h3>\r\n          <p>\r\n            {restaurant.name} <br />\r\n            {address || \"\" + \"-\" + telephone || \"\"} <br />\r\n            tel: {restaurant.telephone}\r\n          </p>\r\n          <h1>\r\n            <b style={{ fontSize: \"56px\" }}>{toShowOrder?.order_id}</b>\r\n          </h1>\r\n          <div className=\"ticket_item\" style={{ flexWrap: \"wrap\" }}>\r\n            <p>Client :{toShowOrder.customer_name}</p>\r\n            <p>Type :{toShowOrder.orderType}</p>\r\n            <p>Numero :{toShowOrder.customer_tel}</p>\r\n            <p>Adresse:{toShowOrder.customer_adress}</p>\r\n          </div>\r\n          <span style={{ marginBottom: \"0.5rem\" }}>\r\n            -------------------------------------\r\n          </span>\r\n          {toShowOrder.orderItems &&\r\n            toShowOrder.orderItems.map((item, key) => (\r\n              <>\r\n                <div className=\"ticket_item\">\r\n                  <p>{key + 1 + \"-\" + item?.name}</p>\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      width: \"30%\",\r\n                      justifyContent: \"space-evenly\",\r\n                    }}\r\n                  >\r\n                    <p>\r\n                      {item?.qt == undefined ? item.quantity : item.qt + \"x\"}\r\n                    </p>\r\n                    <p>\r\n                      {`  ${item?.price.toFixed(2)} `}{\" \"}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                {item.stepItems && Object.keys(item.stepItems).length ? (\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                    }}\r\n                    className=\"step_item\"\r\n                  >\r\n                    {Object.keys(item.stepItems).map((key) =>\r\n                      item.stepItems[key].map((el) => (\r\n                        <span style={{ textAlign: \"start\", color: \"grey\" }}>\r\n                          -{el.name}\r\n                        </span>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n                ) :item?.steps != []? (\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                    }}\r\n                    className=\"step_item\"\r\n                  >\r\n                    {\r\n                      item.steps?.map((el) => (\r\n                        <span style={{ textAlign: \"start\", color: \"grey\" }}>\r\n                          -{el.name}\r\n                        </span>\r\n                      ))\r\n                    }\r\n                  </div>\r\n                ): (\r\n                  \"\"\r\n                )}\r\n                {item?.extras != []\r\n                  ? item?.extras?.map((extra) =>\r\n                      extra.default_quantity > 0 ? (\r\n                        <div className=\"ticket_extra\">\r\n                          <p>+ {extra.title}</p>\r\n                          <div\r\n                            style={{\r\n                              display: \"flex\",\r\n                              width: \"30%\",\r\n                              justifyContent: \"space-evenly\",\r\n                            }}\r\n                          >\r\n                            {\" \"}\r\n                            <p>{extra.default_quantity + \"x\"}</p>\r\n                            <p>\r\n                              {`  ${extra.price.toFixed(2)} `}\r\n                              {renderHTML(`<i>${currency}</i>`)}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        \"\"\r\n                      )\r\n                    )\r\n                  : \"\"}\r\n              </>\r\n            ))}\r\n          <span style={{ marginBottom: \"0.5rem\" }}>\r\n            -------------------------------------\r\n          </span>\r\n          <div className=\"ticket_item ticket_last\">\r\n            <p>Total HT : </p>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"20%\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <p>\r\n                {(toShowOrder?.totalPrice /(1+tva/100)).toFixed(2)} {renderHTML(`<i>${currency}</i>`)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          {/* {Object.keys(tvass).map((key) => (\r\n            <div className=\"ticket_item ticket_last\">\r\n              <p>TVA({key}%):</p>\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"20%\",\r\n                  justifyContent: \"space-evenly\",\r\n                }}\r\n              >\r\n                <p>\r\n                  {tvass[key].reduce((a, b) => a + b).toFixed(2)}{\" \"}\r\n                  {renderHTML(`<i>${currency}</i>`)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ))} */}\r\n          {\r\n            (\r\n            (\r\n              <div className=\"ticket_item ticket_last\">\r\n                <p>\r\n                  TVA(\r\n                  {tva}\r\n                  %):\r\n                </p>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"20%\",\r\n                    justifyContent: \"space-evenly\",\r\n                  }}\r\n                >\r\n                  <p>\r\n                    {((toShowOrder?.totalPrice /(1+tva/100))*tva/100).toFixed(2)}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))\r\n          }\r\n          {/* <div className=\"ticket_item ticket_last\">\r\n            <p>\r\n              TVA({(toShowOrder?.taxPrice / toShowOrder?.totalPrice) * 100}%):\r\n            </p>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"20%\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <p>\r\n                {toShowOrder?.taxPrice.toFixed(2)}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </p>\r\n            </div>\r\n          </div> */}\r\n          <div className=\"ticket_item ticket_last\">\r\n            <p>Total TTC : </p>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"20%\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <p>\r\n                {\r\n                  toShowOrder?.totalPrice \r\n                }\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          {toShowOrder.paymentsInDb?.length > 0 && (\r\n            <>\r\n              <span style={{ marginBottom: \"0.5rem\" }}>\r\n                -------------------------------------\r\n              </span>\r\n              {toShowOrder.paymentsInDb?.map((one) => (\r\n                <div className=\"ticket_item ticket_last\">\r\n                  <p>Payé({one.pay_method})</p>\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      width: \"20%\",\r\n                      justifyContent: \"space-evenly\",\r\n                    }}\r\n                  >\r\n                    <p>\r\n                      {one.amount.toFixed(2)}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              <div className=\"ticket_item ticket_last\">\r\n                {toShowOrder.paymentsInDb?.reduce(\r\n                  (acc, curr) => acc + curr.amount,\r\n                  0\r\n                ) -\r\n                  (toShowOrder?.totalPrice ) >\r\n                0 ? (\r\n                  <>\r\n                    <p>Rendre monnaie</p>\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        width: \"20%\",\r\n                        justifyContent: \"space-evenly\",\r\n                      }}\r\n                    >\r\n                      <p>\r\n                        {(\r\n                          toShowOrder.paymentsInDb?.reduce(\r\n                            (acc, curr) => acc + curr.amount,\r\n                            0\r\n                          ) -\r\n                          (toShowOrder?.totalPrice )\r\n                        )?.toFixed(2)}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </p>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <p>Reste a payer</p>\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        width: \"20%\",\r\n                        justifyContent: \"space-evenly\",\r\n                      }}\r\n                    >\r\n                      <p>\r\n                        {Math.abs(\r\n                          (\r\n                            toShowOrder.paymentsInDb?.reduce(\r\n                              (acc, curr) => acc + curr.amount,\r\n                              0\r\n                            ) -\r\n                            toShowOrder?.totalPrice \r\n                              \r\n                          ).toFixed(2)\r\n                        )}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </p>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n          <p>\r\n            <b>\r\n              {toShowOrder?.part && toShowOrder?.type == \"partager\" ? (\r\n                <p style={{ display: \"flex\" }}>\r\n                  {`Votre part pour 1/${toShowOrder?.part} personnes est : ${\r\n                    (toShowOrder?.totalPrice /toShowOrder.part\r\n                  ).toFixed(2)}\r\n              `}\r\n                  {renderHTML(`<i>${currency}</i>`)}\r\n                </p>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </b>\r\n          </p>\r\n          <p>{thisDate}</p>\r\n          {/* <QRCode\r\n            value={toShowOrder?.order_id?.toString() || \"000\"}\r\n            size={100}\r\n          /> */}\r\n          <img\r\n            src={`https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=${toShowOrder?.order_id}&choe=UTF-8+`}\r\n            width=\"40%\"\r\n          />\r\n          <p>Scanner le numero de Commande {toShowOrder?.order_id}</p>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Ticket;\r\n","export default __webpack_public_path__ + \"static/media/aprc.fc75241f.png\";","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Offcanvas,\r\n  Row,\r\n  Spinner,\r\n  Table,\r\n} from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router\";\r\n\r\nimport {\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faBorderAll,\r\n  faBorderNone,\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCircle,\r\n  faEdit,\r\n  faHistory,\r\n  faMapMarkedAlt,\r\n  faMapMarkerAlt,\r\n  faPhone,\r\n  faSignOutAlt,\r\n  faTimes,\r\n  faTimesCircle,\r\n  faUsers,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport Ticket from \"../Components/Ticket\";\r\nimport { handle } from \"express/lib/application\";\r\nimport useTranslation from \"./../i18\";\r\nimport { useNavigate } from \"react-router\";\r\nimport {\r\n  clearOrders,\r\n  deletecheckoutData,\r\n  initClient,\r\n  setCheckoutChange,\r\n  setNbrCouverts,\r\n  setPartNotPaid,\r\n} from \"../Slices/order\";\r\nimport io from \"socket.io-client\";\r\nimport axios from \"axios\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport Bat from \"../Components/Bat\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport $ from \"jquery\";\r\nimport Swal from \"sweetalert2\";\r\nimport { Typeahead } from \"react-bootstrap-typeahead\";\r\nimport { setPing } from \"../Slices/data\";\r\n\r\n\r\nconst Checkout = () => {\r\n  var curr = new Date();\r\n  var time = curr.getHours() + \":\" + curr.getMinutes();\r\n  var date = curr.toISOString().substr(0, 10);\r\n  const [idz, setidz] = useState(0)\r\n  const [clientone, setclientone] = useState({\r\n    prenom: \"\",\r\n    company: \"\",\r\n    code1: \"\",\r\n    code2: \"\",\r\n    etage: \"\",\r\n    interphone: \"\",\r\n    name: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    post: \"\",\r\n    city: \"\",\r\n    message: \"\",\r\n    email: \"\",\r\n    type: \"emporter\",\r\n    nbrCouverts: 1,\r\n    date: date,\r\n    time: time,\r\n    id:0\r\n  });\r\n  const checkOutData = useSelector((state) => state.order.checkoutData || []);\r\n  const [isavoir, setisavoir] = useState(false)\r\n  const [showform, setshowform] = useState(false)\r\n  const [load, setLoad] = useState(false)\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const params = useParams();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { table_id } = params;\r\n\r\n  const user = localStorage.getItem(\"username\");\r\n  console.log(params);\r\n  const ordersData = useSelector((state) => state.order.checkoutData);\r\n  const selectedTable = useSelector((state) => state.order.selectedTable);\r\n  const client = useSelector((state) => state.order.client);\r\n  const ping = useSelector((state) => state.data.ping);\r\n  const clients = useSelector((state) => state.data.clients);\r\n  console.log(ordersData);\r\n  let thisOrder = ordersData.filter((o) => o.order_id == table_id)[0] || {};\r\n  \r\n  console.log(thisOrder);\r\n  if (thisOrder.totalPrice == undefined) {\r\n    thisOrder = {\r\n      ...thisOrder,\r\n      totalPrice: thisOrder.price,\r\n      tvas:[{perc:thisOrder.tva}]\r\n    };\r\n  }\r\n  let orderDate = new Date(\r\n    thisOrder.Date == undefined ? thisOrder.date : thisOrder.Date\r\n  );\r\n  var curr_date = orderDate?.getDate();\r\n  var curr_month = orderDate?.getMonth();\r\n  var curr_year = orderDate?.getFullYear();\r\n  var curr_hour = orderDate?.getHours();\r\n  var curr_min = orderDate?.getMinutes();\r\n  \r\n    \r\n  const [show, setShow] = useState(false);\r\n  const [showtwo, setshowtwo] = useState(false)\r\n  const [old, setOld] = useState(false);\r\n  const [showHistoryButton, setshowHistoryButton] = useState(false);\r\n  const [showPay, setShowPay] = useState(false);\r\n  const [accompte, setAccompte] = useState(false);\r\n  const [part, setPart] = useState(1);\r\n  const [typeRepart, settypeRepart] = useState(\"partager\");\r\n  const [paymentType, setpaymentType] = useState(\"Especes\");\r\n  const [amount, setAmount] = useState(0);\r\n  const [amountPaid, setamountPaid] = useState(0);\r\n  const [note, setNote] = useState(\"\");\r\n  const [notefrais, setnotefrais] = useState(false);\r\n  const [input, setInput] = useState(\"\");\r\n  const [nbrCouverts, setNbrCouverts] = useState(1);\r\n  const [selected, setSelected] = useState(\"pay\");\r\n  const [acompte, setAcompte] = useState(false);\r\n  const [coupon, setCoupon] = useState(\"\");\r\n  const [payments, setpayments] = useState([]);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  \r\n\r\n  const handleAnnuler = () => {\r\n    Swal.fire({\r\n      title: \"Motif d'annulation \",\r\n      showDenyButton: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Aucun\",\r\n      denyButtonText: `Impayé`,\r\n      cancelButtonText: \"Fermer\",\r\n    }).then((result) => {\r\n    \r\n\r\n      /* Read more about isConfirmed, isDenied below */\r\n      if (result.isConfirmed) {\r\n      \r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: thisOrder,\r\n            }\r\n          ).then(()=>dispatch(setPing(!ping)));\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...thisOrder\r\n\r\n            },\r\n          });\r\n\r\n          dispatch(setCheckoutChange({order:{...this,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Aucun\"} }));\r\n      \r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"Aucun\",\r\n            title: \"Annulation\",\r\n            content: \"Annulation de commande par le serveur\",\r\n          }\r\n        );\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Annulé (Aucun)\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n\r\n        dispatch(clearOrders());\r\n        navigate(\"/main\");\r\n      } else if (result.isDenied) {\r\n    \r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: thisOrder,\r\n            }\r\n          ).then(()=>dispatch(setPing(!ping)));\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...thisOrder\r\n\r\n            },\r\n          });\r\n\r\n\r\n          dispatch(setCheckoutChange({order:{...thisOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Impayé\"} }));\r\n        \r\n      \r\n\r\n\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"Impayé\",\r\n            title: \"Annulation\",\r\n            content: \"Annulation de commande par le serveur\",\r\n          }\r\n        );\r\n\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Annulé (Impayé)\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n        dispatch(clearOrders());\r\n        navigate(\"/main\");\r\n      }\r\n    });\r\n  };\r\n const handlefinal=(id)=>{\r\n \r\n  setisavoir(true)\r\n  thisOrder={...thisOrder,client_id:id,customer_name:clientone.name,customer_tel:client.phone}\r\n    axios\r\n    .post(\r\n      process.env.REACT_APP_API_HOST +\r\n        \":\" +\r\n        process.env.REACT_APP_API_PORT +\r\n        \"/api/finalizeorder\",\r\n      {\r\n        order: {\r\n          ...thisOrder,\r\n          nbrCouverts: nbrCouverts,\r\n          message: note,\r\n          pay_method: paymentType,\r\n          amount: amount,\r\n          amountPaid: amountPaid,\r\n        },\r\n      }\r\n    )\r\n    .then((res) => {\r\n      console.log(res.data);\r\n         \r\n      console.log(amount);\r\n      console.log(amountPaid);\r\n      setpayments([...payments, { type: paymentType, value: amount }]);\r\n      let paid = [\"Glovo\", \"Just-Eat\", \"Deliveroo\", \"Uber Eats\",\"ticket restaurant\"].includes(\r\n        paymentType\r\n      );\r\n      setTimeout(() => {\r\n        if (\r\n          amountPaid + amount >=\r\n          (\r\n            thisOrder?.totalPrice \r\n            \r\n          ).toFixed(2)\r\n        ) \r\n          handleExit();\r\n        \r\n      }, 1);\r\n      setAmount(0);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n  }\r\n  const handleCreate = () => {\r\n     \r\n    if (old == false) {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/createClient\",\r\n          {\r\n            user_id,\r\n            client: {\r\n              etage: clientone.etage || 0,\r\n              interphone: clientone.interphone || 0,\r\n              supprimer: 0,\r\n              societe: clientone.company || \"\",\r\n              nom_prenom: clientone.name || \"\",\r\n              telephone: clientone.phone || \"\",\r\n              adresse: clientone.address || \"\",\r\n              code_postal: clientone.post || 0,\r\n              ville: clientone.city || \"\",\r\n              email: clientone.email || \"\",\r\n              code_1: clientone.code1 || \"\",\r\n              code_2: clientone.code2 || \"\",\r\n          \r\n            },\r\n          }\r\n        )\r\n        .then((res) => {  \r\nhandlefinal(res.data.id);\r\n})\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      dispatch(initClient({ clientone }));  \r\n      handlefinal();   \r\n    }    \r\n  };\r\n  const handleSelection = (x) => {\r\n    setOld(true);\r\n    let selectedClient = clients?.filter(\r\n      (e) =>\r\n        e.nom_prenom?.toLowerCase().includes(x?.toLowerCase()) ||\r\n        e.telephone?.toLowerCase().includes(x?.toLowerCase()) ||\r\n        e.email?.toLowerCase().includes(x?.toLowerCase())\r\n    )[0];\r\n    if (selectedClient) {\r\n      setclientone({\r\n        ...clientone,\r\n        id: selectedClient.id,\r\n        prenom: selectedClient.nom_prenom,\r\n        company: selectedClient.societe,\r\n        code1: selectedClient.code_1,\r\n        code2: selectedClient.code_2,\r\n        etage: selectedClient.etage,\r\n        interphone: selectedClient.interphone,\r\n        name: selectedClient.nom_prenom,\r\n        phone: selectedClient.telephone,\r\n        address: selectedClient.adresse,\r\n        post: selectedClient.code_postal,\r\n        city: selectedClient.ville,\r\n        email: selectedClient.email,\r\n      });\r\n    }\r\n  };\r\n  var groupBy = function (xs, key) {\r\n    return xs.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n  \r\n  let tvas = 0;\r\n  let is_alcool = false;\r\n  let test = thisOrder.orderItems;\r\n  thisOrder?.orderItems?.forEach((element) => {\r\n    if (element.tva == 20) {\r\n      is_alcool = true;\r\n    }\r\n  });\r\n  if (is_alcool == true) {\r\n    tvas = 20;\r\n  } else {\r\n    switch (\r\n      thisOrder.orderType == undefined\r\n        ? thisOrder.order_type\r\n        : thisOrder.orderType\r\n    ) {\r\n      case \"sur place\":\r\n        tvas = 10;\r\n        break;\r\n      case \"sur place\":\r\n        tvas = 10;\r\n        break;\r\n      case \"emporter\":\r\n        tvas = 5.5;\r\n        break;\r\n      case \"livraison\":\r\n        tvas = 5.5;\r\n        break;\r\n      default:\r\n        tvas = 10;\r\n        break;\r\n    }\r\n  }\r\n  const handleVerifyCoupon = () => {\r\n \r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/verifyCoupon\",\r\n        {\r\n          code: coupon,\r\n          user_id :user_id,\r\n          paidamount:thisOrder?.totalPrice?.toFixed(2)\r\n        }\r\n      )\r\n      .then((res) => {\r\n        let remise = res.data.couponInDb.discount;\r\n   \r\n        let today = new Date().toISOString().slice(0, 10);\r\n        if (res.data.couponInDb.expires_at > today) {\r\n          setAmount(Number(res.data.couponInDb.discount+amount))\r\n          setpaymentType(\"ticket restaurant\")\r\n          Swal.fire({\r\n            icon: \"success\",\r\n            title: `Coupon validé pour ${remise} euro`,\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        \r\n        } else {\r\n          Swal.fire({\r\n            icon: \"warning\",\r\n            title: `Validité epuisé`,\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) =>\r\n        Swal.fire({\r\n          icon: \"warning\",\r\n          title: `Coupon non valide`,\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        })\r\n       \r\n      );\r\n  };\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  let thisDate =\r\n    curr_date +\r\n    \"-\" +\r\n    curr_month +\r\n    \"-\" +\r\n    curr_year +\r\n    \"-\" +\r\n    curr_hour +\r\n    \":\" +\r\n    curr_min;\r\n\r\n  // let tax = (thisOrder.taxPrice * thisOrder.totalPrice) / 100;\r\n  const handleFinal = () => {\r\n    let restAvoir = (amount- (thisOrder?.totalPrice \r\n      )).toFixed(2)\r\n      \r\n    if(restAvoir>0)\r\n    {\r\n      Swal.fire({\r\n        title: \"Comment voulez-vous rendre \"+\"<b style='color:red'>\"+restAvoir+currency+\"</b>\"+\" ?\",\r\n        showDenyButton: true,\r\n        showCancelButton: false,\r\n        confirmButtonText: \"Avoir\",\r\n        denyButtonText: `Rendre monnaies directement`,\r\n      }).then((result) => {\r\n        /* Read more about isConfirmed, isDenied below */\r\n        if (result.isDenied) {\r\n          axios\r\n          .post(\r\n            process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/finalizeorder\",\r\n            {\r\n              order: {\r\n                ...thisOrder,\r\n                nbrCouverts: nbrCouverts,\r\n                message: note,\r\n                pay_method: paymentType,\r\n                amount: amount,\r\n                amountPaid: amountPaid,\r\n              },\r\n            }\r\n          )\r\n          .then((res) => {\r\n            console.log(res.data);\r\n               \r\n            console.log(amount);\r\n            console.log(amountPaid);\r\n            setpayments([...payments, { type: paymentType, value: amount }]);\r\n            let paid = [\"Glovo\", \"Just-Eat\", \"Deliveroo\", \"Uber Eats\",\"ticket restaurant\"].includes(\r\n              paymentType\r\n            );\r\n            setTimeout(() => {\r\n              if (\r\n                amountPaid + amount >=\r\n                (\r\n                  thisOrder?.totalPrice \r\n                  \r\n                ).toFixed(2)\r\n              ) {\r\n                handleExit();\r\n              }\r\n            }, 1);\r\n            setAmount(0);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          })\r\n              \r\n        }\r\n        else if (result.isConfirmed)\r\n        {\r\n          Swal.fire({\r\n            title: \"Client existant ?\",\r\n            showDenyButton: true,\r\n            showCancelButton: false,\r\n            confirmButtonText: \"Oui\",\r\n            denyButtonText: `Non`,\r\n          }).then((reso) => {\r\nif(reso.isDenied)\r\n{\r\n  setisavoir(true)\r\n  setshowform(true)\r\n}\r\nelse if(reso.isConfirmed)\r\n{\r\n  setshowtwo(true)\r\n  setisavoir(true)\r\n  \r\n}\r\n          })\r\n        }\r\n        else if (result.isConfirmed&&thisOrder.customer_tel!=\"\")\r\n\r\n        {\r\n          setisavoir(true)\r\n          setshowform(true)\r\n        }\r\n        else if (result.isConfirmed&&thisOrder.customer_tel==\"\")\r\n        {\r\n          setisavoir(true)\r\n          setshowform(true)\r\n        }\r\n        else if(result.isConfirmed) {\r\n          setisavoir(true)\r\n        }\r\n      })\r\n    }else {\r\n  \r\n      {\r\n        axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/finalizeorder\",\r\n          {\r\n            order: {\r\n              \r\n              ...thisOrder,\r\n              nbrCouverts: nbrCouverts,\r\n              message: note,\r\n              pay_method: paymentType,\r\n              amount: amount,\r\n              amountPaid: amountPaid,\r\n            },\r\n          }\r\n        )\r\n        .then((res) => {\r\n      \r\n          setpayments([...payments, { type: paymentType, value: amount }]);\r\n          let paid = [\"Glovo\", \"Just-Eat\", \"Deliveroo\", \"Uber Eats\",\"ticket restaurant\"].includes(\r\n            paymentType\r\n          );\r\n          setTimeout(() => {\r\n            if (\r\n              amountPaid + amount >=\r\n              (\r\n                thisOrder?.totalPrice \r\n                \r\n                \r\n              ).toFixed(2)\r\n            ) {\r\n              handleExit();\r\n            }\r\n          }, 1);\r\n          setAmount(0);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n      }\r\n    }\r\n    \r\n  };\r\n  const handleAddition = () => {\r\n    dispatch(setPartNotPaid(part))\r\n    handleClose();\r\n    if (part > 1) {\r\n\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/updatehow_paid\",\r\n          {\r\n            type: typeRepart,\r\n            order: thisOrder,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          if (res.data) {\r\n            navigate(`/checkout2/${table_id}/${typeRepart}/${part}`);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } else {\r\n      setShowPay(true);\r\n    }\r\n  };\r\n\r\n  const handleExit = () => {\r\n\r\n    let tva = 0;\r\n    let is_alcool = false;\r\n    let test = thisOrder.orderItems;\r\n    thisOrder.orderItems.forEach((element) => {\r\n      if (element.tva == 20) {\r\n        is_alcool = true;\r\n      }\r\n    });\r\n    if (is_alcool == true) {\r\n      tva = 20;\r\n    } else {\r\n      switch (thisOrder.orderType) {\r\n        case \"sur place\":\r\n          tva = 10;\r\n          break;\r\n        case \"emporter\":\r\n          tva = 5.5;\r\n          break;\r\n        case \"livraison\":\r\n          tva = 5.5;\r\n          break;\r\n        default:\r\n          tva = 10;\r\n          break;\r\n      }\r\n    }\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printFinalOrder\",\r\n        {isavoir,\r\n          user_id: user_id,\r\n          order: {\r\n            ...thisOrder,\r\n            tvas: tva,\r\n            nbrCouverts: nbrCouverts,\r\n            table_number: thisOrder.table || \"\",\r\n            order_id: thisOrder.order_id,\r\n            Date: new Date(),\r\n            amount:\r\n              amount >=\r\n              thisOrder?.totalPrice -\r\n                ((tvas * 100) / thisOrder?.totalPrice).toFixed(2)\r\n                ? (\r\n                    thisOrder?.totalPrice -\r\n                    (tvas * 100) / thisOrder?.totalPrice\r\n                  ).toFixed(2) - amountPaid\r\n                : amount - amountPaid,\r\n            amountPaid: amount,\r\n            paymentType: paymentType,\r\n          },\r\n          type: \"payertout\",\r\n        }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n    if (notefrais == true) {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/printnotefrais\",\r\n          {\r\n            user_id: user_id,\r\n            order: {\r\n              ...thisOrder,\r\n              tvas: tva,\r\n              nbrCouverts: nbrCouverts,\r\n              table_number: thisOrder.table || \"\",\r\n              order_id: thisOrder.order_id,\r\n              Date: new Date(),\r\n              amount:\r\n                amount >=\r\n                thisOrder?.totalPrice \r\n                 \r\n                  ? (\r\n                      thisOrder?.totalPrice \r\n                      \r\n                    ).toFixed(2) - amountPaid\r\n                  : amount - amountPaid,\r\n              amountPaid: amount,\r\n              paymentType: paymentType,\r\n            },\r\n          }\r\n        )\r\n        .then((res) => console.log(res.data))\r\n        .catch((err) => console.log(err));\r\n    }\r\n    let restAvoir = (amountPaid +amount- thisOrder?.totalPrice \r\n      ).toFixed(2)\r\n     \r\n      let amountss = (amountPaid+amount).toFixed(2)\r\n      if (paymentType==\"ticket restaurant\"||isavoir==true)\r\n      {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title:\r\n            \"<h5 >\" +\r\n            `le paiement effectué avec succès avec montant: <span style='color:red'>${amountss}€</span> D'avoir:<span style='color:green'>${restAvoir}€</span> ` +\r\n            \"</h5>\",\r\n          showConfirmButton: false,\r\n          timer: 3000,\r\n        });\r\n        setLoad(false)\r\n        navigate(\"/main\");\r\n        dispatch(deletecheckoutData({ order_id: table_id }));\r\n      }else {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title:\r\n            \"<h5 >\" +\r\n            `le paiement effectué avec succès avec montant: <span style='color:red'>${amountss}€</span> du reste:<span style='color:green'>${restAvoir}€</span> ` +\r\n            \"</h5>\",\r\n          showConfirmButton: false,\r\n          timer: 3000,\r\n        });\r\n        setLoad(false)\r\n        navigate(\"/main\");\r\n        dispatch(deletecheckoutData({ order_id: table_id }));\r\n\r\n      }\r\n      }\r\n   \r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n\r\n  const { t } = useTranslation();\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  //////////////////////CLAVIER///////////////////////////////////////\r\n\r\n  const onChange = (input) => {\r\n    let i = 0;\r\n    for (let index = 0; index < input.length; index++) {\r\n      const element = input[index];\r\n      if (element == \",\") {\r\n        i++;\r\n        if (i >= 2) {\r\n          break;\r\n        }\r\n      } else if (index == 0 && element == \",\") {\r\n        i = 2;\r\n        break;\r\n      }\r\n    }\r\n    function numberFromLocaleString(stringValue, locale) {\r\n      var parts = Number(1111.11)\r\n        .toLocaleString(locale)\r\n        .replace(/\\d+/g, \"\")\r\n        .split(\"\");\r\n      if (stringValue === null) return null;\r\n      if (parts.length == 1) {\r\n        parts.unshift(\"\");\r\n      }\r\n      return Number(\r\n        String(stringValue)\r\n          .replace(new RegExp(parts[0].replace(/\\s/g, \" \"), \"g\"), \"\")\r\n          .replace(parts[1], \".\")\r\n      );\r\n    }\r\n    if (i < 2) {\r\n      setInput(input);\r\n      console.log(\"Input changed\", input);\r\n      if (selected == \"pay\") {\r\n        let v = numberFromLocaleString(input, \"fr\");\r\n        console.log(v);\r\n        setAmount(v);\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    } else {\r\n      setInput(\"\");\r\n      console.log(\"Input changed\", input);\r\n      if (selected == \"pay\") {\r\n        setAmount(0);\r\n        keyboard.current.setInput(\"0\");\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    }\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n    if (button == \"{bksp}\") {\r\n    }\r\n  };\r\n  const keyboard = useRef();\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 , {bksp}\",\r\n  ]);\r\n  const onChangeInput = ({ e, index }) => {\r\n    const input = e.target.value;\r\n    setInput(input);\r\n    keyboard.current.setInput(amount);\r\n    // setTotal(calcMontant());\r\n  };\r\n\r\n  return (\r\n    <div style={{ backgroundColor: \"white\" }}>\r\n      \r\n      <Navbar variant=\"warning\" className=\"navbar\">\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"checkout-cassier\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"chekout-server\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <Container fluid>\r\n        \r\n        <Row className=\"row_h\">\r\n          <Col xs={8} className=\"col_h\">\r\n            <div\r\n              style={{\r\n                marginTop: \"1rem\",\r\n                height: \"max-content\",\r\n                padding: \"1rem\",\r\n                boxShadow: \"rgba(17, 12, 46, 0.15) 0px 48px 100px 0px\",\r\n                overflow: \"auto\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  justifyContent: \"space-between\",\r\n                  display: \"flex\",\r\n                }}\r\n              >\r\n                <div className=\"leftt\">\r\n                  <h6 className=\"checkout-tbd\">\r\n                    <b>Commande</b>\r\n                  </h6>\r\n                  <h6 className=\"checkout-tbd\">\r\n                    <FontAwesomeIcon\r\n                      icon={faUtensils}\r\n                      style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                    />\r\n                    <b>#{thisOrder.order_id}</b>\r\n                  </h6>\r\n                  <h6 className=\"checkout-tbd\">\r\n                    <FontAwesomeIcon\r\n                      icon={faHistory}\r\n                      style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                    />\r\n                    <b>{thisDate}</b>\r\n                  </h6>\r\n                \r\n                  {thisOrder.orderType==\"sur place\"&&  <h6 className=\"checkout-tbd\">\r\n                    <FontAwesomeIcon\r\n                      icon={faUtensils}\r\n                      style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                    />\r\n                    <b>Table {selectedTable.nbr}</b>\r\n                  </h6>}\r\n                </div>\r\n                {Object.keys(clientone).length > 0 ? (\r\n                  <div className=\"rightt\">\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <b>{clientone.name}</b>\r\n                    </h6>\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <FontAwesomeIcon\r\n                        icon={faPhone}\r\n                        style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                      />\r\n                      <b>{clientone.phone}</b>\r\n                    </h6>\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <FontAwesomeIcon\r\n                        icon={faMapMarkerAlt}\r\n                        style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                      />\r\n                      <b>{clientone.address}</b>\r\n                    </h6>\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <FontAwesomeIcon\r\n                        icon={faCircle}\r\n                        style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                      />\r\n                      <b>{thisOrder.orderType}</b>\r\n                    </h6>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n              <Table hover>\r\n                <thead className=\"tbd\">\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>Article</th>\r\n                    <th>Prix</th>\r\n                    <th>Qt</th>\r\n                    <th>Total</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"ccc\">\r\n                  {thisOrder?.orderItems?.map((item, key) => (\r\n                    <tr>\r\n                      <td>{key}</td>\r\n                      <td>\r\n                        {item.name}\r\n                        <br />\r\n\r\n                        {/* {item.extras && item.extras.length\r\n                          ? item.extras.map((extra) => <p>{extra.title}</p>)\r\n                          : \"\"} */}\r\n                      </td>\r\n\r\n                      <td style={{ display: \"flex\" }}>\r\n                        {item.price?.toFixed(2)}{\" \"}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </td>\r\n                      <td>{item.qt}</td>\r\n                      <td style={{ display: \"flex\" }}>\r\n                        {item.price?.toFixed(2)}{\" \"}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </Table>\r\n              <Col xs={3}>\r\n                <Table>\r\n                  <tbody\r\n                    className=\"checkout-tbd\"\r\n                    style={{ width: \"50%\", height: \"auto\", align: \"right\" }}\r\n                  >\r\n                    <tr>\r\n                      <td>\r\n                        <h6\r\n                          className=\"checkout-tbd\"\r\n                          style={{ display: \"flex\", fontWeight: \"bold\" }}\r\n                        >\r\n                          Total HT :\r\n                        </h6>\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          style={{\r\n                            color: \"#ff6b6b\",\r\n                            display: \"flex\",\r\n                            marginLeft: \"0.5rem\",\r\n                            fontWeight: \"bold\",\r\n                          }}\r\n                        >\r\n                          {(thisOrder?.totalPrice/(1+(thisOrder?.tvas[0]?.perc/100))).toFixed(2)}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>\r\n                        <h6\r\n                          className=\"checkout-tbd\"\r\n                          style={{ display: \"flex\", fontWeight: \"bold\" }}\r\n                        >\r\n                          TVA( {tvas}\r\n                          %)\r\n                        </h6>\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          style={{\r\n                            color: \"#ff6b6b\",\r\n                            display: \"flex\",\r\n                            marginLeft: \"0.5rem\",\r\n                            fontWeight: \"bold\",\r\n                          }}\r\n                        >\r\n                          {(thisOrder?.totalPrice/(1+(thisOrder?.tvas[0].perc/100))*thisOrder?.tvas[0].perc/100).toFixed(2)}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>\r\n                        <h6\r\n                          className=\"checkout-tbd\"\r\n                          style={{ display: \"flex\", fontWeight: \"bold\" }}\r\n                        >\r\n                          TOTAL TTC :{\" \"}\r\n                        </h6>\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          style={{\r\n                            color: \"#ff6b6b\",\r\n                            display: \"flex\",\r\n                            marginLeft: \"0.5rem\",\r\n                            fontWeight: \"bold\",\r\n                          }}\r\n                        >\r\n                          {\" \"}\r\n                          {(\r\n                            thisOrder?.totalPrice                            \r\n                          )?.toFixed(2)}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </Table>\r\n              </Col>\r\n\r\n              <div className=\"regler-addition-btns\">\r\n                <Button\r\n                  variant=\"outline-info\"\r\n                  onClick={handleShow}\r\n                  className=\"btn_chee\"\r\n                >\r\n                  Régler addition\r\n                </Button>\r\n               {thisOrder?.status!=\"cooking\"&& thisOrder?.status!=\"ready\"?<Button\r\n                  variant=\"outline-info\"\r\n                  onClick={() => navigate(\"/menu/\" + thisOrder?.order_id)}\r\n                  className=\"btn_chee\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faEdit}\r\n                    style={{ marginRight: \"0.5rem\" }}\r\n                  />\r\n                  Modifier la commande\r\n                </Button>:\"\"}\r\n              </div>\r\n            </div>\r\n          </Col>\r\n          <Col xs={4} className=\"col_h\">\r\n            <Ticket order={thisOrder} thisDate={thisDate} />\r\n          </Col>\r\n        </Row>\r\n        <NaviBottom />\r\n        <Modal show={show} onHide={handleClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Addition</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Row>\r\n              <Col xs={4} style={{ borderRight: \"1px solid black\" }}>\r\n                <h5>\r\n                    <FontAwesomeIcon\r\n                      icon={faUsers}\r\n                      style={{ color: \"#ff6b6b\", marginRight: \"0.5rem\" }}\r\n                    />\r\n                  <b>Nombre de parts :</b>\r\n                </h5>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-evenly\",\r\n                    alignItems: \"center\",\r\n                    marginTop: \"15%\",\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    color=\"#ff6b6b\"\r\n                    icon={faAngleLeft}\r\n                    size=\"2x\"\r\n                    onClick={() => {\r\n                      if (part > 1) {\r\n                        setPart(part - 1);\r\n                      }\r\n                    }}\r\n                  />\r\n                  <h3>{part}</h3>\r\n                  <FontAwesomeIcon\r\n                    color=\"#ff6b6b\"\r\n                    icon={faAngleRight}\r\n                    size=\"2x\"\r\n                    onClick={() => {\r\n                      if (part < thisOrder.nbrCouverts) {\r\n                        setPart(part + 1);\r\n                      }\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Col>\r\n              <Col xs={8}>\r\n                <div\r\n                  style={{\r\n                    display: \"block\",\r\n                    width: \"80%\",\r\n                    textAlign: \"center\",\r\n                  }}\r\n                >\r\n                  <h5>Choix de l'addition</h5>\r\n                  <div\r\n                    style={{\r\n                      width: \"100%\",\r\n                      display: \"flex\",\r\n                      justifyContent: \"space-evenly\",\r\n                    }}\r\n                  >\r\n                    <div\r\n                      onClick={() => settypeRepart(\"partager\")}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                      }}\r\n                    >\r\n                      <FontAwesomeIcon\r\n                        icon={faBorderAll}\r\n                        size=\"6x\"\r\n                        color={typeRepart == \"partager\" ? \"#ff6b6b\" : \"grey\"}\r\n                        className=\"faborder\"\r\n                      />\r\n                      <h6>partager</h6>\r\n                    </div>\r\n                    <div\r\n                      onClick={() => settypeRepart(\"repartir\")}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                      }}\r\n                    >\r\n                      <FontAwesomeIcon\r\n                        icon={faBorderNone}\r\n                        size=\"6x\"\r\n                        color={typeRepart == \"repartir\" ? \"#ff6b6b\" : \"grey\"}\r\n                        className=\"faborder\"\r\n                      />\r\n                      <h6>Repartir</h6>\r\n                    </div>\r\n                    <Button\r\n                      variant=\"info\"\r\n                      onClick={() => handleAddition()}\r\n                      className=\"btn_che\"\r\n                      style={{ marginLeft: \"2rem\", backgroundColor: \"#ff6b6b\" }}\r\n                    >\r\n                      <b>Payer tout</b>\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n            ;\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n          <Button variant=\"warning\" onClick={handleAnnuler}>\r\n            {t(\"cancel\")}\r\n          </Button>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n              Fermer\r\n            </Button>\r\n            <Button\r\n              className=\"bgcolor\"\r\n              variant=\"warning\"\r\n              onClick={() => handleAddition()}\r\n            >\r\n              Payer\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n        {/* /////ShowPayModal////// */}\r\n        <Modal show={showPay} onHide={() => setShowPay(false)}>\r\n        {showform?\r\n        <div className=\"trans_client\" >\r\n          \r\n                   <div className=\"client_forms\">\r\n                     \r\n                \r\n                   \r\n                   <Form auto>\r\n                  \r\n                    <Form.Group className=\"mb-3\">\r\n                   \r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={clientone.name}\r\n                            type=\"text\"\r\n                            placeholder=\"nom/prenom\"\r\n                            onChange={(e) =>\r\n                              setclientone({ ...clientone, name: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          {clientone.telephone?.length > 0 &&\r\n                          clientone.telephone?.length < 10 ? (\r\n                            <Badge bg=\"danger\">\r\n                              Numero pas valide (10 chiffres obligatoire)\r\n                            </Badge>\r\n                          ) : (\r\n                            \"\"\r\n                          )}\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setclientone({ ...clientone, phone: e });\r\n                              setOld(false);                       \r\n                            }}\r\n                            onChange={(e) => {\r\n                              handleSelection(e[0]);\r\n                              console.log(e);\r\n                            }}\r\n                            options={clients.map((client) => client.telephone)}\r\n                            placeholder=\"telephone\"\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={clientone.message}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"remarque\"\r\n                            onChange={(e) =>\r\n                              setclientone({\r\n                                ...clientone,\r\n                                message: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={clientone.date}\r\n                            type=\"date\"\r\n                            defaultValue={clientone.date}\r\n                            onChange={(e) =>\r\n                              setclientone({ ...clientone, date: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={clientone.time}\r\n                            type=\"time\"\r\n                            defaultValue={clientone.time}\r\n                            onChange={(e) =>\r\n                              setclientone({ ...clientone, time: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  </Form>  \r\n                  <div className=\"cli_buttons\">\r\n                  <Button onClick={()=>handleCreate()}>\r\n          Valider\r\n        </Button>\r\n        <Button variant=\"danger\"  style={{marginLeft:\"1rem\"}} onClick={()=>setshowform(false)}>\r\n          annuler\r\n        </Button>\r\n                  </div>\r\n      \r\n                   </div>\r\n             \r\n        </div>     \r\n        :\"\"}\r\n         {showtwo?\r\n        <div className=\"trans_client\" >\r\n                   <div className=\"client_forms\">\r\n                   <Form auto>\r\n                   <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          {clientone.telephone?.length > 0 &&\r\n                          clientone.telephone?.length < 10 ? (\r\n                            <Badge bg=\"danger\">\r\n                              Numero pas valide (10 chiffres obligatoire)\r\n                            </Badge>\r\n                          ) : (\r\n                            \"\"\r\n                          )}\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setclientone({ ...clientone, phone: e });\r\n                              setOld(false);                       \r\n                            }}\r\n                            onChange={(e) => {\r\n                              handleSelection(e[0]);\r\n                              console.log(e);\r\n                            }}\r\n                            options={clients.map((client) => client.telephone)}\r\n                            placeholder=\"telephone\"\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={clientone.name}\r\n                            type=\"text\"\r\n                            placeholder=\"nom/prenom\"\r\n                            onChange={(e) =>\r\n                              setclientone({ ...clientone, name: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  \r\n\r\n          \r\n                   \r\n                  </Form>  \r\n        <div className=\"cli_buttons\"><Button onClick={()=>handleCreate()}>\r\n          Valider\r\n        </Button>\r\n        <Button variant=\"danger\"  style={{marginLeft:\"1rem\"}} onClick={()=>setshowtwo(false)}>\r\n          annuler\r\n        </Button></div>\r\n                   </div>\r\n             \r\n        </div>     \r\n        :\"\"}\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>finaliser Commande</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Row>\r\n              <Col xs=\"5\">\r\n                <Form\r\n                  onSubmit={(e) => {\r\n                    e.preventDefault();\r\n                    handleVerifyCoupon();\r\n                  }}\r\n                >\r\n                  <Form.Label>\r\n                    {\" \"}\r\n                    <b>Paiement Reçu</b>{\" \"}\r\n                  </Form.Label>\r\n                  <Form.Control\r\n                    onFocus={(e) => {\r\n                      setSelected(\"pay\");\r\n                      keyboard.current.setInput(\"\");\r\n                    }}\r\n                    placeholder=\"0.00\"\r\n                    value={amountPaid}\r\n                    onChange={(e) => {\r\n                      setAmount(e.target.value);\r\n                    }}\r\n                    readOnly\r\n                  />\r\n                </Form>\r\n                <h6 style={{ marginTop: \"1rem\" }}>\r\n                  {\" \"}\r\n                  <b>Reste à devoir</b>{\" \"}\r\n                </h6>\r\n                <h4 style={{ color: \"red\" }}>\r\n                  <b style={{ display: \"flex\" }}>\r\n                    {\" \"}\r\n                    {(\r\n                      thisOrder?.totalPrice  - amountPaid\r\n                    ).toFixed(2)}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </b>\r\n                </h4>\r\n                <Form\r\n                  onSubmit={(e) => {\r\n                    e.preventDefault();\r\n                    handleVerifyCoupon();\r\n                  }}\r\n                >\r\n                  <Form.Group\r\n                    style={{ marginTop: \"2rem\" }}\r\n                    className=\"mb-3\"\r\n                    controlId=\"exampleForm.ControlTextarea1\"\r\n                  >\r\n                    <Form.Label>\r\n                      {\" \"}\r\n                      <b>Details de paiement</b>{\" \"}\r\n                    </Form.Label>\r\n                    <div style={{ height: \"150px\", overflow: \"auto\" }}>\r\n                      {payments.map((e) => (\r\n                        <div\r\n                          style={{\r\n                            display: \"flex\",\r\n                            justifyContent: \"space-between\",\r\n                          }}\r\n                        >\r\n                          <h5>{e.type}</h5>\r\n                          <h5>{e.value}€</h5>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </Form.Group>\r\n                  <Form.Group\r\n                    style={{ marginTop: \"2rem\" }}\r\n                    className=\"mb-3\"\r\n                    controlId=\"exampleForm.ControlTextarea1\"\r\n                  >\r\n                    <Form.Label>\r\n                      {\" \"}\r\n                      <b>Scanner code remise</b>{\" \"}\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      rows={1}\r\n                      placeholder=\"*11111111111111*\"\r\n                      onChange={(e) => setCoupon(e.target.value)}\r\n                    />\r\n                  </Form.Group>\r\n                </Form>\r\n              </Col>\r\n              <Col xs=\"5\">\r\n                <Form onSubmit={(e) => e.preventDefault()}>\r\n                  <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                    <Form.Label>\r\n                      <b>Addition Total</b>\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      readOnly={true}\r\n                      type=\"number\"\r\n                      placeholder=\"0.00\"\r\n                      value={(\r\n                        thisOrder.totalPrice \r\n                        \r\n                      ).toFixed(2)}\r\n                    />\r\n                  </Form.Group>\r\n                  <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                    <Form.Label>\r\n                      {\" \"}\r\n                      <b>Methode de paiement</b>{\" \"}\r\n                    </Form.Label>\r\n                    <Form.Select\r\n                      aria-label=\"Default select example\"\r\n                      onChange={(e) => setpaymentType(e.target.value)}\r\n                    >\r\n                      <option value=\"espece\">Especes</option>\r\n                      <option value=\"carte bleu\">Carte bleu</option>\r\n                      <option value=\"ticket restaurant\">\r\n                        Ticket restaurant\r\n                      </option>\r\n                      <option value=\"cheque\">Cheque</option>\r\n\r\n                      <option value=\"Glovo\">Glovo</option>\r\n                      <option value=\"Just-Eat\">Just-Eat</option>\r\n                      <option value=\"Deliveroo\">Deliveroo</option>\r\n                      <option value=\"Uber Eats\">Uber Eats</option>\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                </Form>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>\r\n                    <b>Total</b>\r\n                  </Form.Label>\r\n                  <Form.Control\r\n                    type=\"number\"\r\n                    placeholder=\"0.00\"\r\n                    value={amount}\r\n                    onChange={(e) => setAmount(Number(e.target.value))}\r\n                  />\r\n                </Form.Group>\r\n                <Keyboard\r\n                  theme={\"hg-theme-default hg-layout-default myTheme5\"}\r\n                  display={{\r\n                    \"{bksp}\": \"EFFACER\",\r\n                  }}\r\n                  buttonTheme={[\r\n                    {\r\n                      class: \"key_btn3\",\r\n                      buttons: \"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}\",\r\n                    },\r\n                    {\r\n                      class: \"hg-highlight\",\r\n                      buttons: \"Q q\",\r\n                    },\r\n                  ]}\r\n                  keyboardRef={(r) => {\r\n                    console.log(r);\r\n                    keyboard.current = r;\r\n                  }}\r\n                  layoutName={\"default\"}\r\n                  layout={{\r\n                    default: myLayout,\r\n                  }}\r\n                  onChange={onChange}\r\n                  onKeyPress={onKeyPress}\r\n                />\r\n              </Col>\r\n\r\n              <Col xs=\"2\" className=\"show-pay-modal\">\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 0.5);\r\n                    keyboard.current.setInput(String(amount + 0.5));\r\n                  }}\r\n                >\r\n                  0.5 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 1);\r\n                    keyboard.current.setInput(String(amount + 1));\r\n                  }}\r\n                >\r\n                  1 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 2);\r\n                    keyboard.current.setInput(String(amount + 2));\r\n                  }}\r\n                >\r\n                  2 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 5);\r\n                    keyboard.current.setInput(String(amount + 5));\r\n                  }}\r\n                >\r\n                  5 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 10);\r\n                    keyboard.current.setInput(String(amount + 10));\r\n                  }}\r\n                >\r\n                  10 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 20);\r\n                    keyboard.current.setInput(String(amount + 20));\r\n                  }}\r\n                >\r\n                  20 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 50);\r\n                    keyboard.current.setInput(String(amount + 50));\r\n                  }}\r\n                >\r\n                  50 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 100);\r\n                    keyboard.current.setInput(String(amount + 100));\r\n                  }}\r\n                >\r\n                  100 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(( thisOrder?.totalPrice ).toFixed(2) - amountPaid );\r\n                    keyboard.current.setInput(\r\n                      String(\r\n                        thisOrder?.totalPrice -amountPaid\r\n                      )\r\n                    );\r\n                  }}\r\n                >\r\n                  Payer Tout\r\n                </Button>\r\n                <Button\r\n                  variant=\"warning\"\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(0);\r\n                    keyboard.current.setInput(String(0));\r\n                  }}\r\n                >\r\n                  Effacer\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            {notefrais ? (\r\n              <>\r\n                <Form.Label style={{ fontSize: \"24px\", fontWeight: \"bold\" }}>\r\n                  Nbr couverts\r\n                </Form.Label>\r\n                <Form.Control\r\n                  onFocus={(e) => {\r\n                    setSelected(\"couverts\");\r\n                    keyboard.current.setInput(\"\");\r\n                  }}\r\n                  style={{ width: \"120px\" }}\r\n                  placeholder=\"1 Couverts\"\r\n                  type=\"number\"\r\n                  value={nbrCouverts}\r\n                  onChange={(e) => setNbrCouverts(e.target.value)}\r\n                ></Form.Control>\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <Form.Check\r\n              size=\"3x\"\r\n              type=\"checkbox\"\r\n              label=\"Note de frais\"\r\n              style={{\r\n                fontSize: \"24px\",\r\n                marginRight: \"2rem\",\r\n                fontWeight: \"bold\",\r\n              }}\r\n              onClick={() => setnotefrais(!notefrais)}\r\n            />\r\n            <Button variant=\"danger\" onClick={() => setShowPay(false)}>\r\n              {t(\"cancel\")}\r\n            </Button>\r\n            {!accompte&&!load ? (\r\n              <Button\r\n                variant=\"success\"\r\n                onClick={() => {\r\n                  if (amount > 0) {\r\n                    setamountPaid(amountPaid + amount);\r\n                    handleFinal();\r\n                    keyboard.current.setInput(\"\");\r\n                  } else {\r\n                    console.log(\"null\");\r\n                  }\r\n                }}\r\n              >\r\n                Valider\r\n              </Button>\r\n            ) :load?(\r\n              <Button\r\n                variant=\"success\"\r\n              \r\n              \r\n              >\r\n                 <Spinner animation=\"border\" variant=\"light\" />\r\n              </Button>\r\n            )\r\n            : (\r\n              <Button\r\n                variant=\"outline-danger\"\r\n                onClick={() => {\r\n                  setShowPay(false);\r\n                  handleFinal();\r\n                }}\r\n              >\r\n                Accompte\r\n              </Button>\r\n            )}\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useRef, useState, useId } from \"react\";\r\nimport {\r\n  Button,\r\n  Container,\r\n  Form,\r\n  Modal,\r\n  Row,\r\n  Col,\r\n  Nav,\r\n  Navbar,\r\n} from \"react-bootstrap\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navigate, useNavigate, useParams } from \"react-router\";\r\nimport Ticket from \"../Components/Ticket\";\r\nimport { clearOrdersPartage, deletecheckoutData, editordersPartage, setOrderPartage, setPartNotPaid, updateReapartirItems } from \"../Slices/order\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport useTranslation from \"./../i18\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faBorderAll,\r\n  faBorderNone,\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faEdit,\r\n  faHistory,\r\n  faMapMarkedAlt,\r\n  faMapMarkerAlt,\r\n  faPhone,\r\n  faSignOutAlt,\r\n  faTimesCircle,\r\n  faUsers,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport Swal from \"sweetalert2\";\r\nconst CheckoutTwo = () => {\r\n  const [payments, setpayments] = useState([]);\r\n  const username = localStorage.getItem(\"username\") || [];\r\n\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const { type, part, table_id } = params;\r\n  const ordersData = useSelector((state) => state.order.checkoutData);\r\n  const orderesPartage = useSelector((state) => state.order.ordersPartage);\r\n  const partNotPaid = useSelector((state) => state.order.partNotPaid);\r\n  let thisOrder = ordersData.filter((o) => o.order_id == table_id)[0] || {};\r\n  let check=orderesPartage?.map(e=>Number(e.amountPaid)).reduce((a,b)=>a+b,0)>0;\r\n\r\n  const [theseOrders, settheseOrders] = useState([]);\r\n  const [list, setList] = useState([]);\r\n  const [ping, setPing] = useState(true);\r\n  const [show, setShow] = useState(type==\"repartir\"&&!check);\r\n  const [amount, setAmount] = useState(0);\r\n  const [amountPaid, setamountPaid] = useState(0);\r\n  const [note, setNote] = useState(\"\");\r\n  const [paymentType, setpaymentType] = useState(\"espece\");\r\n  const [showPay, setShowPay] = useState(false);\r\n  const [getkeyborad, setkeyborad] = useState(\"\");\r\n  const [input, setInput] = useState(\"\");\r\n  const [selected, setSelected] = useState(\"pay\");\r\n  const [nbrCouverts, setNbrCouverts] = useState(1);\r\n  const [accompte, setAccompte] = useState(false);\r\n  const [oredertopay, setordertopay] = useState({});\r\n  const [orederpartage, P] = useState([]);\r\n  const [orederepartir, setorederepartir] = useState([]);\r\n \r\n\r\n  const [getclient, setclient] = useState(0);\r\n\r\n  const onKeyPress = (button) => {\r\n \r\n    if (button == \"{bksp}\") {\r\n      setkeyborad(getkeyborad.slice(0, -1));\r\n      setAmount(Number(amount.toString().slice(0, -1)));\r\n    }\r\n  };\r\n  const keyboard = useRef();\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 , {bksp}\",\r\n  ]);\r\n  const onChange = (input) => {\r\n   \r\n    let i = 0;\r\n    for (let index = 0; index < input.length; index++) {\r\n      const element = input[index];\r\n      if (element == \",\") {\r\n        i++;\r\n        if (i >= 2) {\r\n          break;\r\n        }\r\n      } else if (index == 0 && element == \",\") {\r\n        i = 2;\r\n        break;\r\n      }\r\n    }\r\n    function numberFromLocaleString(stringValue, locale) {\r\n      var parts = Number(1111.11)\r\n        .toLocaleString(locale)\r\n        .replace(/\\d+/g, \"\")\r\n        .split(\"\");\r\n      if (stringValue === null) return null;\r\n      if (parts.length == 1) {\r\n        parts.unshift(\"\");\r\n      }\r\n      setkeyborad(\r\n        Number(\r\n          String(stringValue)\r\n            .replace(new RegExp(parts[0].replace(/\\s/g, \" \"), \"g\"), \"\")\r\n            .replace(parts[1], \".\")\r\n        ).toString()\r\n      );\r\n      return Number(\r\n        String(stringValue)\r\n          .replace(new RegExp(parts[0].replace(/\\s/g, \" \"), \"g\"), \"\")\r\n          .replace(parts[1], \".\")\r\n      );\r\n    }\r\n    setInput(input);\r\n   \r\n    if (i < 2) {\r\n      setInput(input);\r\n     \r\n      if (selected == \"pay\") {\r\n        let v = numberFromLocaleString(input, \"fr\");\r\n      \r\n        setAmount(v);\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    } else {\r\n      setInput(\"\");\r\n     \r\n      if (selected == \"pay\") {\r\n        setAmount(0);\r\n        keyboard.current.setInput(\"0\");\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    }\r\n  };\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  // let tax = (thisOrder.taxPrice * thisOrder.totalPrice) / 100;\r\n  const partageorder = [];\r\n  let tvas = 0;\r\n  let is_alcool = false;\r\n  let test = thisOrder.orderItems;\r\n  thisOrder.orderItems.forEach((element) => {\r\n    if (element.tva == 20) {\r\n      is_alcool = true;\r\n    }\r\n  });\r\n  if (is_alcool == true) {\r\n    tvas = 20;\r\n  } else {\r\n    switch (thisOrder.orderType) {\r\n      case \"sur place\":\r\n        tvas = 10;\r\n        break;\r\n      case \"emporter\":\r\n        tvas = 5.5;\r\n        break;\r\n      case \"livraison\":\r\n        tvas = 5.5;\r\n        break;\r\n      default:\r\n        tvas = 10;\r\n        break;\r\n    }\r\n  }\r\n  ////jdid////\r\n  \r\n  const handlefinish = ()=>{\r\n    setShow(false)\r\nlet nbr=orderesPartage.filter(e=>e.amount==0).length\r\ndispatch(setPartNotPaid(partNotPaid-nbr))\r\n  }\r\n  useEffect(() => {\r\n  if(type == \"partager\"){\r\n    let partageorder = []\r\n    for (let i = 1; i <= part; i++){\r\n      let ids = Math.floor((1 + Math.random()) * 0x10000)\r\n      partageorder=[...partageorder,{\r\n        ...thisOrder,\r\n        totalPrice: (thisOrder.totalPrice/part).toFixed(2),\r\n        partId : ids,\r\n        amount: (thisOrder.totalPrice/part).toFixed(2),\r\n        amountPaid: 0,\r\n        payments:[]\r\n       }]\r\n   \r\n    }\r\n    if(orderesPartage.length==0){\r\n      dispatch(setOrderPartage(partageorder))\r\n    }\r\n  }else if (type == \"repartir\"){\r\n    let items = [];\r\n    thisOrder.orderItems.map(e=>{\r\n        for(let i=1;i<=e.qt;i++){\r\n          let ids = Math.floor((1 + Math.random()) * 0x10000)\r\n          items = [...items,{...e,repatirId:ids}]\r\n        }\r\n    })\r\n    \r\n   \r\n    //////////////////////////////////////////\r\n\r\n    let repartirOrder = []\r\n    for (let i = 1; i <= part; i++){\r\n      let ids = Math.floor((1 + Math.random()) * 0x10000)\r\n      repartirOrder=[...repartirOrder,{\r\n        ...thisOrder,\r\n        totalPrice: 0,\r\n        partId : ids,\r\n        amount: 0,\r\n        amountPaid: 0,\r\n        payments:[],\r\n        orderItems:[]\r\n       }]\r\n   \r\n    }\r\n    if(orderesPartage.length==0){\r\n      repartirOrder[0]={...repartirOrder[0],orderItems:[...items],totalPrice:thisOrder.totalPrice,amount:thisOrder.totalPrice}\r\n      dispatch(setOrderPartage(repartirOrder))\r\n     \r\n    }\r\n/////////////////////////    \r\n    \r\n  }\r\n  \r\n \r\n  \r\n \r\n \r\n\r\n  \r\n  }, [])\r\n  const handleprint = (order)=>{\r\n\r\n    axios.post(\r\n      process.env.REACT_APP_API_HOST +\r\n        \":\" +\r\n        process.env.REACT_APP_API_PORT +\r\n        \"/api/printorder\",\r\n      {\r\n        order: {\r\n          ...order,\r\n          message: note,\r\n        },\r\n      user_id:user_id\r\n      }\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    let totalamount = orderesPartage?.map(e=>Number(e.amount)).reduce((a,b)=>a+b,0)\r\n    let totalamountPaid = orderesPartage?.map(e=>Number(e.amountPaid)).reduce((a,b)=>a+b,0)\r\n if(partNotPaid==0){\r\n  axios\r\n  .post(\r\n    process.env.REACT_APP_API_HOST +\r\n      \":\" +\r\n      process.env.REACT_APP_API_PORT +\r\n      \"/api/finalizeorder\",\r\n    {\r\n      order: {\r\n        ...thisOrder,\r\n        message: note,\r\n        pay_method: paymentType,\r\n        amount:  totalamountPaid,\r\n        amountPaid: totalamount,\r\n      },\r\n    }\r\n  )\r\n  .then((res) => {\r\n    Swal.fire({\r\n      icon: \"success\",\r\n      title: \"Le paiement effectué avec succès\",\r\n      showConfirmButton: false,\r\n      timer: 1000,\r\n    });\r\n    handleExit()\r\n    dispatch(clearOrdersPartage())\r\n   })\r\n \r\n }\r\n  }, [partNotPaid])\r\n  \r\nconst handlePayment =()=>{\r\n\r\n  setordertopay({...oredertopay,amountPaid:oredertopay.amountPaid+amount,amount:(oredertopay.amount-amount).toFixed(2),payments:[...oredertopay.payments,{type:paymentType,value:amount}]})\r\n  dispatch(editordersPartage({...oredertopay,amountPaid:oredertopay.amountPaid+amount,amount:(oredertopay.amount-amount).toFixed(2),payments:[...oredertopay.payments,{type:paymentType,value:amount}]}))\r\n  setAmount(0)\r\n  const orderToPrint ={\r\n    ...oredertopay,\r\n    amountPaid:oredertopay.amountPaid+amount,\r\n    amount:oredertopay.amount-amount,\r\n    payments:[...oredertopay.payments,{type:paymentType,value:amount}],\r\n    nbrCouverts: nbrCouverts,\r\n    message: note,\r\n    pay_method: paymentType,\r\n  }\r\n  if(orderToPrint.amount<=orderToPrint.amountPaid){\r\n    let newPayment = orderToPrint.payments.map(e=>{\r\n       return {amount: e.value,pay_method:e.type}\r\n       \r\n    })\r\n\r\n  setShowPay(false)\r\n    axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/printFinalOrder\",\r\n          {\r\n            user_id: user_id,\r\n            order: {...orderToPrint,payments:newPayment},\r\n            type: \"payertout\",\r\n          }\r\n        ).catch((err) => console.log(err));\r\n\r\n  }\r\n  \r\n}\r\n\r\n\r\n  //////////////////////////////////\r\n\r\n  // useEffect(() => {\r\n   \r\n  //   if (type == \"partager\" || \"repartir\") {\r\n  //     let newOrders = [];\r\n  //     var i = 0;\r\n  //     var t = [];\r\n  //     thisOrder?.orderItems?.forEach((element) => {\r\n  //       const newObj = Object.assign({ ids: i }, element);\r\n      \r\n  //       t.push(newObj);\r\n  //       i++;\r\n  //     });\r\n     \r\n  //     let listData = [t];\r\n     \r\n  //     let vs = [];\r\n  //     var ids;\r\n  //     for (let i = 1; i <= part; i++) {\r\n  //       newOrders.push({\r\n  //         ...thisOrder,\r\n  //         totalPrice: thisOrder.totalPrice,\r\n  //         taxPrice: (thisOrder?.totalPrice * tvas) / 100,\r\n  //         part: part,\r\n  //         type: type,\r\n  //         client: i,\r\n  //         ids: i,\r\n  //       });\r\n  //       if (type == \"partager\") {\r\n  //         vs.push(\r\n  //           (thisOrder.totalPrice + (thisOrder?.totalPrice * tvas) / 100) / part\r\n  //         );\r\n  //       }\r\n  //     }\r\n  //     localStorage.setItem(\"partageorder\", partageorder);\r\n  //     P(vs);\r\n\r\n  //     for (let i = 1; i < part; i++) {\r\n  //       listData = [...listData, []];\r\n  //     }\r\n  //     setList(listData);\r\n  \r\n  //     settheseOrders(newOrders);\r\n   \r\n  //   }\r\n  // }, []);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n\r\n  const handleExit = () => {\r\n    \r\n\r\n    // theseOrders.map((lot) => {\r\n     \r\n\r\n    //   axios\r\n    //     .post(\r\n    //       process.env.REACT_APP_API_HOST +\r\n    //         \":\" +\r\n    //         process.env.REACT_APP_API_PORT +\r\n    //         \"/api/printFinalOrder\",\r\n    //       {\r\n    //         user_id: user_id,\r\n    //         order: {\r\n    //           ...lot,\r\n    //           tvas: tvas,\r\n    //           nbrCouverts: lot.nbrCouverts,\r\n    //           table_number: lot.table || \"\",\r\n    //           order_id: lot.order_id,\r\n    //           Date: new Date(),\r\n    //           amount:\r\n    //             amount > lot?.totalPrice + (lot?.totalPrice * tvas) / 100\r\n    //               ? lot?.totalPrice +\r\n    //                 ((lot?.totalPrice * tvas) / 100).toFixed(2) -\r\n    //                 amountPaid\r\n    //               : amount - amountPaid,\r\n    //           amountPaid: amount,\r\n    //           paymentType: paymentType,\r\n    //           numbrpayment: payments[lot.client - 1],\r\n    //         },\r\n    //         type: type,\r\n    //         part: part,\r\n    //         pricepart: lot.pricepart,\r\n    //       }\r\n    //     )\r\n    //     .then((res) => {})\r\n    //     .catch((err) => console.log(err));\r\n    //   setShowPay(false);\r\n    // });\r\n    navigate(\"/main\");\r\n    dispatch(deletecheckoutData({ order_id: table_id }));\r\n  };\r\n\r\n  const handleFinal = (arryofswitch, client) => {\r\n    \r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/finalizeorder\",\r\n        {\r\n          order: {\r\n            ...thisOrder,\r\n            message: note,\r\n            pay_method: paymentType,\r\n            amount: amount,\r\n            amountPaid: amountPaid,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        \r\n        axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/printFinalOrder\",\r\n          {\r\n            user_id: user_id,\r\n            order: {\r\n              ...thisOrder,\r\n            nbrCouverts: nbrCouverts,\r\n            message: note,\r\n            pay_method: paymentType,\r\n            amount: amount/part,\r\n            amountPaid: amountPaid,\r\n            totalPrice:thisOrder.totalPrice/part\r\n            },\r\n            type: type,\r\n            part: part,\r\n            pricepart: thisOrder.totalPrice/part,\r\n          }\r\n        )\r\n        .then((res) => {})\r\n        .catch((err) => console.log(err));\r\n        setamountPaid(0);\r\n        setShowPay(true);\r\n\r\n        for (let index = 0; index <= part - 1; index++) {\r\n          if (payments.length == 0) {\r\n            let ts = [];\r\n            for (let i = 0; i <= part - 1; i++) {\r\n              ts.push([]);\r\n            }\r\n          \r\n            if (index == oredertopay.client - 1) {\r\n              ts[index] = [{ type: paymentType, value: amount }];\r\n              setpayments(ts);\r\n            }\r\n          } else {\r\n            let t = payments;\r\n            if (index == oredertopay.client - 1) {\r\n              t[index] = [...t[index], { type: paymentType, value: amount }];\r\n              setpayments(t);\r\n            }\r\n          }\r\n        }\r\n       \r\n\r\n        const isAllZero = arryofswitch.every((item) => item === 0);\r\n        if (arryofswitch[client] == 0) {\r\n          setShowPay(false);\r\n        } else {\r\n          console.log(\"not paid yet\");\r\n        }\r\n        if (isAllZero) {\r\n          handleExit();\r\n        }\r\n        /*  if (amountPaid >= thisOrder.totalPrice + thisOrder.taxPrice) {\r\n          handleExit();\r\n        } */\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n\r\n  const { t } = useTranslation();\r\n  const handleFinalize = () => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/finalizeorder\",\r\n        {\r\n          order: thisOrder,\r\n        }\r\n      )\r\n      .then((res) => {\r\n       \r\n        dispatch(deletecheckoutData({ table_id: table_id }));\r\n        navigate(\"/main\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  //DRAG /////////////////////\r\n\r\n  const reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n  };\r\n  \r\n  const move = (source, destination, droppableSource, droppableDestination) => {\r\n    const sourceClone = Array.from(source);\r\n    const destClone = Array.from(destination);\r\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\r\n\r\n    destClone.splice(droppableDestination.index, 0, removed);\r\n\r\n    const result = {};\r\n\r\n    result[droppableSource.droppableId] = sourceClone;\r\n    result[droppableDestination.droppableId] = destClone;\r\n    return result;\r\n  };\r\n\r\n  const grid = 8;\r\n\r\n  const getItemStyle = (isDragging, draggableStyle) => ({\r\n    // some basic styles to make the items look a bit nicer\r\n    userSelect: \"none\",\r\n    padding: grid * 2,\r\n    margin: `0 0 ${grid}px 0`,\r\n\r\n    // change background colour if dragging\r\n    background: isDragging ? \"lightgreen\" : \"grey\",\r\n\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle,\r\n  });\r\n  const getListStyle = (isDraggingOver) => ({\r\n    background: isDraggingOver ? \"lightblue\" : \"lightgrey\",\r\n    padding: grid,\r\n    width: 250,\r\n  });\r\n\r\n  function onDragEnd(result) {\r\n   \r\n     dispatch(updateReapartirItems(result))\r\n    // dropped outside the list\r\n    \r\n  }\r\n\r\n  // const handleRepart = () => {\r\n  //   let copy = theseOrders.map((order, key) => ({\r\n  //     ...order,\r\n  //     orderItems: [...list[key]],\r\n  //   }));\r\n\r\n  //   var repatir = [];\r\n  //   var tax = [];\r\n  //   var sums = [];\r\n  //   for (let indexs = 0; indexs < copy.length; indexs++) {\r\n  //     const element = copy[indexs];\r\n     \r\n  //     let sum = 0;\r\n  //     let sum2 = 0;\r\n  //     let tva = 0;\r\n  //     for (let index1 = 0; index1 < element.orderItems.length; index1++) {\r\n  //       const element1 = element.orderItems[index1];\r\n  //       sum = sum + element1.price + (element1.tva / 100) * element1.price;\r\n  //       sum2 = sum2 + element1.price;\r\n  //       tva = tva + (element1.tva / 100) * element1.price;\r\n  //     }\r\n  //     repatir.push(sum);\r\n  //     tax.push(tva);\r\n  //     sums.push(sum2);\r\n  //   }\r\n\r\n  //   P(repatir);\r\n   \r\n  //   var y = [];\r\n  //   for (let index = 0; index < repatir.length; index++) {\r\n  //     const element = repatir[index];\r\n  //     const newObj = Object.assign({ pricepart: element }, copy[index]);\r\n  //     newObj.totalPrice = sums[index];\r\n  //     newObj.taxPrice = tax[index];\r\n  //     y.push(newObj);\r\n  //   }\r\n  //   settheseOrders(y);\r\n\r\n  //   handleClose();\r\n  //   setPing(!ping);\r\n  // };\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundColor: \"white\",\r\n        width: \"100%\",\r\n        // height: \"100vh\",\r\n      }}\r\n    >\r\n      <Navbar\r\n        variant=\"warning\"\r\n        style={{ backgroundColor: \"#ff6b6b\", height: \"70px\" }}\r\n      >\r\n        <Container>\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => {navigate(\"/main\");dispatch(clearOrdersPartage())}}>\r\n              <img width=\"45px\" src={tableIcon} />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"checkout-2-agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            {!check&&type==\"repartir\"?<Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"checkout-2-agenda\"\r\n                onClick={()=>setShow(true)}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faEdit}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Repartir\r\n              </h6>\r\n            </Nav.Link>:''}\r\n            \r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"checkout-2-chasier\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"checkout-2-server\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            {/* <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            /> */}\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <Modal show={show} onHide={() => setShow(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Repartir</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div style={{ display: \"flex\" }}>\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n              {orderesPartage?.map((el, ind) => (\r\n                <Droppable key={ind} droppableId={ind?.toString()}>\r\n                  {(provided, snapshot) => (\r\n                    <div\r\n                      ref={provided.innerRef}\r\n                      style={getListStyle(snapshot.isDraggingOver)}\r\n                      {...provided.droppableProps}\r\n                    >\r\n                      <h6>{`personne ${ind + 1}`}</h6>\r\n                      {el.orderItems.map((item, index) => (\r\n                        <Draggable\r\n                          key={item.repatirId}\r\n                          draggableId={item.repatirId?.toString()}\r\n                          index={index}\r\n                        >\r\n                          {(provided, snapshot) => (\r\n                            <div\r\n                              ref={provided.innerRef}\r\n                              {...provided.draggableProps}\r\n                              {...provided.dragHandleProps}\r\n                              style={getItemStyle(\r\n                                snapshot.isDragging,\r\n                                provided.draggableProps.style\r\n                              )}\r\n                            >\r\n                              <div\r\n                                style={{\r\n                                  display: \"flex\",\r\n                                  justifyContent: \"space-around\",\r\n                                }}\r\n                              >\r\n                                {item.name}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </Draggable>\r\n                      ))}\r\n                      {provided.placeholder}\r\n                    </div>\r\n                  )}\r\n                </Droppable>\r\n              ))}\r\n            </DragDropContext>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\"  onClick={()=>handlefinish()} >\r\n            Terminer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <div className=\"co2\">\r\n        {orderesPartage?.map((order) =>\r\n     <div className=\"checkout2\">\r\n     <Ticket order={order} ping={ping} />\r\n     {order.amount>order.amountPaid?\r\n     <Button\r\n       variant=\"success\"\r\n       className=\"c2btn\"\r\n       onClick={() => {\r\n         setordertopay(order);\r\n         setShowPay(true);\r\n        \r\n        \r\n       }}\r\n     >\r\n       Impayé\r\n     </Button>:\r\n     <Button\r\n       variant=\"disabled\"\r\n       className=\"c2btn\"\r\n     \r\n     >\r\n       Payée\r\n     </Button>\r\n    \r\n      }\r\n       <Button onClick={()=>handleprint(order)}\r\n       variant=\"primary\"\r\n       className=\"c2btn\"\r\n     \r\n     >\r\n       imprimer\r\n     </Button>\r\n     \r\n   </div>\r\n           \r\n          // ) : (\r\n          //   <div className=\"checkout2\">\r\n          //     <Ticket order={order} ping={ping} />\r\n          //     <Button\r\n          //       variant=\"outlined\"\r\n          //       color=\"error\"\r\n          //       className=\"c2btn\"\r\n          //       startIcon={<FcPaid />}\r\n          //       Disabled\r\n          //     >\r\n          //       payé\r\n          //     </Button>\r\n          //   </div>\r\n          \r\n        )}\r\n      </div>\r\n      {/* <Button variant=\"success\" onClick={() => handleFinalize()}>\r\n        Finaliser\r\n      </Button> */}\r\n      {/* /////ShowPayModal////// */}\r\n      <Modal show={showPay} onHide={() => setShowPay(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>finaliser Commande</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Row>\r\n            <Col xs=\"5\">\r\n              <Form onSubmit={(e) => e.preventDefault()}>\r\n                <Form.Label>Paiement Reçu</Form.Label>\r\n                <Form.Control\r\n                  type=\"number\"\r\n                  placeholder=\"0.00\"\r\n                  value={oredertopay.amountPaid}\r\n                  // onChange={(e) => {setAmount(e.target.value)}}\r\n                />\r\n              </Form>\r\n              <h6 style={{ marginTop: \"1rem\" }}>Monnaie</h6>\r\n              <h4 style={{ color: \"red\" }}>\r\n                <b>\r\n                  {oredertopay.amount}\r\n               \r\n                </b>\r\n              </h4>\r\n              <Form.Group\r\n                style={{ marginTop: \"2rem\" }}\r\n                className=\"mb-3\"\r\n                controlId=\"exampleForm.ControlTextarea1\"\r\n              >\r\n                <Form.Label>\r\n                  {\" \"}\r\n                  <b>Details de paiement</b>{\" \"}\r\n                </Form.Label>\r\n                <div style={{ height: \"150px\", overflow: \"auto\" }}>\r\n                  {oredertopay?.payments?.map((e) => (\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                      }}\r\n                    >\r\n                      <h5>{e.type}</h5>\r\n                      <h5>{e.value}€</h5>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </Form.Group>\r\n            </Col>\r\n            <Col xs=\"5\">\r\n              <Form onSubmit={(e) => e.preventDefault()}>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>Paiement total</Form.Label>\r\n                  <Form.Control\r\n                    type=\"number\"\r\n                    placeholder=\"0.00\"\r\n                    value={\r\n                      oredertopay.totalPrice\r\n                    }\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>Methode de paiement</Form.Label>\r\n                  <Form.Select\r\n                    aria-label=\"Default select example\"\r\n                    onChange={(e) => setpaymentType(e.target.value)}\r\n                  >\r\n                    <option value=\"espece\">Especes</option>\r\n                    <option value=\"carte bleu\">Carte bleu</option>\r\n                    <option value=\"ticket restaurant\">Ticket restaurant</option>\r\n                    <option value=\"cheque\">Cheque</option>\r\n\r\n                    <option value=\"Glovo\">Glovo</option>\r\n                    <option value=\"Just-Eat\">Just-Eat</option>\r\n                    <option value=\"Deliveroo\">Deliveroo</option>\r\n                    <option value=\"Uber Eats\">Uber Eats</option>\r\n                  </Form.Select>\r\n                </Form.Group>\r\n              </Form>\r\n              <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                <Form.Label>\r\n                  <b>Total</b>\r\n                </Form.Label>\r\n                <Form.Control\r\n                  \r\n                  type=\"number\"\r\n                  placeholder=\"0.00\"\r\n                  value={amount}\r\n                  onChange={(e)=>setAmount(Number(e.target.value))}\r\n                />\r\n              </Form.Group>\r\n              <Keyboard\r\n                theme={\"hg-theme-default hg-layout-default myTheme5\"}\r\n                display={{\r\n                  \"{bksp}\": \"EFFACER\",\r\n                }}\r\n                buttonTheme={[\r\n                  {\r\n                    class: \"key_btn3\",\r\n                    buttons: \"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}\",\r\n                  },\r\n                  {\r\n                    class: \"hg-highlight\",\r\n                    buttons: \"Q q\",\r\n                  },\r\n                ]}\r\n                keyboardRef={(r) => (keyboard.current = r)}\r\n                layoutName={\"default\"}\r\n                layout={{\r\n                  default: myLayout,\r\n                }}\r\n                onChange={onChange}\r\n                onKeyPress={onKeyPress}\r\n              />\r\n            </Col>\r\n\r\n            <Col xs=\"2\">\r\n              <h4>Cash</h4>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 0.5);\r\n                  setkeyborad((amount + 0.5).toString());\r\n                }}\r\n              >\r\n                0.5 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 1);\r\n                  setkeyborad((amount + 1).toString());\r\n                }}\r\n              >\r\n                1 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 2);\r\n                  setkeyborad((amount + 2).toString());\r\n                }}\r\n              >\r\n                2 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 5);\r\n                  setkeyborad((amount + 5).toString());\r\n                }}\r\n              >\r\n                5 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 10);\r\n                  setkeyborad((amount + 10).toString());\r\n                }}\r\n              >\r\n                10 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 20);\r\n                  setkeyborad((amount + 20).toString());\r\n                }}\r\n              >\r\n                20 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 50);\r\n                  setkeyborad((amount + 50).toString());\r\n                }}\r\n              >\r\n                50 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 100);\r\n                  setkeyborad((amount + 100).toString());\r\n                }}\r\n              >\r\n                100 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                   \r\n                  }}\r\n                  onClick={() => {\r\n                    \r\n                    setAmount(\r\n                      Number(oredertopay?.amount).toFixed(2)\r\n                    );\r\n                    // setkeyborad(((orederpartage[oredertopay.client - 1]).toFixed(2)).toString());\r\n                  }}\r\n                >\r\n                  Payer Tout\r\n                </Button>\r\n              <Button\r\n                variant=\"danger\"\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {setAmount(0);setkeyborad((0).toString())}}\r\n              >\r\n                Effacer\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"outline-secondary\" onClick={() => setShowPay(false)}>\r\n            {t(\"cancel\")}\r\n          </Button>\r\n          {!accompte ? (\r\n            <Button\r\n              variant=\"success\"\r\n              onClick={()=>handlePayment()}\r\n               \r\n            >\r\n              Valider\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              variant=\"outline-danger\"\r\n              onClick={() => {\r\n                setShowPay(false);\r\n                handleFinal();\r\n              }}\r\n            >\r\n              Accompte\r\n            </Button>\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutTwo;\r\n","export default __webpack_public_path__ + \"static/media/borne.aac446c5.png\";","export default __webpack_public_path__ + \"static/media/updateorder.37f478bf.wav\";","export default __webpack_public_path__ + \"static/media/born-sound.8be7451a.mp3\";","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Col, Container, Nav, Navbar, Table } from \"react-bootstrap\";\r\nimport {\r\n \r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCheckSquare,\r\n  \r\n  faEdit,\r\n  faGlobe,\r\n \r\n  faSignOutAlt,\r\n  faTimes,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport useTranslation from \"./../i18\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport cc from \"./../Shared/cc.png\";\r\nimport delivery from \"./../Shared/delivery.png\";\r\nimport takeout from \"./../Shared/takeout.png\";\r\nimport cash from \"./../Shared/cash.jpg\";\r\nimport surplace from \"./../Shared/surplace.png\";\r\nimport borne from \"./../Shared/borne.png\";\r\nimport $ from \"jquery\";\r\nimport Ticket from \"../Components/Ticket\";\r\nimport _, { now } from \"lodash\";\r\nimport { TokenExpiredError } from \"jsonwebtoken\";\r\nimport axios from \"axios\";\r\nimport { addNewcheckoutData, setCheckoutChange } from \"../Slices/order\";\r\nimport { io } from \"socket.io-client\";\r\nimport Swal from \"sweetalert2\";\r\nimport updateSound from \"../Shared/updateorder.wav\";\r\nimport bornSound from \"../Shared/born-sound.mp3\";\r\nconst socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\nconst History = () => {\r\n  const [audioBorn, setaudioBorn] = useState(new Audio(bornSound));\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState({});\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n  const [newOrders, setnewOrders] = useState([]);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substring(0, 10);\r\n  var time = curr.getHours() + \":\" + curr.getMinutes();\r\n  console.log(date, time);\r\n  const dispatch = useDispatch();\r\n\r\n  var myTime = curr.getTime();\r\n  console.log(myTime);\r\n\r\n  const params = useParams();\r\n  const { type } = params;\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n  \r\n  let checkoutData = useSelector((state) => state.order.checkoutData);\r\n  /**\r\n   * @typedef {string} string\r\n   */\r\n\r\n  console.log(\"za\",checkoutData);\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n\r\n  const table = ({ e }) => {\r\n    console.log(e);\r\n    return tables.find((table) => table.id == e);\r\n  };\r\n  \r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const handleEditOrder = (id) => {\r\n    navigate(\"/menu/\" + id);\r\n  };\r\n  const handlePreview = ({ order }) => {\r\n    let toOrder = _.clone(order);\r\n    toOrder = {\r\n      ...toOrder,\r\n      order_id: toOrder.id,\r\n      taxPrice: toOrder.tva,\r\n      totalPrice: toOrder.price,\r\n    };\r\n    toOrder.orderItems = toOrder.orderItems.map((item) => ({\r\n      ...item,\r\n      qt: item.quantity,\r\n    }));\r\n    setSelectedOrder(toOrder);\r\n    setShowPreview(true);\r\n  };\r\n  var groupBy = function (xs, key) {\r\n    return xs?.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n\r\n  // const calcOrder = (order) => {\r\n  //   let price = order.price;\r\n  //   let tva = order.tva;\r\n  //   if (\r\n  //     selectedOrder.order_type == \"sur place\" ||\r\n  //     selectedOrder.order_type == \"livraison\"\r\n  //   ) {\r\n  //     tva = tva_mode.find((e) => e.nom == \"sur place\").valeur;\r\n  //   } else if (selectedOrder.order_type == \"emporter\") {\r\n  //     tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n  //   }\r\n  //   if (rab_tva > 0) {\r\n  //     tva = rab_tva;\r\n  //   }\r\n  //   if (order.extras && order.extras.length) {\r\n  //     console.log(\"has extra\");\r\n  //     order.extras.map((extra) => {\r\n  //       console.log(extra.price, extra.default_quantity);\r\n  //       price += extra.price * extra.default_quantity;\r\n  //     });\r\n  //   }\r\n  //   if (order.stepItems && order.stepItems != {}) {\r\n  //     Object.keys(order.stepItems).map((e) => {\r\n  //       order.stepItems[e].map((item) => {\r\n  //         price += item.price;\r\n  //       });\r\n  //     });\r\n  //   }\r\n\r\n  //   if (order.offert == true) {\r\n  //     return 0;\r\n  //   } else\r\n  //     return {\r\n  //       dbPrice: price,\r\n  //       price: price * order.qt,\r\n  //       tva: (price * order.qt * tva) / 100,\r\n  //       item_tva: tva,\r\n  //     };\r\n  // };\r\n\r\n  let b = [];\r\n  useEffect(() => {\r\n    let copy = _.clone(selectedOrder?.orderItems || [{}]);\r\n    console.log(\"salaaam\", copy);\r\n    setnewOrders(copy);\r\n    selectedOrder.orderItems?.map((order) => {\r\n      if (order.is_alcool == true) {\r\n        let tva_alcool = tva_mode.find((e) => e.nom == \"alcool\").valeur;\r\n        console.log(tva_alcool);\r\n        setRab_tva(tva_alcool);\r\n      }\r\n    });\r\n  }, [selectedOrder]);\r\n  const calcTotal = () => {\r\n    let tot = 0;\r\n    let tva = 0;\r\n    let tvas = [];\r\n    newOrders.map((order) => {\r\n      tot += order.price;\r\n      tva += order.tva;\r\n      tvas.push({\r\n        value: order.tva,\r\n        perc: (order.tva / order.price) * 100,\r\n      });\r\n    });\r\n    return { tot, tva, tvas };\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    setShowPreview(false);\r\n    let order = {\r\n      from_kiosk:false,\r\n      table: selectedOrder?.table_number || \"\",\r\n      client_id: selectedOrder?.customer_id || 0,\r\n      order_id: selectedOrder.id,\r\n      message: selectedOrder.message || \"aucune\",\r\n      customer_name: selectedOrder?.customer_name || \"\",\r\n      customer_company: selectedOrder?.customer_company || \"\",\r\n      code1: selectedOrder?.code1 || \"\",\r\n      code2: selectedOrder?.code2 || \"\",\r\n      interphone: selectedOrder?.interphone || \"\",\r\n      etage: selectedOrder?.etage || \"\",\r\n      table_number: selectedOrder?.table_number || 0,\r\n      customer_tel: selectedOrder?.customer_tel || \"\",\r\n      customer_adress: selectedOrder?.customer_adress,\r\n      status: selectedOrder?.status,\r\n      orderType: selectedOrder?.order_type,\r\n      paymentType: selectedOrder?.pay_method,\r\n      totalPrice: selectedOrder?.price,\r\n      taxPrice: selectedOrder?.tva,\r\n      tvas: calcTotal().tvas,\r\n      orderItems: [],\r\n      date: selectedOrder?.date,\r\n      time: selectedOrder?.time,\r\n    };\r\n    console.log(calcTotal().tvas);\r\n    newOrders.map((one) => {\r\n      order.orderItems.push({\r\n        ...one,\r\n        price: one.price,\r\n        tva: one.tva,\r\n      });\r\n    });\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printOrder\",\r\n        {\r\n          kitchen: false,\r\n          user_id: user_id,\r\n          order: {\r\n            new: false,\r\n            ...order,\r\n            tvas: groupBy(calcTotal().tvas, \"perc\"),\r\n            Date: new Date(),\r\n            nbrCouverts: 1,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  //kitchen update order\r\n\r\n  const [soundUpdate, setSoundUpdate] = useState(new Audio(updateSound));\r\n  \r\n  // useEffect(() => {\r\n    \r\n  //   socket.on(`ping${user_id}`, (data) => {\r\n  // console.log(\"data\",data)\r\n  //     audioBorn.play()\r\n  //     Swal.fire({\r\n  //       icon: \"success\",\r\n  //       title: \r\n  //       \"<h5 >\" +\r\n  //       `Une commande a eté ajouter ` +\r\n  //       \"</h5>\",\r\n  //       showConfirmButton: false,\r\n  //       timer: 2500,\r\n  //     });\r\n  // })\r\n  //   socket.on(`ping${user_id}`, (order) => {\r\n  //    console.log(\"zezea\",order)\r\n  //     soundUpdate.play()\r\n  //     dispatch(setCheckoutChange({order:order}))\r\n  //     if(order.status==\"cooking\"){\r\n  //       Swal.fire({\r\n  //         icon: \"success\",\r\n  //         title: \r\n  //         \"<h5 >\" +\r\n  //         `La commande <span style='color:green'>${order.order_id}€</span> en préparation` +\r\n  //         \"</h5>\",\r\n          \r\n  //         showConfirmButton: false,\r\n  //         timer: 2500,\r\n  //       });\r\n  //     } else {\r\n  //       Swal.fire({\r\n  //         icon: \"success\",\r\n  //         title: \r\n  //         \"<h5 >\" +\r\n  //         `La commande <span style='color:green'>${order.order_id}€</span> a été prêtée` +\r\n  //         \"</h5>\",\r\n  //         showConfirmButton: false,\r\n  //         timer: 2500,\r\n  //       });\r\n        \r\n  //     }\r\n      \r\n    \r\n  //   })\r\n  \r\n  //  console.log(\"orders\",checkoutData)\r\n  // }, [socket])\r\n  \r\n\r\n  return (\r\n    <div className=\"main_bg\">\r\n      <Navbar variant=\"warning\" className=\"navbar\">\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"caiss-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"log-out\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"server-icon\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <Col  style={{ backgroundColor: \"white\" }} fluid>\r\n        <Table hover className=\"ttt\">\r\n          <thead className=\"tbds\">\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Type</th>\r\n              <th>Table</th>\r\n              <th>date</th>\r\n              <th>order</th>\r\n              <th>Prix</th>\r\n              {type == \"all\" ? <th>Reglement</th> : \"\"}\r\n              {type == \"encours\" ? <th>statut</th> : \"\"}\r\n              <th>Paiements </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"scro\">\r\n            {type == \"encours\" \r\n              ? checkoutData\r\n                  ?.slice()\r\n                  ?.sort((a, b) => b.id - a.id)\r\n                  ?.filter((e) =>\r\n                    \r\n                      \r\n                       (e.status == \"pending\"||e.status == \"cooking\"||e.status == \"ready\") && e.date == date\r\n                  )\r\n                  .map((order, key) => {\r\n                    let tva = 0;\r\n                    let is_alcool = false;\r\n                    let test = order.orderItems;\r\n                    order?.orderItems?.forEach((element) => {\r\n                      if (element.is_alcool == true) {\r\n                        is_alcool = true;\r\n                      }\r\n                    });\r\n                    if (is_alcool == true) {\r\n                      tva = 20;\r\n                    } else {\r\n                      switch (order.orderType) {\r\n                        case \"sur place\":\r\n                          tva = 10;\r\n                          break;\r\n                          case \"sur place\":\r\n                          tva = 10;\r\n                          break;\r\n                        case \"emporter\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        case \"livraison\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        default:\r\n                          tva = 10;\r\n                          break;\r\n                      }\r\n                    }\r\n                    return (\r\n                      <tr>\r\n                        <td>\r\n                          {order.status == \"pending\" ? (\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-evenly\",\r\n                              }}\r\n                            >\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faEdit}\r\n                                color=\"#42d4cb\"\r\n                                onClick={() =>\r\n                                  handleEditOrder(\r\n                                    order.order_id == undefined\r\n                                      ? order.id\r\n                                      : order.order_id\r\n                                  )\r\n                                }\r\n                              />\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faCashRegister}\r\n                                color=\"#ff6b6b\"\r\n                                onClick={() =>\r\n                                  navigate(\r\n                                    \"/checkout/\" +\r\n                                      (order.order_id == undefined\r\n                                        ? order.id\r\n                                        : order.order_id)\r\n                                  )\r\n                                }\r\n                              />\r\n                            </div>\r\n                          ) :order.status == \"cooking\"?\r\n                          (\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-evenly\",\r\n                              }}\r\n                            >\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faUtensils}\r\n                                color=\"#42d4cb\"\r\n                            \r\n                              />\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faCashRegister}\r\n                                color=\"#ff6b6b\"\r\n                                onClick={() =>\r\n                                  navigate(\r\n                                    \"/checkout/\" +\r\n                                      (order.order_id == undefined\r\n                                        ? order.id\r\n                                        : order.order_id)\r\n                                  )\r\n                                }\r\n                              />\r\n                            </div>\r\n                          ) :order.status == \"ready\"?\r\n                          (\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-evenly\",\r\n                              }}\r\n                            >\r\n                                <FontAwesomeIcon\r\n                              icon={faCheckSquare}\r\n                              color=\"green \"\r\n                            />\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faCashRegister}\r\n                                color=\"#ff6b6b\"\r\n                                onClick={() =>\r\n                                  navigate(\r\n                                    \"/checkout/\" +\r\n                                      (order.order_id == undefined\r\n                                        ? order.id\r\n                                        : order.order_id)\r\n                                  )\r\n                                }\r\n                              />\r\n                            </div>\r\n                          )                          \r\n                          :  (\r\n                            <FontAwesomeIcon\r\n                              icon={faCheckSquare}\r\n                              color=\"green \"\r\n                            />\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          {order?.orderType==undefined? \"de borne\":order.orderType}\r\n                          {order.orderType == \"sur place\" ? (\r\n                            <img\r\n                              src={surplace}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ) :order.orderType == \"emporter\" ?\r\n                          (\r\n                            <img\r\n                              src={takeout}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ):order.orderType == \"livraison\" ?(\r\n                            <img\r\n                              src={delivery}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ):(\r\n                            <img\r\n                              src={borne}\r\n                              width={40}\r\n                              height={40}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            /> \r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          Table : {table({ e: order.table_number })?.numero}\r\n                        </td>\r\n                        <td>{order.date + \"-\" + order.time}</td>\r\n                        <td>\r\n                          {\"#\" +\r\n                            (order.order_id == undefined\r\n                              ? order.id\r\n                              : order.order_id)}\r\n                        </td>\r\n                        <td>\r\n                          <b style={{ display: \"flex\", color: \"red\" }}>\r\n                            {}\r\n                            {order.totalPrice == undefined\r\n                              ? order.price\r\n                              : order.totalPrice}{\" \"}\r\n                            {renderHTML(`<i>${currency}</i>`)}\r\n                          </b>\r\n                        </td>\r\n                        <td>\r\n                          {order.status==\"pending\"?\r\n                          <b>En attente</b>:\r\n                           order.status==\"cooking\"?\r\n                           <b style={{color:\"orange\"}}> En préparation</b>:\r\n                           <b style={{color:\"green\"}}> Prête</b>\r\n                          \r\n                          }\r\n                        </td>\r\n                        <td>\r\n                          <b>En cours</b>\r\n                       \r\n                        \r\n                        </td>\r\n                       \r\n                      </tr>\r\n                    );\r\n                  })\r\n              :\r\n              type==\"annules\"?\r\n              checkoutData\r\n              ?.slice()\r\n              ?.sort((a, b) => b.id - a.id)\r\n              ?.filter((e) =>\r\n                type == \"avenir\"\r\n                  ? e.date > date\r\n                  : e.status == \"rejected\" && e.date == date\r\n              )\r\n              .map((order, key) => {\r\n                let tva = 0;\r\n                let is_alcool = false;\r\n                let test = order.orderItems;\r\n                order.orderItems.forEach((element) => {\r\n                  if (element.is_alcool == true) {\r\n                    is_alcool = true;\r\n                  }\r\n                });\r\n                if (is_alcool == true) {\r\n                  tva = 20;\r\n                } else {\r\n                  switch (order.orderType) {\r\n                    case \"sur place\":\r\n                      tva = 10;\r\n                      break;\r\n                    case \"emporter\":\r\n                      tva = 5.5;\r\n                      break;\r\n                    case \"livraison\":\r\n                      tva = 5.5;\r\n                      break;\r\n                    default:\r\n                      tva = 5.5;\r\n                      break;\r\n                  }\r\n                }\r\n                return (\r\n                  <tr>\r\n                    <td>\r\n                      {order.status == \"pending\" ? (\r\n                        <div\r\n                          style={{\r\n                            display: \"flex\",\r\n                            justifyContent: \"space-evenly\",\r\n                          }}\r\n                        >\r\n                          <FontAwesomeIcon\r\n                            size=\"2x\"\r\n                            style={{ cursor: \"pointer\" }}\r\n                            icon={faEdit}\r\n                            color=\"#42d4cb\"\r\n                            onClick={() =>\r\n                              handleEditOrder(\r\n                                order.order_id == undefined\r\n                                  ? order.id\r\n                                  : order.order_id\r\n                              )\r\n                            }\r\n                          />\r\n                          <FontAwesomeIcon\r\n                            size=\"2x\"\r\n                            style={{ cursor: \"pointer\" }}\r\n                            icon={faCashRegister}\r\n                            color=\"#ff6b6b\"\r\n                            onClick={() =>\r\n                              navigate(\r\n                                \"/checkout/\" +\r\n                                  (order.order_id == undefined\r\n                                    ? order.id\r\n                                    : order.order_id)\r\n                              )\r\n                            }\r\n                          />\r\n                        </div>\r\n                      ) : (\r\n                        <FontAwesomeIcon\r\n                          icon={faTimes}\r\n                          color=\"red\"\r\n                        />\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {order.orderType}\r\n                      {order.orderType == \"sur place\" ? (\r\n                        <img\r\n                          src={surplace}\r\n                          width={32}\r\n                          height={32}\r\n                          style={{ marginLeft: \"0.5rem\" }}\r\n                        />\r\n                      ) :order.orderType == \"emporter\" ?\r\n                      (\r\n                        <img\r\n                          src={takeout}\r\n                          width={32}\r\n                          height={32}\r\n                          style={{ marginLeft: \"0.5rem\" }}\r\n                        />\r\n                      )\r\n                      : (\r\n                        <img\r\n                          src={delivery}\r\n                          width={32}\r\n                          height={32}\r\n                          style={{ marginLeft: \"0.5rem\" }}\r\n                        />\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      Table : {table({ e: order.table_number })?.numero}\r\n                    </td>\r\n                    <td>{order.date + \"-\" + order.time}</td>\r\n                    <td>\r\n                      {\"#\" +\r\n                        (order.order_id == undefined\r\n                          ? order.id\r\n                          : order.order_id)}\r\n                    </td>\r\n                    <td>\r\n                      <b style={{ display: \"flex\", color: \"red\" }}>\r\n                        {}\r\n                        {order.totalPrice == undefined\r\n                          ? order.price \r\n                          : order.totalPrice}{\" \"}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </b>\r\n                    </td>\r\n                    <td>\r\n                      <b>Annuler</b>\r\n                      {/* {order.paymentType == \"espece\" ? (\r\n                      <img\r\n                        src={cash}\r\n                        width={32}\r\n                        height={32}\r\n                        style={{ marginLeft: \"0.5rem\" }}\r\n                      />\r\n                    ) : order.paymentType == \"Carte Bancaire\" ? (\r\n                      <img\r\n                        src={cc}\r\n                        width={32}\r\n                        height={32}\r\n                        style={{ marginLeft: \"0.5rem\" }}\r\n                      />\r\n                    ) : (\r\n                      \"\"\r\n                    )} */}\r\n                    \r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n              :type== \"avenir\"? \"\"\r\n              : orders\r\n                  ?.slice()\r\n                  ?.sort((a, b) => b.id - a.id)\r\n                  .filter(\r\n                    (item) => item.paymentsInDb && item.paymentsInDb.length > 0\r\n                  )\r\n                  .map((order, key) => {\r\n                    let tva = 0;\r\n                    let is_alcool = false;\r\n                    let test = order.orderItems;\r\n                    order.orderItems.forEach((element) => {\r\n                      if (element.is_alcool == true) {\r\n                        is_alcool = true;\r\n                      }\r\n                    });\r\n                    if (is_alcool == true) {\r\n                      tva = 20;\r\n                    } else {\r\n                      let iss =\r\n                        order.orderType == undefined\r\n                          ? order.order_type\r\n                          : order.orderType;\r\n                      switch (iss) {\r\n                        case \"sur place\":\r\n                          tva = 10;\r\n                          break;\r\n                        case \"emporter\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        case \"livraison\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        default:\r\n                          tva = 10;\r\n                          break;\r\n                      }\r\n                    }\r\n                    return (\r\n                      <tr onClick={() => handlePreview({ order })}>\r\n                        <td>\r\n                          {order.source == 1 ? (\r\n                            <>\r\n                              <FontAwesomeIcon\r\n                                icon={faGlobe}\r\n                                color=\"blue\"\r\n                                style={{ marginRight: \"0.5rem\" }}\r\n                              />\r\n                              <b>Enligne</b>\r\n                            </>\r\n                          ) : (\r\n                            <FontAwesomeIcon\r\n                              icon={faCheckSquare}\r\n                              color=\"green\"\r\n                            />\r\n                          )}\r\n                        </td>\r\n                        <td style={{ display: \"flex\" }}>\r\n                          {order.order_type}\r\n                          {order.order_type == \"sur place\" ? (\r\n                            <img\r\n                              src={surplace}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ) : order.order_type == \"emporter\" ? (\r\n                            <img\r\n                              src={takeout}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ) : (\r\n                            <img\r\n                              src={delivery}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          Table :{\" \"}\r\n                          {table({ e: order.table_number })?.numero || \"N/A\"}\r\n                        </td>\r\n                        <td>{order.date + \"-\" + order.time}</td>\r\n                        <td>{\"#\" + order.id}</td>\r\n                        <td>\r\n                          <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                            {order.source != 3\r\n                              ? (\r\n                                  order.price \r\n                                ).toFixed(2)\r\n                              : order.price }{\" \"}\r\n                            {renderHTML(`<i>${currency}</i>`)}\r\n                          </b>\r\n                        </td>\r\n                        <td>\r\n                          <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                            {order.how_paid}\r\n                          </b>\r\n                        </td>\r\n                        <td>\r\n                          {[\r\n                            ...new Set(\r\n                              order.paymentsInDb.map(\r\n                                (words) => words.pay_method\r\n                              )\r\n                            ),\r\n                          ].map((pay) => {\r\n                          \r\n\r\n                            /*  const sumWithInitial = array1.reduce(\r\n                              (previousValue, currentValue) =>\r\n                                previousValue + currentValue,\r\n                              initialValue\r\n                            );*/\r\n                            return <b>{pay}-</b>;\r\n                          })}\r\n                          {/* <b>\r\n                          {order.pay_method == \"espece\"\r\n                            ? \"Especes\"\r\n                            : order.pay_method == \"Carte Bancaire\" ||\r\n                              order.pay_method == 1\r\n                            ? \"Carte Bancaire\"\r\n                            : \"Especes\"}\r\n                        </b>\r\n                        {order.pay_method == \"espece\" ||\r\n                        order.pay_method == 2 ? (\r\n                          <img\r\n                            src={cash}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : order.pay_method == \"Carte Bancaire\" ||\r\n                          order.pay_method == 1 ? (\r\n                          <img\r\n                            src={cc}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : (\r\n                          \"\"\r\n                        )} */}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n          </tbody>\r\n        </Table>\r\n        {showPreview && (\r\n          <div className=\"preview\">\r\n            <FontAwesomeIcon\r\n              onClick={() => setShowPreview(false)}\r\n              icon={faTimes}\r\n              size=\"2x\"\r\n              style={{ position: \"absolute\", right: \"5px\" }}\r\n            />\r\n            <div className=\"scr\">\r\n              <Ticket order={selectedOrder} />\r\n            </div>\r\n            <Button\r\n              onClick={handlePrint}\r\n              variant=\"danger\"\r\n              style={{\r\n                height: \"50px\",\r\n                width: \"100%\",\r\n                bottom: \"0\",\r\n                position: \"absolute\",\r\n              }}\r\n            >\r\n              Imprimer\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </Col >\r\n      <NaviBottom />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n  Table,\r\n  Col,\r\n} from \"react-bootstrap\";\r\nimport {\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCheckSquare,\r\n  faEdit,\r\n  faSignOutAlt,\r\n  faSearch,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport useTranslation from \"./../i18\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport cc from \"./../Shared/cc.png\";\r\nimport delivery from \"./../Shared/delivery.png\";\r\nimport takeout from \"./../Shared/takeout.png\";\r\nimport cash from \"./../Shared/cash.jpg\";\r\nimport surplace from \"./../Shared/surplace.png\";\r\nimport $ from \"jquery\";\r\nimport axios from \"axios\";\r\nimport { storeClients } from \"../Slices/data\";\r\n\r\nconst History = () => {\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const clients = useSelector((state) => state.data.clients);\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const [editClient, setEditClient] = useState({});\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [ping, setping] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const { id } = params;\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n\r\n  const handleEditClient = () => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/updateClient\",\r\n        {\r\n          client_id: editClient.id,\r\n          client: editClient,\r\n        }\r\n      )\r\n      .then((res) => setping(!ping))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getclients\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeClients({ clients: res.data.clients }));\r\n      });\r\n  }, [ping]);\r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const table = ({ e }) => {\r\n    console.log(e);\r\n    return tables.find((table) => table.id == e);\r\n  };\r\n\r\n  return (\r\n    <div className=\"navbar\">\r\n      <Navbar\r\n        style={{  height: \"60px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"caiss-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"log-out\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"client-server-icon\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n          <div className=\"client-search\">\r\n            <label>\r\n              <FontAwesomeIcon icon={faSearch} />\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Chercher...\"\r\n              onChange={(e) => setSearch(e.target.value)}\r\n            />\r\n          </div>\r\n        </Container>\r\n      </Navbar>\r\n      <Container style={{ backgroundColor: \"white\" }} fluid>\r\n        <Table hover className=\"ttt\">\r\n          <thead className=\"tbds\">\r\n            {id ? (\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Type</th>\r\n                <th>Table</th>\r\n                <th>date</th>\r\n                <th>order</th>\r\n                <th>Prix</th>\r\n                <th>Paiement </th>\r\n              </tr>\r\n            ) : (\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Nom/Prenom</th>\r\n                <th>Telephone</th>\r\n                <th>Email</th>\r\n                <th>Adresse</th>\r\n                <th>Ville</th>\r\n                <th>Code postal</th>\r\n              </tr>\r\n            )}\r\n          </thead>\r\n          <tbody className=\"scro\">\r\n            {id\r\n              ? orders\r\n                  ?.slice()\r\n                  ?.sort((a, b) => b.id - a.id)\r\n                  .filter((el) => el.customer_id == id)\r\n                  .map((order, key) => (\r\n                    <tr>\r\n                      <td>\r\n                        <FontAwesomeIcon icon={faCheckSquare} color=\"green\" />\r\n                      </td>\r\n                      <td style={{ display: \"flex\" }}>\r\n                        {order.order_type}\r\n                        {order.order_type == \"sur place\" ? (\r\n                          <img\r\n                            src={surplace}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : (\r\n                          <img\r\n                            src={delivery}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        Table :{\" \"}\r\n                        {table({ e: order.table_number })?.numero || \"N/A\"}\r\n                      </td>\r\n                      <td>{order.date + \"-\" + order.time}</td>\r\n                      <td>{\"#\" + order.id}</td>\r\n                      <td>\r\n                        <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                          {order.price} {renderHTML(`<i>${currency}</i>`)}\r\n                        </b>\r\n                      </td>\r\n                      <td>\r\n                        <b>\r\n                          {order.pay_method == \"espece\"\r\n                            ? \"Especes\"\r\n                            : order.pay_method == \"Carte Bancaire\" ||\r\n                              order.pay_method == 1\r\n                            ? \"Carte Bancaire\"\r\n                            : \"Especes\"}\r\n                        </b>\r\n                        {order.pay_method == \"espece\" ||\r\n                        order.pay_method == 2 ? (\r\n                          <img\r\n                            src={cash}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : order.pay_method == \"Carte Bancaire\" ||\r\n                          order.pay_method == 1 ? (\r\n                          <img\r\n                            src={cc}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n              : clients\r\n                  .filter(\r\n                    (client) =>\r\n                      client.nom_prenom\r\n                        .toLowerCase()\r\n                        .includes(search.toLowerCase()) ||                     \r\n                      client.telephone.includes(search)\r\n                  )\r\n                  .map((client, key) => (\r\n                    <tr className=\"client-tr\">\r\n                      <td>\r\n                        <FontAwesomeIcon\r\n                          icon={faEdit}\r\n                          color=\"#ff6b6b\"\r\n                          size=\"2x\"\r\n                          onClick={() => {\r\n                            setEditClient(client);\r\n                            console.log(client);\r\n                            setShowEdit(true);\r\n                          }}\r\n                        />\r\n                      </td>\r\n                      <td onClick={() => navigate(\"/clients/\" + client.id)}>\r\n                        {client.nom_prenom || \"N/A\"}\r\n                      </td>\r\n                      <td>{client.telephone || \"N/A\"}</td>\r\n                      <td>{client.email || \"N/A\"}</td>\r\n                      <td>{client.adresse || \"N/A\"}</td>\r\n                      <td>{client.ville || \"N/A\"}</td>\r\n                      <td>{client.code_postal || \"N/A\"}</td>\r\n                    </tr>\r\n                  ))}\r\n          </tbody>\r\n        </Table>\r\n      </Container>\r\n      <Modal show={showEdit} onHide={() => setShowEdit(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Client</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div>\r\n            <Form auto>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.nom_prenom}\r\n                      type=\"text\"\r\n                      placeholder=\"nom/prenom\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          nom_prenom: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    {editClient.telephone?.length > 0 &&\r\n                    editClient.telephone?.length < 10 ? (\r\n                      <Badge bg=\"danger\">\r\n                        Numero pas valide (10 chiffres obligatoire)\r\n                      </Badge>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    <Form.Control\r\n                      value={editClient.telephone}\r\n                      type=\"tel\"\r\n                      placeholder=\"telephone\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          telephone: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.email}\r\n                      type=\"email\"\r\n                      placeholder=\"Email\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, email: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.adresse}\r\n                      as=\"textarea\"\r\n                      type=\"text\"\r\n                      placeholder=\"adresse\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          adresse: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.societe}\r\n                      type=\"text\"\r\n                      placeholder=\"société\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          societe: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.code_1}\r\n                      type=\"text\"\r\n                      placeholder=\"code 1\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, code_1: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.code_2}\r\n                      type=\"text\"\r\n                      placeholder=\"code 2\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, code_2: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n\r\n                  <Col xs=\"6\">\r\n                    <Form.Control\r\n                      value={editClient.ville}\r\n                      type=\"text\"\r\n                      placeholder=\"Ville\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, ville: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.interphone}\r\n                      type=\"text\"\r\n                      placeholder=\"interphone\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          interphone: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.etage}\r\n                      type=\"text\"\r\n                      placeholder=\"etage\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, etage: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col xs=\"6\">\r\n                    <Form.Control\r\n                      value={editClient.code_postal}\r\n                      type=\"postal\"\r\n                      placeholder=\"Code postal\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          code_postal: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n            </Form>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowEdit(false)}>\r\n            Annuler\r\n          </Button>\r\n          <Button\r\n            style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n            variant=\"primary\"\r\n            onClick={() => {\r\n              setShowEdit(false);\r\n              handleEditClient();\r\n            }}\r\n          >\r\n            Terminer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <NaviBottom />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","import React from \"react\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport { clearOrders } from \"../Slices/order\";\r\nimport _ from \"lodash\";\r\n\r\nconst CalendarScreen = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\"); \r\n  };\r\n  return (\r\n    <div>\r\n      <Navbar\r\n        style={{ backgroundColor: \"#ff6b6b\", height: \"70px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container>\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link\r\n              onClick={() => {\r\n                navigate(\"/main\");\r\n                dispatch(clearOrders());\r\n              }}\r\n            >\r\n              <img width=\"45px\" src={tableIcon} />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <div id=\"calendar\" style={{ height: \"800px\" }}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalendarScreen;\r\n","import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { storeDataz} from \"../Slices/data\";\r\nimport html2canvas from \"html2canvas\";\r\nimport { jsPDF } from \"jspdf\";\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport dayjs from 'dayjs';\r\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\r\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\r\nimport { MobileDatePicker } from '@mui/x-date-pickers/MobileDatePicker';\r\nimport { TextField } from '@mui/material';\r\nimport AutorenewSharpIcon from '@mui/icons-material/AutorenewSharp';\r\nconst Zcaisse = () => {\r\n \r\n  const dataZ = useSelector((state) => state.data.dataZ);\r\n  const [dateSelected, setdateSelected] = useState(\"\")\r\n  const [cherchId, setcherchId] = useState(0)\r\n  const [el, setel] = useState({})\r\n  const createPDF = async () => {   \r\n    const pdf = new jsPDF(\"portrait\", \"pt\", \"a4\"); \r\n    const data = await html2canvas(document.querySelector(\"#pdf\"));\r\n    const img = data.toDataURL(\"image/png\");  \r\n    const imgProperties = pdf.getImageProperties(img);\r\n    const pdfWidth = pdf.internal.pageSize.getWidth();\r\n    const pdfHeight = (imgProperties.height * pdfWidth) / imgProperties.width;\r\n    pdf.addImage(img, \"PNG\", 0, 0, pdfWidth, pdfHeight);\r\n    pdf.save(\"Zcaisse.pdf\");\r\n  };\r\n  const handlePrintHistory=(PrintData)=>{\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printzcaisse\",\r\n        { PrintData, user_id }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n  }\r\n  const [value, setValue] = React.useState(dayjs('2014-08-18T21:11:54'));\r\n\r\n  const handleChange = (newValue) => {\r\n    let month=\"\"\r\n    setValue(newValue);\r\n    if(newValue.$M<10)\r\n    {\r\nmonth=\"0\"+ String(parseInt(newValue.$M) + 1)\r\n    }\r\n    setdateSelected(newValue.$y+\"-\"+month+\"-\"+newValue.$D)\r\n    console.log(\"date selected\",dateSelected)\r\n    console.log(dataZ[0].data.ouverture)\r\n    console.log(value)\r\n  };\r\n  const [show, setshow] = useState(false)\r\n  const user_id = localStorage.getItem(\"user_id\") || \"\";\r\n  const [ping, setping] = useState(false)\r\n  const dispatch=useDispatch()\r\n  const handleshow = (data)=>{\r\n    console.log(data)\r\n \r\n    setshow(true)\r\n    setel(data)\r\n  }\r\n  const [credentials, setCredentials] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  });\r\n  const submitCreds = () => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/initZcaisse\",\r\n        {\r\n          ...credentials,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        localStorage.setItem(\"user_id\",res.data.user.id)\r\n        dispatch(storeDataz({dataZ:res.data.history}))\r\n       console.log(res.data)\r\n       console.log(dataZ)\r\n      })\r\n     \r\n    }\r\n    const handlereload = ()=>{\r\n      axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getHistoriqueZcaisse\",\r\n        { user_id }\r\n      )\r\n      .then((res) => \r\n      dispatch(storeDataz({dataZ:res.data.allHistorique}))\r\n      )\r\n      .catch((err) => console.log(err));\r\n      console.log(dataZ)\r\n    }\r\n    useEffect(() => {\r\n\r\n      axios\r\n            .post(\r\n              process.env.REACT_APP_API_HOST +\r\n                \":\" +\r\n                process.env.REACT_APP_API_PORT +\r\n                \"/api/getHistoriqueZcaisse\",\r\n              { user_id }\r\n            )\r\n            .then((res) => \r\n            dispatch(storeDataz({dataZ:res.data.allHistorique}))\r\n            )\r\n            .catch((err) => console.log(err));\r\n            console.log(dataZ)\r\n    }, [])\r\n\r\n  \r\n  return (\r\n    <div className=\"zcaisse_body\">\r\n  \r\n      \r\n      {<Modal  show={show} onHide={() => setshow(false)} className=\"modal_ZZ\" >\r\n        <div className='head_zcaisse'>\r\n        <h1>Zcaisse</h1>\r\n        </div>\r\n       \r\n        <Modal.Body  className=\"modals\">\r\n        <div className='pdf_Z' id=\"pdf\">         \r\n       <div style={{border:\"solid 1px\" ,padding:\"1rem\",backgroundColor:\"white\",width:\"95%\",height:\"100%\"}}>            \r\n       <div className='text_body' >\r\n       <div style={{display:\"flex\",justifyContent:'center',alignItmes:\"center\",height:\"4%\"}}>\r\n        <h5  >{el.ouverture}/{el.fermeture}</h5>\r\n        </div>\r\n          {el.cancledOrders?.length!=0?<h5>Commandes Annulés{\"\"}:</h5>:\"\"}\r\n         {el.cancledOrders?.map((o,key)=><div className='cmd_annuler' key={key}>\r\n          <h5>Annuler par {o.rejectedFrom}:</h5>       \r\n{el.cancledOrders.length!=0?o.orderItems.map((i,key)=><div className='item_annuler' key={key}>\r\n\r\n<h5>{i.qt}</h5>\r\n<h5>{i.name}</h5>\r\n</div>\r\n\r\n):\"\"}\r\n\r\n<hr style={{width:\"100%\"}} />\r\n\r\n\r\n\r\n\r\n\r\n         </div>)}\r\n         {el.products?.length!=0?<h5>Liste Des Produits{\"\"}:</h5>:\"\"}\r\n          {el.products?.map((p,key)=><div>\r\n            <div classNam=\"prod_z\">\r\n            <h6 >-{p.name}</h6>\r\n            </div>\r\n\r\n\r\n\r\n</div>)}\r\n\r\n<div>\r\n<hr style={{width:\"100%\"}} />\r\n{el.pay_method?.map((m,key)=><div key={key}>\r\n  <h5>{m.name}:<b style={{marginLeft:\"1rem\"}}>{m.qt}</b></h5>\r\n</div>)}\r\n\r\n<hr style={{width:\"100%\"}} />\r\n<h5>Annuler:<b style={{marginLeft:\"1rem\"}}>{el.cancledOrders?.length}</b></h5>\r\n<h5>Commandes:<b style={{marginLeft:\"1rem\"}}>{el.commandes}</b></h5>\r\n<h5>Ticket Moyen:<b style={{marginLeft:\"1rem\"}}>{el.clients}</b></h5>\r\n<hr style={{width:\"100%\"}} />\r\n\r\n<h5>De Borne:<b style={{marginLeft:\"1rem\"}}>{el.ordersType?.borne}</b></h5>\r\n<h5>Emporter:<b style={{marginLeft:\"1rem\"}}>{el.ordersType?.emporter}</b></h5>\r\n<h5>Sur Place:<b style={{marginLeft:\"1rem\"}}>{el.ordersType?.surPlace}</b></h5>\r\n<h5>Livraison:<b style={{marginLeft:\"1rem\"}}>{el.ordersType?.livraison}</b></h5>\r\n<hr style={{width:\"100%\"}} />\r\n<h5>Ticket Moyen:<b style={{marginLeft:\"1rem\"}}>{el.ticket_moyen}£</b></h5>\r\n<h5>Total TTC:<b style={{marginLeft:\"1rem\"}}>{el.ttc}£</b></h5>\r\n<h5>Total HT:<b style={{marginLeft:\"1rem\"}}>{el.ht}£</b></h5>\r\n<hr style={{width:\"100%\"}} />\r\n<h5>Fond Initial:<b style={{marginLeft:\"1rem\"}}>{el.fond_initial}£</b></h5>\r\n<h5>Fond Final:<b style={{marginLeft:\"1rem\"}}>{el.fond_final}£</b></h5>\r\n          </div>\r\n          </div>\r\n       </div>\r\n        </div>\r\n        \r\n        </Modal.Body>\r\n        <Button variant=\"success\" onClick={() => createPDF()} >\r\n            Telecharger PDF\r\n          </Button>\r\n      </Modal>}\r\n      <div className='Zcaisse_header'>\r\n      <h1>Zcaisse Historiques</h1> \r\n        </div>      \r\n      \r\n     <div className=\"zcaisse_container\">   \r\n     \r\n     <div className='filter_z'>\r\n    \r\n     <LocalizationProvider dateAdapter={AdapterDayjs}>\r\n      <MobileDatePicker\r\n          label=\"Date Zcaisse\"\r\n          inputFormat=\"MM/DD/YYYY\"\r\n          value={value}\r\n          onChange={handleChange}\r\n          renderInput={(params) => <TextField {...params} />}\r\n        />\r\n      </LocalizationProvider>\r\n      <AutorenewSharpIcon fontSize=\"large\" color='inherit' className='relo' onClick={()=>handlereload()}/>\r\n     </div>\r\n\r\n\r\n     <div className='zCaisse'>\r\n     {dataZ.length!=0?dataZ?.filter((el)=>el.data.ouverture.includes(dateSelected)).map((e,key)=>(\r\n      <div className='history' key={key}>\r\n        \r\n        <b>{e.id}</b>\r\n<b>{e.data.ouverture}</b>\r\n<b>{e.data.fermeture}</b>\r\n<b><button style={{backgroundColor:\"#08C18A\",color:\"white\"}} onClick={()=>handleshow(e.data)}>Afficher</button></b>\r\n<b><button style={{backgroundColor:\"transparent\", color:\"#08C18A\"}} onClick={() => handlePrintHistory(e.data)}>imprimer</button></b>\r\n      </div>\r\n      \r\n     )):\"\"} \r\n     </div>\r\n     \r\n      {user_id?\"\":(\r\n        <div className='login_modal'>\r\n      \r\n           <div className='Login_zcaisse'>\r\n          <h2>Login</h2>\r\n<input type=\"text\" onChange={(e)=>setCredentials({...credentials,username:e.target.value,})} placeholder=\"Nom utilisateur\"/>\r\n<input type=\"password\" onChange={(e)=>setCredentials({...credentials,password:e.target.value,})} placeholder=\"Mot de passe\" />\r\n<button onClick={()=>submitCreds()}>se connecter</button>\r\n        </div>\r\n        </div>\r\n       \r\n      )}\r\n     </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Zcaisse","import { BrowserRouter, Routes, Route } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport Home from \"./Screens/Home\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Init from \"./Screens/Init\";\r\nimport Main from \"./Screens/Main\";\r\nimport Backoffice from \"./Screens/Backoffice\";\r\nimport Menu from \"./Screens/Menu\";\r\nimport Caisse from \"./Screens/Caisse\";\r\nimport Avoires from \"./Screens/Avoires\";\r\nimport Cloture from \"./Screens/Cloture\";\r\nimport Test from \"./Screens/Test\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport Checkout from \"./Screens/Checkout\";\r\nimport CheckoutTwo from \"./Screens/CheckoutTwo\";\r\nimport History from \"./Screens/History\";\r\nimport Clients from \"./Screens/Clients\";\r\nimport CalendarScreen from \"./Screens/CalendarScreen\";\r\n\r\nimport io from \"socket.io-client\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setCheckoutChange } from \"./Slices/order\";\r\nimport Swal from \"sweetalert2\";\r\nimport updateSound from \"./Shared/updateorder.wav\";\r\nimport bornSound from \"./Shared/born-sound.mp3\";\r\nimport Zcaisse from \"./Screens/Zcaisse\";\r\n\r\nconst socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\nfunction App() {\r\n  window.addEventListener(\"beforeunload\", (ev) => \r\n{  \r\n    ev.preventDefault();\r\n    return ev.returnValue = 'Tu dois clôturer avant de quitter';\r\n});\r\n  \r\n  const [soundUpdate, setSoundUpdate] = useState(new Audio(updateSound));\r\n  const [audioBorn, setaudioBorn] = useState(new Audio(bornSound));\r\n  const dispatch = useDispatch()\r\n  const user_id =localStorage.getItem(\"user_id\")\r\n   socket.on(`update${user_id}`, (order) => {\r\n    soundUpdate.play()\r\n    if(order.status==\"cooking\"){\r\n    \r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \r\n        \"<h5 >\" +\r\n        `La commande <span style='color:green'>${order.order_id}</span> en préparation` +\r\n        \"</h5>\",\r\n        \r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }else if(order.status==\"ready\"){\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \r\n        \"<h5 >\" +\r\n        `La commande <span style='color:green'>${order.order_id}€</span> et préte` +\r\n        \"</h5>\",\r\n        \r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    } else{\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \r\n        \"<h5 >\" +\r\n        `La commande <span style='color:green'>${order.order_id}€</span> a été annulé` +\r\n        \"</h5>\",\r\n        \r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }\r\n   \r\n     dispatch(setCheckoutChange({order:order}))\r\n    \r\n    })\r\n  \r\n  return (\r\n    <div className=\"App\">\r\n      <Routes>\r\n        <Route exact path=\"/\" element={<Home />} />\r\n        <Route path=\"/init\" element={<Init />} />\r\n        <Route path=\"/main\" element={<Main />} />\r\n        <Route path=\"/menu\" element={<Menu />} />\r\n        <Route path=\"/menu/:order_id\" element={<Menu />} />\r\n        <Route path=\"/caisse\" element={<Caisse />} />\r\n        <Route path=\"/cloture\" element={<Cloture />} />\r\n        <Route path=\"/calendar\" element={<CalendarScreen />} />\r\n        <Route path=\"/history/:type\" element={<History />} />\r\n        <Route path=\"/clients\" element={<Clients />} />\r\n        <Route path=\"/data/zcaisse\" element={<Zcaisse />} />\r\n        <Route path=\"/avoires\" element={<Avoires />} />\r\n        <Route path=\"/backoffice\" element={<Backoffice />} />\r\n        <Route path=\"/clients/:id\" element={<Clients />} />\r\n        \r\n        <Route\r\n          path=\"/checkout2/:table_id/:type/:part\"\r\n          element={<CheckoutTwo />}\r\n        />\r\n         \r\n        <Route path=\"/checkout/:table_id\" element={<Checkout />} />\r\n        <Route path=\"/test\" element={<Test />} />\r\n      </Routes>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport authReducer from \"./Slices/auth\";\r\nimport messageReducer from \"./Slices/message\";\r\nimport dataReducer from \"./Slices/data\";\r\nimport orderReducer from \"./Slices/order\";\r\nimport caisseReducer from \"./Slices/caisse\";\r\nimport { combineReducers } from \"@reduxjs/toolkit\";\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  message: messageReducer,\r\n  data: dataReducer,\r\n  order: orderReducer,\r\n  caisse: caisseReducer,\r\n});\r\nconst persistConfig = {\r\n  key: \"root\",\r\n  version: 1,\r\n  storage,\r\n};\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport const store = configureStore({\r\n  reducer: persistedReducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }),\r\n});\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { store } from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport { persistStore } from \"redux-persist\";\r\nlet persistor = persistStore(store);\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <HashRouter>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <App />\r\n      </PersistGate>\r\n    </HashRouter>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}