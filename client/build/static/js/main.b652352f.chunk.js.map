{"version":3,"sources":["../node_modules/express/lib sync","Slices/message.js","Services/authServices.js","Slices/auth.js","i18/en/index.js","i18/fr/index.js","i18/index.js","Components/LoginModal.js","Components/AuthCard.js","Components/Auth.js","Components/Navi.js","Screens/Home.js","Shared/logo.png","Shared/initbg.mp4","Slices/data.js","Screens/Init.js","Slices/order.js","Components/Tables.js","Components/Zones.js","Shared/bg.jpeg","Shared/loading.gif","Components/NaviBottom.js","Shared/serveur.png","Screens/Main.js","Shared/bgg.png","Components/useLongPress.js","Components/RemiseModal.js","Components/CartMenu.js","Shared/cartbg.png","Components/Category.js","Components/SuppModal.js","Components/Item.js","Components/MenuItems.js","Shared/table.png","Components/Product.js","Screens/Menu.js","Slices/caisse.js","Shared/coin.png","Shared/billet.png","Shared/sound.mp3","Screens/Caisse.js","Components/TicketZ.js","Components/TicketH.js","Screens/Cloture.js","Screens/Test.js","Components/Ticket.js","Shared/aprc.png","Screens/Checkout.js","Screens/CheckoutTwo.js","Shared/cc.png","Shared/delivery.png","Shared/takeout.png","Shared/cash.jpg","Shared/surplace.png","Shared/borne.png","Shared/updateorder.wav","Shared/born-sound.mp3","Screens/History.js","Screens/Clients.js","Screens/CalendarScreen.js","App.js","store.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","messageSlice","createSlice","name","initialState","reducers","setMessage","state","action","message","payload","clearMessage","reducer","actions","authService","login","username","password","axios","post","API_URL","then","response","data","token","console","log","localStorage","setItem","JSON","stringify","tva","address","telephone","logout","removeItem","user","parse","getItem","register","createAsyncThunk","thunkAPI","first_name","last_name","email","AuthService","dispatch","toString","rejectWithValue","isLoggedIn","authSlice","restore","extraReducers","fulfilled","rejected","English","success","verifyUserAndPassword","access","auth","cashier","connect","connecter","reset","freeTable","busytables","newTable","nbrCouverts","validate","backToTable","couverts","artice","price","surplace","tiroir","cancel","added","disconnect","closureHistory","selectDate","print","latestClosure","TotalInit","close","ofCashier","confirm","cashierr","Francais","aded","i18n","use","initReactI18next","init","resources","en","translation","fr","lng","fallbackLng","interpolation","escapeValue","useTranslation","LoginModal","setShowLogin","setClickable","t","useState","input","setInput","layout","keyboard","useRef","myLayout","setMyLayout","caise_open","navigate","useNavigate","useDispatch","useEffect","table","x","final","i","j","randomIndex","Math","floor","random","length","randomItem","splice","push","randomize","className","style","display","icon","faUnlock","color","split","map","marginRight","faTimes","onClick","size","theme","buttonTheme","class","buttons","keyboardRef","r","current","layoutName","default","onChange","onKeyPress","button","justifyContent","marginTop","Button","unwrap","res","Swal","fire","title","showConfirmButton","timer","catch","err","faSignInAlt","faTrash","AuthCard","showLogin","clickable","src","width","height","alt","Auth","users","undefined","Navi","Home","Navbar","bg","variant","fixed","Container","Brand","href","Nav","Link","dataSlice","zones","tables","categories","products","nSteps","orderHistory","clients","tva_mode","storeClients","storeZones","storeTables","storeCategories","storeProducts","storeNSteps","storeOrderHistory","storeTvaMode","updateProduct","prodIndex","findIndex","prod","copy","active","Init","show","msg","alert","setAlert","credentials","setCredentials","logo","target","value","type","placeholder","autocomplete","for","viewBox","stroke","fill","points","x1","y1","x2","y2","process","staff","user_id","currency","is_open","setTimeout","faLockOpen","Alert","orderSlice","orders","checkoutData","currentOrders","selectedTable","client","remarque","orderType","setRemarque","storeSelectedTable","setNbrCouverts","setNewCurrentOrder","order","setNewOrder","ordersCopy","is_supp","qt","setOrderChange","key","deleteOrder","filter","_","index","clearOrders","clearData","addNewcheckoutData","some","order_id","addNewcheckoutDataFromDB","el","orderFromDb","orderItems","item","quantity","taxPrice","order_type","deletecheckoutData","setCheckoutChange","initClient","deleteClientandTable","cancelOrder","forEach","setType","Tables","selectedZone","rowLayout","Array","useSelector","setSelectedTable","showModal","setShowModal","zone_id","find","position","onTableClick","nbr","numero","ppl","nbrePersonne","libre","myorder","one","table_number","status","flexWrap","Table","Modal","onHide","Header","closeButton","Title","fontSize","faUtensils","Body","from","backgroundColor","borderColor","Footer","faCheck","Zones","setSelectedZone","setShow","faBars","right","top","cursor","left","zone","marginLeft","nom","Offcanvas","placement","faDesktop","faUsers","faMotorcycle","faAddressBook","faStickyNote","faCashRegister","faBorderAll","faHistory","NaviBottom","ordersHistory","freeTables","showNote","setShowNote","showHistoryButton","setshowHistoryButton","note","setnote","path","window","location","hash","curr","nom_prenom","Date","date","toISOString","substr","time","getHours","getMinutes","avenir","enCours","annuler","orderNbr","setOrderHistory","orderLoding","setOrderLoding","showHistory","setshowHistory","Table_nbr","setTable_nbr","old","setOld","textorder_id","settextorder_id","prenom","company","code1","code2","etage","interphone","phone","city","Number","now","substring","setClient","handleClose","handleNewOrder","handleGetOrders","caisse_id","customer_id","zboub","handleSelection","selectedClient","toLowerCase","includes","societe","code_1","code_2","adresse","code_postal","ville","Badge","faPlus","Form","Control","borderRadius","alignItems","FormGroup","as","zIndex","textAlign","loading","toFixed","pay_method","faPrint","newOrder","client_id","customer_name","customer_company","customer_tel","customer_adress","paymentType","totalPrice","tvas","kitchen","new","handlePrint","auto","Group","Row","Col","onInputChange","options","min","max","xs","defaultValue","supprimer","faCheckSquare","socket","io","Main","on","sort","a","b","cat_order","category","menuSteps","newData","handleDisconnect","paddingTop","faCalendarAlt","faSignOutAlt","borderLeft","padding","serveur","preventDefault","event","isTouchEvent","touches","useLongPress","onLongPress","shouldPreventDefault","delay","longPressTriggered","setLongPressTriggered","timeout","start","useCallback","addEventListener","passive","clear","shouldTriggerClick","clearTimeout","removeEventListener","onMouseDown","onTouchStart","onMouseUp","onMouseLeave","onTouchEnd","RemiseModal","handleUpdateOrder","orderTo","setOrderTo","setshowRemise","calcOrder","remisePerc","setremisePerc","remise","setremise","setlibre","offert","setoffert","selected","setselected","handleRemise","finalPrice","onChangeInput","Label","onFocus","CartMenu","setconfirmed","confirmed","step","setstep","nsteps","useParams","checkOutData","late_order_id","setlate_order_id","newOrders","setnewOrders","ShowModifyModal","setShowModifyModal","rab_tva","setRab_tva","newCommande","setNewCommande","currentOrder","findProductWithId","valeur","extras","extra","default_quantity","stepItems","Object","dbPrice","item_tva","is_alcool","tva_alcool","calcTotal","tot","perc","handlePlusOrMinus","sign","handleExtra","extraKey","handlePlaceOrder","server","from_kiosk","emit","how_paid","reduce","rv","getTime","handleFinish","renderHTML","rawHTML","React","createElement","dangerouslySetInnerHTML","__html","longPressEvent","showRemise","backgorunImage","suppSelected","at","slots","entries","checked","faMinusCircle","faPlusCircle","fontWeight","bottom","borderBottom","backgroundImage","image","objectFit","paddingLeft","fontFamily","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","result","isConfirmed","Spinner","animation","cancelButtonText","faire","content","isDenied","timeRejection","rejectedFrom","dialogClassName","description","isComp","striped","bordered","slotKey","handleSlotSelect","nstep","menu_id","nom_etape","choice","slot","STP","max_select","handleStepSelect","Category","setSelectedCategory","selectedCategory","cat","background","picture","SuppModal","orderWithSupp","handleAddOrderWithSupp","handleaAddDrink","drinks","setShowSupplements","setSuppSelected","setDrinks","page","setPage","supplement","sauces","sauce","faMinusSquare","drink","faAngleDoubleRight","faAngleDoubleLeft","Item","product","showPreview","setShowPreview","showSupplements","newProduct","setnewProduct","showstock","setshowstock","setTva","cat_id","is_cold","is_hot","drink_id","suaces_ids","setOrderWithSupp","supplements","saucesIds","filtred","handleAlert","toast","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","Carousel","prod_id","MenuItems","Product","Menu","shows","setShows","params","toLocaleTimeString","setDate","level","charging","timerID","setInterval","tick","clearInterval","replace","setLayout","setFilter","faSearch","tableIcon","paddingRight","caisseSlice","monnaies","initialValue","setMonnaies","clearcaisse","caisse","setInitialValue","montant","Caisse","Audio","aud","audio","play","caisse_open","historique_monnaie","setTotal","ping","setping","setSelected","real","lay","setlay","newarr","calcMontant","dateStr","getMonth","slice","getDate","getFullYear","getSeconds","text","coin","FormControl","billet","historiquePrint","caisse_initial_value","handleOpenCaisse","handleOpenCaisse30","TicketZ","recap","selectedDate","tvasum","ouvDate","lastOuverture","ouvTime","nowTime","ouverture","today","Restaurant","clientGroups","total","logs","title_log","groups","acc","TicketH","zHistory","restaurant","impression","fermeture","commandes","ticket_moyen","cancledOrders","prix","ht","ttc","fond_initial","fond_final","Cloture","annules","completd","paymentsInDb","finalValue","setrecap","setpage","setdata","setzHistory","previewTicket","setPreviewTicket","previewZ","setPreviewZ","previewHistory","setPreviewHistory","history","setHistory","findProduct","allHistorique","TODAY","bodyFormData","FormData","append","method","url","headers","rows","col1","item_id","col2","col3","col4","overflow","commandesTotal","formatValue","chiffre","DataGrid","pageSize","paginationMode","onPageChange","rowCount","columns","field","headerName","orderTypes","surPlace","livraison","emporter","borne","elementt","sum","ticket","newTva","E","PrintData","ordersType","handleCloseCaisse","showZcaisse","Test","dataLocal","selectedProduct","setselectedProduct","setStep","product_id","prods","Ticket","thisDate","table_id","toShowOrder","settoShowOrder","setrestaurant","tvass","element","fluid","marginBottom","flexDirection","steps","amount","abs","part","Checkout","load","setLoad","ordersData","thisOrder","o","orderDate","curr_date","curr_month","curr_year","curr_hour","curr_min","showPay","setShowPay","accompte","setPart","typeRepart","settypeRepart","setpaymentType","setAmount","amountPaid","setamountPaid","notefrais","setnotefrais","coupon","setCoupon","payments","setpayments","handleVerifyCoupon","paidamount","couponInDb","discount","expires_at","handleFinal","handleExit","handleAddition","restAvoir","amountss","boxShadow","faPhone","faMapMarkerAlt","faCircle","hover","align","faEdit","borderRight","faAngleLeft","faAngleRight","faBorderNone","onSubmit","readOnly","controlId","Select","v","stringValue","locale","parts","toLocaleString","unshift","String","RegExp","numberFromLocaleString","Check","label","CheckoutTwo","theseOrders","settheseOrders","list","setList","setPing","getkeyborad","setkeyborad","oredertopay","setordertopay","orederpartage","setorederpartage","getclient","partageorder","newObj","assign","ids","listData","vs","arryofswitch","pricepart","ts","isAllZero","every","handleRepart","repatir","tax","sums","indexs","sum2","index1","element1","y","onDragEnd","source","destination","sInd","droppableId","dInd","items","startIndex","endIndex","removed","reorder","newState","droppableSource","droppableDestination","sourceClone","destClone","move","ind","provided","snapshot","ref","innerRef","isDraggingOver","droppableProps","draggableId","draggableProps","dragHandleProps","isDragging","draggableStyle","userSelect","grid","margin","startIcon","Disabled","c","History","bornSound","selectedOrder","setSelectedOrder","myTime","handleEditOrder","clone","updateSound","takeout","delivery","toOrder","handlePreview","faGlobe","Set","words","pay","editClient","setEditClient","showEdit","setShowEdit","search","setSearch","cash","cc","CalendarScreen","App","soundUpdate","exact","Clients","rootReducer","combineReducers","authReducer","messageReducer","dataReducer","orderReducer","caisseReducer","persistConfig","version","storage","persistedReducer","persistReducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","render","document","getElementById"],"mappings":"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","file":"static/js/main.b652352f.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 447;","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {};\r\n\r\nconst messageSlice = createSlice({\r\n  name: \"message\",\r\n  initialState,\r\n  reducers: {\r\n    setMessage: (state, action) => {\r\n      return { message: action.payload };\r\n    },\r\n    clearMessage: () => {\r\n      return { message: \"\" };\r\n    },\r\n  },\r\n});\r\n\r\nconst { reducer, actions } = messageSlice;\r\n\r\nexport const { setMessage, clearMessage } = actions;\r\nexport default reducer;\r\n","import axios from \"axios\";\r\n\r\nconst API_URL =\r\n  process.env.REACT_APP_API_HOST +\r\n  \":\" +\r\n  process.env.REACT_APP_API_PORT +\r\n  \"/api/\";\r\n\r\n// const register = (first_name, last_name, email, password) => {\r\n//   return axios.post(API_URL + \"register\", {\r\n//     first_name,\r\n//     last_name,\r\n//     email,\r\n//     password,\r\n//   });\r\n// };\r\n\r\nconst login = (username, password) => {\r\n  return axios\r\n    .post(API_URL + \"login\", {\r\n      username,\r\n      password,\r\n    })\r\n    .then((response) => {\r\n      if (response.data.token) {\r\n        console.log(response.data);\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data.token));\r\n        localStorage.setItem(\"username\", response.data.username);\r\n        localStorage.setItem(\"tva\", response.data.tva);\r\n        localStorage.setItem(\"address\", response.data.address);\r\n        localStorage.setItem(\"telephone\", response.data.telephone);\r\n      }\r\n\r\n      return response.data;\r\n    });\r\n};\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem(\"user\");\r\n};\r\n\r\nconst authService = {\r\n  login,\r\n  logout,\r\n};\r\n\r\nexport default authService;\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { setMessage } from \"./message\";\r\n\r\nimport AuthService from \"../Services/authServices\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\nexport const register = createAsyncThunk(\r\n  \"auth/register\",\r\n  async ({ first_name, last_name, email, password }, thunkAPI) => {\r\n    try {\r\n      const response = await AuthService.register(\r\n        first_name,\r\n        last_name,\r\n        email,\r\n        password\r\n      );\r\n      console.log(response);\r\n      thunkAPI.dispatch(setMessage(response.data.message));\r\n      return response.data;\r\n    } catch (error) {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n      thunkAPI.dispatch(setMessage(message));\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  }\r\n);\r\n\r\nexport const login = createAsyncThunk(\r\n  \"auth/login\",\r\n  async ({ username, password }, thunkAPI) => {\r\n    try {\r\n      const data = await AuthService.login(username, password);\r\n      console.log(data);\r\n      return { user: data };\r\n    } catch (error) {\r\n      const message =\r\n        (error.response &&\r\n          error.response.data &&\r\n          error.response.data.message) ||\r\n        error.message ||\r\n        error.toString();\r\n      thunkAPI.dispatch(setMessage(message));\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n  }\r\n);\r\n\r\nexport const logout = createAsyncThunk(\"auth/logout\", async () => {\r\n  await AuthService.logout();\r\n});\r\n\r\nconst initialState = user\r\n  ? { isLoggedIn: true, user }\r\n  : { isLoggedIn: false, user: null };\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    restore: (state, action) => {\r\n      state.isLoggedIn = true;\r\n      state.user = action.payload.user;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [register.fulfilled]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n    },\r\n    [register.rejected]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n    },\r\n    [login.fulfilled]: (state, action) => {\r\n      state.isLoggedIn = true;\r\n      state.user = action.payload.user;\r\n    },\r\n    [login.rejected]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n      state.user = null;\r\n    },\r\n    [logout.fulfilled]: (state, action) => {\r\n      state.isLoggedIn = false;\r\n      state.user = null;\r\n    },\r\n  },\r\n});\r\n\r\nconst { reducer } = authSlice;\r\nexport const { restore } = authSlice.actions;\r\nexport default reducer;\r\n","const English = {\r\n  success: \"success\",\r\n  verifyUserAndPassword: \"verify username and password\",\r\n  username: \"username\",\r\n  password: \"password\",\r\n  access: \"access\",\r\n  auth: \"authentication\",\r\n  cashier: \"cashier\",\r\n  connect: \"connect\",\r\n  connecter: \"Login \",\r\n  reset: \"reset\",\r\n  freeTable: \"free table\",\r\n  busytables: \"busy table\",\r\n  newTable: \"new table\",\r\n  nbrCouverts: \"number of person\",\r\n  validate: \"validate\",\r\n  backToTable: \"back to tables\",\r\n  couverts: \"person\",\r\n  artice: \"article\",\r\n  price: \"price\",\r\n  surplace: \"Direct \",\r\n  tiroir: \"cash register\",\r\n  cancel: \"cancel\",\r\n  added: \"added\",\r\n  disconnect: \"disconnect\",\r\n  closureHistory: \"closure history\",\r\n  selectDate: \"select a date\",\r\n  print: \"print\",\r\n  latestClosure: \"latest closure\",\r\n  TotalInit: \"initial cashier total\",\r\n  close: \"close\",\r\n  ofCashier: \"of cash register\",\r\n  confirm: \"Confirm\",\r\n  cashierr: \"Cash Register\",\r\n};\r\nexport default English;\r\n","const Francais = {\r\n  success: \"success\",\r\n  verifyUserAndPassword: \"verifier utilisateur et mot de passe\",\r\n  username: \"utilisateur\",\r\n  password: \"mot de passe\",\r\n  access: \"acceder\",\r\n  auth: \"authentification\",\r\n  cashier: \"caisse\",\r\n  connect: \"Connexion\",\r\n  connecter: \"Se connecter\",\r\n  reset: \"reset\",\r\n  freeTable: \"table libre\",\r\n  busytables: \"table en cours\",\r\n  newTable: \"Nouvelle Table\",\r\n  nbrCouverts: \"nombre de couverts\",\r\n  validate: \"valider\",\r\n  backToTable: \"retour Au Tables\",\r\n  couverts: \"couverts\",\r\n  artice: \"Nom\",\r\n  price: \"prix\",\r\n  surplace: \"sur place \",\r\n  tiroir: \"Tiroir\",\r\n  cancel: \"Annuler\",\r\n  aded: \"ajouter\",\r\n  disconnect: \"dconnexion\",\r\n  closureHistory: \"historique de cltures\",\r\n  selectDate: \"slctionner une date\",\r\n  print: \"imprimer\",\r\n  latestClosure: \"Derniere Clture\",\r\n  TotalInit: \"total de caisse initial\",\r\n  close: \"clturer\",\r\n  ofCashier: \"de caisse\",\r\n  cashierr: \"Caisse\",\r\n  confirm: \"OK\",\r\n};\r\nexport default Francais;\r\n","import i18n from \"i18next\";\r\nimport { useTranslation, initReactI18next } from \"react-i18next\";\r\nimport English from \"./en\";\r\nimport Francais from \"./fr\";\r\ni18n.use(initReactI18next).init({\r\n  resources: {\r\n    en: {\r\n      translation: English,\r\n    },\r\n    fr: {\r\n      translation: Francais,\r\n    },\r\n  },\r\n  lng: \"fr\",\r\n  fallbackLng: \"en\",\r\n  interpolation: {\r\n    escapeValue: false,\r\n  },\r\n});\r\nexport default useTranslation;\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCogs,\r\n  faSignInAlt,\r\n  faTimes,\r\n  faTrash,\r\n  faUnlock,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { login } from \"../Slices/auth\";\r\nimport { useNavigate } from \"react-router\";\r\nimport useTranslation from \"./../i18\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst LoginModal = ({ user, setShowLogin, setClickable }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const [input, setInput] = useState(\"\");\r\n  const [layout, setLayout] = useState(\"default\");\r\n  const keyboard = useRef();\r\n  const [myLayout, setMyLayout] = useState([]);\r\n\r\n  let caise_open = localStorage.getItem(\"caisse_open\");\r\n\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const handleLogin = () => {\r\n    localStorage.setItem(\"username\", user);\r\n    dispatch(login({ username: user, password: input }))\r\n      .unwrap()\r\n      .then((res) => {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: `Connecte`,\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n        caise_open == true ? navigate(\"/main\") : navigate(\"/caisse\");\r\n      })\r\n      .catch((err) => {\r\n        Swal.fire({\r\n          icon: \"error\",\r\n          title: `Verifier Mot de passe`,\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n      });\r\n  };\r\n  const randomize = () => {\r\n    let table = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \" \", \" \"];\r\n    let x = \"\";\r\n    let final = [];\r\n\r\n    let i = 0;\r\n    let j = 0;\r\n    do {\r\n      do {\r\n        let randomIndex = Math.floor(Math.random() * table.length);\r\n        var randomItem = table[randomIndex];\r\n        if (randomItem != \" \") {\r\n          x = x + randomItem + \" \";\r\n        } else {\r\n          x = x + randomItem;\r\n        }\r\n\r\n        i += 1;\r\n        table.splice(randomIndex, 1);\r\n        console.log(\"inner\");\r\n      } while (i != 3);\r\n      final.push(x);\r\n      x = \"\";\r\n      i = 0;\r\n      j += 1;\r\n      console.log(\"outter\");\r\n    } while (j != 4);\r\n    console.log(final);\r\n    setMyLayout([...final]);\r\n  };\r\n  const onChange = (input) => {\r\n    if (input.length < 12) {\r\n      setInput(input);\r\n    }\r\n    console.log(\"Input changed\", input);\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n  };\r\n\r\n  const onChangeInput = (event) => {\r\n    const input = event.target.value;\r\n    setInput(input);\r\n    keyboard.current.setInput(input);\r\n  };\r\n  useEffect(() => {\r\n    randomize();\r\n  }, []);\r\n  return (\r\n    <div className=\"login_container\">\r\n      <div style={{ display: \"flex\" }}>\r\n        <div className=\"mdp_container\">\r\n          <FontAwesomeIcon icon={faUnlock} className=\"mdp_icon\" color=\"white\" />\r\n          <div className=\"input\">\r\n            {input.split(\"\").map((e) => (\r\n              <h1 style={{ color: \"white\" }}>*</h1>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <FontAwesomeIcon\r\n          style={{ marginRight: \"1.2rem\" }}\r\n          icon={faTimes}\r\n          onClick={() => {\r\n            setShowLogin(false);\r\n            setClickable(true);\r\n          }}\r\n          size=\"3x\"\r\n        />\r\n      </div>\r\n\r\n      <Keyboard\r\n        theme={\"hg-theme-default hg-layout-default myTheme\"}\r\n        buttonTheme={[\r\n          {\r\n            class: \"key_btn\",\r\n            buttons: \"0 1 2 3 4 5 6 7 8 9  \",\r\n          },\r\n          {\r\n            class: \"hg-highlight\",\r\n            buttons: \"Q q\",\r\n          },\r\n        ]}\r\n        keyboardRef={(r) => (keyboard.current = r)}\r\n        layoutName={layout}\r\n        layout={{\r\n          default: myLayout,\r\n        }}\r\n        onChange={onChange}\r\n        onKeyPress={onKeyPress}\r\n      />\r\n\r\n      <div\r\n        style={{ display: \"flex\", justifyContent: \"center\", marginTop: \"3rem\" }}\r\n      >\r\n        <Button className=\"my_btn x5\" onClick={() => handleLogin()}>\r\n          <FontAwesomeIcon\r\n            icon={faSignInAlt}\r\n            size=\"1x\"\r\n            color=\"#0dcaf0\"\r\n            style={{ marginRight: \"0.5rem\" }}\r\n          />\r\n          {t(\"connecter\")}\r\n        </Button>\r\n        <Button\r\n          className=\"my_btn x5\"\r\n          onClick={() => {\r\n            setInput(\"\");\r\n            keyboard.current.setInput(\"\");\r\n          }}\r\n        >\r\n          <FontAwesomeIcon\r\n            icon={faTrash}\r\n            size=\"1x\"\r\n            color=\"#0dcaf0\"\r\n            style={{ marginRight: \"0.5rem\" }}\r\n          />\r\n          {t(\"cancel\")}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginModal;\r\n","import React, { useState } from \"react\";\r\nimport LoginModal from \"./LoginModal\";\r\nimport useTranslation from \"./../i18\";\r\n\r\n\r\nconst AuthCard = ({ user }) => {\r\n  const { t } = useTranslation();\r\n  const [showLogin, setShowLogin] = useState(false);\r\n  const [clickable, setClickable] = useState(true);\r\n\r\n  return (\r\n    <div\r\n      className=\"auth_card\"\r\n      onClick={() => {\r\n        if (clickable == true) {\r\n          setShowLogin(!showLogin);\r\n          setClickable(false);\r\n        }\r\n      }}\r\n    >\r\n      <span>\r\n        <img src=\"http://141.94.77.9/caisse/icons/waiter.png\" width=\"128px\" height=\"128px\" alt=\"\" />\r\n      </span>\r\n      <h6>{user}</h6>\r\n      {showLogin && (\r\n        <LoginModal\r\n          user={user}\r\n          setShowLogin={setShowLogin}\r\n          setClickable={setClickable}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthCard;\r\n","import React, { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport AuthCard from \"./AuthCard\";\r\nimport useTranslation from \"./../i18\";\r\n\r\nconst Auth = () => {\r\n  const { t } = useTranslation();\r\n  let users = localStorage.getItem(\"staff\")?.split(\",\") || [];\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (users[0] == undefined) {\r\n      navigate(\"/init\");\r\n    }\r\n  }, []);\r\n  return (\r\n    <div className=\"auth_window\">\r\n      <div style={{ display: \"flex\" }}>\r\n        {users.map((user) => (\r\n          <AuthCard user={user} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","import React from \"react\";\r\n\r\nimport useTranslation from \"./../i18\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport { faFingerprint } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Navi = ({ title }) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"my_navbar\">\r\n      <h4 className=\"logo\">\r\n         \r\n        {t(`${title}`)}\r\n      </h4>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navi;\r\n","import React, { useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport Auth from \"../Components/Auth\";\r\nimport Navi from \"../Components/Navi\";\r\nimport \"./Styles.css\";\r\nimport axios from \"axios\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div className=\"my_container\">\r\n      <Navi title=\"connect\" />\r\n      <Auth />\r\n      <Navbar bg=\"light\" variant=\"light\" fixed=\"bottom\">\r\n        <Container>\r\n          <Navbar.Brand href=\"#home\">\r\n            Tous droits reserves <b>CAISSECONNECT.FR</b>  2022\r\n          </Navbar.Brand>\r\n          <Nav className=\"me-auto\">\r\n            <Nav.Link href=\"#home\"></Nav.Link>\r\n          </Nav>\r\n        </Container>\r\n      </Navbar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","export default __webpack_public_path__ + \"static/media/logo.3c484734.png\";","export default __webpack_public_path__ + \"static/media/initbg.11e4f645.mp4\";","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nconst initialState = {\r\n  zones: [],\r\n  tables: [],\r\n  categories: [],\r\n  products: [],\r\n  nSteps: [],\r\n  orderHistory: [],\r\n  clients: [],\r\n  tva_mode: [],\r\n};\r\n\r\nconst dataSlice = createSlice({\r\n  name: \"data\",\r\n  initialState,\r\n  reducers: {\r\n    storeClients: (state, action) => {\r\n      state.clients = action.payload.clients;\r\n    },\r\n    storeZones: (state, action) => {\r\n      state.zones = action.payload.zones;\r\n    },\r\n    storeTables: (state, action) => {\r\n      state.tables = action.payload.tables;\r\n    },\r\n    storeCategories: (state, action) => {\r\n      state.categories = action.payload.categories;\r\n    },\r\n    storeProducts: (state, action) => {\r\n      state.products = action.payload.products;\r\n    },\r\n    storeNSteps: (state, action) => {\r\n      state.nSteps = action.payload.nSteps;\r\n    },\r\n    storeOrderHistory: (state, action) => {\r\n      state.orderHistory = action.payload.orderHistory;\r\n    },\r\n    storeTvaMode: (state, action) => {\r\n      state.tva_mode = action.payload.tva_mode;\r\n    },\r\n    updateProduct: (state, action) => {\r\n      let prodIndex = state.products.findIndex(\r\n        (prod) => prod.id == action.payload.id\r\n      );\r\n      let copy = [...state.products];\r\n      copy[prodIndex] = { ...copy[prodIndex], active: 0 };\r\n      state.products = copy;\r\n    },\r\n  },\r\n});\r\n\r\nconst { reducer } = dataSlice;\r\nexport const {\r\n  storeZones,\r\n  storeTables,\r\n  storeCategories,\r\n  storeProducts,\r\n  storeNSteps,\r\n  storeOrderHistory,\r\n  storeClients,\r\n  updateProduct,\r\n  storeTvaMode,\r\n} = dataSlice.actions;\r\nexport default reducer;\r\n","import React, { useState } from \"react\";\r\nimport { Container, Form, Button, Alert, FloatingLabel } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router\";\r\nimport useTranslation from \"./../i18\";\r\nimport video from \"./../Shared/initbg.mp4\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { faLockOpen } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { storeClients } from \"../Slices/data\";\r\nconst Init = () => {\r\n  const dispatch = useDispatch();\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const [alert, setAlert] = useState({ show: false, variant: \"\", msg: \"\" });\r\n  const [credentials, setCredentials] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const submitCreds = () => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/init\",\r\n        {\r\n          ...credentials,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        localStorage.setItem(\"staff\", res.data.staff);\r\n        localStorage.setItem(\"user_id\", res.data.user_id);\r\n        localStorage.setItem(\"currency\", res.data.currency);\r\n        dispatch(storeClients({ clients: res.data.clients }));\r\n        setAlert({ show: true, msg: t(\"success\"), variant: \"success\" });\r\n        axios\r\n          .post(\r\n            process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/getCaisse\",\r\n            {\r\n              user_id: res.data.user_id,\r\n            }\r\n          )\r\n          .then((res) => {\r\n            localStorage.setItem(\"caisse_id\", res.data.id);\r\n            localStorage.setItem(\r\n              \"caisse_open\",\r\n              res.data.is_open == true ? 1 : 0\r\n            );\r\n          });\r\n        setTimeout(() => {\r\n          navigate(\"/\");\r\n        }, 1000);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        localStorage.removeItem(\"staff\");\r\n        setAlert({\r\n          show: true,\r\n          msg: t(\"verifyUserAndPassword\"),\r\n          variant: \"danger\",\r\n        });\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"authincation h-100 c\">\r\n      <div className=\"container h-100\">\r\n        <div className=\"row justify-content-center h-100 align-items-center\">\r\n          <div className=\"col-md-6\">\r\n            <div className=\"authincation-content\">\r\n              <div className=\"row no-gutters\">\r\n                <div className=\"col-xl-12\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-5 mx-auto top\">\r\n                      <br />\r\n                      <div className=\"text-center \">\r\n                        <img\r\n                          className=\"logo-compact \"\r\n                          src={logo}\r\n                          width=\"100%\"\r\n                          alt=\"\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"auth-form\">\r\n                    <h4 className=\"text-center mb-4\">\r\n                      Connectez-vous  votre compte\r\n                    </h4>\r\n                    <form>\r\n                      <div className=\"form-group\">\r\n                        <label className=\"mb-1 pull-left\">\r\n                          <strong>{t(\"username\")}</strong>\r\n                        </label>\r\n                        <input\r\n                          onChange={(e) =>\r\n                            setCredentials({\r\n                              ...credentials,\r\n                              username: e.target.value,\r\n                            })\r\n                          }\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Nom d'utilisateur\"\r\n                          autocomplete=\"off\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-group\">\r\n                        <label className=\"mb-1 pull-left\">\r\n                          <strong>{t(\"password\")}</strong>\r\n                        </label>\r\n                        <input\r\n                          onChange={(e) =>\r\n                            setCredentials({\r\n                              ...credentials,\r\n                              password: e.target.value,\r\n                            })\r\n                          }\r\n                          type=\"password\"\r\n                          className=\"form-control\"\r\n                          placeholder=\"Mot de passe\"\r\n                          autocomplete=\"new-password\"\r\n                          v-model=\"User.MotDePasse\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"form-row d-flex justify-content-between mt-4 mb-2\">\r\n                        <div className=\"form-group\">\r\n                          <div className=\"custom-control custom-checkbox ml-1\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              className=\"custom-control-input\"\r\n                              id=\"basic_checkbox_1\"\r\n                            />\r\n                            <label\r\n                              className=\"custom-control-label\"\r\n                              for=\"basic_checkbox_1\"\r\n                            >\r\n                              Gardez-moi connect\r\n                            </label>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div\r\n                        className=\"alert alert-danger alert-dismissible fade show hidden\"\r\n                        id=\"error\"\r\n                      >\r\n                        <svg\r\n                          viewBox=\"0 0 24 24\"\r\n                          width=\"24\"\r\n                          height=\"24\"\r\n                          stroke=\"currentColor\"\r\n                          stroke-width=\"2\"\r\n                          fill=\"none\"\r\n                          stroke-linecap=\"round\"\r\n                          stroke-linejoin=\"round\"\r\n                          className=\"mr-2\"\r\n                        >\r\n                          <polygon points=\"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2\"></polygon>\r\n                          <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                          <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n                        </svg>\r\n                        <strong id=\"errorMessage\"></strong>\r\n                      </div>\r\n                    </form>\r\n                    <div className=\"text-center col-12\">\r\n                      <Button\r\n                        variant=\"warning\"\r\n                        size=\"lg\"\r\n                        onClick={() => submitCreds()}\r\n                      >\r\n                        <FontAwesomeIcon icon={faLockOpen} /> Se connecter\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {alert.show ? (\r\n              <Alert variant={alert.variant}>{alert.msg}</Alert>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Init;\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  orders: [],\r\n  checkoutData: [],\r\n  currentOrders: [],\r\n  selectedTable: {},\r\n  client: {},\r\n  nbrCouverts: 0,\r\n  remarque: \"\",\r\n  orderType:\"emporter\"\r\n};\r\n\r\n\r\n\r\nconst orderSlice = createSlice({\r\n  name: \"order\",\r\n  initialState,\r\n  reducers: {\r\n    setRemarque: (state, action) => {\r\n      state.remarque = action.payload.remarque;\r\n    },\r\n    storeSelectedTable: (state, action) => {\r\n      console.log(action.payload);\r\n      state.selectedTable = action.payload.selectedTable;\r\n    },\r\n    setNbrCouverts: (state, action) => {\r\n      state.nbrCouverts = action.payload.nbrCouverts;\r\n    },\r\n    setNewCurrentOrder: (state, action) => {\r\n      state.currentOrders = [...state.currentOrders, action.payload.order];\r\n    },\r\n    setNewOrder: (state, action) => {\r\n      let i = state.orders.findIndex(\r\n        (order) => order.id == action.payload.order.id\r\n      );\r\n      let ordersCopy = [...state.orders];\r\n     \r\n      if(i!=-1 && !action.payload.order.is_supp){\r\n        ordersCopy[i]={...ordersCopy[i],qt:ordersCopy[i].qt+1}\r\n        state.orders=[...ordersCopy]\r\n      }else{\r\n        state.orders = [...state.orders, action.payload.order];\r\n      }\r\n    \r\n   \r\n    },\r\n    setOrderChange: (state, action) => {\r\n      let i = state.orders.findIndex(\r\n        (order) => order.id == action.payload.order.id\r\n      );\r\n      let ordersCopy = [...state.orders];\r\n\r\n      ordersCopy[action.payload.key] = action.payload.order;\r\n      state.orders = [...ordersCopy];\r\n    },\r\n    deleteOrder: (state, action) => {\r\n      state.orders = state.orders.filter(\r\n        (_, index) => index != action.payload.key\r\n      );\r\n    },\r\n    clearOrders: (state, action) => {\r\n      state.orders = [];\r\n    },\r\n    clearData: (state, action) => {\r\n      state.checkoutData = [];\r\n    },\r\n    addNewcheckoutData: (state, action) => {\r\n      let check = state.checkoutData.some(\r\n        (e) => e.order_id == action.payload.order.order_id\r\n      );\r\n      if(!check){\r\n        state.checkoutData = [...state.checkoutData, action.payload.order];\r\n        \r\n      }   \r\n      \r\n     \r\n    },\r\n    addNewcheckoutDataFromDB: (state, action) => {\r\n      let i = state.checkoutData.findIndex(\r\n        (el) => el.order_id == action.payload.order.order_id\r\n      );\r\n     \r\n      \r\n      if (i == -1) {\r\n        let orderFromDb = action.payload.order.orderItems.map(item=>{\r\n          return item = {...item,qt:item.quantity}\r\n         \r\n        })\r\n        let taxPrice = action.payload.order.tva*action.payload.order.price/100\r\n        \r\n        state.checkoutData = [...state.checkoutData, {...action.payload.order,orderItems:orderFromDb,orderType:action.payload.order.order_type,taxPrice:taxPrice}];\r\n      }\r\n    },\r\n    deletecheckoutData: (state, action) => {\r\n      state.checkoutData = state.checkoutData.filter(\r\n        (x) => x.order_id != action.payload.order_id\r\n      );\r\n    },\r\n    setCheckoutChange: (state, action) => {\r\n      let i = state.checkoutData.findIndex(\r\n        (order) => order.order_id == action.payload.order.order_id\r\n      );\r\n      let ordersCopy = [...state.checkoutData];\r\n      ordersCopy[i] = action.payload.order;\r\n      state.checkoutData = [...ordersCopy];\r\n    },\r\n    initClient: (state, action) => {\r\n     \r\n      state.client = action.payload.client;\r\n    },\r\n    deleteClientandTable: (state, action) => {\r\n      state.client = {};\r\n      state.selectedTable = {};\r\n    },\r\n    cancelOrder:(state,action)=>{\r\n      \r\n      let x=[...state.checkoutData]\r\n      x.forEach(e=>{\r\n        if ( e.order_id==action.payload.order_id){\r\n          e=action.payload\r\n      \r\n          state.checkoutData=[]\r\n        }\r\n        \r\n      })\r\n      \r\n    },\r\n    setType :(state,action)=>{\r\n      state.orderType = action.payload\r\n    }\r\n  },\r\n});\r\n\r\nconst { reducer } = orderSlice;\r\nexport const {\r\n  storeSelectedTable,\r\n  setNbrCouverts,\r\n  setNewOrder,\r\n  setOrderChange,\r\n  deleteOrder,\r\n  addNewcheckoutData,\r\n  clearOrders,\r\n  deletecheckoutData,\r\n  initClient,\r\n  deleteClientandTable,\r\n  setNewCurrentOrder,\r\n  setCheckoutChange,\r\n  addNewcheckoutDataFromDB,\r\n  setRemarque,\r\n  cancelOrder,\r\n  clearData,\r\n  setType\r\n} = orderSlice.actions;\r\nexport default reducer;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Button, Modal, Table } from \"react-bootstrap\";\r\nimport useTranslation from \"./../i18\";\r\nimport { initClient, setType, storeSelectedTable } from \"../Slices/order\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport { faCheck, faUtensils } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst Tables = ({ selectedZone }) => {\r\n  const { t } = useTranslation();\r\n  let rowLayout = [...Array(12).keys()];\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const orders = useSelector((state) => state.order.checkoutData);\r\n  const [selectedTable, setSelectedTable] = useState({});\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [ppl, setPpl] = useState(0);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const table = (e) => {\r\n    return tables\r\n      .filter((t) => t.zone_id == selectedZone)\r\n      .find((table) => table.position == e);\r\n  };\r\n  const onTableClick = (e) => {\r\n    if (table(e) != undefined && table(e).active != 0) {\r\n      setSelectedTable({\r\n        id: table(e).id,\r\n        nbr: table(e).numero,\r\n        ppl: table(e).nbrePersonne,\r\n        libre: table(e).libre,\r\n        nbrCouverts: 1,\r\n      });\r\n      if (table(e).libre == false) {\r\n        let myorder = orders.filter(\r\n          (one) => one.table_number == table(e).id && one.status!=\"completed\"\r\n        )[0];\r\n\r\n        navigate(`/checkout/${myorder.order_id}`);\r\n      } else {\r\n        setShowModal(true);\r\n      }\r\n    }\r\n  };\r\n  const toMenu = () => {\r\n    setShowModal(false);\r\n    console.log(selectedTable);\r\n    dispatch(storeSelectedTable({ selectedTable }));\r\n    dispatch(initClient({ client: { type: \"surplace\" } }));\r\n    dispatch(setType(\"surplace\"))\r\n    setTimeout(() => {\r\n      navigate(\"/menu\");\r\n    }, 300);\r\n  };\r\n\r\n  const handleCheckout = () => {\r\n    navigate(`/checkout/${selectedTable.id}`);\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginTop: \"1rem\" }}>\r\n      <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n        <Table style={{  }}>\r\n          <tbody>\r\n            <tr>\r\n              {rowLayout.map((e) => (\r\n                <td>\r\n                  <Button \r\n                    className={\r\n                      table(e)?.type == \"rond\" ? \"table_btn round\" : \"table_btn\" \r\n                    }\r\n                    variant={\r\n                      table(e)\r\n                        ? table(e)?.active\r\n                          ? table(e)?.libre\r\n                            ? \"success\"\r\n                            : \"danger\"\r\n                          : \"secondary\"\r\n                        : \"dark\"\r\n                    }\r\n                    onClick={() => onTableClick(e)}\r\n                  >\r\n                    {table(e)?.numero}\r\n                  </Button>\r\n                </td>\r\n              ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 12)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 24)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 36)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 48)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n            <tr>\r\n              {rowLayout\r\n                .map((x) => x + 60)\r\n                .map((e) => (\r\n                  <td>\r\n                    <Button\r\n                      className={\r\n                        table(e)?.type == \"rond\"\r\n                          ? \"table_btn round\"\r\n                          : \"table_btn\"\r\n                      }\r\n                      variant={\r\n                        table(e)\r\n                          ? table(e)?.active\r\n                            ? table(e)?.libre\r\n                              ? \"success\"\r\n                              : \"danger\"\r\n                            : \"secondary\"\r\n                          : \"dark\"\r\n                      }\r\n                      onClick={() => onTableClick(e)}\r\n                    >\r\n                      {table(e)?.numero}\r\n                    </Button>\r\n                  </td>\r\n                ))}\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n      </div>\r\n      <Modal show={showModal} onHide={() => setShowModal(false)}>\r\n        {selectedTable.libre == true ? (\r\n          <>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>\r\n                <h5 style={{ fontSize: \"24px\" }}>\r\n                  <FontAwesomeIcon\r\n                    icon={faUtensils}\r\n                    style={{ marginRight: \"1rem\" }}\r\n                  />\r\n                  {t(\"newTable\")}\r\n                </h5>\r\n              </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              {t(\"nbrCouverts\")}\r\n              {Array.from({ length: selectedTable.ppl }, (_, i) => i + 1).map(\r\n                (e) => (\r\n                  <Button\r\n                    className=\"ml\"\r\n                    onClick={() => {\r\n                      setSelectedTable({ ...selectedTable, nbrCouverts: e });\r\n                      console.log(selectedTable);\r\n                    }}\r\n                    variant={\r\n                      selectedTable?.nbrCouverts == e ? \"warning\" : \"dark\"\r\n                    }\r\n                    style={{\r\n                      backgroundColor:\r\n                        selectedTable?.nbrCouverts == e ? \"#ff6b6b\" : \"black\",\r\n                      borderColor:\r\n                        selectedTable?.nbrCouverts == e ? \"#ff6b6b\" : \"black\",\r\n                    }}\r\n                  >\r\n                    {e}\r\n                  </Button>\r\n                )\r\n              )}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\r\n                {t(\"cancel\")}\r\n              </Button>\r\n              <Button\r\n                style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n                variant=\"warning\"\r\n                onClick={() => toMenu()}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCheck}\r\n                  style={{ marginRight: \"0.5rem\" }}\r\n                />\r\n                {t(\"validate\")}\r\n              </Button>\r\n            </Modal.Footer>\r\n          </>\r\n        ) : (\r\n          <Modal.Body>\r\n            <Button variant=\"danger\" onClick={() => handleCheckout()}>\r\n              Checkout !\r\n            </Button>\r\n          </Modal.Body>\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tables;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { storeTables, storeZones } from \"../Slices/data\";\r\nimport { Button, Offcanvas, Stack } from \"react-bootstrap\";\r\nimport Tables from \"./Tables\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faAddressBook,\r\n  faBars,\r\n  faBorderAll,\r\n  faCashRegister,\r\n  faDesktop,\r\n  faHistory,\r\n  faMotorcycle,\r\n  faStickyNote,\r\n  faUsers,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nconst Zones = () => {\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [selectedZone, setSelectedZone] = useState(\"\");\r\n  const zones = useSelector((state) => state.data.zones);\r\n  const checkoutData = useSelector((state) => state.order.checkoutData);\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  useEffect(() => {\r\n    \r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getUserZones\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n      \r\n        dispatch(storeZones({ zones: res.data.zones }));\r\n        dispatch(storeTables({ tables: res.data.tables }));\r\n        setSelectedZone(zones[0]?.id);\r\n      });\r\n  }, [checkoutData]);\r\n\r\n  return (\r\n    <div>\r\n      <FontAwesomeIcon\r\n        icon={faBars}\r\n        style={{\r\n          position: \"absolute\",\r\n          right: \"1rem\",\r\n          top: \"1rem\",\r\n          cursor: \"pointer\",\r\n        }}\r\n        size=\"2x\"\r\n        color=\"white\"\r\n        onClick={handleShow}\r\n      />\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          marginTop: \"1.5rem\",\r\n          height: \"45px\",\r\n        }}\r\n      >\r\n        <h2 className=\"plan-restuarnat\"  style={{ position: \"absolute\", left: \"3.5%\" }}>\r\n          <b>Plan du Restaurant</b>\r\n        </h2>\r\n        {zones.map((zone) => (\r\n          <Button\r\n          className=\"zone_button\"\r\n            style={{ marginLeft: \"1rem\" }}\r\n            onClick={() => setSelectedZone(zone.id)}\r\n            variant={selectedZone == zone.id ? \"dark\" : \"outline-dark\"}\r\n          >\r\n            {zone.nom}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n      <Tables selectedZone={selectedZone} />\r\n      <Offcanvas placement=\"end\" show={show} onHide={handleClose}>\r\n        <Offcanvas.Header closeButton>\r\n          <Offcanvas.Title>menu</Offcanvas.Title>\r\n        </Offcanvas.Header>\r\n        <Offcanvas.Body>\r\n          <div className=\"my_offcanvas\">\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faDesktop} />\r\n              <p>Accder aux back-Office</p>\r\n            </div>\r\n            <div\r\n              className=\"offcanvas_item\"\r\n              onClick={() => navigate(\"/clients\")}\r\n            >\r\n              <FontAwesomeIcon icon={faUsers} />\r\n              <p>Gestion des clients</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faMotorcycle} />\r\n              <p>Commandes a livrer</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faAddressBook} />\r\n              <p>Commandes a emporter</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faStickyNote} />\r\n              <p>Gestion des avoirs</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faCashRegister} />\r\n              <p>Cloture de caisse</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faBorderAll} />\r\n              <p>Cumuler les tables</p>\r\n            </div>\r\n            <div className=\"offcanvas_item\">\r\n              <FontAwesomeIcon icon={faHistory} />\r\n              <p>Rappel ticket</p>\r\n            </div>\r\n          </div>\r\n        </Offcanvas.Body>\r\n      </Offcanvas>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Zones;\r\n","export default __webpack_public_path__ + \"static/media/bg.74e24a49.jpeg\";","export default __webpack_public_path__ + \"static/media/loading.30c0aa7c.gif\";","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Badge,\r\n  Breadcrumb,\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n  Tab,\r\n  Tabs,\r\n} from \"react-bootstrap\";\r\n\r\nimport Swal from \"sweetalert2\";\r\n\r\nimport {\r\n  storeCategories,\r\n  storeNSteps,\r\n  storeOrderHistory,\r\n  storeProducts,\r\n  storeTvaMode,\r\n} from \"../Slices/data\";\r\nimport { addNewcheckoutDataFromDB, setType } from \"../Slices/order\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport {\r\n  clearOrders,\r\n  deleteClientandTable,\r\n  initClient,\r\n  setRemarque,\r\n  storeSelectedTable,\r\n} from \"../Slices/order\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nimport {\r\n  faCheckSquare,\r\n  faEdit,\r\n  faHistory,\r\n  faLockOpen,\r\n  faPlus,\r\n  faPrint,\r\n  faStickyNote,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport timespan from \"jsonwebtoken/lib/timespan\";\r\nimport { Typeahead } from \"react-bootstrap-typeahead\";\r\nimport axios from \"axios\";\r\nimport { storeClients } from \"../Slices/data\";\r\nimport loading from \"../Shared/loading.gif\";\r\nimport { BiTransfer } from \"react-icons/bi\";\r\n\r\nconst NaviBottom = () => {\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const zones = useSelector((state) => state.data.zones);\r\n  const [selectedZone, setSelectedZone] = useState(\"\");\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const ordersHistory = useSelector((state) => state.data.orderHistory);\r\n  const checkoutData = useSelector((state) => state.order.checkoutData);\r\n  const clients = useSelector((state) => state.data.clients);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  let freeTables = tables?.filter((table) => table.libre == true)?.length;\r\n\r\n  let busyTables = tables?.filter((table) => table.libre == false)?.length;\r\n\r\n  const [show, setShow] = useState(false);\r\n  const [showNote, setShowNote] = useState(false);\r\n  const [showHistoryButton, setshowHistoryButton] = useState(false);\r\n\r\n  const [note, setnote] = useState(\"\");\r\n\r\n  var ID = function () {\r\n    return Number(\r\n      Math.floor(Math.random() * Date.now())\r\n        .toString()\r\n        .substring(11)\r\n    );\r\n  };\r\n\r\n  const path = window.location.hash;\r\n\r\n  let clientsData = clients.map((client) => client.nom_prenom);\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substr(0, 10);\r\n  var time = curr.getHours() + \":\" + curr.getMinutes();\r\n  let avenir = checkoutData?.filter((e) => e.date > date)?.length || 0;\r\n  let enCours =\r\n    checkoutData?.filter((e) => (e.status == \"pending\" ||e.status==\"cooking\"||e.status==\"ready\")&& e.date == date)\r\n      ?.length || 0;\r\n  let annuler =\r\n    checkoutData?.filter((e) => e.status == \"rejected\")?.length || 0;\r\n\r\n  let orderNbr =\r\n    ordersHistory?.filter((e) => e.status == \"completed\")?.length || 0;\r\n  const handleAddNote = () => {\r\n    dispatch(setRemarque({ remarque: note }));\r\n    setShowNote(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getclients\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeClients({ clients: res.data.clients }));\r\n      });\r\n  }, []);\r\n  const [orderHistory, setOrderHistory] = useState([]);\r\n  const [orderLoding, setOrderLoding] = useState(false);\r\n  const [selectedTable, setSelectedTable] = useState({});\r\n  const [newClient, setnewClient] = useState({});\r\n  const [showHistory, setshowHistory] = useState(false);\r\n  const [Table_nbr, setTable_nbr] = useState(0);\r\n  const [old, setOld] = useState(false);\r\n  const [textorder_id, settextorder_id] = useState(\"\");\r\n\r\n  const [client, setClient] = useState({\r\n    prenom: \"\",\r\n    company: \"\",\r\n    code1: \"\",\r\n    code2: \"\",\r\n    etage: \"\",\r\n    interphone: \"\",\r\n    name: \"\",\r\n    phone: \"\",\r\n    address: \"\",\r\n    post: \"\",\r\n    city: \"\",\r\n    message: \"\",\r\n    email: \"\",\r\n    type: \"emporter\",\r\n    nbrCouverts: 1,\r\n    id: ID(),\r\n    date: date,\r\n    time: time,\r\n  });\r\n\r\n  const table = (e) => {\r\n    return tables.find((table) => table.numero == e);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setShow(false);\r\n    setshowHistory(false);\r\n  };\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleNewOrder = () => {\r\n    dispatch(deleteClientandTable());\r\n    handleShow();\r\n  };\r\n\r\n  const handleGetOrders = async () => {\r\n    setOrderLoding(true);\r\n    const caisse_id = localStorage.getItem(\"caisse_id\");\r\n    await axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getallorders\",\r\n        {\r\n          user_id,\r\n          caisse_id,\r\n          customer_id: client.id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log({ zboub: res.data });\r\n        setOrderHistory(res.data);\r\n        setOrderLoding(false);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  // const handleCreate = async () => {\r\n  //   if (old == false) {\r\n  //     await axios\r\n  //       .post(\"/api/createClient\", {\r\n  //         user_id,\r\n  //         client: {\r\n  //           etage: client.etage || 0,\r\n  //           interphone: client.interphone || 0,\r\n  //           supprimer: 0,\r\n  //           societe: client.company || \"\",\r\n  //           nom_prenom: client.name || \"\",\r\n  //           telephone: client.phone || \"\",\r\n  //           adresse: client.address || \"\",\r\n  //           code_postal: client.post || 0,\r\n  //           ville: client.city || \"\",\r\n  //           email: client.email || \"\",\r\n  //           code_1: client.code1 || \"\",\r\n  //           code_2: client.code2 || \"\",\r\n  //         },\r\n  //       })\r\n  //       .then((res) => {\r\n  //         setClient({ ...client, id: res.data.id });\r\n  //        console.log({ client: client.id, data: res.data });\r\n  //       })\r\n  //       .catch((err) => console.log(err));\r\n  //   }\r\n  //   if (client?.type == \"surplace\") {\r\n  //     console.log(table(Table_nbr).id);\r\n  //     dispatch(\r\n  //       storeSelectedTable({\r\n  //         selectedTable: {\r\n  //           id: table(Table_nbr).id,\r\n  //           nbr: table(Table_nbr).numero,\r\n  //           ppl: table(Table_nbr).nbrePersonne,\r\n  //           libre: table(Table_nbr).libre,\r\n  //           nbrCouverts: 1,\r\n  //         },\r\n  //       })\r\n  //     );\r\n  //     handleClose();\r\n  //     navigate(\"/menu\");\r\n  //   }\r\n  //   dispatch(initClient({ client }));\r\n\r\n  // };\r\n  const handleCreate = () => {\r\n    if (old == false) {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/createClient\",\r\n          {\r\n            user_id,\r\n            client: {\r\n              etage: client.etage || 0,\r\n              interphone: client.interphone || 0,\r\n              supprimer: 0,\r\n              societe: client.company || \"\",\r\n              nom_prenom: client.name || \"\",\r\n              telephone: client.phone || \"\",\r\n              adresse: client.address || \"\",\r\n              code_postal: client.post || 0,\r\n              ville: client.city || \"\",\r\n              email: client.email || \"\",\r\n              code_1: client.code1 || \"\",\r\n              code_2: client.code2 || \"\",\r\n            },\r\n          }\r\n        )\r\n        .then((res) => {\r\n\r\n          setClient({ ...client, id: res.data.id });\r\n          dispatch(initClient({ client: { ...client, id: res.data.id } }));\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      dispatch(initClient({ client }));\r\n    }\r\n    if (client.type == \"surplace\") {\r\n      \r\n    if (Table_nbr==0)\r\n    {\r\n      Swal.fire({\r\n        title: \"Selectioner une table !\",\r\n      });\r\n    }\r\n    else{\r\n      dispatch(\r\n        storeSelectedTable({\r\n          selectedTable: {\r\n            id: table(Table_nbr).id,\r\n            nbr: table(Table_nbr).numero,\r\n            ppl: table(Table_nbr).nbrePersonne,\r\n            libre: table(Table_nbr).libre,\r\n            nbrCouverts: 1,\r\n          },\r\n        })\r\n      );\r\n      handleClose();\r\n      \r\n      navigate(\"/menu\");\r\n    }     \r\n    }\r\nif(client.type!=\"surplace\")\r\n{\r\n  handleClose();\r\n    navigate(\"/menu\");\r\n}\r\n    \r\n  };\r\n\r\n  const handleSelection = (x) => {\r\n    setshowHistoryButton(true);\r\n    setOld(true);\r\n    let selectedClient = clients?.filter(\r\n      (e) =>\r\n        e.nom_prenom.toLowerCase().includes(x?.toLowerCase()) ||\r\n        e.telephone.toLowerCase().includes(x?.toLowerCase()) ||\r\n        e.email.toLowerCase().includes(x?.toLowerCase())\r\n    )[0];\r\n\r\n   \r\n    if (selectedClient) {\r\n      setClient({\r\n        ...client,\r\n        id: selectedClient.id,\r\n        prenom: selectedClient.nom_prenom,\r\n        company: selectedClient.societe,\r\n        code1: selectedClient.code_1,\r\n        code2: selectedClient.code_2,\r\n        etage: selectedClient.etage,\r\n        interphone: selectedClient.interphone,\r\n        name: selectedClient.nom_prenom,\r\n        phone: selectedClient.telephone,\r\n        address: selectedClient.adresse,\r\n        post: selectedClient.code_postal,\r\n        city: selectedClient.ville,\r\n        email: selectedClient.email,\r\n      });\r\n    }\r\n  };\r\n  //test\r\n\r\n  const handlePrint = (newOrder) => {\r\n    \r\n    let order = {\r\n      table: newOrder?.table_number || \"\",\r\n      client_id: newOrder?.customer_id || 0,\r\n      order_id: newOrder.id,\r\n      message: newOrder.message || \"aucune\",\r\n      customer_name: newOrder?.customer_name || \"\",\r\n      customer_company: newOrder?.customer_company || \"\",\r\n      code1: newOrder?.code1 || \"\",\r\n      code2: newOrder?.code2 || \"\",\r\n      interphone: newOrder?.interphone || \"\",\r\n      etage: newOrder?.etage || \"\",\r\n      table_number: newOrder?.table_number || 0,\r\n      customer_tel: newOrder?.customer_tel || \"\",\r\n      customer_adress: newOrder?.customer_adress,\r\n      status: newOrder?.status,\r\n      orderType: newOrder?.order_type,\r\n      paymentType: newOrder?.pay_method,\r\n      totalPrice: newOrder?.price,\r\n      taxPrice: newOrder?.tva,\r\n      tvas: (newOrder?.price * newOrder?.tva) / 100,\r\n      orderItems: newOrder?.orderItems,\r\n      date: newOrder?.date,\r\n      time: newOrder?.time,\r\n    };\r\n    // console.log(calcTotal().tvas);\r\n    // newOrders.map((one) => {\r\n    //   order.orderItems.push({\r\n    //     ...one,\r\n    //     price: one.price,\r\n    //     tva: one.tva,\r\n    //   });\r\n    // });\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printOrder\",\r\n        {\r\n          kitchen: false,\r\n          user_id: user_id,\r\n          order: {\r\n            new: false,\r\n            ...order,\r\n\r\n            // Date: new Date(),\r\n            nbrCouverts: 1,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  console.log(\"path\", path);\r\n  return (\r\n    <div>\r\n      <Navbar bg=\"light\" variant=\"light\" fixed=\"bottom\" className=\"nav-buttom\">\r\n        <Container>\r\n          <Nav className=\"me-auto\">\r\n            <Nav.Link>\r\n              <Button variant=\"success\" className=\"nav-buttom-button\">\r\n                Libres <Badge bg=\"success\">{freeTables}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                variant=\"danger\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/encours\");\r\n                }}\r\n                className=\"nav-buttom-button\"\r\n              >\r\n                Encours<Badge bg=\"danger\"> {enCours}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button variant=\"info\" className=\"nav-buttom-button\">\r\n                Livrs <Badge bg=\"info\">0</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                variant=\"warning\"\r\n                className=\"nav-buttom-button\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/annules\");\r\n                }}\r\n              >\r\n                Annules <Badge bg=\"warning\">{annuler}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                className=\"nav-buttom-button\"\r\n                variant=\"dark\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/avenir\");\r\n                }}\r\n              >\r\n                Commandes a Venir <Badge bg=\"dark\">{avenir}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Button\r\n                className=\"nav-buttom-button\"\r\n                variant=\"primary\"\r\n                onClick={() => {\r\n                  dispatch(clearOrders());\r\n                  navigate(\"/history/all\");\r\n                }}\r\n              >\r\n                Termines <Badge bg=\"primary\">{orderNbr}</Badge>\r\n              </Button>\r\n            </Nav.Link>\r\n          \r\n            <Nav.Link>\r\n              <Button\r\n                variant=\"warning\"\r\n                className=\"nav-buttom-button\"\r\n                onClick={() => {\r\n                  axios\r\n                    .post(\r\n                      process.env.REACT_APP_API_HOST +\r\n                        \":\" +\r\n                        process.env.REACT_APP_API_PORT +\r\n                        \"/api/getorder\",\r\n                      {\r\n                        user_id: user_id,\r\n                        order_id: textorder_id,\r\n                      }\r\n                    )\r\n                    .then((res) => {\r\n                      // dispatch(storeClients({ clients: res.data.clients }));\r\n                      console.log(res.data);\r\n                      if (res.data == \"no data\") {\r\n                        Swal.fire({\r\n                          icon: \"warning\",\r\n                          title: `pas de commande avec cet identifiant`,\r\n                          showConfirmButton: false,\r\n                          timer: 1500,\r\n                        });\r\n                      }else if(res.data[0].status==\"completed\"){\r\n                        Swal.fire({\r\n                          icon: \"warning\",\r\n                          title: `la commande est termine `,\r\n                          showConfirmButton: false,\r\n                          timer: 1500,\r\n                        });\r\n                      }\r\n                       else  {\r\n                        console.log(res.data[0].status);\r\n                        navigate(`/checkout/${textorder_id}`);\r\n                      }\r\n                    });\r\n                }}\r\n              >\r\n                <FontAwesomeIcon icon={faPlus} />\r\n              </Button>\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <Form.Control\r\n                 className=\"order_id_input\"\r\n                type=\"text\"\r\n                placeholder=\"Order_id\"\r\n                onChange={(e) => {\r\n                  console.log(e.target.value);\r\n                  settextorder_id(e.target.value);\r\n                }}\r\n              />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <Button\r\n            className=\"nav-buttom-button nouvelle-cmd-btn\"\r\n            style={{ borderRadius: \"50px !important\" }}\r\n            variant=\"success\"\r\n            size=\"lg\"\r\n            onClick={() => handleNewOrder()}\r\n          >\r\n            <FontAwesomeIcon icon={faPlus} style={{ marginRight: \"1rem\" }} />\r\n            Nouvelle Commande\r\n          </Button>\r\n          {path.includes(\"menu\") ? (\r\n            <Button\r\n              className=\"nav_butoons-note\"\r\n              onClick={() => setShowNote(true)}\r\n              style={{\r\n                borderRadius: \"50px !important\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                borderColor: \"#d63031\",\r\n                backgroundColor: \"transparent\",\r\n                marginLeft: \"0.5rem\",\r\n              }}\r\n              variant=\"secondary\"\r\n              size=\"lg\"\r\n            >\r\n              <FontAwesomeIcon icon={faStickyNote} color=\"#d63031\" />\r\n            </Button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Container>\r\n\r\n        <Modal show={showNote} onHide={() => setShowNote(false)}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Remarque</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <FormGroup>\r\n              <h3>\r\n                <FontAwesomeIcon\r\n                  icon={faStickyNote}\r\n                  color=\"#d63031\"\r\n                  style={{ marginRight: \"1rem\" }}\r\n                />\r\n                Note\r\n              </h3>\r\n              <Form.Control\r\n                onChange={(e) => setnote(e.target.value)}\r\n                as=\"textarea\"\r\n                type=\"text\"\r\n                placeholder=\"Remarque ...\"\r\n              ></Form.Control>\r\n            </FormGroup>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={() => setShowNote(false)}>\r\n              Annuler\r\n            </Button>\r\n            <Button\r\n              variant=\"warning\"\r\n              style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n              onClick={handleAddNote}\r\n            >\r\n              Ajouter\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n\r\n        <Modal\r\n          show={show}\r\n          onHide={handleClose}\r\n          style={{ zIndex: 1050, left: -120, top: 50 }}\r\n        >\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>\r\n              <div style={{ width: \"100%\" }}>\r\n                <h5>Choix du mode de consommation</h5>\r\n                <Button\r\n                  size=\"lg\"\r\n                  variant={\r\n                    client?.type == \"emporter\" ? \"light\" : \"outline-warning\"\r\n                  }\r\n                  style={{\r\n                    borderColor: \"#ff6b6b\",\r\n                    color: \"#ff6b6b\",\r\n                    marginRight: \"2rem\",\r\n                  }}\r\n                  onClick={() => {dispatch(setType(\"emporter\")) ;setClient({ ...client, type: \"emporter\" })}}\r\n                >\r\n                  A emporter\r\n                </Button>\r\n\r\n                <Button\r\n                  size=\"lg\"\r\n                  variant={\r\n                    client?.type == \"livraison\" ? \"light\" : \"outline-warning\"\r\n                  }\r\n                  style={{\r\n                    borderColor: \"#ff6b6b\",\r\n                    color: \"#ff6b6b\",\r\n                    marginRight: \"2rem\",\r\n                  }}\r\n                  onClick={() => {dispatch(setType(\"livraison\")) ;setClient({ ...client, type: \"livraison\" })}}\r\n                >\r\n                  Livraison\r\n                </Button>\r\n                <Button\r\n                  size=\"lg\"\r\n                  variant={\r\n                    client?.type == \"surplace\" ? \"light\" : \"outline-warning\"\r\n                  }\r\n                  style={{ borderColor: \"#ff6b6b\", color: \"#ff6b6b\" }}\r\n                  onClick={() => {dispatch(setType(\"surplace\"))  ;setClient({ ...client, type: \"surplace\" })}}\r\n                >\r\n                  sur place\r\n                </Button>\r\n              </div>\r\n            </Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            {showHistory && (\r\n              <div className=\"histo\">\r\n                <h1 style={{ textAlign: \"center\" }}>\r\n                  {\" \"}\r\n                  <b>Historique Client</b>{\" \"}\r\n                  <FontAwesomeIcon\r\n                    onClick={() => {\r\n                      setshowHistory(false);\r\n                      setOrderHistory([]);\r\n                    }}\r\n                    className=\"times\"\r\n                    icon={faTimes}\r\n                  />\r\n                </h1>\r\n                <div className=\"hhead\">\r\n                  <h3 className=\"wid\">Type</h3>\r\n                  <h3 className=\"wid\">Date</h3>\r\n                  <h3 className=\"wid\">Order</h3>\r\n                  <h3 className=\"wid\">Prix</h3>\r\n                  <h3 className=\"wid\">Paiement</h3>\r\n                </div>\r\n                <div className=\"hbody\">\r\n                  {orderHistory.length == 0 && !orderLoding ? (\r\n                    <h1>Aucune Commande trouve</h1>\r\n                  ) : orderLoding ? (\r\n                    <div style={{ display: \"flex\" }}>\r\n                      <h3>Chargement en cours</h3>\r\n                      <img src={loading} alt=\"loading\" width={30} />\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                  {orderHistory?.map((order, key) => (\r\n                    <div className=\"el\">\r\n                      <h5 className=\"wid\">{order?.order_type}</h5>\r\n                      <h5 className=\"wid\">{order?.date}</h5>\r\n                      <h5 className=\"wid\">#{order?.id}</h5>\r\n                      <h5 className=\"wid\">{order?.price?.toFixed(2)}</h5>\r\n                      <h5 className=\"wid\">{order?.pay_method}</h5>\r\n                      <FontAwesomeIcon\r\n                        icon={faPrint}\r\n                        onClick={() => handlePrint(order)}\r\n                        style={{ cursor: \"pointer\" }}\r\n                      />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                {/* <Button className=\"impr_btn\" style={{ marginBottom: \"1rem\" }}>\r\n                  Imprimer\r\n                </Button> */}\r\n              </div>\r\n            )}\r\n            <div>\r\n              {client?.type == \"livraison\" ? (\r\n                <div>\r\n                  <Form auto>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.name}\r\n                            type=\"text\"\r\n                            placeholder=\"nom/prenom\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, name: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          {client.telephone?.length > 0 &&\r\n                          client.telephone?.length < 10 ? (\r\n                            <Badge bg=\"danger\">\r\n                              Numero pas valide (10 chiffres obligatoire)\r\n                            </Badge>\r\n                          ) : (\r\n                            \"\"\r\n                          )}\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setClient({ ...client, phone: e });\r\n                              setOld(false);\r\n                              setshowHistory(false);\r\n                            }}\r\n                            onChange={(e) => {\r\n                              handleSelection(e[0]);\r\n                              console.log(e);\r\n                            }}\r\n                            options={clients.map((client) => client.telephone)}\r\n                            placeholder=\"telephone\"\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            max=\"5\"\r\n                          />\r\n                        </Col>\r\n\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.email}\r\n                            type=\"email\"\r\n                            placeholder=\"Email\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, email: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.address}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"Addresse\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                address: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.company}\r\n                            type=\"text\"\r\n                            placeholder=\"socit\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                company: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.code1}\r\n                            type=\"text\"\r\n                            placeholder=\"code 1\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, code1: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.code2}\r\n                            type=\"text\"\r\n                            placeholder=\"code 2\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, code2: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n\r\n                        <Col xs=\"6\">\r\n                          <Form.Control\r\n                            value={client.city}\r\n                            type=\"text\"\r\n                            placeholder=\"Ville\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, city: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.interphone}\r\n                            type=\"text\"\r\n                            placeholder=\"interphone\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                interphone: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.etage}\r\n                            type=\"text\"\r\n                            placeholder=\"etage\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, etage: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col xs=\"6\">\r\n                          <Form.Control\r\n                            value={client.post}\r\n                            type=\"postal\"\r\n                            placeholder=\"Code postal\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, post: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.message}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"remarque\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                message: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.date}\r\n                            type=\"date\"\r\n                            defaultValue={client.date}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, date: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.time}\r\n                            type=\"time\"\r\n                            defaultValue={client.time}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, time: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  </Form>\r\n                </div>\r\n              ) : client?.type == \"emporter\" ? (\r\n                <div>\r\n                  <Form auto>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.name}\r\n                            type=\"text\"\r\n                            placeholder=\"nom/prenom\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, name: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          {client.telephone?.length > 0 &&\r\n                          client.telephone?.length < 10 ? (\r\n                            <Badge bg=\"danger\">\r\n                              Numero pas valide (10 chiffres obligatoire)\r\n                            </Badge>\r\n                          ) : (\r\n                            \"\"\r\n                          )}\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setClient({ ...client, phone: e });\r\n                              setOld(false);\r\n                              setshowHistory(false);\r\n                            }}\r\n                            onChange={(e) => {\r\n                              handleSelection(e[0]);\r\n                              console.log(e);\r\n                            }}\r\n                            options={clients.map((client) => client.telephone)}\r\n                            placeholder=\"telephone\"\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.message}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"remarque\"\r\n                            onChange={(e) =>\r\n                              setClient({\r\n                                ...client,\r\n                                message: e.target.value,\r\n                              })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.date}\r\n                            type=\"date\"\r\n                            defaultValue={client.date}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, date: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.time}\r\n                            type=\"time\"\r\n                            defaultValue={client.time}\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, time: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  </Form>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <Form auto>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Typeahead\r\n                            onInputChange={(e) => {\r\n                              setClient({ ...client, name: e });\r\n                              setOld(false);\r\n                              setshowHistory(false);\r\n                            }}\r\n                            onChange={(e) => handleSelection(e[0])}\r\n                            options={clients.map((client) => client.nom_prenom)}\r\n                            placeholder=\"nom/prenom\"\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col\r\n                        style={{\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          flexWrap: \"wrap\",\r\n                        }}\r\n                        >\r\n                          <h3>Zones :</h3>\r\n                          {zones.map((zone) => (\r\n                            <Button\r\n                              className=\"zone_button\"\r\n                              style={{ marginLeft: \"1rem\" }}\r\n                              onClick={() => setSelectedZone(zone.id)}\r\n                              variant={selectedZone == zone.id ? \"dark\" : \"outline-dark\"}\r\n                             \r\n                            >\r\n                              {zone.nom}\r\n                            </Button>\r\n                          ))}\r\n                        </Col>\r\n                      </Row>\r\n                      <Row>\r\n                        <Col\r\n                          style={{\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            flexWrap: \"wrap\",\r\n                          }}\r\n                        >\r\n                          <h3>Tables :</h3>\r\n                          {tables\r\n                            .filter((e) => e.active == true && e.libre == true && e.zone_id == selectedZone)\r\n                            .map((el) => (\r\n                              <div\r\n                                className={\r\n                                  el.numero == Table_nbr ? \"tbl sel\" : \"tbl\"\r\n                                }\r\n                                onClick={() => setTable_nbr(el.numero)}\r\n                              >\r\n                                <h6>\r\n                                  <b>{el.numero}</b>\r\n                                </h6>\r\n                              </div>\r\n                            ))}\r\n                          {/* <Form.Control\r\n                              value={Table_nbr}\r\n                              type=\"number\"\r\n                              placeholder=\"Numero de la table\"\r\n                              onChange={(e) => setTable_nbr(e.target.value)}\r\n                            /> */}\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Row>\r\n                        <Col>\r\n                          <Form.Control\r\n                            value={client.message}\r\n                            as=\"textarea\"\r\n                            type=\"text\"\r\n                            placeholder=\"remarque\"\r\n                            onChange={(e) =>\r\n                              setClient({ ...client, message: e.target.value })\r\n                            }\r\n                          />\r\n                        </Col>\r\n                      </Row>\r\n                    </Form.Group>\r\n                  </Form>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            {showHistoryButton ? (\r\n              <Button\r\n                variant=\"warning\"\r\n                style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n                onClick={() => {\r\n                  setshowHistory(!showHistory);\r\n                  handleGetOrders();\r\n                }}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faHistory}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Historiques\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <Button variant=\"outline-secondary\" onClick={handleClose}>\r\n              Annuler\r\n            </Button>\r\n            <Button\r\n              variant=\"warning\"\r\n              style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n              onClick={() => handleCreate()}\r\n            >\r\n              <FontAwesomeIcon\r\n                icon={faCheckSquare}\r\n                style={{ marginRight: \"5px\" }}\r\n              />\r\n              Crer la vente\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </Navbar>\r\n      {/* <div>\r\n            <h3>\r\n              <FontAwesomeIcon\r\n                icon={faPencilAlt}\r\n                style={{ width: \"24\", marginRight: \"0.5rem\" }}\r\n              />\r\n              Remarque\r\n            </h3>\r\n            <Form.Control\r\n              type=\"textarea\"\r\n              as=\"textarea\"\r\n              placeholder=\"note\"\r\n              style={{ width: \"300px\", marginRight: \"300px\" }}\r\n              onChange={(e) =>\r\n                setnewProduct({ ...newProduct, note: e.target.value })\r\n              }\r\n            ></Form.Control>\r\n          </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NaviBottom;\r\n","export default __webpack_public_path__ + \"static/media/serveur.496e23b3.png\";","import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router\";\r\nimport axios from \"axios\";\r\nimport Zones from \"../Components/Zones\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport TableStats from \"../Components/TableStats\";\r\nimport useTranslation from \"./../i18\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport bg from \"./../Shared/bg.jpeg\";\r\nimport io, { Socket } from \"socket.io-client\";\r\n\r\nimport \"./Styles.css\";\r\n\r\nimport {\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faSignOutAlt,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  addNewcheckoutDataFromDB,\r\n  deleteClientandTable,\r\n} from \"../Slices/order\";\r\nimport {\r\n  storeCategories,\r\n  storeNSteps,\r\n  storeOrderHistory,\r\n  storeProducts,\r\n  storeTvaMode,\r\n} from \"../Slices/data\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport $ from \"jquery\";\r\n\r\nconst socket =io.connect(\"http://localhost:5002\")\r\nconst Main = () => {\r\n  const { t } = useTranslation();\r\n  const currentToken = localStorage.getItem(\"user\");\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\nuseEffect(() => {\r\n  socket.on(\"a\",(data)=>{\r\n    console.log(data)\r\n  })\r\n}, [socket])\r\n\r\n  useEffect(() => {\r\n    \r\n    \r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/categories\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) =>\r\n        dispatch(\r\n          storeCategories({\r\n            categories: res.data.sort((a, b) => a.cat_order - b.cat_order),\r\n          })\r\n        )\r\n      );\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/products\",\r\n        {\r\n          user_id,\r\n          category: 0,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeProducts({ products: res.data.products }));\r\n        dispatch(storeNSteps({ nSteps: res.data.menuSteps }));\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const caisse_id = localStorage.getItem(\"caisse_id\");\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getorders\",\r\n        {\r\n          user_id,\r\n          caisse_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeOrderHistory({ orderHistory: res.data }));\r\n        console.log(res.data);\r\n        let newData = res.data.map((order) => ({\r\n          ...order,\r\n          table_number: order.table_number || order.order_id,\r\n          order_id: order.id,\r\n        }));\r\n        /*  .filter((order) => order.order_type == \"surplace\"); */\r\n        console.log(\"got data\", newData);\r\n        newData.map((data) => {\r\n          dispatch(addNewcheckoutDataFromDB({ order: data }));\r\n        });\r\n      });\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/gettva\"\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeTvaMode({ tva_mode: res.data }));\r\n      });\r\n  }, []);\r\n\r\n\r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"main_bg\">\r\n      <Navbar variant=\"warning\" className=\"navbar\">\r\n        <Container className=\"main-container\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Navbar.Brand>\r\n            {/* <div\r\n              id=\"circle\"\r\n              style={{ background: connect ? \"green\" : \"red\" }}\r\n            ></div> */}\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link>\r\n              <h6\r\n                className=\"nav_link-h6\"\r\n                style={{ color: \"white\", paddingTop: \"5px\" }}\r\n                // onClick={() => navigate(\"/calendar\")}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                  className=\"ico2\"\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"5px\" }}\r\n                className=\"nav_link-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                  className=\"ico1\"\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"5px\" }}\r\n                className=\"nav_link-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                  className=\"ico\"\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n            className=\"nav-link\"\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n              className=\"server-img\"\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <div className=\"x2\">\r\n      \r\n        <Zones />\r\n        <NaviBottom />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","export default __webpack_public_path__ + \"static/media/bgg.5f53063d.png\";","import { useCallback, useRef, useState } from \"react\";\r\n\r\nconst useLongPress = (\r\n  onLongPress,\r\n  onClick,\r\n  { shouldPreventDefault = true, delay = 300 } = {}\r\n) => {\r\n  const [longPressTriggered, setLongPressTriggered] = useState(false);\r\n  const timeout = useRef();\r\n  const target = useRef();\r\n\r\n  const start = useCallback(\r\n    (event) => {\r\n      if (shouldPreventDefault && event.target) {\r\n        event.target.addEventListener(\"touchend\", preventDefault, {\r\n          passive: false,\r\n        });\r\n        target.current = event.target;\r\n      }\r\n      timeout.current = setTimeout(() => {\r\n        onLongPress(event);\r\n        setLongPressTriggered(true);\r\n      }, delay);\r\n    },\r\n    [onLongPress, delay, shouldPreventDefault]\r\n  );\r\n\r\n  const clear = useCallback(\r\n    (event, shouldTriggerClick = true) => {\r\n      timeout.current && clearTimeout(timeout.current);\r\n      shouldTriggerClick && !longPressTriggered && onClick();\r\n      setLongPressTriggered(false);\r\n      if (shouldPreventDefault && target.current) {\r\n        target.current.removeEventListener(\"touchend\", preventDefault);\r\n      }\r\n    },\r\n    [shouldPreventDefault, onClick, longPressTriggered]\r\n  );\r\n\r\n  return {\r\n    onMouseDown: (e) => start(e),\r\n    onTouchStart: (e) => start(e),\r\n    onMouseUp: (e) => clear(e),\r\n    onMouseLeave: (e) => clear(e, false),\r\n    onTouchEnd: (e) => clear(e),\r\n  };\r\n};\r\n\r\nconst isTouchEvent = (event) => {\r\n  return \"touches\" in event;\r\n};\r\n\r\nconst preventDefault = (event) => {\r\n  if (!isTouchEvent(event)) return;\r\n\r\n  if (event.touches.length < 2 && event.preventDefault) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\nexport default useLongPress;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Form, FormGroup } from \"react-bootstrap\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport {\r\n  faCheck,\r\n  faCross,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPlus,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst RemiseModal = ({\r\n  handleUpdateOrder,\r\n  orderTo,\r\n  setOrderTo,\r\n  setshowRemise,\r\n  calcOrder,\r\n}) => {\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const [ping, setping] = useState(true);\r\n  const [input, setInput] = useState(\"\");\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 {bksp}\",\r\n  ]);\r\n  const keyboard = useRef();\r\n  const [remisePerc, setremisePerc] = useState(0);\r\n  const [remise, setremise] = useState(0);\r\n  const [libre, setlibre] = useState(0);\r\n  const [offert, setoffert] = useState(false);\r\n  const [selected, setselected] = useState(\"\");\r\n\r\n  const handleRemise = () => {\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    let finalPrice = 0;\r\n    if (offert == true) {\r\n      finalPrice = 0;\r\n      console.log(\"offert\", finalPrice,copy);\r\n    } else if (remisePerc > 0) {\r\n      finalPrice =\r\n      orderTo.order?.price -\r\n        (orderTo.order?.price * remisePerc) / 100;\r\n      console.log(\"perc\", finalPrice);\r\n    } else if (remise > 0) {\r\n      finalPrice = orderTo.order?.price - remise;\r\n      console.log(\"remise\", finalPrice);\r\n     \r\n    } else if (libre > 0) {\r\n      finalPrice = libre;\r\n      console.log(\"libre\", finalPrice);\r\n    }\r\n    console.log(\"nothing\");\r\n    copy = { ...copy, finalPrice };\r\n    setOrderTo({ ...orderTo, order: copy });\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleRemise();\r\n  }, [offert, remise, remisePerc, libre]);\r\n\r\n  const onChange = (input) => {\r\n    setInput(input);\r\n    console.log(\"Input changed\", input);\r\n    switch (selected) {\r\n      case \"remisePerc\":\r\n        if (Number(input) > 100) {\r\n          Swal.fire({\r\n            icon: \"warning\",\r\n            title: \"faut etre inferieur a 100%\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          setremisePerc(Number(input));\r\n          console.log(remisePerc);\r\n          setremise(0);\r\n          setlibre(0);\r\n          setoffert(false);\r\n        }\r\n        break;\r\n      case \"remise\":\r\n        if (Number(input) > orderTo.order?.price) {\r\n          Swal.fire({\r\n            icon: \"warning\",\r\n            title: `faut etre inferieur a ${calcOrder(orderTo.order).price} `,\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        } else {\r\n          setremisePerc(0);\r\n          setremise(Number(input));\r\n          console.log(remise);\r\n          setlibre(0);\r\n          setoffert(false);\r\n        }\r\n        break;\r\n      case \"libre\":\r\n        setremisePerc(0);\r\n        setremise(0);\r\n        setlibre(Number(input));\r\n        console.log(libre);\r\n        setoffert(false);\r\n        break;\r\n    }\r\n\r\n    // handleRemise();\r\n    // let newarr = [...lay];\r\n    // newarr[selected].value = Number(input);\r\n    // setlay(newarr);\r\n    setInput(\"\");\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n  };\r\n\r\n  const onChangeInput = ({ e, index }) => {\r\n    const input = e.target.value;\r\n    setInput(input);\r\n    keyboard.current.setInput(input);\r\n    // setTotal(calcMontant());\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  return (\r\n    <div className=\"remise_modal\">\r\n      <div className=\"uper\">\r\n        <h3>Remise</h3>\r\n        <FontAwesomeIcon\r\n          style={{ position: \"absolute\", top: \"5px\", right: \"8px\" }}\r\n          onClick={() => setshowRemise(false)}\r\n          icon={faTimes}\r\n          size=\"2x\"\r\n        />\r\n      </div>\r\n      <div className=\"con\">\r\n        <FormGroup style={{ display: \"flex\" }}>\r\n          <Form.Label className=\"remise_input\">\r\n            <b>Remise (%)</b>\r\n          </Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChangeInput({ e, index: 5 })}\r\n            className=\"remise_input\"\r\n            value={`${remisePerc} %`}\r\n            onFocus={() => {\r\n              setselected(\"remisePerc\");\r\n              keyboard.current.setInput(\"\");\r\n            }}\r\n          ></Form.Control>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\" }}>\r\n          <Form.Label className=\"remise_input\">\r\n            <b>Remise ()</b>\r\n          </Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChangeInput({ e, index: 5 })}\r\n            className=\"remise_input\"\r\n            value={`${remise?.toFixed(2)} `}\r\n            onFocus={() => {\r\n              setselected(\"remise\");\r\n              keyboard.current.setInput(\"\");\r\n            }}\r\n          ></Form.Control>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\" }}>\r\n          <Form.Label className=\"remise_input\">\r\n            <b>Montant libre ()</b>\r\n          </Form.Label>\r\n          <Form.Control\r\n            onChange={(e) => onChangeInput({ e, index: 5 })}\r\n            value={`${libre?.toFixed(2)} `}\r\n            className=\"remise_input\"\r\n            onFocus={() => {\r\n              setselected(\"libre\");\r\n              keyboard.current.setInput(\"\");\r\n            }}\r\n          ></Form.Control>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\", marginTop: \"1rem\" }}>\r\n          <Button\r\n            variant={offert ? \"success\" : \"danger\"}\r\n            onClick={() => {\r\n              setoffert(!offert);\r\n              setremisePerc(Number(input));\r\n              setremise(0);\r\n              setlibre(0);\r\n              handleRemise();\r\n            }}\r\n            style={{\r\n              width: \"150px\",\r\n            }}\r\n          >\r\n            <FontAwesomeIcon\r\n              icon={offert ? faCheck : faTimes}\r\n              style={{ marginRight: \"2.2rem\" }}\r\n            />\r\n            Offert !\r\n          </Button>\r\n        </FormGroup>\r\n        <FormGroup style={{ display: \"flex\", marginTop: \"0.5rem\" }}>\r\n          <Button\r\n            onClick={() => handleUpdateOrder()}\r\n            variant={\"success\"}\r\n            style={{\r\n              width: \"150px\",\r\n              height: \"80px\",\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faPlus} style={{ marginRight: \"1rem\" }} />\r\n            Confirmer\r\n          </Button>\r\n        </FormGroup>\r\n      </div>\r\n      <div className=\"off\">\r\n        <h5>\r\n          <b>\r\n            {\"Prix initial : \" +\r\n              orderTo.order?.price.toFixed(2) +\r\n              \"\"}\r\n          </b>\r\n        </h5>\r\n        <h5>\r\n          <b>\r\n            {\"Nouveau Prix : \" + orderTo.order.finalPrice?.toFixed(2) ||\r\n              0 + \"\"}\r\n          </b>\r\n        </h5>\r\n      </div>\r\n      <Keyboard\r\n        theme={\"hg-theme-default hg-layout-default myTheme3\"}\r\n        display={{\r\n          \"{bksp}\": \"EFFACER\",\r\n        }}\r\n        buttonTheme={[\r\n          {\r\n            class: \"key_btn2\",\r\n            buttons: \"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}\",\r\n          },\r\n          {\r\n            class: \"hg-highlight\",\r\n            buttons: \"Q q\",\r\n          },\r\n        ]}\r\n        keyboardRef={(r) => (keyboard.current = r)}\r\n        layoutName={\"default\"}\r\n        layout={{\r\n          default: myLayout,\r\n        }}\r\n        onChange={onChange}\r\n        onKeyPress={onKeyPress}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RemiseModal;\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Table, Button, Alert, Modal, Spinner } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport image from \"./../Shared/bgg.png\";\r\nimport cartbg from \"./../Shared/cartbg.png\";\r\nimport {\r\n  addNewcheckoutData,\r\n  cancelOrder,\r\n  clearOrders,\r\n  deletecheckoutData,\r\n  deleteOrder,\r\n  setCheckoutChange,\r\n  setNewCurrentOrder,\r\n  setNewOrder,\r\n  setOrderChange,\r\n} from \"../Slices/order\";\r\nimport useTranslation from \"./../i18\";\r\nimport {\r\n  faCheck,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport Swal from \"sweetalert2\";\r\nimport axios from \"axios\";\r\nimport useLongPress from \"./useLongPress\";\r\nimport RemiseModal from \"./RemiseModal\";\r\n// import { forEach } from \"lodash\";\r\n// import e from \"cors\";\r\nimport io from \"socket.io-client\";\r\n\r\nconst CartMenu = ({ selectedTable, setconfirmed, confirmed }) => {\r\n  const username = localStorage.getItem(\"username\")\r\n  const navigate = useNavigate();\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const { nbr, nbrCouverts } = selectedTable;\r\n  const [total, setTotal] = useState(0);\r\n  const [step, setstep] = useState(1);\r\n  const nsteps = useSelector((state) => state.data.nSteps);\r\n  const [selected, setselected] = useState(0);\r\n  const table_number = useSelector((state) => state.order.selectedTable.id);\r\n  const client = useSelector((state) => state.order.client);\r\n  const remarque = useSelector((state) => state.order.remarque);\r\n\r\n  const params = useParams();\r\n  const { order_id } = params;\r\n  const checkOutData = useSelector((state) => state.order.checkoutData || []);\r\n  const [late_order_id, setlate_order_id] = useState(0);\r\n\r\n  const orders = useSelector((state) => state.order.orders || []);\r\n\r\n  const [newOrders, setnewOrders] = useState([]);\r\n  const [orderTo, setOrderTo] = useState({ order: {}, key: 0 });\r\n  const [ShowModifyModal, setShowModifyModal] = useState(false);\r\n\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const orderType = useSelector((state) => state.order.orderType);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n  const products = useSelector((state) => state.data.products);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const user = localStorage.getItem(\"username\");\r\n  const [newCommande, setNewCommande] = useState({})\r\n  const currentOrder = checkOutData.filter((e) => e.order_id == order_id)[0];\r\n  // const tva = localStorage.getItem(\"tva\");\r\n\r\n  useEffect(() => {\r\n\r\n    if (order_id != undefined) {\r\n      console.log(currentOrder);\r\n      currentOrder?.orderItems?.map((item) => {\r\n        dispatch(setNewOrder({ order: item }));\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const findProductWithId = (id) => {\r\n    return products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  const calcOrder = (order) => {\r\n    //test\r\n\r\n    let price;\r\n    if (order?.finalPrice) {\r\n      price = order.finalPrice;\r\n    } else if (order?.finalPrice == 0) {\r\n      price = 0;\r\n    } else {\r\n      price = order.price;\r\n    }\r\n    //\r\n\r\n    let tva = order.tva;\r\n    if (orderType == \"surplace\" || orderType == \"livraison\") {\r\n      tva = tva_mode.find((e) => e.nom == \"surplace\").valeur;\r\n    } else if (orderType == \"emporter\") {\r\n      tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n    }\r\n    if (rab_tva > 0) {\r\n      tva = rab_tva;\r\n    }\r\n    if (order.extras && order.extras.length) {\r\n     \r\n      order.extras.map((extra) => {\r\n        console.log(extra.price, extra.default_quantity);\r\n        price += extra.price * extra.default_quantity;\r\n      });\r\n    }\r\n    if (order.stepItems && order.stepItems != {}) {\r\n      Object.keys(order.stepItems).map((e) => {\r\n        order.stepItems[e].map((item) => {\r\n          price += item.price;\r\n        });\r\n      });\r\n    }\r\n\r\n    if (order.offert == true) {\r\n      return 0;\r\n    } else\r\n      return {\r\n        dbPrice: price,\r\n        price: price * order.qt,\r\n        tva: (price * order.qt * tva) / 100,\r\n        item_tva: tva,\r\n      };\r\n  };\r\n\r\n  useEffect(() => {\r\n    let copy = JSON.parse(JSON.stringify(orders) || [{}]);\r\n   \r\n    setnewOrders(copy);\r\n    orders.map((order) => {\r\n      if (order.is_alcool == true) {\r\n        let tva_alcool = tva_mode.find((e) => e.nom == \"alcool\").valeur;\r\n        console.log(tva_alcool);\r\n        setRab_tva(tva_alcool);\r\n      }\r\n    });\r\n  }, [orders]);\r\n\r\n  const calcTotal = () => {\r\n    let tot = 0;\r\n    let tva = 0;\r\n    let tvas = [];\r\n    newOrders.map((order) => {\r\n      tot += calcOrder(order).price;\r\n      tva += calcOrder(order).tva;\r\n      tvas.push({\r\n        value: calcOrder(order).tva,\r\n        perc: calcOrder(order).item_tva,\r\n      });\r\n    });\r\n    return { tot, tva, tvas };\r\n  };\r\n\r\n  var groupBy = function (xs, key) {\r\n    return xs?.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n\r\n  const handlePlusOrMinus = ({ key, order, sign }) => {\r\n    console.log({ order, sign });\r\n    if (sign == \"+\") {\r\n      let newOrder = { ...order, qt: order.qt + 1 };\r\n      console.log(newOrder);\r\n      dispatch(setOrderChange({ key, order: newOrder }));\r\n    } else {\r\n      if (order.qt == 1) {\r\n        dispatch(deleteOrder({ key }));\r\n      } else {\r\n        let newOrder = { ...order, qt: order.qt - 1 };\r\n        dispatch(setOrderChange({ key, order: newOrder }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => setShowModifyModal(false);\r\n\r\n  const handleExtra = ({ extraKey, sign }) => {\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    if (sign == \"+\" && copy.extras[extraKey].default_quantity < 1) {\r\n      copy.extras[extraKey].default_quantity += 1;\r\n      console.log(copy);\r\n      setOrderTo({ ...orderTo, order: copy });\r\n    } else {\r\n      if (copy.extras[extraKey].default_quantity > 0) {\r\n        copy.extras[extraKey].default_quantity -= 1;\r\n        console.log(copy);\r\n        setOrderTo({ ...orderTo, order: copy });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSlotSelect = ({ slotKey, id }) => {\r\n    console.log(slotKey, id);\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    copy.slots[slotKey].products.forEach((prod) => {\r\n      prod.id == id ? (prod.checked = true) : (prod.checked = false);\r\n      console.log(prod.name);\r\n    });\r\n    setOrderTo({ ...orderTo, order: copy });\r\n  };\r\n\r\n  const handleStepSelect = ({ id, STP }) => {\r\n    console.log(STP);\r\n    setselected(step);\r\n    let copy = JSON.parse(JSON.stringify(orderTo.order) || {});\r\n    let max_select = STP.max_select;\r\n    if (copy.stepItems[step] == undefined) {\r\n      copy.stepItems[step] = [];\r\n      console.log(copy);\r\n    }\r\n    if (copy.stepItems[step].length < max_select) {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        console.log(\"will push now\");\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n    {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        copy.stepItems[step] = [];\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n\r\n    setOrderTo({ ...orderTo, order: copy });\r\n    console.log(\"done\");\r\n    console.log(copy);\r\n  };\r\n\r\n  const handleUpdateOrder = () => {\r\n    dispatch(setOrderChange({ key: orderTo.key, order: orderTo.order }));\r\n    setShowModifyModal(false);\r\n    setshowRemise(false);\r\n  };\r\n\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substr(0, 10);\r\n  var time = curr.getHours() + \":\" + curr.getMinutes();\r\n\r\n\r\n  const handleConfirm = () => {\r\n    if (confirmed == true) {\r\n      handleFinish();\r\n    } else if (calcTotal().tot == 0) {\r\n      Swal.fire({\r\n        title: \"Attention le montant de la commande est 0  !\",\r\n      });\r\n    } else {\r\n      Swal.fire({\r\n        title: \"confirmer la commande ?\",\r\n        showDenyButton: true,\r\n        showCancelButton: false,\r\n        confirmButtonText: \"confirmer\",\r\n        denyButtonText: `annuler`,\r\n      }).then((result) => {\r\n        /* Read more about isConfirmed, isDenied below */\r\n        if (result.isConfirmed) {\r\n          handlePlaceOrder();\r\n          Swal.fire({\r\n            icon: \"success\",\r\n            title: \"commande confirme\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n          setconfirmed(true);\r\n        }\r\n      });\r\n    }\r\n    // setconfirmed(true);\r\n  };\r\n\r\n  const handlePlaceOrder = () => {\r\n    \r\n    let order = {\r\n      table: nbr || \"\",\r\n      server:username,\r\n      from_kiosk:false,\r\n      client_id: client?.id,\r\n      id: order_id ? order_id : \"\",\r\n      message: remarque || client?.message || \"aucune\",\r\n      customer_name: client?.name || \"\",\r\n      customer_company: client?.company || \"\",\r\n      code1: client?.code1 || \"\",\r\n      code2: client?.code2 || \"\",\r\n      interphone: client?.interphone || \"\",\r\n      etage: client?.etage || \"\",\r\n      table_number: table_number || 0,\r\n      customer_tel: client?.phone || \"\",\r\n      customer_adress: client?.address\r\n        ? `${client?.address} - ${client?.city} - ${client?.post}\r\n      code 1 : ${client?.code1 || \"\"} | code2 : ${client?.code2 || \"\"}\r\n       interphone : ${client?.interphone || \"\"} | etage : ${client?.etage || \"\"\r\n        }`\r\n        : \"\",\r\n      status: \"pending\",\r\n      orderType: orderType || \"surplace\",\r\n      paymentType: \"Especes\",\r\n      totalPrice: calcTotal().tot,\r\n      taxPrice: calcTotal().tva,\r\n      tvas: calcTotal().tvas,\r\n      orderItems: [],\r\n      date: client?.date || date,\r\n      time: client?.time || time,\r\n    };\r\n  \r\n    newOrders.map((one) => {\r\n      order.orderItems.push({\r\n        ...one,\r\n        price: one.finalPrice || calcOrder(one).dbPrice,\r\n        tva: calcOrder(one).item_tva,\r\n      });\r\n    });\r\n  \r\n\r\n    if (order_id) {\r\n      setlate_order_id(order_id);\r\n\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/updateorder\",\r\n          {\r\n            order: order,\r\n            user_id: user_id,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          axios\r\n            .post(\r\n              process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/printOrder\",\r\n              {\r\n                kitchen: true,\r\n                user_id: user_id,\r\n                order: {\r\n                  new: true,\r\n                  ...order,\r\n                  tvas: \"aspa\",\r\n                  table_number: order.table || \"\",\r\n                  order_id: order_id,\r\n                  Date: new Date(),\r\n                  nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n                },\r\n              }\r\n            )\r\n            .then((res) => console.log(res.data))\r\n            .catch((err) => console.log(err));\r\n          dispatch(\r\n            setCheckoutChange({\r\n              order: {\r\n                ...order,\r\n                table_number:\r\n                  table_number || currentOrder.table_number || client?.id,\r\n                order_id: order_id,\r\n                Date: new Date(),\r\n                nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n              },\r\n            })\r\n          );\r\n          console.log({\r\n            order: {\r\n              ...order,\r\n              order_id: res.data.id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...order,\r\n              order_id: order_id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n        });\r\n    } else if (newCommande.order_id) {\r\n      setlate_order_id(newCommande.order_id);\r\n\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/updateorder\",\r\n          {\r\n            order: order,\r\n            user_id: user_id,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          axios\r\n            .post(\r\n              process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/printOrder\",\r\n              {\r\n                kitchen: true,\r\n                user_id: user_id,\r\n                order: {\r\n                  new: true,\r\n                  ...order,\r\n                  tvas: \"aspa\",\r\n                  table_number: order.table || \"\",\r\n                  order_id: newCommande.order_id,\r\n                  Date: new Date(),\r\n                  nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n                },\r\n              }\r\n            )\r\n            .then((res) => console.log(res.data))\r\n            .catch((err) => console.log(err));\r\n          dispatch(\r\n            setCheckoutChange({\r\n              order: {\r\n                ...order,\r\n                table_number:\r\n                  table_number || currentOrder?.table_number || client?.id,\r\n                order_id: newCommande.order_id,\r\n                Date: new Date(),\r\n                nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n              },\r\n            })\r\n          );\r\n          console.log({\r\n            order: {\r\n              ...order,\r\n              order_id: res.data.id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...order,\r\n              order_id: newCommande.order_id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n        });\r\n    }\r\n\r\n    else {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/orders\",\r\n          {\r\n            client,\r\n            order: order,\r\n            how_paid: \"tout\",\r\n            user_id: user_id,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          setlate_order_id(res.data.id);\r\n    \r\n          axios\r\n            .post(\r\n              process.env.REACT_APP_API_HOST +\r\n              \":\" +\r\n              process.env.REACT_APP_API_PORT +\r\n              \"/api/printOrder\",\r\n              {\r\n                kitchen: true,\r\n                user_id: user_id,\r\n                order: {\r\n                  new: false,\r\n                  ...order,\r\n                  tvas: groupBy(calcTotal().tvas, \"perc\"),\r\n                  table_number: nbr || \"\",\r\n                  order_id: res.data.id,\r\n                  Date: new Date(),\r\n                  nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n                },\r\n              }\r\n            )\r\n            .then((res) => console.log(res.data))\r\n            .catch((err) => console.log(err));\r\n          dispatch(\r\n            addNewcheckoutData({\r\n              order: {\r\n                ...order,\r\n                table_number: table_number || client?.id,\r\n                order_id: res.data.id,\r\n                Date: new Date().getTime(),\r\n                nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n              },\r\n            })\r\n          );\r\n          let socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...order,\r\n              order_id: res.data.id,\r\n              Date: new Date(),\r\n              nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n            },\r\n          });\r\n          setNewCommande({\r\n\r\n            ...order,\r\n            order_id: res.data.id,\r\n            Date: new Date(),\r\n            nbrCouverts: client?.nbrCouverts || nbrCouverts,\r\n\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  };\r\n\r\n  const handleFinish = () => {\r\n    if (late_order_id != 0) {\r\n      navigate(\"/checkout/\" + late_order_id);\r\n      dispatch(clearOrders());\r\n    }\r\n    // console.log(order_id);\r\n    // if (selectedTable.nbr || order_id) {\r\n    //   console.log(\"nbr\", table_number);\r\n    //   console.log(\"order\", order_id);\r\n    //   console.log(\"late_order\", late_order_id);\r\n    //   navigate(\"/checkout/\" + table_number || order_id);\r\n    // } else {\r\n    //   console.log(\"else =======>\");\r\n    //   navigate(`/checkout/${client?.id}`);\r\n    // }\r\n  };\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  ///////////////////////////////////////////////////////////\r\n  const onLongPress = () => {\r\n    console.log(\"longpress is triggered\");\r\n  };\r\n\r\n  const onClick = () => {\r\n    console.log(\"click is triggered\");\r\n  };\r\n\r\n  const defaultOptions = {\r\n    shouldPreventDefault: false,\r\n    delay: 500,\r\n  };\r\n  const longPressEvent = useLongPress(onLongPress, onClick, defaultOptions);\r\n\r\n  const [showRemise, setshowRemise] = useState(false);\r\n\r\n  const handleTiroir = () => {\r\n    Swal.fire({\r\n      title: \"Ouvrir la caisse pour :\",\r\n      showDenyButton: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Faire la monnaie\",\r\n      denyButtonText: `Sans motif`,\r\n      cancelButtonText: \"Annuler\",\r\n    }).then((result) => {\r\n      console.log(result);\r\n      /* Read more about isConfirmed, isDenied below */\r\n      if (result.isConfirmed) {\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"pour Faire la monnaie\",\r\n            title: \"Ouverture de tiroir\",\r\n            content: \"ouverture de la caisse par le serveur\",\r\n          }\r\n        );\r\n\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Ouvert pour faire la monnaie\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n      } else if (result.isDenied) {\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"sans motif\",\r\n            title: \"Ouverture de tiroir\",\r\n            content: \"ouverture de la caisse par le serveur\",\r\n          }\r\n        );\r\n\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Ouvert sans motif\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleAnnuler = () => {\r\n    Swal.fire({\r\n      title: \"Motif d'annulation \",\r\n      showDenyButton: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: \"Aucun\",\r\n      denyButtonText: `Impay`,\r\n      cancelButtonText: \"Fermer\",\r\n    }).then((result) => {\r\n    \r\n\r\n      /* Read more about isConfirmed, isDenied below */\r\n      if (result.isConfirmed) {\r\n        if (order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: currentOrder,\r\n            }\r\n          );\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...currentOrder\r\n\r\n            },\r\n          });\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Aucun\"} }));\r\n        }\r\n        if (newCommande.order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: newCommande,\r\n            }\r\n          );\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...newCommande\r\n\r\n            },\r\n          });\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Aucun\"} }));\r\n        }\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"Aucun\",\r\n            title: \"Annulation\",\r\n            content: \"Annulation de commande par le serveur\",\r\n          }\r\n        );\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Annul (Aucun)\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n\r\n        dispatch(clearOrders());\r\n        navigate(\"/main\");\r\n      } else if (result.isDenied) {\r\n        if (order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: currentOrder,\r\n            }\r\n          );\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...currentOrder\r\n\r\n            },\r\n          });\r\n\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Impay\"} }));\r\n        }\r\n        if (newCommande.order_id) {\r\n          axios.post(\r\n            process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/cancelorder\",\r\n            {\r\n              order: newCommande,\r\n            }\r\n          );\r\n          const socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\n          socket.emit(`accept${user_id}`, {\r\n            order: {\r\n              ...newCommande\r\n\r\n            },\r\n          });\r\n\r\n          dispatch(setCheckoutChange({order:{...currentOrder,status:\"rejected\",timeRejection:time,rejectedFrom:username,rejected:\"Impay\"} }));\r\n        }\r\n\r\n\r\n        axios.post(\r\n          process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/pushlog\",\r\n          {\r\n            user_id: user_id,\r\n            user: user,\r\n            faire: \"Impay\",\r\n            title: \"Annulation\",\r\n            content: \"Annulation de commande par le serveur\",\r\n          }\r\n        );\r\n\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Annul (Impay)\",\r\n          showConfirmButton: false,\r\n          timer: 1000,\r\n        });\r\n        dispatch(clearOrders());\r\n        navigate(\"/main\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"cart-menu\">\r\n      {selectedTable.nbr ? (\r\n        <h6 className=\"cart-menu-table-nbr\">{`table ${nbr} - ${nbrCouverts} ${t(\r\n          \"couverts\"\r\n        )}`}</h6>\r\n      ) : client.name ? (\r\n        <h6 className=\"cart-menu-table-nbr\">{`Client ${client.name} - ${client.type}\r\n          `}</h6>\r\n      ) : \r\n        order_id?<b>Commande # {order_id}</b>:<br/>\r\n      }\r\n      <Table className=\"ttt2\">\r\n        <thead className=\"tbds2\">\r\n          <tr>\r\n            <th>{t(\"article\")}</th>\r\n            <th>Qte</th>\r\n            <th>{t(\"price\")}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody\r\n          className=\"scro2 \"\r\n          style={{ backgorunImage: `url(${cartbg}) !important` }}\r\n        >\r\n          {newOrders?.map((order, key) => (\r\n            <tr\r\n              className=\"catt\"\r\n              style={{\r\n                backgroundColor:\r\n                  order.new == \"true\" || confirmed == true\r\n                    ? \"#55efc4\"\r\n                    : \"transparent\",\r\n                color:\r\n                  order.new == \"true\" || confirmed == true ? \"white\" : \"black\",\r\n              }}\r\n            >\r\n              <td className=\"mytd\">\r\n                <p\r\n                  onClick={() => {\r\n                    setOrderTo({ order, key });\r\n                    setshowRemise(true);\r\n                  }}\r\n                  className=\"mytd_order-name\"\r\n                >\r\n                  {order.name}\r\n                </p>\r\n                {order.extras && order.extras.length\r\n                  ? order.extras\r\n                    .filter((el) => el.default_quantity > 0)\r\n                    .map((extra) => (\r\n                      <span className=\"boba\">{extra.title}-</span>\r\n                    ))\r\n                  : \"\"}\r\n                {order.stepItems && Object.keys(order.stepItems).length ? (\r\n                  <div>\r\n                    {Object.keys(order.stepItems).map((key) =>\r\n                      order.stepItems[key].map((el) => (\r\n                        <span\r\n                          style={{\r\n                            textAlign: \"start\",\r\n                            color: \"#ff6b6b\",\r\n                          }}\r\n                        >\r\n                          -{el.name}\r\n                        </span>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n                ) : order.is_supp ? (\r\n                  <div className=\"order_with_supp_item\">\r\n\r\n                    {order?.suppSelected.map((key, el) => (\r\n                      <span \r\n                      key={key}\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"#ff6b6b\",\r\n                        }}\r\n                      >\r\n                     - {order?.suppSelected.at(el).name}\r\n                      </span>\r\n                    ))}\r\n\r\n\r\n\r\n                  </div>\r\n                )\r\n\r\n                  : order?.slots ? (\r\n                    <div>\r\n                      <span\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"grey\",\r\n                        }}\r\n                      >\r\n                        {\r\n                          Object.entries(order.slots)[0]?.[1]?.products?.filter(\r\n                            (e) => e.checked\r\n                          )[0]?.name\r\n                        }\r\n                      </span>\r\n                      <br />\r\n                      <span\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"grey\",\r\n                        }}\r\n                      >\r\n                        {\r\n                          Object.entries(order.slots)[1]?.[1]?.products?.filter(\r\n                            (e) => e.checked\r\n                          )[0]?.name\r\n                        }\r\n                      </span>\r\n                      <br />\r\n                      <span\r\n                        style={{\r\n                          textAlign: \"start\",\r\n                          color: \"grey\",\r\n                        }}\r\n                      >\r\n                        {\r\n                          Object.entries(order.slots)[2]?.[1]?.products?.filter(\r\n                            (e) => e.checked\r\n                          )[0]?.name\r\n                        }\r\n                      </span>\r\n                    </div>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n              </td>\r\n              <td\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-evenly\",\r\n                  height: \"30px\",\r\n                }}\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faMinusCircle}\r\n                  color=\"#ff6b6b\"\r\n                  onClick={() => handlePlusOrMinus({ order, key, sign: \"-\" })}\r\n                />\r\n                <p\r\n                  className=\"mytd_order-qty\"\r\n                  onClick={() => {\r\n                    setOrderTo({ order, key });\r\n                    setShowModifyModal(true);\r\n                  }}\r\n                  {...longPressEvent}\r\n                >\r\n                  <b>{order.qt}</b>\r\n                </p>\r\n\r\n                <FontAwesomeIcon\r\n                  icon={faPlusCircle}\r\n                  color=\"#ff6b6b\"\r\n                  onClick={() => handlePlusOrMinus({ order, key, sign: \"+\" })}\r\n                  variant=\"success\"\r\n                />\r\n              </td>\r\n              <td\r\n                style={{\r\n                  height: \"30px\",\r\n                }}\r\n              >\r\n                <p\r\n                  className=\"mytd_order-qty\"\r\n                  style={{\r\n                    fontWeight: \"bold\",\r\n                    display: \"flex\",\r\n                  }}\r\n                >\r\n                  {calcOrder(order).price.toFixed(2)}{\" \"}\r\n                  {renderHTML(`<i>${currency}</i>`)}\r\n                </p>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n        {/* <div class=\"zigzag-section\"></div> */}\r\n      </Table>\r\n\r\n      <div\r\n        style={{\r\n          width: \"25%\",\r\n          height: \"200px\",\r\n          backgroundColor: \"#f1f1f1\",\r\n          position: \"absolute\",\r\n          bottom: \"0\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            borderBottom: \"1px solid white\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            position: \"relative\",\r\n            backgroundImage: `url(${image})`,\r\n            objectFit: \"contain\",\r\n            width: \"100%\",\r\n            height: \"50px\",\r\n            paddingTop: \"5px\",\r\n          }}\r\n        >\r\n          <h2\r\n            className=\"dig\"\r\n            style={{\r\n              zIndex: \"999\",\r\n              color: \"#00b894\",\r\n              display: \"flex\",\r\n              paddingLeft: \"1rem\",\r\n              fontFamily: \"DS-DIGIT !important\",\r\n            }}\r\n          >\r\n            {`Total : ${(calcTotal().tot + calcTotal().tva).toFixed(2)}`}{\" \"}\r\n            {renderHTML(`<i >${currency}</i>`)}\r\n          </h2>\r\n        </div>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n          }}\r\n        >\r\n          <Button\r\n            className=\"cart_btn btn4\"\r\n            variant={confirmed == true ? \"danger\" : \"warning\"}\r\n            onClick={() => {\r\n              if (orders && orders.length > 0) {\r\n                handleConfirm();\r\n              }\r\n            }}\r\n          >\r\n            {confirmed == true ? (\r\n              <>\r\n                {late_order_id == 0 && (\r\n                  <Spinner animation=\"border\" variant=\"light\" />\r\n                )}{\" \"}\r\n                Finir\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FontAwesomeIcon icon={faCheck} /> Confirmer\r\n              </>\r\n            )}\r\n          </Button>\r\n          <Button\r\n            className=\"cart_btn\"\r\n            variant=\"success\"\r\n            onClick={() => handleTiroir()}\r\n          >\r\n            {t(\"tiroir\")}\r\n          </Button>\r\n          <Button className=\"cart_btn\" variant=\"danger\" onClick={handleAnnuler}>\r\n            {t(\"cancel\")}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <Modal\r\n        dialogClassName=\"modal_body\"\r\n        show={ShowModifyModal}\r\n        onHide={() => {\r\n          handleClose();\r\n          setstep(1);\r\n        }}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{orderTo.order?.name}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>{orderTo.order?.description}</p>\r\n          {orderTo.order?.extras && orderTo.order?.extras.length ? (\r\n            orderTo.order?.extras.map((extra, key) => (\r\n              <tr\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"50%\",\r\n                }}\r\n              >\r\n                <td\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-evenly\",\r\n                    alignItems: \"center\",\r\n                    height: \"30px\",\r\n                    width: \"25%\",\r\n                    marginRight: \"1rem\",\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"-\" })}\r\n                    icon={faMinusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                  <h5>\r\n                    <b>{extra.default_quantity}</b>\r\n                  </h5>\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"+\" })}\r\n                    icon={faPlusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                </td>\r\n                <td style={{ marginRight: \"1rem\" }}>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b>{extra.title}</b>\r\n                  </h5>\r\n                </td>\r\n                <td>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                      {extra.price.toFixed(2)}{\" \"}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </b>\r\n                  </h5>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : orderTo.order?.isComp ? (\r\n            <Table striped bordered>\r\n              <thead>\r\n                <tr>\r\n                  {Object.keys(orderTo.order?.slots || {}).map((slotKey) => (\r\n                    <td>{slotKey}</td>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {Object.keys(orderTo.order?.slots || {}).map((slotKey) => (\r\n                  <td>\r\n                    {orderTo.order?.slots[slotKey].products.map((prod) => (\r\n                      <div\r\n                        style={{ display: \"flex\", cursor: \"pointer\" }}\r\n                        className={prod.checked ? \"checked\" : \"not\"}\r\n                        onClick={() =>\r\n                          handleSlotSelect({ slotKey, id: prod.id })\r\n                        }\r\n                      >\r\n                        <img src={prod.image} width=\"30px\" height=\"30px\" />\r\n                        <div>\r\n                          <h6>{prod.name}</h6>\r\n                          <p>{prod.description}</p>\r\n                        </div>\r\n                        <p>\r\n                          {prod.price} {renderHTML(`<i>${currency}</i>`)}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                  </td>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          ) : orderTo.order?.nsteps > 0 ? (\r\n            <div>\r\n              <h6>\r\n                <b>\r\n                  {\r\n                    nsteps.filter(\r\n                      (nstep) => nstep.menu_id == orderTo.order?.id\r\n                    )[0][step]?.nom_etape\r\n                  }\r\n                </b>\r\n              </h6>\r\n              <div className=\"steps_cont\">\r\n                {nsteps\r\n                  .filter((nstep) => nstep.menu_id == orderTo.order?.id)[0]\r\n                [step].choice.map((slot) => (\r\n                  <div\r\n                    className={\r\n                      orderTo.order?.stepItems[step]?.find(\r\n                        (el) => el.id == slot\r\n                      )\r\n                        ? \"prod prod_sel\"\r\n                        : \"prod\"\r\n                    }\r\n                    onClick={() =>\r\n                      handleStepSelect({\r\n                        id: slot,\r\n                        STP: nsteps.filter(\r\n                          (nstep) => nstep.menu_id == orderTo.order?.id\r\n                        )[0][step],\r\n                      })\r\n                    }\r\n                  >\r\n                    <img\r\n                      src={findProductWithId(slot).image}\r\n                      alt=\"\"\r\n                      height=\"70px\"\r\n                      width=\"70px\"\r\n                    />\r\n                    <h6 style={{ display: \"flex\" }}>\r\n                      <b> {findProductWithId(slot).name} </b>\r\n                      <span>\r\n                        <b\r\n                          style={{\r\n                            display: \"flex\",\r\n                            marginLeft: \"1rem\",\r\n                            color: \"#ff6b6b\",\r\n                          }}\r\n                        >\r\n                          {findProductWithId(slot).price}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </b>\r\n                      </span>{\" \"}\r\n                    </h6>\r\n                    <p>{findProductWithId(slot).description}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {orderTo.order?.nsteps >= step && step > 0 ? (\r\n                <Button\r\n                  style={{ marginRight: \"1rem\" }}\r\n                  variant=\"outline-secondary\"\r\n                  onClick={() => {\r\n                    if (step > 1) {\r\n                      setstep(step - 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  retour\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {orderTo.order?.nsteps > step && step > 0 ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (orderTo.order?.nsteps > step && selected == step) {\r\n                      setstep(step + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  suivant\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {orderTo.order?.nsteps == step ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (selected == step) {\r\n                      handleUpdateOrder();\r\n                    }\r\n                  }}\r\n                >\r\n                  finir\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button\r\n            variant=\"danger\"\r\n            onClick={() => {\r\n              dispatch(deleteOrder({ key: orderTo.key }));\r\n              handleClose();\r\n              setstep(1);\r\n            }}\r\n          >\r\n            Supprimer\r\n          </Button>\r\n          <Button\r\n            variant=\"secondary\"\r\n            onClick={() => {\r\n              handleClose();\r\n              setstep(1);\r\n            }}\r\n          >\r\n            {t(\"cancel\")}\r\n          </Button>\r\n          {orderTo.order?.nsteps == 0 || orderTo.order?.isComp ? (\r\n            <Button variant=\"warning\" onClick={() => handleUpdateOrder()}>\r\n              {t(\"aded\")}\r\n            </Button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n      {showRemise && (\r\n        <RemiseModal\r\n          setshowRemise={setshowRemise}\r\n          orderTo={orderTo}\r\n          setOrderTo={setOrderTo}\r\n          handleUpdateOrder={handleUpdateOrder}\r\n          calcOrder={calcOrder}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartMenu;\r\n","export default \"data:image/png;base64,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INBEQIFsEqQzCBAgQIAAAQJVAgpklbQ5BAgQIECAAIEmAgpkkyCdQYAAAQIECBCoElAgq6TNIUCAAAECBAg0EVAgmwTpDAIECBAgQIBAlYACWSVtDgECBAgQIECgiYAC2SRIZxAgQIAAAQIEqgQUyCppcwgQIECAAAECTQQWt1+/f6665eLd2w+r6/Vx3HizGfbjtmq0OQQIECBAgAABAhMJLL7t9oeJ3vWq1/x4//H43Jsvn171vIcIECBAgAABAgSyBPyEnZWHbQgQIECAAAEC8QIKZHxEFiRAgAABAgQIZAkokFl52IYAAQIECBAgEC+gQMZHZEECBAgQIECAQJaAApmVh20IECBAgAABAvECCmR8RBYkQIAAAQIECGQJKJBZediGAAECBAgQIBAvoEDGR2RBAgQIECBAgECWgAKZlYdtCBAgQIAAAQLxAgpkfEQWJECAAAECBAhkCSiQWXnYhgABAgQIECAQL6BAxkdkQQIECBAgQIBAloACmZWHbQgQIECAAAEC8QIKZHxEFiRAgAABAgQIZAkokFl52IYAAQIECBAgEC+gQMZHZEECBAgQIECAQJaAApmVh20IECBAgAABAvECCmR8RBYkQIAAAQIECGQJKJBZediGAAECBAgQIBAvoEDGR2RBAgQIECBAgECWgAKZlYdtCBAgQIAAAQLxAgpkfEQWJECAAAECBAhkCSiQWXnYhgABAgQIECAQL6BAxkdkQQIECBAgQIBAloACmZWHbQgQIECAAAEC8QIKZHxEFiRAgAABAgQIZAkokFl52IYAAQIECBAgEC+gQMZHZEECBAgQIECAQJaAApmVh20IECBAgAABAvECCmR8RBYkQIAAAQIECGQJLG7vHw9VK12slsPqen0cN95shv24rRptDgECBAgQIECAwEQCi7uH57IC+bS8/E2BvNruJjrDawgQIECAAAECBKoE/IRdJW0OAQIECBAgQKCJgALZJEhnECBAgAABAgSqBBTIKmlzCBAgQIAAAQJNBBTIJkE6gwABAgQIECBQJaBAVkmbQ4AAAQIECBBoIqBANgnSGQQIECBAgACBKgEFskraHAIECBAgQIBAEwEFskmQziBAgAABAgQIVAkokFXS5hAgQIAAAQIEmggokE2CdAYBAgQIECBAoEpAgaySNocAAQIECBAg0ERAgWwSpDMIECBAgAAB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\"","import React from \"react\";\r\nimport { Stack } from \"react-bootstrap\";\r\n\r\nconst Category = ({ setSelectedCategory, categories, selectedCategory }) => {\r\n  function getRandomColor() {\r\n    var letters = \"0123456789ABCDEF\";\r\n    var color = \"#\";\r\n    for (var i = 0; i < 6; i++) {\r\n      color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n  }\r\n\r\n  return (\r\n    <div className=\"cat_container\">\r\n      {categories\r\n        .filter((cat) => cat.state == true)\r\n        .map((category) => (\r\n          <div\r\n            style={{ background: `${category.color}` }}\r\n            className={\r\n              selectedCategory == category.id\r\n                ? \"cat_item cat_item_selected\"\r\n                : \"cat_item\"\r\n            }\r\n            onClick={() => {\r\n              setSelectedCategory(category.id);\r\n            }}\r\n          >\r\n            <img width=\"50px\" height=\"50px\" src={category.picture} className=\"category_img\"/>\r\n            <h6 className=\"cat_name\"> \r\n              {category.name.substring(0, 13) + \"...\"}\r\n            </h6>\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Category;\r\n","import {\r\n  faAngleDoubleLeft,\r\n  faAngleDoubleRight,\r\n \r\n  faCheck,\r\n  faMinusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Cursor } from \"mongoose\";\r\nimport React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setNewOrder } from \"../Slices/order\";\r\n\r\nconst SuppModal = ({ orderWithSupp,handleAddOrderWithSupp,handleaAddDrink,drinks,suppSelected ,order_id, setShowSupplements,setSuppSelected,setDrinks}) => {\r\n  const [page, setPage] = useState(\"sauces\");\r\n  const dispatch= useDispatch()\r\n  const hadnleClose= ()=>{\r\n    setShowSupplements(false);\r\n    setDrinks(null);\r\n    setSuppSelected([])\r\n\r\n  }\r\n  const handleTerminer =()=>{\r\n    dispatch(setNewOrder({\r\n      order: {\r\n        ...orderWithSupp,\r\n        qt: 1,\r\n        stepItems: {},\r\n        remise: 0,\r\n        offert: false,\r\n        new: order_id ? \"true\" : \"false\",\r\n      },\r\n    }));\r\n    setShowSupplements(false);\r\n    setDrinks(null);\r\n    setSuppSelected([])\r\n\r\n  }\r\n  return (\r\n    <div className=\"product_with_supp\">\r\n      <FontAwesomeIcon icon={faTimes} style={{position:\"absolute\", right:\"3%\",top:\"6%\",fontSize:\"1.5rem\",cursor:\"pointer\" }} onClick={()=>hadnleClose()}/>\r\n      <div className=\"supp_header\">\r\n        <div className=\"supp_img\">\r\n          <img width=\"50px\" height=\"50px\" src={orderWithSupp.image} />\r\n          <h5>{orderWithSupp.name} +</h5>\r\n        </div>\r\n\r\n        <div className=\"supp_selected_items\">\r\n            {orderWithSupp.suppSelected.map((item,key)=>(\r\n               <div className=\"selected_item\" key={key}>\r\n               <img width=\"50px\" height=\"50px\" src={item.image} />\r\n               <h5>{item.name}</h5>\r\n             </div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n      {page==\"sauces\"?<div className=\"supp_body\">\r\n        {orderWithSupp.supplement.sauces.map((sauce, key) => (\r\n          <div className={suppSelected.length==3 && suppSelected.findIndex(e=>e.id==sauce.id)==-1 ?\"supp_item item_disabled\":\"supp_item \"} key={key} onClick={()=>handleAddOrderWithSupp(sauce)}>\r\n            <img width=\"60px\" height=\"60px\" src={sauce.image} />\r\n            <h5>{sauce.name}</h5>\r\n           { orderWithSupp.suppSelected.findIndex(e=>e.id==sauce.id)!=-1 && <FontAwesomeIcon icon={faMinusSquare} style={{color:\"red\",fontSize:\"1.5rem\",position:\"absolute\" ,bottom:\"-9%\"}} />}\r\n          </div>\r\n        ))}\r\n      </div>:\r\n      <div className=\"supp_body\">\r\n      {orderWithSupp.supplement.drinks.map((drink, key) => (\r\n        <div className=\"supp_item\" key={key}\r\n        onClick={()=>handleaAddDrink(drink)}\r\n        >\r\n          <img width=\"60px\" height=\"60px\" src={drink.image} />\r\n          <h5>{drink.name}</h5>\r\n          {drinks?.id==drink?.id?<FontAwesomeIcon icon={faCheck} style={{color:\"red\",fontSize:\"1.5rem\",position:\"absolute\" ,bottom:\"-15%\"}} />:\"\"}\r\n        </div>\r\n      ))}\r\n    </div>\r\n      }\r\n      <div className=\"supp_footer\">\r\n      { page == \"sauces\" && <button style={{ right: \"0\" }} onClick={() => setPage(\"drinks\")}>\r\n          {suppSelected.length==0 ? \"Non merci\" : \"Suivant\"}\r\n          <FontAwesomeIcon icon={faAngleDoubleRight} />\r\n        </button>}\r\n        {page == \"drinks\" && (\r\n          <button style={{ right: \"0\" }} onClick={handleTerminer}>\r\n            \r\n            Terminer\r\n            <FontAwesomeIcon icon={faAngleDoubleRight} />\r\n          </button>\r\n        )}\r\n        {page == \"drinks\" && (\r\n          <button style={{ left: \"0\" }}\r\n          onClick={()=>setPage(\"sauces\")}\r\n          >\r\n            <FontAwesomeIcon icon={faAngleDoubleLeft} />\r\n            Prcedent\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SuppModal;\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { Modal, Button, Table, Carousel } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCheck,\r\n  faEdit,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPencilAlt,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport useTranslation from \"./../i18\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setNewOrder } from \"../Slices/order\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { updateProduct } from \"../Slices/data\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport SuppModal from \"./SuppModal\";\r\nimport { set } from \"mongoose\";\r\n\r\nconst Item = ({ product, setAlert, order_id,setconfirmed,confirmed }) => {\r\n  const [index, setIndex] = useState(0);\r\n\r\n  const handleSelect = (selectedIndex, e) => {\r\n    setIndex(selectedIndex);\r\n  };\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const nsteps = useSelector((state) => state.data.nSteps);\r\n  const products = useSelector((state) => state.data.products);\r\n  const [step, setstep] = useState(1);\r\n  const [selected, setselected] = useState(1);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [showSupplements, setShowSupplements] = useState(false);\r\n\r\n  const [newProduct, setnewProduct] = useState(undefined);\r\n  const [showstock, setshowstock] = useState(false);\r\n  const [tva, setTva] = useState(null);\r\n  const client = useSelector((state) => state.order.client);\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n  const [orderWithSupp, setOrderWithSupp] = useState({\r\n    active:product?.active,\r\n    cat_id:product?.cat_id,\r\n    description:product?.description,\r\n    extras:product?.extras,\r\n    id:product?.id,\r\n    image:product?.image,\r\n    isComp:product?.isComp,\r\n    is_alcool:product?.is_alcool,\r\n    is_cold:product?.is_cold,\r\n    is_hot: product?.is_hot,\r\n    is_supp:product?.is_supp,\r\n    name:product?.name,\r\n    nsteps:product?.nsteps,\r\n    price:product?.price,\r\n    tva:product?.tva,\r\n    drink_id:\"\",\r\n    suaces_ids:[],\r\n    suppSelected:[],\r\n    qt:1,\r\n    supplement:{\r\n      drinks:[],\r\n      sauces:[]\r\n    }\r\n   \r\n \r\n  })\r\n  const [suppSelected, setSuppSelected] = useState([])\r\n  const [drinks, setDrinks] = useState(null)\r\n  useEffect(() => {\r\n    \r\n   \r\n    let supplements\r\n    if(drinks==null){\r\n      supplements=[...suppSelected]\r\n    }else{\r\n      supplements=[...suppSelected,drinks]\r\n     \r\n    }\r\n    let saucesIds =suppSelected.map(e=>e.id)\r\n    \r\n    setOrderWithSupp({...orderWithSupp,suppSelected:supplements,suaces_ids:saucesIds})\r\n  \r\n  }, [suppSelected,drinks])\r\n\r\n  var check\r\n  const handleAddOrderWithSupp= async (sauce)=>{\r\n       check= suppSelected.findIndex(e=>e.id==sauce.id)\r\n       if(check!=-1){\r\n        let filtred=  suppSelected.filter(e=>e.id!=sauce.id)\r\n     \r\n      \r\n     setSuppSelected(filtred);\r\n  \r\n     \r\n       }else{\r\n        if(suppSelected.length<3)\r\n      { setSuppSelected([...suppSelected,sauce]);}\r\n      \r\n        \r\n    \r\n       }\r\n    \r\n  }\r\nconst  handleaAddDrink =(drink)=>{\r\nif(drink==drinks){\r\n  setDrinks(null)\r\n  setOrderWithSupp({...orderWithSupp,drink_id:drink.id,price:product.price})\r\n}  \r\nelse{\r\n  setDrinks(drink)\r\n  setOrderWithSupp({...orderWithSupp,drink_id:drink.id,price:product.price+drink.price})\r\n}\r\n\r\n\r\n  }\r\n  useEffect(() => {\r\n    let tva;\r\n    if (client.type == \"surplace\" || client.type == \"livraison\") {\r\n      tva = tva_mode.find((e) => e.nom == \"surplace\").valeur;\r\n      setTva(tva);\r\n    } else if (client.type == \"emporter\") {\r\n      tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n      setTva(tva);\r\n    }\r\n    if (rab_tva > 0) {\r\n      tva = rab_tva;\r\n      setTva(tva);\r\n    }\r\n    console.log(tva);\r\n  }, []);\r\n\r\n  const selectProduct = () => {\r\n    setconfirmed(false)\r\n    if (\r\n      product?.extras?.length == 0 &&\r\n      product?.nsteps == 0 &&\r\n      product?.isComp == false &&\r\n      product?.is_supp == false\r\n    ) {\r\n      toast(\"Ajoute !\", {\r\n        position: \"bottom-center\",\r\n        autoClose: 1000,\r\n        type: \"success\",\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n      dispatch(\r\n        setNewOrder({\r\n          order: {\r\n            ...product,\r\n            qt: 1,\r\n            stepItems: {},\r\n            remise: 0,\r\n            offert: false,\r\n            new: order_id ? \"true\" : \"false\",\r\n          },\r\n        })\r\n      );\r\n    }else if(product?.is_supp){\r\n      setShowSupplements(true)\r\n      setOrderWithSupp(\r\n        {\r\n          active:product?.active,\r\n    cat_id:product?.cat_id,\r\n    description:product?.description,\r\n    extras:product?.extras,\r\n    id:product?.id,\r\n    image:product?.image,\r\n    isComp:product?.isComp,\r\n    is_alcool:product?.is_alcool,\r\n    is_cold:product?.is_cold,\r\n    is_hot: product?.is_hot,\r\n    is_supp:product?.is_supp,\r\n    name:product?.name,\r\n    nsteps:product?.nsteps,\r\n    price:product?.price,\r\n    tva:product?.tva,\r\n    drink_id:\"\",\r\n    suaces_ids:[],\r\n    suppSelected:[],\r\n    qt:1,\r\n    supplement:{\r\n      drinks:[...product?.supplement?.drinks],\r\n      sauces:[...product?.supplement?.sauces]\r\n    }\r\n        }\r\n      )\r\n    }\r\n    else {\r\n      setShowPreview(true);\r\n      setnewProduct({\r\n        ...product,\r\n        qt: 1,\r\n        stepItems: {},\r\n        remise: 0,\r\n        offert: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSlotSelect = ({ slotKey, id }) => {\r\n    console.log(slotKey, id);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    copy.slots[slotKey].products.forEach((prod) => {\r\n      prod.id == id ? (prod.checked = true) : (prod.checked = false);\r\n      console.log(prod.name);\r\n    });\r\n    setnewProduct(copy);\r\n  };\r\n\r\n  const handleExtra = ({ extraKey, sign }) => {\r\n    console.log(\"handleExtra\", { extraKey, sign });\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    if (sign == \"+\" && copy.extras[extraKey].default_quantity < 1) {\r\n      copy.extras[extraKey].default_quantity += 1;\r\n      console.log(copy);\r\n      setnewProduct(copy);\r\n    } else {\r\n      if (copy.extras[extraKey].default_quantity > 0) {\r\n        copy.extras[extraKey].default_quantity -= 1;\r\n        console.log(copy);\r\n        setnewProduct(copy);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAlert = ({ show, msg, type }) => {\r\n    setAlert({ show, msg, type });\r\n    setTimeout(() => {\r\n      setAlert({ show: false, msg: \"\", type: \"\" });\r\n    }, 1500);\r\n  };\r\n\r\n  const handleNewOrderToCart = () => {\r\n    toast(\"Ajoute !\", {\r\n      position: \"bottom-center\",\r\n      autoClose: 1000,\r\n      type: \"success\",\r\n      hideProgressBar: true,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n  };\r\n\r\n  const handleNewOrderWithStepsToCart = () => {\r\n    toast(\"Ajoute !\", {\r\n      position: \"bottom-center\",\r\n      autoClose: 1000,\r\n      type: \"success\",\r\n      hideProgressBar: true,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    });\r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n    setstep(1);\r\n  };\r\n\r\n  const findProductWithId = (id) => {\r\n    return products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  const handleStepSelect = ({ id, STP }) => {\r\n    console.log(\"stp\",STP);\r\n    setselected(step);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    let max_select = STP.max_select;\r\n    if (copy.stepItems[step] == undefined) {\r\n      copy.stepItems[step] = [];\r\n      console.log(copy);\r\n    }\r\n    if (copy.stepItems[step].length < max_select) {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        console.log(\"will push now\");\r\n        copy.stepItems[step].push(findProductWithId(id)); \r\n      }\r\n    }\r\n    {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        copy.stepItems[step] = [];\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n    setnewProduct(copy);\r\n    console.log(\"done\");\r\n    console.log(copy);\r\n  };\r\n\r\n  const handleStock = () => {\r\n    setshowstock(false);\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/resetwarehouse\",\r\n        { prod_id: product.id }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        dispatch(updateProduct({ id: product.id }));\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"produit mis hors stock !\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n      });\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  return (\r\n    <>\r\n      <ToastContainer />\r\n      <div className=\"item_container\">\r\n        <p>\r\n          <b>{product.name.substring(0, 21)}</b>\r\n        </p>\r\n        <img src={product.image} onClick={selectProduct} className=\"prod_img\" />\r\n        <div className=\"price\">\r\n          {`${product.price.toFixed(2)}`}\r\n          {renderHTML(`<i>${currency}</i>`)}\r\n        </div>\r\n        <FontAwesomeIcon\r\n          onClick={(e) => setshowstock(true)}\r\n          icon={faTimes}\r\n          size=\"1x\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: \"0px\",\r\n            right: \"5px\",\r\n            color: \"red\",\r\n            backgroundColor: \"white\",\r\n            borderRadius: \"25%\",\r\n          }}\r\n        />\r\n      </div>\r\n        <div className=\"supp_modal\">\r\n         { showSupplements? <SuppModal setDrinks={setDrinks} setSuppSelected={setSuppSelected} setShowSupplements={setShowSupplements} handleaAddDrink={handleaAddDrink} suppSelected={suppSelected} drinks={drinks} handleAddOrderWithSupp={handleAddOrderWithSupp} orderWithSupp={orderWithSupp} order_id ={order_id}/>:\"\"}\r\n        </div>\r\n      <Modal\r\n        dialogClassName=\"modal_body\"\r\n        show={showPreview}\r\n        onHide={() => {\r\n          setShowPreview(false);\r\n          setstep(1);\r\n        }}\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>\r\n            <img width=\"30px\" height=\"30px\" src={product.image} />\r\n            {newProduct?.name}\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>{newProduct?.description}</p>\r\n\r\n          {newProduct?.extras && newProduct?.extras.length ? (\r\n            newProduct?.extras.map((extra, key) => (\r\n              <tr\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"50%\",\r\n                }}\r\n              >\r\n                <td\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-evenly\",\r\n                    alignItems: \"center\",\r\n                    height: \"30px\",\r\n                    width: \"25%\",\r\n                    marginRight: \"1rem\",\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"-\" })}\r\n                    icon={faMinusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                  <h5>\r\n                    <b>{extra.default_quantity}</b>\r\n                  </h5>\r\n                  <FontAwesomeIcon\r\n                    onClick={() => handleExtra({ extraKey: key, sign: \"+\" })}\r\n                    icon={faPlusCircle}\r\n                    color=\"#ff6b6b\"\r\n                  />\r\n                </td>\r\n                <td style={{ marginRight: \"1rem\" }}>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b>{extra.title}</b>\r\n                  </h5>\r\n                </td>\r\n                <td>\r\n                  {\" \"}\r\n                  <h5>\r\n                    <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                      {extra.price.toFixed(2)}{\" \"}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </b>\r\n                  </h5>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : newProduct?.isComp ? (\r\n            // <Table>\r\n            //   <thead className=\"comphead\">\r\n            //     <tr>\r\n            //       {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n            //         <td>{slotKey}</td>\r\n            //       ))}\r\n            //     </tr>\r\n            //   </thead>\r\n            //   <tbody>\r\n            //     {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n            //       <td>\r\n            //         {newProduct?.slots[slotKey].products.map((prod) => (\r\n            //           <div\r\n            //             style={{\r\n            //               cursor: \"pointer\",\r\n            //               position: \"relative\",\r\n            //             }}\r\n            //             // className={prod.checked ? \"checked\" : \"not\"}\r\n            //             onClick={() =>\r\n            //               handleSlotSelect({ slotKey, id: prod.id })\r\n            //             }\r\n            //           >\r\n            //             <h6>\r\n            //               <b\r\n            //                 style={{\r\n            //                   color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n            //                 }}\r\n            //               >\r\n            //                 {prod.name}\r\n            //               </b>\r\n            //             </h6>\r\n            //             <img\r\n            //               src={prod.image}\r\n            //               width=\"50px\"\r\n            //               height=\"50px\"\r\n            //               style={{\r\n            //                 borderRadius: \"50%\",\r\n            //                 borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n            //               }}\r\n            //             />\r\n            //             {/* <div className=\"price\">\r\n            //               {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n            //             </div> */}\r\n            //             {prod.checked ? (\r\n            //               <FontAwesomeIcon\r\n            //                 icon={faCheck}\r\n            //                 color=\"#ff6b6b\"\r\n            //                 style={{\r\n            //                   position: \"absolute\",\r\n            //                   top: \"5px\",\r\n            //                   right: \"5px\",\r\n            //                 }}\r\n            //               />\r\n            //             ) : (\r\n            //               \"\"\r\n            //             )}\r\n            //           </div>\r\n            //         ))}\r\n            //       </td>\r\n            //     ))}\r\n            //   </tbody>\r\n            // </Table>\r\n            <Carousel variant=\"dark\">\r\n               {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n              \r\n                     <Carousel.Item  style={{ height:\"15rem\",width:\"100%\" ,textAlign:\"center\"}} className=\"chejm\" >\r\n                      <h3> {slotKey}</h3>\r\n                      <div style={{display:\"flex\",justifyContent:\"space-around\", display:\"flex\",\r\n                          alignItems:\"center\",marginTop:\"2rem\"\r\n                           }}>\r\n                      {newProduct?.slots[slotKey].products.map((prod) => (\r\n                      <div\r\n                        style={{\r\n                          cursor: \"pointer\",\r\n                          position: \"relative\",\r\n                          \r\n                      \r\n                          \r\n                         \r\n                         \r\n                        }}\r\n                        // className={prod.checked ? \"checked\" : \"not\"}\r\n                        onClick={() =>\r\n                          handleSlotSelect({ slotKey, id: prod.id })\r\n                        }\r\n                      >\r\n                        <h6>\r\n                          <b\r\n                            style={{\r\n                              color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                            }}\r\n                          >\r\n                            {prod.name}\r\n                          </b>\r\n                        </h6>\r\n                        <img\r\n                          src={prod.image}\r\n                          width=\"50px\"\r\n                          height=\"50px\"\r\n                          style={{\r\n                            borderRadius: \"50%\",\r\n                            borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                          }}\r\n                        />\r\n                        {/* <div className=\"price\">\r\n                          {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n                        </div> */}\r\n                        {prod.checked ? (\r\n                          <FontAwesomeIcon\r\n                            icon={faCheck}\r\n                            color=\"#ff6b6b\"\r\n                            style={{\r\n                              position: \"absolute\",\r\n                              top: \"50px\",\r\n                              right: \"20px\",\r\n                            }}\r\n                          />\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                      </div>\r\n                    ))} </div>\r\n               \r\n                     {/* <Carousel.Caption>\r\n                       <h5>First slide label</h5>\r\n                       <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>\r\n                     </Carousel.Caption> */}\r\n                   </Carousel.Item>\r\n                  ))}\r\n         \r\n          </Carousel>   \r\n          ) : newProduct?.nsteps > 0 ? (\r\n            <div>\r\n              <h6>\r\n                <b>\r\n                  {\r\n                    nsteps.filter(\r\n                      (nstep) => nstep?.menu_id == newProduct?.id\r\n                    )[0][step]?.nom_etape\r\n                  }\r\n                </b>\r\n              </h6>\r\n              <div className=\"steps_cont\">\r\n                {nsteps\r\n                  .filter((nstep) => nstep.menu_id == newProduct?.id)[0]\r\n                  [step]?.choice.map((slot) => (\r\n                    <div\r\n                      className={\r\n                        newProduct?.stepItems[step]?.find((el) => el.id == slot)\r\n                          ? \"prod_sel prod\"\r\n                          : \"prod\"\r\n                      }\r\n                      onClick={() =>\r\n                        handleStepSelect({\r\n                          id: slot,\r\n                          STP: nsteps.filter(\r\n                            (nstep) => nstep.menu_id == newProduct?.id\r\n                          )[0][step],\r\n                        })\r\n                      }\r\n                    >\r\n                      <img\r\n                        src={findProductWithId(slot).image}\r\n                        alt=\"\"\r\n                        height=\"70px\"\r\n                        width=\"70px\"\r\n                      />\r\n                      <h6 style={{ display: \"flex\" }}>\r\n                        <b>{findProductWithId(slot).name} </b>\r\n                        <span>\r\n                          <b\r\n                            style={{\r\n                              display: \"flex\",\r\n                              marginLeft: \"1rem\",\r\n                              marginRight: \"1rem\",\r\n                              color: \"#ff6b6b\",\r\n                            }}\r\n                          >\r\n                            {findProductWithId(slot).price}{\" \"}\r\n                            {renderHTML(`<i>${currency}</i>`)}\r\n                          </b>\r\n                        </span>{\" \"}\r\n                      </h6>\r\n                      <p>{findProductWithId(slot).description}</p>\r\n                      {/* {newProduct?.stepItems[step]?.find(\r\n                          (el) => el.id == slot\r\n                        )\r\n                          ? \"selected\"\r\n                          : \"not\"} */}\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n              {newProduct?.nsteps >= step && step > 0 ? (\r\n                <Button\r\n                  style={{ marginRight: \"1rem\" }}\r\n                  variant=\"outline-secondary\"\r\n                  onClick={() => {\r\n                    if (step > 1) {\r\n                      setstep(step - 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  Retour\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {newProduct?.nsteps > step && step > 0 ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (newProduct?.nsteps > step && selected == step) {\r\n                      setstep(step + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  Suivant\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              {newProduct?.nsteps == step ? (\r\n                <Button\r\n                  variant=\"outline-warning\"\r\n                  onClick={() => {\r\n                    if (selected == step) {\r\n                      handleNewOrderWithStepsToCart();\r\n                    }\r\n                  }}\r\n                >\r\n                  Finir\r\n                </Button>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          {/* <div>\r\n            <h3>\r\n              <FontAwesomeIcon\r\n                icon={faPencilAlt}\r\n                style={{ width: \"24\", marginRight: \"0.5rem\" }}\r\n              />\r\n              Remarque\r\n            </h3>\r\n            <Form.Control\r\n              type=\"textarea\"\r\n              as=\"textarea\"\r\n              placeholder=\"note\"\r\n              style={{ width: \"300px\", marginRight: \"300px\" }}\r\n              onChange={(e) =>\r\n                setnewProduct({ ...newProduct, note: e.target.value })\r\n              }\r\n            ></Form.Control>\r\n          </div> */}\r\n\r\n          <Button\r\n            variant=\"secondary\"\r\n            onClick={() => {\r\n              setShowPreview(false);\r\n              setstep(1);\r\n            }}\r\n          >\r\n            {t(\"cancel\")}\r\n          </Button>\r\n          {newProduct?.nsteps == 0 || newProduct?.isComp ? (\r\n            <Button\r\n              style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n              variant=\"warning\"\r\n              onClick={() => handleNewOrderToCart()}\r\n            >\r\n              {t(\"aded\")}\r\n            </Button>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n     \r\n      <Modal show={showstock} onHide={() => setshowstock(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Gestion de stock</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setshowstock(false)}>\r\n            Retour au tables\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={() => handleStock()}>\r\n            Hors stock\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Item;\r\n","import React, { useEffect } from \"react\";\r\nimport { Spinner } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Item from \"./Item\";\r\n\r\nconst MenuItems = ({ selectedCategory, setAlert, categories, order_id,setconfirmed,confirmed }) => {\r\n  const products = useSelector((state) => state.data.products);\r\n  let category = categories.filter((cat) => cat.id == selectedCategory)[0];\r\n\r\n  return (\r\n    <div className=\"meni-iteams\">\r\n      <h5 style={{ width: \"100%\" }}>\r\n        <b>{category?.name}</b>\r\n      </h5>\r\n      {products\r\n        .filter((e) => e.cat_id == selectedCategory && e.active == true)\r\n        .sort((a, b) => a.position - b.position)\r\n        .map((product) => (\r\n          <Item order_id={order_id} product={product} setAlert={setAlert} confirmed={confirmed} setconfirmed={setconfirmed} />\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MenuItems;\r\n","export default \"data:image/png;base64,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\"","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { Modal, Button, Table, Carousel } from \"react-bootstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCheck,\r\n  faEdit,\r\n  faMinusCircle,\r\n  faMinusSquare,\r\n  faPencilAlt,\r\n  faPlusCircle,\r\n  faPlusSquare,\r\n  faTimes,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport useTranslation from \"./../i18\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setNewOrder } from \"../Slices/order\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { updateProduct } from \"../Slices/data\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nconst Product = ({ product, setAlert, order_id,setconfirmed,confirmed }) => {\r\n    const [index, setIndex] = useState(0);\r\n\r\n  const handleSelect = (selectedIndex, e) => {\r\n    setIndex(selectedIndex);\r\n  };\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const nsteps = useSelector((state) => state.data.nSteps);\r\n  const products = useSelector((state) => state.data.products);\r\n  const [step, setstep] = useState(1);\r\n  const [selected, setselected] = useState(1);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [newProduct, setnewProduct] = useState(undefined);\r\n  const [showstock, setshowstock] = useState(false);\r\n  const [tva, setTva] = useState(null);\r\n  const client = useSelector((state) => state.order.client);\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let tva;\r\n    if (client.type == \"surplace\" || client.type == \"livraison\") {\r\n      tva = tva_mode.find((e) => e.nom == \"surplace\").valeur;\r\n      setTva(tva);\r\n    } else if (client.type == \"emporter\") {\r\n      tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n      setTva(tva);\r\n    }\r\n    if (rab_tva > 0) {\r\n      tva = rab_tva;\r\n      setTva(tva);\r\n    }\r\n    console.log(tva);\r\n  }, []);\r\n\r\n  const selectProduct = () => {\r\n    setconfirmed(false)\r\n    if (\r\n      product?.extras?.length == 0 &&\r\n      product?.nsteps == 0 &&\r\n      product?.isComp == false\r\n    ) {\r\n    \r\n      dispatch(\r\n        setNewOrder({\r\n          order: {\r\n            ...product,\r\n            qt: 1,\r\n            stepItems: {},\r\n            remise: 0,\r\n            offert: false,\r\n            new: order_id ? \"true\" : \"false\",\r\n          },\r\n        })\r\n        \r\n      );\r\n     \r\n    } else {\r\n      setShowPreview(true);\r\n      setnewProduct({\r\n        ...product,\r\n        qt: 1,\r\n        stepItems: {},\r\n        remise: 0,\r\n        offert: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSlotSelect = ({ slotKey, id }) => {\r\n    console.log(slotKey, id);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    copy.slots[slotKey].products.forEach((prod) => {\r\n      prod.id == id ? (prod.checked = true) : (prod.checked = false);\r\n      console.log(prod.name);\r\n    });\r\n    setnewProduct(copy);\r\n  };\r\n\r\n  const handleExtra = ({ extraKey, sign }) => {\r\n    console.log(\"handleExtra\", { extraKey, sign });\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    if (sign == \"+\" && copy.extras[extraKey].default_quantity < 1) {\r\n      copy.extras[extraKey].default_quantity += 1;\r\n      console.log(copy);\r\n      setnewProduct(copy);\r\n    } else {\r\n      if (copy.extras[extraKey].default_quantity > 0) {\r\n        copy.extras[extraKey].default_quantity -= 1;\r\n        console.log(copy);\r\n        setnewProduct(copy);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAlert = ({ show, msg, type }) => {\r\n    setAlert({ show, msg, type });\r\n    setTimeout(() => {\r\n      setAlert({ show: false, msg: \"\", type: \"\" });\r\n    }, 1500);\r\n  };\r\n\r\n  const handleNewOrderToCart = () => {\r\n   \r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n  };\r\n\r\n  const handleNewOrderWithStepsToCart = () => {\r\n    \r\n    dispatch(\r\n      setNewOrder({\r\n        order: {\r\n          ...newProduct,\r\n          new: order_id ? \"true\" : \"false\",\r\n        },\r\n      })\r\n    );\r\n    handleAlert({ show: true, msg: t(\"added\"), type: \"success\" });\r\n    setShowPreview(false);\r\n    setstep(1);\r\n  };\r\n\r\n  const findProductWithId = (id) => {\r\n    return products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  const handleStepSelect = ({ id, STP }) => {\r\n    console.log(\"stp\",STP);\r\n    setselected(step);\r\n    let copy = JSON.parse(JSON.stringify(newProduct) || {});\r\n    let max_select = STP.max_select;\r\n    if (copy.stepItems[step] == undefined) {\r\n      copy.stepItems[step] = [];\r\n      console.log(copy);\r\n    }\r\n    if (copy.stepItems[step].length < max_select) {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        console.log(\"will push now\");\r\n        copy.stepItems[step].push(findProductWithId(id)); \r\n      }\r\n    }\r\n    {\r\n      if (!copy.stepItems[step].find((el) => el.id == id)) {\r\n        copy.stepItems[step] = [];\r\n        copy.stepItems[step].push(findProductWithId(id));\r\n      }\r\n    }\r\n    setnewProduct(copy);\r\n    console.log(\"done\");\r\n    console.log(copy);\r\n  };\r\n\r\n  const handleStock = () => {\r\n    setshowstock(false);\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/resetwarehouse\",\r\n        { prod_id: product.id }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        dispatch(updateProduct({ id: product.id }));\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"produit mis hors stock !\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n      });\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  return (\r\n    <>\r\n    <ToastContainer />\r\n    <div className=\"item_container\">\r\n      <p>\r\n        <b>{product.name.substring(0, 21)}</b>\r\n      </p>\r\n      <img src={product.image} onClick={selectProduct} className=\"prod_img\" />\r\n      <div className=\"price\">\r\n        {`${product.price.toFixed(2)}`}\r\n        {renderHTML(`<i>${currency}</i>`)}\r\n      </div>\r\n      <FontAwesomeIcon\r\n        onClick={(e) => setshowstock(true)}\r\n        icon={faTimes}\r\n        size=\"1x\"\r\n        style={{\r\n          position: \"absolute\",\r\n          top: \"0px\",\r\n          right: \"5px\",\r\n          color: \"red\",\r\n          backgroundColor: \"white\",\r\n          borderRadius: \"25%\",\r\n        }}\r\n      />\r\n    </div>\r\n\r\n    <Modal\r\n      dialogClassName=\"modal_body\"\r\n      show={showPreview}\r\n      onHide={() => {\r\n        setShowPreview(false);\r\n        setstep(1);\r\n      }}\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>\r\n          <img width=\"30px\" height=\"30px\" src={product.image} />\r\n          {newProduct?.name}\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <p>{newProduct?.description}</p>\r\n\r\n        {newProduct?.extras && newProduct?.extras.length ? (\r\n          newProduct?.extras.map((extra, key) => (\r\n            <tr\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"50%\",\r\n              }}\r\n            >\r\n              <td\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-evenly\",\r\n                  alignItems: \"center\",\r\n                  height: \"30px\",\r\n                  width: \"25%\",\r\n                  marginRight: \"1rem\",\r\n                }}\r\n              >\r\n                <FontAwesomeIcon\r\n                  onClick={() => handleExtra({ extraKey: key, sign: \"-\" })}\r\n                  icon={faMinusCircle}\r\n                  color=\"#ff6b6b\"\r\n                />\r\n                <h5>\r\n                  <b>{extra.default_quantity}</b>\r\n                </h5>\r\n                <FontAwesomeIcon\r\n                  onClick={() => handleExtra({ extraKey: key, sign: \"+\" })}\r\n                  icon={faPlusCircle}\r\n                  color=\"#ff6b6b\"\r\n                />\r\n              </td>\r\n              <td style={{ marginRight: \"1rem\" }}>\r\n                {\" \"}\r\n                <h5>\r\n                  <b>{extra.title}</b>\r\n                </h5>\r\n              </td>\r\n              <td>\r\n                {\" \"}\r\n                <h5>\r\n                  <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                    {extra.price.toFixed(2)}{\" \"}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </b>\r\n                </h5>\r\n              </td>\r\n            </tr>\r\n          ))\r\n        ) : newProduct?.isComp ? (\r\n          // <Table>\r\n          //   <thead className=\"comphead\">\r\n          //     <tr>\r\n          //       {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n          //         <td>{slotKey}</td>\r\n          //       ))}\r\n          //     </tr>\r\n          //   </thead>\r\n          //   <tbody>\r\n          //     {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n          //       <td>\r\n          //         {newProduct?.slots[slotKey].products.map((prod) => (\r\n          //           <div\r\n          //             style={{\r\n          //               cursor: \"pointer\",\r\n          //               position: \"relative\",\r\n          //             }}\r\n          //             // className={prod.checked ? \"checked\" : \"not\"}\r\n          //             onClick={() =>\r\n          //               handleSlotSelect({ slotKey, id: prod.id })\r\n          //             }\r\n          //           >\r\n          //             <h6>\r\n          //               <b\r\n          //                 style={{\r\n          //                   color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n          //                 }}\r\n          //               >\r\n          //                 {prod.name}\r\n          //               </b>\r\n          //             </h6>\r\n          //             <img\r\n          //               src={prod.image}\r\n          //               width=\"50px\"\r\n          //               height=\"50px\"\r\n          //               style={{\r\n          //                 borderRadius: \"50%\",\r\n          //                 borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n          //               }}\r\n          //             />\r\n          //             {/* <div className=\"price\">\r\n          //               {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n          //             </div> */}\r\n          //             {prod.checked ? (\r\n          //               <FontAwesomeIcon\r\n          //                 icon={faCheck}\r\n          //                 color=\"#ff6b6b\"\r\n          //                 style={{\r\n          //                   position: \"absolute\",\r\n          //                   top: \"5px\",\r\n          //                   right: \"5px\",\r\n          //                 }}\r\n          //               />\r\n          //             ) : (\r\n          //               \"\"\r\n          //             )}\r\n          //           </div>\r\n          //         ))}\r\n          //       </td>\r\n          //     ))}\r\n          //   </tbody>\r\n          // </Table>\r\n          <Carousel variant=\"dark\">\r\n             {Object.keys(newProduct?.slots || {}).map((slotKey) => (\r\n            \r\n                   <Carousel.Item  style={{ height:\"15rem\",width:\"100%\" ,textAlign:\"center\"}}>\r\n                    <h3> {slotKey}</h3>\r\n                    <div style={{display:\"flex\",justifyContent:\"space-around\", display:\"flex\",\r\n                        alignItems:\"center\",marginTop:\"2rem\"\r\n                         }}>\r\n                    {newProduct?.slots[slotKey].products.map((prod) => (\r\n                    <div\r\n                      style={{\r\n                        cursor: \"pointer\",\r\n                        position: \"relative\",\r\n                        \r\n                    \r\n                        \r\n                       \r\n                       \r\n                      }}\r\n                      // className={prod.checked ? \"checked\" : \"not\"}\r\n                      onClick={() =>\r\n                        handleSlotSelect({ slotKey, id: prod.id })\r\n                      }\r\n                    >\r\n                      <h6>\r\n                        <b\r\n                          style={{\r\n                            color: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                          }}\r\n                        >\r\n                          {prod.name}\r\n                        </b>\r\n                      </h6>\r\n                      <img\r\n                        src={prod.image}\r\n                        width=\"50px\"\r\n                        height=\"50px\"\r\n                        style={{\r\n                          borderRadius: \"50%\",\r\n                          borderColor: prod.checked ? \"#ff6b6b\" : \"black\",\r\n                        }}\r\n                      />\r\n                      {/* <div className=\"price\">\r\n                        {`${prod.price}`} {renderHTML(`<i>${currency}</i>`)}\r\n                      </div> */}\r\n                      {prod.checked ? (\r\n                        <FontAwesomeIcon\r\n                          icon={faCheck}\r\n                          color=\"#ff6b6b\"\r\n                          style={{\r\n                            position: \"absolute\",\r\n                            top: \"50px\",\r\n                            right: \"20px\",\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </div>\r\n                  ))} </div>\r\n             \r\n                   {/* <Carousel.Caption>\r\n                     <h5>First slide label</h5>\r\n                     <p>Nulla vitae elit libero, a pharetra augue mollis interdum.</p>\r\n                   </Carousel.Caption> */}\r\n                 </Carousel.Item>\r\n                ))}\r\n       \r\n        </Carousel>   \r\n        ) : newProduct?.nsteps > 0 ? (\r\n          <div>\r\n            <h6>\r\n              <b>\r\n                {\r\n                  nsteps.filter(\r\n                    (nstep) => nstep?.menu_id == newProduct?.id\r\n                  )[0][step]?.nom_etape\r\n                }\r\n              </b>\r\n            </h6>\r\n            <div className=\"steps_cont\">\r\n              {nsteps\r\n                .filter((nstep) => nstep.menu_id == newProduct?.id)[0]\r\n                [step]?.choice.map((slot) => (\r\n                  <div\r\n                    className={\r\n                      newProduct?.stepItems[step]?.find((el) => el.id == slot)\r\n                        ? \"prod_sel prod\"\r\n                        : \"prod\"\r\n                    }\r\n                    onClick={() =>\r\n                      handleStepSelect({\r\n                        id: slot,\r\n                        STP: nsteps.filter(\r\n                          (nstep) => nstep.menu_id == newProduct?.id\r\n                        )[0][step],\r\n                      })\r\n                    }\r\n                  >\r\n                    <img\r\n                      src={findProductWithId(slot).image}\r\n                      alt=\"\"\r\n                      height=\"70px\"\r\n                      width=\"70px\"\r\n                    />\r\n                    <h6 style={{ display: \"flex\" }}>\r\n                      <b>{findProductWithId(slot).name} </b>\r\n                      <span>\r\n                        <b\r\n                          style={{\r\n                            display: \"flex\",\r\n                            marginLeft: \"1rem\",\r\n                            marginRight: \"1rem\",\r\n                            color: \"#ff6b6b\",\r\n                          }}\r\n                        >\r\n                          {findProductWithId(slot).price}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </b>\r\n                      </span>{\" \"}\r\n                    </h6>\r\n                    <p>{findProductWithId(slot).description}</p>\r\n                    {/* {newProduct?.stepItems[step]?.find(\r\n                        (el) => el.id == slot\r\n                      )\r\n                        ? \"selected\"\r\n                        : \"not\"} */}\r\n                  </div>\r\n                ))}\r\n            </div>\r\n            {newProduct?.nsteps >= step && step > 0 ? (\r\n              <Button\r\n                style={{ marginRight: \"1rem\" }}\r\n                variant=\"outline-secondary\"\r\n                onClick={() => {\r\n                  if (step > 1) {\r\n                    setstep(step - 1);\r\n                  }\r\n                }}\r\n              >\r\n                Retour\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {newProduct?.nsteps > step && step > 0 ? (\r\n              <Button\r\n                variant=\"outline-warning\"\r\n                onClick={() => {\r\n                  if (newProduct?.nsteps > step && selected == step) {\r\n                    setstep(step + 1);\r\n                  }\r\n                }}\r\n              >\r\n                Suivant\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {newProduct?.nsteps == step ? (\r\n              <Button\r\n                variant=\"outline-warning\"\r\n                onClick={() => {\r\n                  if (selected == step) {\r\n                    handleNewOrderWithStepsToCart();\r\n                  }\r\n                }}\r\n              >\r\n                Finir\r\n              </Button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        {/* <div>\r\n          <h3>\r\n            <FontAwesomeIcon\r\n              icon={faPencilAlt}\r\n              style={{ width: \"24\", marginRight: \"0.5rem\" }}\r\n            />\r\n            Remarque\r\n          </h3>\r\n          <Form.Control\r\n            type=\"textarea\"\r\n            as=\"textarea\"\r\n            placeholder=\"note\"\r\n            style={{ width: \"300px\", marginRight: \"300px\" }}\r\n            onChange={(e) =>\r\n              setnewProduct({ ...newProduct, note: e.target.value })\r\n            }\r\n          ></Form.Control>\r\n        </div> */}\r\n\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={() => {\r\n            setShowPreview(false);\r\n            setstep(1);\r\n          }}\r\n        >\r\n          {t(\"cancel\")}\r\n        </Button>\r\n        {newProduct?.nsteps == 0 || newProduct?.isComp ? (\r\n          <Button\r\n            style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n            variant=\"warning\"\r\n            onClick={() => handleNewOrderToCart()}\r\n          >\r\n            {t(\"aded\")}\r\n          </Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Modal.Footer>\r\n    </Modal>\r\n    <Modal show={showstock} onHide={() => setshowstock(false)}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Gestion de stock</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={() => setshowstock(false)}>\r\n          Retour au tables\r\n        </Button>\r\n        <Button variant=\"danger\" onClick={() => handleStock()}>\r\n          Hors stock\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default Product","import axios from \"axios\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button, Col, Container, Nav, Navbar, Row } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport CartMenu from \"../Components/CartMenu\";\r\nimport Category from \"../Components/Category\";\r\nimport MenuItems from \"../Components/MenuItems\";\r\nimport { storeCategories, storeNSteps, storeProducts } from \"../Slices/data\";\r\nimport useTranslation from \"./../i18\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport {\r\n  faGlobe,\r\n  faSearch,\r\n  faSignOutAlt,\r\n  faTimes,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { clearOrders } from \"../Slices/order\";\r\n\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport $ from \"jquery\";\r\nimport Item from \"../Components/Item\";\r\nimport Product from \"../Components/Product\";\r\n\r\nconst Menu = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const [shows, setShows] = useState(false);\r\n  function handleClose(){\r\n    setShows(false)\r\n  }\r\n  function handleShow() {\r\n    setShows(true);\r\n  }\r\n  const selectedTable = useSelector((state) => state.order.selectedTable);\r\n  const params = useParams();\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const { order_id } = params;\r\n  const categories = useSelector((state) => state.data.categories);\r\n  const [selectedCategory, setSelectedCategory] = useState(categories[0]?.id);\r\n  const [alert, setAlert] = useState({ show: false, msg: \"\", type: \"\" });\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const [date, setDate] = useState(new Date().toLocaleTimeString(\"fa-IR\"));\r\n  const [battery, setBattery] = useState({ level: 0, charging: false });\r\n  const [confirmed, setconfirmed] = useState(false);\r\n\r\n  const [serachbar, setSerachbar] = useState(\"\");\r\n\r\n  const products = useSelector((state) => state.data.products);\r\n\r\n  // const handleChange = ({ target: { level, charging } }) => {\r\n  //   setBattery({ level, charging });\r\n  // };\r\n\r\n  // useEffect(() => {\r\n  //   let battery;\r\n  //   navigator.getBattery().then((bat) => {\r\n  //     battery = bat;\r\n  //     battery.addEventListener(\"levelchange\", handleChange);\r\n  //     battery.addEventListener(\"chargingchange\", handleChange);\r\n  //     handleChange({ target: battery });\r\n  //   });\r\n  //   return () => {\r\n  //     battery.removeEventListener(\"levelchange\", handleChange);\r\n  //     battery.removeEventListener(\"chargingchange\", handleChange);\r\n  //   };\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    const timerID = setInterval(() => tick(), 1000);\r\n    \r\n    return () => {\r\n      clearInterval(timerID);\r\n   \r\n    };\r\n    \r\n  }, []);\r\n\r\n  const tick = () => {\r\n    setDate(new Date().toLocaleTimeString(\"fr-fr\").replace(/(.*)\\D\\d+/, \"$1\"));\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    // if (selectedTable.nbr == undefined) {\r\n    //   navigate(\"/main\");\r\n    // }\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/categories\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) =>\r\n        dispatch(\r\n          storeCategories({\r\n            categories: res.data.sort((a, b) => a.cat_order - b.cat_order),\r\n          })\r\n        )\r\n      );\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/products\",\r\n        {\r\n          user_id,\r\n          category: 0,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeProducts({ products: res.data.products }));\r\n        dispatch(storeNSteps({ nSteps: res.data.menuSteps }));\r\n      });\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   axios\r\n  //     .post(process.env.REACT_APP_API_HOST+\":\"+process.env.REACT_APP_API_PORT+\"/api/products\", { user_id, category: selectedCategory })\r\n  //     .then((res) => dispatch(storeProducts({ products: res.data })));\r\n  // }, [selectedCategory]);\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n  //keypord\r\n  const [myLayout, setLayout] = useState(\"default\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const keyboard = useRef();\r\n  const onChange = (input) => {\r\n    setFilter(input)\r\n  };\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n    if(button==\"{lock}\"&&myLayout==\"default\"){\r\n      setLayout(\"shift\")\r\n    }\r\n    if(button==\"{lock}\"&&myLayout==\"shift\"){\r\n      setLayout(\"default\")\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Navbar\r\n        style={{ backgroundColor: \"#0dcaf0\", height: \"70px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container>\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <div onClick={()=>handleShow()} style={{cursor:\"pointer\"}}>\r\n          <h6\r\n           \r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n             \r\n            <b>Recherecher</b>\r\n            <FontAwesomeIcon icon={faSearch}  style={{marginLeft:\"0.5rem\"}} />\r\n            </h6>\r\n          </div>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link\r\n              onClick={() => {\r\n                navigate(\"/main\");\r\n                dispatch(clearOrders());\r\n              }}\r\n            >\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"menu-server-logout\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <div className=\"cont_my\">\r\n        <Row\r\n          style={{\r\n            height: \"85vh\",\r\n            paddingRight: \"0 !important\",\r\n            backgroundColor: \"white\",\r\n          }}\r\n        >\r\n          <Col xs={2}>\r\n            <Category\r\n              selectedCategory={selectedCategory}\r\n              setSelectedCategory={setSelectedCategory}\r\n              categories={categories}\r\n            />\r\n          </Col>\r\n          <Col xs={7}>\r\n            <MenuItems\r\n              order_id={order_id}\r\n              categories={categories}\r\n              selectedCategory={selectedCategory}\r\n              setAlert={setAlert}\r\n              confirmed={confirmed}\r\n              setconfirmed={setconfirmed}\r\n            />\r\n          </Col>\r\n          <Col xs={3}>\r\n            <CartMenu\r\n              selectedTable={selectedTable}\r\n              confirmed={confirmed}\r\n              setconfirmed={setconfirmed}\r\n            />\r\n          </Col>\r\n          <NaviBottom />\r\n        </Row>\r\n      </div>\r\n      {shows ? (\r\n        <div className=\"all-produc-menu\" >\r\n          <div className=\"modal-heade\">\r\n            <div className=\"input-search-product\" >\r\n              \r\n              <input type=\"text\" placeholder=\"Chercher un produit...\"  value={filter}/>\r\n              <FontAwesomeIcon icon={faSearch} className=\"Sm\" />\r\n            </div>\r\n\r\n            <FontAwesomeIcon icon={faTimes} className=\"xm\" onClick={()=>handleClose()} />\r\n          </div>\r\n          <div className=\"modal-bodys\">\r\n            {\r\n              products.filter(e=>e.name.toLowerCase().includes(filter.toLowerCase())||e.code.includes(filter)).map((product,key)=><Product order_id={order_id} setAlert={setAlert} setconfirmed={setconfirmed} product={product} />\r\n\r\n              )\r\n              \r\n            }\r\n          </div>\r\n          <div className=\"keyboard\">\r\n            <Keyboard\r\n       \r\n            layoutName={myLayout}\r\n                  \r\n              onChange={onChange}\r\n              onKeyPress={onKeyPress}\r\n            />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  monnaies: [],\r\n  initialValue: 0,\r\n};\r\n\r\nconst caisseSlice = createSlice({\r\n  name: \"caisse\",\r\n  initialState,\r\n  reducers: {\r\n    setMonnaies: (state, action) => {\r\n      state.monnaies = action.payload.monnaies;\r\n    },\r\n    clearcaisse: () => {\r\n      return { caisse: \"\" };\r\n    },\r\n    setInitialValue: (state, action) => {\r\n      state.initialValue = action.payload.montant;\r\n    },\r\n  },\r\n});\r\n\r\nconst { reducer, actions } = caisseSlice;\r\n\r\nexport const { setMonnaies, clearcaisse, setInitialValue } = actions;\r\nexport default reducer;\r\n","export default __webpack_public_path__ + \"static/media/coin.3b947962.png\";","export default __webpack_public_path__ + \"static/media/billet.8e0c912a.png\";","export default __webpack_public_path__ + \"static/media/sound.861677ae.mp3\";","import axios from \"axios\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setInitialValue, setMonnaies } from \"../Slices/caisse\";\r\nimport { Button, Container, FormControl, Nav, Navbar } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router\";\r\nimport Navi from \"../Components/Navi\";\r\nimport coin from \"./../Shared/coin.png\";\r\nimport billet from \"./../Shared/billet.png\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport Swal from \"sweetalert2\";\r\nimport aud from \"./../Shared/sound.mp3\";\r\n\r\nconst Caisse = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const [audio, setaudio] = useState(new Audio(aud));\r\n\r\n  useEffect(() => {\r\n    audio.play();\r\n  }, []);\r\n\r\n  const caisse_open = localStorage.getItem(\"caisse_open\");\r\n  const caisse_id = localStorage.getItem(\"caisse_id\");\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const user = localStorage.getItem(\"username\");\r\n  const monnaies = useSelector((state) => state.caisse.monnaies);\r\n  const [historique_monnaie, setHistorique_monnaie] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const [ping, setping] = useState(true);\r\n  const [input, setInput] = useState(\"\");\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 {bksp}\",\r\n  ]);\r\n  const keyboard = useRef();\r\n  const [selected, setSelected] = useState(0);\r\n  const [lay, setlay] = useState([\r\n    { value: 0, real: 0.02 },\r\n    { value: 0, real: 0.05 },\r\n    { value: 0, real: 0.1 },\r\n    { value: 0, real: 0.2 },\r\n    { value: 0, real: 0.5 },\r\n    { value: 0, real: 1 },\r\n    { value: 0, real: 5 },\r\n    { value: 0, real: 10 },\r\n    { value: 0, real: 20 },\r\n    { value: 0, real: 50 },\r\n    { value: 0, real: 100 },\r\n    { value: 0, real: 200 },\r\n    { value: 0, real: 2 },\r\n    { value: 0, real: 0.2 },\r\n    { value: 0, real: 0.1 },\r\n  ]);\r\n\r\n  const onChange = (input) => {\r\n    setInput(input);\r\n    console.log(\"Input changed\", input);\r\n    let newarr = [...lay];\r\n    newarr[selected].value = Number(input);\r\n    setlay(newarr);\r\n    setInput(\"\");\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n  };\r\n\r\n  const onChangeInput = ({ e, index }) => {\r\n    const input = e.target.value;\r\n    setInput(input);\r\n    let newarr = [...lay];\r\n    newarr[selected].value = Number(input);\r\n    setlay(newarr);\r\n    keyboard.current.setInput(input);\r\n    setTotal(calcMontant());\r\n  };\r\n\r\n  ////////////////////////\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getMonnaie\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(setMonnaies({ monnaies: res.data }));\r\n      });\r\n  }, []);\r\n  useEffect(() => {\r\n    audio.play();\r\n    console.log(audio);\r\n    if (caisse_open == true) {\r\n      let date = new Date();\r\n      let dateStr =\r\n        (\"00\" + (date.getMonth() + 1)).slice(-2) +\r\n        \"/\" +\r\n        (\"00\" + date.getDate()).slice(-2) +\r\n        \"/\" +\r\n        date.getFullYear() +\r\n        \" \" +\r\n        (\"00\" + date.getHours()).slice(-2) +\r\n        \":\" +\r\n        (\"00\" + date.getMinutes()).slice(-2) +\r\n        \":\" +\r\n        (\"00\" + date.getSeconds()).slice(-2);\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \"caisse Ouvert !\",\r\n        text: \"Date ouverture :\" + dateStr,\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n      navigate(\"/main\");\r\n    }\r\n  }, [ping]);\r\n\r\n  const handleHistoriqueMonnaie = ({ key, qt, monnaie }) => {\r\n    let copy = JSON.parse(JSON.stringify(historique_monnaie) || []);\r\n    copy[key] = {\r\n      value: monnaie.value,\r\n      type: monnaie.id,\r\n      qt: qt,\r\n    };\r\n    setHistorique_monnaie(copy);\r\n  };\r\n\r\n  const calcMontant = () => {\r\n    let montant = 0;\r\n    lay.map((el) => {\r\n      montant += el.value * el.real;\r\n      console.log(montant);\r\n    });\r\n    return montant;\r\n  };\r\n\r\n  const handleOpenCaisse30 = () => {\r\n    let historiquePrint = {\r\n      caisse_id: caisse_id,\r\n      date: Date.now(),\r\n      montant: 30,\r\n      type: \"open\",\r\n    };\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/OpenCaisse\",\r\n        {\r\n          user_id,\r\n          user,\r\n          montant: 30,\r\n          historiquePrint,\r\n          historique_monnaie,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        let caisse_initial_value = res.data.historiquePrint?.montant;\r\n        dispatch(setInitialValue({ montant: caisse_initial_value }));\r\n        localStorage.setItem(\"caisse_open\", 1);\r\n        setping(!ping);\r\n      });\r\n  };\r\n\r\n  const handleOpenCaisse = () => {\r\n    if (calcMontant() > 0) {\r\n      console.log(historique_monnaie);\r\n      console.log(calcMontant());\r\n      let historiquePrint = {\r\n        caisse_id: caisse_id,\r\n        date: Date.now(),\r\n        montant: calcMontant(),\r\n        type: \"open\",\r\n      };\r\n      console.log(historiquePrint);\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/OpenCaisse\",\r\n          {\r\n            user_id,\r\n            user,\r\n            montant: calcMontant(),\r\n            historiquePrint,\r\n            historique_monnaie,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          let caisse_initial_value = res.data.historiquePrint?.montant;\r\n          dispatch(setInitialValue({ montant: caisse_initial_value }));\r\n          localStorage.setItem(\"caisse_open\", 1);\r\n          setping(!ping);\r\n        });\r\n    } else {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Fond initial est 0 !\",\r\n        showConfirmButton: false,\r\n        timer: 1500,\r\n      });\r\n    }\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n\r\n  return (\r\n    <div className=\"my_container\">\r\n      <Navi title=\"cashierr\" />\r\n      <div className=\"toOpenCaisse\">\r\n        {/* <h1\r\n          style={{\r\n            backgroundColor: \"#ff6b6b\",\r\n            width: \"100%\",\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          Monnaies\r\n        </h1> */}\r\n        <div className=\"mon_cont\">\r\n          {/* {monnaies.map((monnaie, key) => (\r\n            <div className=\"monn\">\r\n              <div>\r\n                <p>{`${monnaie.type} ${monnaie.name}`}</p>\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"0\"\r\n                  onChange={(e) =>\r\n                    handleHistoriqueMonnaie({\r\n                      monnaie,\r\n                      key,\r\n                      qt: e.target.value,\r\n                    })\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          ))} */}\r\n          <div className=\"piece\">\r\n            <img\r\n              className=\"piece-img-coin\"\r\n              src={coin}\r\n              width={64}\r\n              height={64}\r\n              style={{ position: \"absolute\" }}\r\n            />\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">2 {renderHTML(`<i>${currency}</i>`)}</span>\r\n              <FormControl\r\n                value={lay[12].value}\r\n                onFocus={() => {\r\n                  setSelected(12);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => {\r\n                  onChangeInput({ e, index: 12 });\r\n                }}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[12].value * lay[12].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">1 {renderHTML(`<i>${currency}</i>`)}</span>\r\n              <FormControl\r\n                onFocus={() => {\r\n                  setSelected(5);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                value={lay[5].value}\r\n                onChange={(e) => onChangeInput({ e, index: 5 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[5].value * lay[5].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                0.5 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[4].value}\r\n                onFocus={() => {\r\n                  setSelected(4);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 4 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[4].value * lay[4].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                0.2 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[13].value}\r\n                onFocus={() => {\r\n                  setSelected(13);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 13 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[13].value * lay[13].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                0.1 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[14].value}\r\n                onFocus={() => {\r\n                  setSelected(14);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 14 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[14].value * lay[14].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n\r\n            <Keyboard\r\n              theme={\"hg-theme-default hg-layout-default myTheme2\"}\r\n              display={{\r\n                \"{bksp}\": \"EFFACER\",\r\n              }}\r\n              buttonTheme={[\r\n                {\r\n                  class: \"key_btn2\",\r\n                  buttons: \"0 1 2 3 4 5 6 7 8 9 {bksp} {enter}\",\r\n                },\r\n                {\r\n                  class: \"hg-highlight\",\r\n                  buttons: \"Q q\",\r\n                },\r\n              ]}\r\n              keyboardRef={(r) => (keyboard.current = r)}\r\n              layoutName={\"default\"}\r\n              layout={{\r\n                default: myLayout,\r\n              }}\r\n              onChange={onChange}\r\n              onKeyPress={onKeyPress}\r\n            />\r\n          </div>\r\n          <div className=\"billet\">\r\n            <img\r\n              src={billet}\r\n              width={64}\r\n              height={64}\r\n              style={{ position: \"absolute\" }}\r\n            />\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                200 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[11].value}\r\n                onFocus={() => {\r\n                  setSelected(11);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 11 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[11].value * lay[11].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                100 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[10].value}\r\n                onFocus={() => {\r\n                  setSelected(10);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 10 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[10].value * lay[10].real}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                50 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[9].value}\r\n                onFocus={() => {\r\n                  setSelected(9);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 9 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[9].value * lay[9].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                20 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[8].value}\r\n                onFocus={() => {\r\n                  setSelected(8);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 8 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[8].value * lay[8].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">\r\n                10 {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n              <FormControl\r\n                value={lay[7].value}\r\n                onFocus={() => {\r\n                  setSelected(7);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 7 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[7].value * lay[7].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"mon\">\r\n              <span className=\"flex\">5 {renderHTML(`<i>${currency}</i>`)}</span>\r\n              <FormControl\r\n                value={lay[6].value}\r\n                onFocus={() => {\r\n                  setSelected(6);\r\n                  keyboard.current.setInput(\"\");\r\n                }}\r\n                onChange={(e) => onChangeInput({ e, index: 6 })}\r\n                type=\"number\"\r\n                className=\"moninput\"\r\n              />\r\n              <span className=\"flex\">\r\n                {lay[6].value * lay[6].real} {renderHTML(`<i>${currency}</i>`)}\r\n              </span>\r\n            </div>\r\n            <div className=\"caisse-ovrir-caisse\">\r\n              <h4 className=\"grand-total\">\r\n                <b>\r\n                  Grand Total : <br />\r\n                  <span style={{ display: \"flex\" }}>\r\n                    {calcMontant().toFixed(2)}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </span>\r\n                </b>\r\n              </h4>\r\n              <Button\r\n                onClick={() => handleOpenCaisse()}\r\n                variant=\"warning\"\r\n                className=\"open_btn\"\r\n                size=\"lg\"\r\n              >\r\n                Ouvrir Caisse\r\n              </Button>\r\n              <Button\r\n            \r\n                onClick={() => handleOpenCaisse30()}\r\n                variant=\"warning\"\r\n                className=\"open_btn-30\"\r\n                size=\"lg\"\r\n              >\r\n               Ouvrir avec 30\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Navbar bg=\"light\" variant=\"light\" fixed=\"bottom\">\r\n        <Container>\r\n          <Navbar.Brand href=\"#home\">\r\n            Tous droits reserves <b>CAISSECONNECT.FR</b>  2022\r\n          </Navbar.Brand>\r\n          <Nav className=\"me-auto\">\r\n            <Nav.Link href=\"#home\"></Nav.Link>\r\n          </Nav>\r\n        </Container>\r\n      </Navbar>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Caisse;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nconst TicketZ = ({ data, recap, selectedDate, products, tvas , tvasum}) => {\r\n  let ouvDate = recap?.lastOuverture?.date.substr(0, 10);\r\n  let ouvTime = recap?.lastOuverture?.date.substr(11, 5);\r\n  var curr = new Date();\r\n  let nowTime = curr.toISOString().substr(11, 5);\r\n  let ouverture = ouvDate + \"  \" + ouvTime;\r\n  console.log(recap.today?.tva);\r\n  // var tvasum = 0;\r\n \r\n  // let tvas = _.groupBy(recap.today?.orderItems, function (b) {\r\n  //   return b.tva_perc;\r\n  // });\r\n  // console.log(recap.today?.orderItems);\r\n  // Object.keys(tvas).forEach(\r\n  //   (key) => (tvas[key] = tvas[key].reduce((acc, curr) => acc + curr.tva, 0))\r\n  // );\r\n  // console.log(tvas);\r\n  return (\r\n    <div className=\"ticketz\">\r\n      <div className=\"z-head\">\r\n        <h3>{recap.Restaurant?.name}</h3>\r\n        <h1>Ticket Z</h1>\r\n        <p>{recap.Restaurant?.address}</p>\r\n        <p>Tel : {recap.Restaurant?.telephone}</p>\r\n      </div>\r\n      <div className=\"z-body\">\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Impression :</b>\r\n          </p>\r\n          <p>{selectedDate + \" \" + nowTime}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Ouverture :</b>\r\n          </p>\r\n          <p>{ouverture}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fermeture :</b>\r\n          </p>\r\n          <p>{selectedDate + \" \" + nowTime}</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <h6>\r\n          <b>Commandes :</b> {recap.today?.nbr}\r\n        </h6>\r\n        <h6>\r\n          <b>Clients :</b> {Object.keys(recap.today?.clientGroups || {}).length}\r\n        </h6>\r\n        <h6>\r\n          <b>Ticket moyen :</b>{\" \"}\r\n          {Number(\r\n            (\r\n              (recap.today?.total + recap.today?.tva) /\r\n              recap.today?.nbr\r\n            ).toFixed(2)\r\n          ) || 0}\r\n          \r\n        </h6>\r\n        <h6>\r\n          <b>Annules :</b>{\" \"}\r\n          {recap.today?.logs?.filter((e) => e.title_log == \"Annulation\")\r\n            .length || 0}\r\n        </h6>\r\n        <p>---------------------------------</p>\r\n        {products?.map((item) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n              <b>{item.quantity + \" X \" + item.name}</b>\r\n            </p>\r\n            <p>{item.totalPrice.toFixed(2)}</p>\r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys(recap.today?.groups || {}).map((key) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n              <b>{recap.today?.groups[key].length} X </b>\r\n              <b>{key == 1 ? \"Carte Bancaire\" : key == 2 ? \"Espces\" : key}</b>\r\n            </p>\r\n            <p>\r\n              {recap.today?.groups[key]\r\n                .reduce(\r\n                  (acc, curr) =>\r\n                    acc + (curr.price + (curr.price * curr.tva) / 100),\r\n                  0\r\n                )\r\n                .toFixed(2) + \"\"}\r\n            </p>\r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys(tvas || {}).map((key) => {\r\n          // tvasum = tvasum + tvas[key];\r\n          return (\r\n            <div className=\"b_el\">\r\n              <p>\r\n                <b>TVA({Number(key).toFixed(2)}%)</b>\r\n              </p>\r\n              <p>{tvas[key].toFixed(2)}</p>\r\n            </div>\r\n          );\r\n        })}\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total HT</b>\r\n          </p>\r\n          <p>{recap.today?.total.toFixed(2)}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total TTC</b>\r\n          </p>\r\n          <p>{(recap.today?.total +tvasum).toFixed(2)}</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse initial</b>\r\n          </p>\r\n          <p>{recap.lastOuverture?.montant.toFixed(2)}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse final</b>\r\n          </p>\r\n          <p>\r\n            {(\r\n              recap.lastOuverture?.montant +\r\n              recap.today?.total +\r\n              tvasum \r\n            ).toFixed(2)}\r\n            \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketZ;\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nconst TicketH = ({ zHistory}) => {\r\n  \r\n \r\n  return (\r\n    <div className=\"ticketz\">\r\n      <div className=\"z-head\">\r\n        <h3>{zHistory.restaurant?.name}</h3>\r\n        <h1>Ticket Z</h1>\r\n        <p>{zHistory.restaurant?.address}</p>\r\n        <p>Tel : {zHistory.restaurant?.telephone}</p>\r\n      </div>\r\n      <div className=\"z-body\">\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Impression :</b>\r\n          </p>\r\n          <p>{zHistory.impression}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Ouverture :</b>\r\n          </p>\r\n          <p>{zHistory.ouverture}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fermeture :</b>\r\n          </p>\r\n          <p>{zHistory.fermeture}</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <h6>\r\n          <b>Commandes :</b> {zHistory.commandes}\r\n        </h6>\r\n        <h6>\r\n          <b>Clients :</b> {zHistory.clients}\r\n        </h6>\r\n        <h6>\r\n          <b>Ticket moyen :</b>{\" \"}\r\n          {zHistory.ticket_moyen}\r\n         \r\n        </h6>\r\n        <h6>\r\n          <b>Annules :</b>{\" \"}\r\n          {zHistory.cancledOrders.length || 0}\r\n        </h6>\r\n        <p>---------------------------------</p>\r\n        {zHistory.products?.map((item) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n              <b>{item.quantity + \" X \" + item.name}</b>\r\n            </p>\r\n            <p>{item.totalPrice.toFixed(2)}</p>\r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys(zHistory.pay_method|| {}).map((key) => (\r\n          <div className=\"b_el\">\r\n            <p>\r\n            \r\n        {zHistory.pay_method[key]?.qt} {zHistory.pay_method[key]?.name} : {zHistory.pay_method[key]?.prix}\r\n            </p>\r\n            \r\n          </div>\r\n        ))}\r\n        <p>---------------------------------</p>\r\n        {Object.keys( zHistory.tvas || {}).map((key) => {\r\n          // tvasum = tvasum + tvas[key];\r\n          return (\r\n            <div className=\"b_el\">\r\n              <p>\r\n                <b>TVA({Number(key).toFixed(2)}%)</b>\r\n              </p>\r\n              <p>{zHistory.tvas[key].toFixed(2)}</p>\r\n            </div>\r\n          );\r\n        })}\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total HT</b>\r\n          </p>\r\n          <p>{zHistory.ht}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Total TTC</b>\r\n          </p>\r\n          <p>{zHistory.ttc}</p>\r\n        </div>\r\n        <p>---------------------------------</p>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse initial</b>\r\n          </p>\r\n          <p>{zHistory.fond_initial}</p>\r\n        </div>\r\n        <div className=\"b_el\">\r\n          <p>\r\n            <b>Fond de caisse final</b>\r\n          </p>\r\n          <p>\r\n            {zHistory.fond_final}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketH;\r\n","import useTranslation from \"./../i18\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Dropdown from \"react-dropdown\";\r\nimport \"react-dropdown/style.css\";\r\n\r\nimport {\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n} from \"react-bootstrap\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { faHistory, faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport $ from \"jquery\";\r\nimport { clearData, clearOrders } from \"../Slices/order\";\r\nimport { DataGrid, GridRowsProp, GridColDef } from \"@mui/x-data-grid\";\r\nimport TicketZ from \"../Components/TicketZ\";\r\nimport AnimatedNumber from \"animated-number-react\";\r\nimport _ from \"lodash\";\r\nimport { storeCategories, storeNSteps, storeProducts } from \"../Slices/data\";\r\nimport loading from \"../Shared/loading.gif\";\r\nimport TicketH from \"../Components/TicketH\";\r\n\r\nconst Cloture = () => {\r\n  \r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const user = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\") || \"\";\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const caisse_id = localStorage.getItem(\"caisse_id\");\r\n\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substr(0, 10);\r\n  const options = [date, \"two\", \"three\"];\r\n  const defaultOption = options[0];\r\n\r\n  const [selectedDate, setSelectedDate] = useState(date);\r\n  const initialValue = useSelector((state) => state.caisse.initialValue);\r\n  const products = useSelector((state) => state.data.products);\r\n  const checkoutData = useSelector((state) => state.order.checkoutData);\r\n  let enCours =\r\n    checkoutData?.filter((e) => e.status == \"pending\" && e.date == date)\r\n      ?.length || 0;\r\n  const annules =checkoutData?.filter((e) => e.status == \"rejected\")\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n  const completd = orders?.slice()?.sort((a, b) => b.id - a.id).filter((item) => item.paymentsInDb && item.paymentsInDb.length > 0)\r\n  const [finalValue, setFinalValue] = useState(initialValue);\r\n  const [recap, setrecap] = useState({});\r\n  const [ping, setping] = useState(false);\r\n  const [page, setpage] = useState(1);\r\n  const [data, setdata] = useState({});\r\n  const [zHistory, setzHistory] = useState({});\r\n  const [previewTicket, setPreviewTicket] = useState(false);\r\n  const [previewZ, setPreviewZ] = useState(false);\r\n  const [previewHistory, setPreviewHistory] = useState(false);\r\n  const [history, setHistory] = useState([])\r\n\r\n  let ouvDate = recap?.lastOuverture?.date.substr(0, 10);\r\n  let ouvTime = recap?.lastOuverture?.date.substr(11, 5);\r\n  let nowTime = curr.toISOString().substr(11, 5);\r\n  let ouverture = ouvDate + \"  \" + ouvTime;\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const handleCloseCaisse = () => {\r\n    let pay_method = [];\r\n    let orderTypes={\r\n      surPlace:0,\r\n      livraison:0,\r\n      emporter:0,\r\n      borne:0\r\n    }\r\n    completd.map(e=>{\r\n      if(e.order_type==\"surplace\"){\r\n        return orderTypes.surPlace +=1\r\n      }\r\n      if(e.order_type==\"emporter\"){\r\n        return orderTypes.livraison +=1\r\n      }\r\n      if(e.order_type==\"livraison\"){\r\n        return orderTypes.emporter +=1\r\n      }\r\n      if(e.from_kiosk==1){\r\n        return orderTypes.borne +=1\r\n      }\r\n        \r\n      \r\n    })\r\n   \r\n    for (const key in recap.today?.groups) {\r\n      let elementt = recap.today?.groups[key];\r\n     \r\n      let sum = 0;\r\n\r\n      elementt?.forEach((ticket) => {\r\n        sum = sum + ticket.price + (ticket.price * ticket.tva) / 100;\r\n      });\r\n      pay_method.push({ qt: elementt.length, name: key, prix: sum });\r\n    \r\n    }\r\n  \r\n   let newTva ={\r\n    5.5 : 0,\r\n    10:  0,\r\n    20 :0\r\n   }\r\n   \r\n   for (const key in recap.today?.tvas) {\r\n\r\n    let E = recap.today?.tvas[key];\r\n  for( let j in newTva){\r\n    if(j==key){\r\n     newTva[j]=E\r\n    }\r\n  }\r\n    \r\n    \r\n   }\r\n    let PrintData = {\r\n      restaurant: {\r\n        name: recap.Restaurant.name,\r\n        address: recap.Restaurant.address,\r\n        telephone: recap.Restaurant.telephone,\r\n      },\r\n      cancledOrders:annules,\r\n      ordersType:orderTypes,\r\n      products: recap.today?.orderItems?.map((e) => ({\r\n        ...e,\r\n        totalPrice: e.price * e.quantity,\r\n        name: findProduct({ id: e.item_id }).name,\r\n      })),\r\n      impression: selectedDate + \" \" + nowTime,\r\n      ouverture: ouverture,\r\n      fermeture: selectedDate + \" \" + nowTime,\r\n      commandes: recap.today.nbr,\r\n      logs: recap.today.logs?.filter((e) => e.title_log == \"Annulation\"),\r\n      clients: Object.keys(recap.today?.clientGroups || {}).length,\r\n      ticket_moyen: (\r\n        (recap.today?.total + tvasum) /\r\n        recap.today?.nbr\r\n      ).toFixed(2),\r\n\r\n      pay_method: pay_method,\r\n      tva: newTva,\r\n      ht: recap.today?.total.toFixed(2),\r\n      ttc: (recap.today?.total+tvasum).toFixed(2),\r\n      fond_initial: recap.lastOuverture?.montant.toFixed(2),\r\n      fond_final:\r\n      (\r\n        recap.lastOuverture?.montant +\r\n        recap.today?.total +\r\n        tvasum \r\n      ).toFixed(2)\r\n    };\r\n    let historiquePrint = {\r\n      caisse_id: caisse_id,\r\n      date: Date.now(),\r\n      montant: finalValue,\r\n      type: \"close\",\r\n    };\r\n    if(enCours ==0)\r\n    {\r\n      axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/CloseCaisse\",\r\n        {\r\n          user_id: user_id,\r\n          user: user,\r\n          montant: finalValue,\r\n          historiquePrint,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        \r\n        localStorage.clear();\r\n        dispatch(clearData())\r\n        Swal.fire({\r\n          position: \"center\",\r\n          icon: \"success\",\r\n          title: \"Caisse ferme\",\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n        axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/historiqueZcaisse\",\r\n          { PrintData, user_id }\r\n        )\r\n        .then((res) => console.log(res.data))\r\n        .catch((err) => console.log(err));\r\n        setTimeout(() => {\r\n          navigate(\"/init\");\r\n        }, 1500);\r\n      });\r\n\r\n  \r\n    }\r\n    \r\n    else if(enCours==1){\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"error\",\r\n        title: `Il ya ${enCours} commande en cours`,\r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }\r\n    else{\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"error\",\r\n        title: `Il ya ${enCours} commandes en cours`,\r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }\r\n \r\n  };\r\n  let findProduct = ({ id }) => {\r\n    return products?.find((el) => el.id == id);\r\n  };\r\nuseEffect(() => {\r\n\r\n  axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/getHistoriqueZcaisse\",\r\n          { user_id }\r\n        )\r\n        .then((res) => setHistory(res.data.allHistorique))\r\n        .catch((err) => console.log(err));\r\n}, [])\r\n\r\n  useEffect(async () => {\r\n    console.log(selectedDate);\r\n    await axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/clotureData\",\r\n        { user_id, caisse_id, TODAY: selectedDate }\r\n      )\r\n      .then((res) => {\r\n        console.log(\"colturedata\",res.data);\r\n        setrecap(res.data);\r\n        var bodyFormData = new FormData();\r\n        bodyFormData.append(\"rest_id\", user_id);\r\n        bodyFormData.append(\"page\", page);\r\n        bodyFormData.append(\"date\", selectedDate);\r\n        axios({\r\n          method: \"post\",\r\n          url: \"http://141.94.77.9/menu_premium_v2/index.php/api/order/venteCaisse\",\r\n          data: bodyFormData,\r\n          headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        })\r\n          .then(function (response) {\r\n            console.log(response.data.data.data);\r\n            setdata(response.data);\r\n            \r\n          })\r\n          .catch(function (response) {\r\n            //handle error\r\n            console.log(response);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [ping]);\r\n  const columns = [\r\n    { field: \"id\", headerName: \"#\", width: 50 },\r\n    { field: \"col1\", headerName: \"Nom\", width: 180 },\r\n    { field: \"col2\", headerName: \"Quantits\", width: 150 },\r\n    { field: \"col3\", headerName: \"Prix\", width: 150 },\r\n    { field: \"col4\", headerName: \"Sous-Total\", width: 150 },\r\n  ];\r\n\r\n  let rows = recap.today?.orderItems?.map((e, key) => ({\r\n    id: key,\r\n    col1: findProduct({ id: e.item_id })?.name,\r\n    col2: e.quantity,\r\n    col3: e.price?.toFixed(2) + \"\",\r\n    col4: (e.price * e.quantity).toFixed(2) + \"\",\r\n  }));\r\n\r\n  \r\n  // const rows = [\r\n  //   { id: 1, col1: \"Hello\", col2: \"World\" },\r\n  //   { id: 2, col1: \"DataGridPro\", col2: \"is Awesome\" },\r\n  //   { id: 3, col1: \"MUI\", col2: \"is Amazing\" },\r\n  // ];\r\n  var tvasum = 0;\r\n  Object.keys(recap.today?.tvas || {}).map((key) => {\r\n    tvasum = tvasum + recap.today?.tvas[key];\r\n  });\r\n  \r\n  const handlePrint = () => {\r\n    \r\n    let pay_method = [];\r\n    let orderTypes={\r\n      surPlace:0,\r\n      livraison:0,\r\n      emporter:0,\r\n      borne:0\r\n    }\r\n    completd.map(e=>{\r\n      if(e.order_type==\"surplace\"){\r\n        return orderTypes.surPlace +=1\r\n      }\r\n      if(e.order_type==\"emporter\"){\r\n        return orderTypes.livraison +=1\r\n      }\r\n      if(e.order_type==\"livraison\"){\r\n        return orderTypes.emporter +=1\r\n      }\r\n      if(e.from_kiosk==1){\r\n        return orderTypes.borne +=1\r\n      }\r\n        \r\n      \r\n    })\r\n   \r\n    for (const key in recap.today?.groups) {\r\n      let elementt = recap.today?.groups[key];\r\n     \r\n      let sum = 0;\r\n\r\n      elementt?.forEach((ticket) => {\r\n        sum = sum + ticket.price + (ticket.price * ticket.tva) / 100;\r\n      });\r\n      pay_method.push({ qt: elementt.length, name: key, prix: sum });\r\n    \r\n    }\r\n  \r\n   let newTva ={\r\n    5.5 : 0,\r\n    10:  0,\r\n    20 :0\r\n   }\r\n   \r\n   for (const key in recap.today?.tvas) {\r\n\r\n    let E = recap.today?.tvas[key];\r\n  for( let j in newTva){\r\n    if(j==key){\r\n     newTva[j]=E\r\n    }\r\n  }\r\n    \r\n    \r\n   }\r\n   \r\n    let PrintData = {\r\n      restaurant: {\r\n        name: recap.Restaurant.name,\r\n        address: recap.Restaurant.address,\r\n        telephone: recap.Restaurant.telephone,\r\n      },\r\n      cancledOrders:annules,\r\n      ordersType:orderTypes,\r\n      products: recap.today?.orderItems?.map((e) => ({\r\n        ...e,\r\n        totalPrice: e.price * e.quantity,\r\n        name: findProduct({ id: e.item_id }).name,\r\n      })),\r\n      impression: selectedDate + \" \" + nowTime,\r\n      ouverture: ouverture,\r\n      fermeture: selectedDate + \" \" + nowTime,\r\n      commandes: recap.today.nbr,\r\n      logs: recap.today.logs?.filter((e) => e.title_log == \"Annulation\"),\r\n      clients: Object.keys(recap.today?.clientGroups || {}).length,\r\n      ticket_moyen: (\r\n        (recap.today?.total + tvasum) /\r\n        recap.today?.nbr\r\n      ).toFixed(2),\r\n\r\n      pay_method: pay_method,\r\n      tva: newTva,\r\n      ht: recap.today?.total.toFixed(2),\r\n      ttc: (recap.today?.total+tvasum).toFixed(2),\r\n      fond_initial: recap.lastOuverture?.montant.toFixed(2),\r\n      fond_final:\r\n      (\r\n        recap.lastOuverture?.montant +\r\n        recap.today?.total +\r\n        tvasum \r\n      ).toFixed(2)\r\n    };\r\n   \r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printzcaisse\",\r\n        { PrintData, user_id }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n    \r\n  };\r\n  const showZcaisse =(data)=>{\r\n    setPreviewZ(true);\r\n    setzHistory(data)\r\n    console.log(data)\r\n  }\r\n  const handlePrintHistory=(PrintData)=>{\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printzcaisse\",\r\n        { PrintData, user_id }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Navbar\r\n       \r\n        variant=\"warning\"\r\n        className=\"colture_nav\"\r\n      >\r\n        <Container className=\"colture_navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n        <h6 className=\"zcaisse_history\" onClick={()=>setPreviewHistory(true)}>\r\n        <FontAwesomeIcon\r\n             \r\n              size=\"1x\"\r\n              icon={faHistory}\r\n              style={{ marginRight: \"0.5rem\"}}\r\n            />\r\n          Historique\r\n        </h6>\r\n          <Nav className=\"ms-auto\">\r\n            {/* <Dropdown\r\n              options={options}\r\n              value={defaultOption}\r\n              placeholder=\"Select an option\"\r\n            /> */}\r\n            <Nav.Link> </Nav.Link>\r\n            <Nav.Link\r\n              onClick={() => {\r\n                navigate(\"/main\");\r\n                dispatch(clearOrders());\r\n              }}\r\n            >\r\n              <img\r\n                width=\"45px\"\r\n                src={tableIcon}\r\n                className=\"colture-table-icon\"\r\n              />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"cloture-server\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              className=\"cloture_server_img\"\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      {recap.today ? (\r\n        <div\r\n          style={{\r\n            padding: \"1rem\",\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n            height: \"93vh\",\r\n            overflow: \"hidden\",\r\n            paddingTop: \"1rem\",\r\n            backgroundColor: \"white\",\r\n          }}\r\n        >\r\n          <div style={{ width: \"30%\", height: \"100vh\" }}>\r\n            {/* <h6>{t(\"closureHistory\")}</h6>\r\n          <p>{t(\"selectDate\")}</p>\r\n          <input\r\n            type=\"date\"\r\n            defaultValue={date}\r\n            onChange={(e) => {\r\n              setSelectedDate(e.target.value);\r\n              setping(!ping);\r\n            }}\r\n          /> */}\r\n\r\n            <TicketZ\r\n           \r\n              tvas={recap.today?.tvas}\r\n              products={recap.today?.orderItems?.map((e) => ({\r\n                ...e,\r\n                totalPrice: e.price * e.quantity,\r\n                name: findProduct({ id: e.item_id })?.name,\r\n              }))}\r\n              data={data}\r\n              recap={recap}\r\n              selectedDate={selectedDate}\r\n              tvasum ={tvasum}\r\n            />\r\n          </div>\r\n          <div\r\n            style={{\r\n              width: \"70%\",\r\n              height: \"100vh\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                display: \"flex\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.commandesTotal}\r\n                      formatValue={(value) => value.toFixed(0)}\r\n                    />\r\n                  </b>\r\n                </h1>\r\n                <h5>Total des commandes</h5>\r\n              </div>\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.today?.clients}\r\n                      formatValue={(value) => value.toFixed(0)}\r\n                    />\r\n                  </b>\r\n                </h1>\r\n                <h5>Clients total</h5>\r\n              </div>\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.chiffre}\r\n                      formatValue={(value) => value.toFixed(2)}\r\n                    />{\" \"}\r\n                    <br />\r\n                  </b>\r\n                </h1>\r\n                <h5>Chiffre d'affaire</h5>\r\n              </div>\r\n              <div className=\"rec\">\r\n                <h1>\r\n                  <b>\r\n                    <AnimatedNumber\r\n                      value={recap.chiffre / recap.commandesTotal}\r\n                      formatValue={(value) => value.toFixed(2)}\r\n                    />\r\n                    <br />\r\n                  </b>\r\n                </h1>\r\n                <h5>Panier moyen</h5>\r\n              </div>\r\n            </div>\r\n            <div style={{ width: \"100%\", height: \"300px\", marginTop: \"1rem\" }}>\r\n              <DataGrid\r\n                className=\"colture-datagrid\"\r\n                loading={rows?.length == 0}\r\n                pageSize={10}\r\n                paginationMode=\"client\"\r\n                onPageChange={(e) => {\r\n                  setpage(e + 1);\r\n                }}\r\n                rowCount={data?.data?.total}\r\n                rows={rows == undefined ? [] : rows}\r\n                columns={columns}\r\n              />\r\n              <div className=\"colture_buttons\">\r\n                <div\r\n                  style={{\r\n                    width: \"100%\",\r\n                    marginTop: \"1rem\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                  }}\r\n                >\r\n                  <Button\r\n                    className=\"colture_buton\"\r\n                    onClick={() => handlePrint()}\r\n                    style={{ marginRight: \"1rem\" }}\r\n                    variant=\"outline-info\"\r\n                  >{`${t(\"print\")} X ${t(\"ofCashier\")}`}</Button>\r\n                  <Button\r\n                    className=\"colture_buton\"\r\n                    variant=\"outline-danger\"\r\n                    onClick={() => setPreviewTicket(!previewTicket)}\r\n                  >\r\n                    Visualiser Ticket\r\n                  </Button>\r\n                </div>\r\n\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                    marginTop: \"1rem\",\r\n                    height: \"100px\",\r\n                  }}\r\n                >\r\n                  <h3\r\n                    style={{\r\n                      color: \"#ff6b6b\",\r\n                      fontWeight: \"bold\",\r\n                      marginRight: \"1rem\",\r\n                      width: \"max-content\",\r\n                    }}\r\n                  >\r\n                    {(\r\n                      recap.lastOuverture?.montant +\r\n                      recap.today?.total +\r\n                      tvasum\r\n                    ).toFixed(2) + \" \"}\r\n                  </h3>\r\n                  <Button\r\n                    variant=\"danger\"\r\n                    className=\"clot_btn \"\r\n                    onClick={() => handleCloseCaisse()}\r\n                  >\r\n                    {t(\"close\")}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"loading-z-caisse\">\r\n          <h1>Chargement de caisse...</h1>\r\n          <img src={loading} alt=\"loading\" />\r\n        </div>\r\n      )}\r\n\r\n      <Modal show={previewTicket} onHide={() => setPreviewTicket(false)}>\r\n        <Modal.Header closeButton></Modal.Header>;\r\n        <Modal.Body>\r\n          <div className=\"z-cais_show_ticket\">\r\n            <TicketZ\r\n              products={recap.today?.orderItems?.map((e) => ({\r\n                ...e,\r\n                totalPrice: e.price * e.quantity,\r\n                name: findProduct({ id: e.item_id })?.name,\r\n              }))}\r\n              data={data}\r\n              recap={recap}\r\n              selectedDate={selectedDate}\r\n              tvasum ={tvasum}\r\n            />\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setPreviewTicket(false)}>\r\n            Fermer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <Modal show={previewHistory} onHide={() => setPreviewHistory(false)}>\r\n        <Modal.Header closeButton>\r\n          <h4>Historique Z-Caisse</h4>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"z-cais_history\">\r\n            {history.map((el,key)=>(\r\n              <div key={key} className='z-history'>\r\n                <h6> Du {el.data.ouverture}  au {el.data.fermeture}</h6>\r\n                <div>\r\n                <Button variant=\"info\" onClick={() => handlePrintHistory(el.data)}>\r\n            Imprimer\r\n          </Button>\r\n          <Button variant=\"success\" onClick={() => showZcaisse(el.data)} style={{marginLeft:\"1rem\"}} >\r\n            Afficher\r\n          </Button>\r\n                </div>\r\n        \r\n\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setPreviewHistory(false)}>\r\n            Fermer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <Modal show={previewZ} onHide={() => setPreviewZ(false)}>\r\n        <Modal.Header closeButton></Modal.Header>;\r\n        <Modal.Body>\r\n          <div className=\"z-cais_show_ticket\">\r\n            <TicketH zHistory={zHistory} />\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setPreviewZ(false)}>\r\n            Fermer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cloture;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport mimic from \"./../mimic.json\";\r\nimport \"./testStyle.css\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nconst Test = () => {\r\n  const dataLocal = useSelector((state) => state.data);\r\n\r\n  const [data, setData] = useState({\r\n    products: dataLocal.products,\r\n    categories: dataLocal.categories,\r\n    nsteps: dataLocal.nSteps,\r\n  });\r\n\r\n  console.log(data);\r\n\r\n  const [selectedCategory, setSelectedCategory] = useState(0);\r\n  const [selectedProduct, setselectedProduct] = useState(0);\r\n  const [step, setStep] = useState(0);\r\n\r\n  const handleAddChoice = () => {};\r\n\r\n  const findProductWithId = (id) => {\r\n    return data.products.find((prod) => prod.id == id) || {};\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"cat\", selectedCategory);\r\n    console.log(\"prod\", selectedProduct);\r\n    console.log(\"step\", step);\r\n    console.log(\r\n      data.nsteps.filter((nstep) => nstep.product_id == selectedProduct)[0]\r\n    );\r\n  }, [selectedProduct, selectedCategory, step]);\r\n\r\n  return (\r\n    <div className=\"all\">\r\n      <div className=\"cats\">\r\n        {data.categories\r\n          .filter((cat) => cat.id == 746)\r\n          .map((cat) => (\r\n            <div\r\n              className=\"cat\"\r\n              onClick={() => {\r\n                setSelectedCategory(cat.id);\r\n                setStep(0);\r\n              }}\r\n            >\r\n              <img src={cat.picture} alt=\"\" height=\"70px\" height=\"70px\" />\r\n              <h6>{cat.name}</h6>\r\n            </div>\r\n          ))}\r\n      </div>\r\n      <div className=\"prods\">\r\n        {step == 0\r\n          ? data.products\r\n              .filter((prods) => prods.cat_id == selectedCategory)\r\n              .map((prod) => (\r\n                <div\r\n                  className=\"prod\"\r\n                  onClick={() => {\r\n                    setselectedProduct(prod.id);\r\n                    if (prod.nsteps > step) {\r\n                      setStep(step + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  <img src={prod.image} alt=\"\" height=\"70px\" height=\"70px\" />\r\n                  <h6>\r\n                    {prod.name} <span>- {prod.price} $</span>{\" \"}\r\n                  </h6>\r\n                  <p>{prod.description}</p>\r\n                </div>\r\n              ))\r\n          : data.nsteps\r\n              .filter((nstep) => nstep.menu_id == selectedProduct)[0]\r\n              [step].choice.map((slot) => (\r\n                <div className=\"prod\">\r\n                  <img\r\n                    src={findProductWithId(slot).image}\r\n                    alt=\"\"\r\n                    height=\"70px\"\r\n                    height=\"70px\"\r\n                  />\r\n                  <h6>\r\n                    {findProductWithId(slot).name}{\" \"}\r\n                    <span>- {findProductWithId(slot).price} $</span>{\" \"}\r\n                  </h6>\r\n                  <p>{findProductWithId(slot).description}</p>\r\n                </div>\r\n              ))}\r\n        {findProductWithId(selectedProduct).nsteps >= step && step > 0 ? (\r\n          <Button onClick={() => setStep(step - 1)}>retour</Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {findProductWithId(selectedProduct).nsteps > step && step > 0 ? (\r\n          <Button\r\n            onClick={() => {\r\n              console.log(findProductWithId(selectedProduct));\r\n              if (findProductWithId(selectedProduct).nsteps > step) {\r\n                setStep(step + 1);\r\n              }\r\n            }}\r\n          >\r\n            suivant\r\n          </Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {findProductWithId(selectedProduct).nsteps == step ? (\r\n          <Button>finir</Button>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <div className=\"cart\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Test;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport QRCode from \"react-qr-code\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router\";\r\nimport aprc from \"./../Shared/aprc.png\";\r\n\r\nconst Ticket = ({ order, thisDate, ping }) => {\r\n  const address = localStorage.getItem(\"address\");\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  console.log(order);\r\n  const params = useParams();\r\n  const { table_id } = params;\r\n  const telephone = localStorage.getItem(\"telephone\");\r\n  const [toShowOrder, settoShowOrder] = useState(order);\r\n  const ordersData = useSelector((state) => state.order.checkoutData);\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const [isBusy, setIsBusy] = useState(true);\r\n  const [restaurant, setrestaurant] = useState({});\r\n  // let toShowOrder = ordersData.filter((o) => o.order_id == table_id)[0] || {};\r\n\r\n  // useEffect(() => {\r\n  //   if (toShowOrder?.orderItems && toShowOrder?.orderItems.length) {\r\n  //     setIsBusy(false);\r\n  //     console.log(toShowOrder?.orderItems);\r\n  //   }\r\n  // }, [toShowOrder]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\"/api/getRestaurantData\", { user_id })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setrestaurant(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [toShowOrder]);\r\n\r\n  useEffect(() => {\r\n    settoShowOrder(order);\r\n  }, [order]);\r\n\r\n  console.log(restaurant);\r\n\r\n  console.log(toShowOrder);\r\n  \r\n  var groupBy = function (xs, key) {\r\n    return xs.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n\r\n  let tvass = groupBy(toShowOrder?.tvas || [], \"perc\");\r\n  console.log(tvass);\r\n\r\n  const calcOrder = (order) => {\r\n    let price = order.price;\r\n    let tva = order.tva;\r\n    if (order.extras && order.extras.length) {\r\n      console.log(\"has extra\");\r\n      order.extras.map((extra) => {\r\n        console.log(extra.price, extra.default_quantity);\r\n        price += extra.price * extra.default_quantity;\r\n      });\r\n    }\r\n    if (order.stepItems && order.stepItems != {}) {\r\n      Object.keys(order.stepItems).map((e) => {\r\n        order.stepItems[e].map((item) => {\r\n          price += item.price;\r\n         \r\n        });\r\n      });\r\n    }\r\n    return { price: price * order.qt, tva: (price * order.qt * tva) / 100 };\r\n  };\r\n\r\n  let tva = 0;\r\n  let is_alcool = false;\r\n  let test = order.orderItems;\r\n  order.orderItems?.forEach((element) => {\r\n    if (element.is_alcool == true) {\r\n      is_alcool = true;\r\n    }\r\n  });\r\n  if (is_alcool == true) {\r\n    tva = 20;\r\n  } else {\r\n    let is = order.orderType == undefined ? order.order_type : order.orderType;\r\n    switch (is) {\r\n      case \"surplace\":\r\n        tva = 10;\r\n        break;\r\n      case \"sur place\":\r\n        tva = 10;\r\n        break;\r\n      case \"emporter\":\r\n        tva = 5.5;\r\n        break;\r\n      case \"livraison\":\r\n        tva = 5.5;\r\n        break;\r\n      default:\r\n        tva = 10;\r\n        break;\r\n    }\r\n  }\r\n  // let tax = (toShowOrder.taxPrice * calcTotal(toShowOrder?.orderItems)) / 100;\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  // useEffect(() => {\r\n  //   if (order.part > 1) {\r\n  //     let copy = JSON.parse(JSON.stringify(order) || {});\r\n  //     copy = { ...copy };\r\n  //     settoShowOrder(copy);\r\n  //   }\r\n  // }, [ping]);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <div className=\"ticket\">\r\n        <div className=\"ticket_container\">\r\n          <h3 style={{ marginTop: \"0.5rem\" }}>\r\n            <b>Ticket d'encaissement</b>\r\n          </h3>\r\n          <p>\r\n            {restaurant.name} <br />\r\n            {address || \"\" + \"-\" + telephone || \"\"} <br />\r\n            tel: {restaurant.telephone}\r\n          </p>\r\n          <h1>\r\n            <b style={{ fontSize: \"56px\" }}>{toShowOrder?.order_id}</b>\r\n          </h1>\r\n          <div className=\"ticket_item\" style={{ flexWrap: \"wrap\" }}>\r\n            <p>Client :{toShowOrder.customer_name}</p>\r\n            <p>Type :{toShowOrder.orderType}</p>\r\n            <p>Numero :{toShowOrder.customer_tel}</p>\r\n            <p>Adresse:{toShowOrder.customer_adress}</p>\r\n          </div>\r\n          <span style={{ marginBottom: \"0.5rem\" }}>\r\n            -------------------------------------\r\n          </span>\r\n          {toShowOrder.orderItems &&\r\n            toShowOrder.orderItems.map((item, key) => (\r\n              <>\r\n                <div className=\"ticket_item\">\r\n                  <p>{key + 1 + \"-\" + item?.name}</p>\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      width: \"30%\",\r\n                      justifyContent: \"space-evenly\",\r\n                    }}\r\n                  >\r\n                    <p>\r\n                      {item?.qt == undefined ? item.quantity : item.qt + \"x\"}\r\n                    </p>\r\n                    <p>\r\n                      {`  ${item?.price.toFixed(2)} `}{\" \"}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                {item.stepItems && Object.keys(item.stepItems).length ? (\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                    }}\r\n                    className=\"step_item\"\r\n                  >\r\n                    {Object.keys(item.stepItems).map((key) =>\r\n                      item.stepItems[key].map((el) => (\r\n                        <span style={{ textAlign: \"start\", color: \"grey\" }}>\r\n                          -{el.name}\r\n                        </span>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n                ) :item?.steps != []? (\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                    }}\r\n                    className=\"step_item\"\r\n                  >\r\n                    {\r\n                      item.steps?.map((el) => (\r\n                        <span style={{ textAlign: \"start\", color: \"grey\" }}>\r\n                          -{el.name}\r\n                        </span>\r\n                      ))\r\n                    }\r\n                  </div>\r\n                ): (\r\n                  \"\"\r\n                )}\r\n                {item?.extras != []\r\n                  ? item?.extras?.map((extra) =>\r\n                      extra.default_quantity > 0 ? (\r\n                        <div className=\"ticket_extra\">\r\n                          <p>+ {extra.title}</p>\r\n                          <div\r\n                            style={{\r\n                              display: \"flex\",\r\n                              width: \"30%\",\r\n                              justifyContent: \"space-evenly\",\r\n                            }}\r\n                          >\r\n                            {\" \"}\r\n                            <p>{extra.default_quantity + \"x\"}</p>\r\n                            <p>\r\n                              {`  ${extra.price.toFixed(2)} `}\r\n                              {renderHTML(`<i>${currency}</i>`)}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        \"\"\r\n                      )\r\n                    )\r\n                  : \"\"}\r\n              </>\r\n            ))}\r\n          <span style={{ marginBottom: \"0.5rem\" }}>\r\n            -------------------------------------\r\n          </span>\r\n          <div className=\"ticket_item ticket_last\">\r\n            <p>Total HT : </p>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"20%\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <p>\r\n                {toShowOrder?.totalPrice} {renderHTML(`<i>${currency}</i>`)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          {/* {Object.keys(tvass).map((key) => (\r\n            <div className=\"ticket_item ticket_last\">\r\n              <p>TVA({key}%):</p>\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"20%\",\r\n                  justifyContent: \"space-evenly\",\r\n                }}\r\n              >\r\n                <p>\r\n                  {tvass[key].reduce((a, b) => a + b).toFixed(2)}{\" \"}\r\n                  {renderHTML(`<i>${currency}</i>`)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ))} */}\r\n          {\r\n            (console.log(tva),\r\n            (\r\n              <div className=\"ticket_item ticket_last\">\r\n                <p>\r\n                  TVA(\r\n                  {tva}\r\n                  %):\r\n                </p>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"20%\",\r\n                    justifyContent: \"space-evenly\",\r\n                  }}\r\n                >\r\n                  <p>\r\n                    {((toShowOrder?.totalPrice * tva) / 100).toFixed(2)}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))\r\n          }\r\n          {/* <div className=\"ticket_item ticket_last\">\r\n            <p>\r\n              TVA({(toShowOrder?.taxPrice / toShowOrder?.totalPrice) * 100}%):\r\n            </p>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"20%\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <p>\r\n                {toShowOrder?.taxPrice.toFixed(2)}{\" \"}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </p>\r\n            </div>\r\n          </div> */}\r\n          <div className=\"ticket_item ticket_last\">\r\n            <p>Total TTC : </p>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"20%\",\r\n                justifyContent: \"space-evenly\",\r\n              }}\r\n            >\r\n              <p>\r\n                {(\r\n                  toShowOrder?.totalPrice +\r\n                  (toShowOrder?.totalPrice * tva) / 100\r\n                ).toFixed(2)}\r\n                {renderHTML(`<i>${currency}</i>`)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          {toShowOrder.paymentsInDb?.length > 0 && (\r\n            <>\r\n              <span style={{ marginBottom: \"0.5rem\" }}>\r\n                -------------------------------------\r\n              </span>\r\n              {toShowOrder.paymentsInDb?.map((one) => (\r\n                <div className=\"ticket_item ticket_last\">\r\n                  <p>Pay({one.pay_method})</p>\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      width: \"20%\",\r\n                      justifyContent: \"space-evenly\",\r\n                    }}\r\n                  >\r\n                    <p>\r\n                      {one.amount.toFixed(2)}\r\n                      {renderHTML(`<i>${currency}</i>`)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              <div className=\"ticket_item ticket_last\">\r\n                {toShowOrder.paymentsInDb?.reduce(\r\n                  (acc, curr) => acc + curr.amount,\r\n                  0\r\n                ) -\r\n                  (toShowOrder?.totalPrice +\r\n                    (toShowOrder?.totalPrice * tva) / 100) >\r\n                0 ? (\r\n                  <>\r\n                    <p>Rendre monnaie</p>\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        width: \"20%\",\r\n                        justifyContent: \"space-evenly\",\r\n                      }}\r\n                    >\r\n                      <p>\r\n                        {(\r\n                          toShowOrder.paymentsInDb?.reduce(\r\n                            (acc, curr) => acc + curr.amount,\r\n                            0\r\n                          ) -\r\n                          (toShowOrder?.totalPrice +\r\n                            (toShowOrder?.totalPrice * tva) / 100)\r\n                        )?.toFixed(2)}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </p>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <p>Reste a payer</p>\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        width: \"20%\",\r\n                        justifyContent: \"space-evenly\",\r\n                      }}\r\n                    >\r\n                      <p>\r\n                        {Math.abs(\r\n                          (\r\n                            toShowOrder.paymentsInDb?.reduce(\r\n                              (acc, curr) => acc + curr.amount,\r\n                              0\r\n                            ) -\r\n                            (toShowOrder?.totalPrice +\r\n                              (toShowOrder?.totalPrice * tva) / 100)\r\n                          )?.toFixed(2)\r\n                        )}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </p>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n          <p>\r\n            <b>\r\n              {toShowOrder?.part && toShowOrder?.type == \"partager\" ? (\r\n                <p style={{ display: \"flex\" }}>\r\n                  {`Votre part pour 1/${toShowOrder?.part} personnes est : ${(\r\n                    (toShowOrder?.totalPrice +\r\n                      (toShowOrder?.totalPrice * tva) / 100) /\r\n                    toShowOrder.part\r\n                  ).toFixed(2)}\r\n              `}\r\n                  {renderHTML(`<i>${currency}</i>`)}\r\n                </p>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </b>\r\n          </p>\r\n          <p>{thisDate}</p>\r\n          {/* <QRCode\r\n            value={toShowOrder?.order_id?.toString() || \"000\"}\r\n            size={100}\r\n          /> */}\r\n          <img\r\n            src={`https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=${toShowOrder?.order_id}&choe=UTF-8+`}\r\n            width=\"40%\"\r\n          />\r\n          <p>Scanner le numero de Commande {toShowOrder?.order_id}</p>\r\n        </div>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Ticket;\r\n","export default __webpack_public_path__ + \"static/media/aprc.fc75241f.png\";","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport {\r\n  Button,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Offcanvas,\r\n  Row,\r\n  Spinner,\r\n  Table,\r\n} from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router\";\r\n\r\nimport {\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faBorderAll,\r\n  faBorderNone,\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCircle,\r\n  faEdit,\r\n  faHistory,\r\n  faMapMarkedAlt,\r\n  faMapMarkerAlt,\r\n  faPhone,\r\n  faSignOutAlt,\r\n  faTimesCircle,\r\n  faUsers,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport Ticket from \"../Components/Ticket\";\r\nimport { handle } from \"express/lib/application\";\r\nimport useTranslation from \"./../i18\";\r\nimport { useNavigate } from \"react-router\";\r\nimport {\r\n  deletecheckoutData,\r\n  setCheckoutChange,\r\n  setNbrCouverts,\r\n} from \"../Slices/order\";\r\nimport axios from \"axios\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport Bat from \"../Components/Bat\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\nimport \"react-simple-keyboard/build/css/index.css\";\r\nimport $ from \"jquery\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst Checkout = () => {\r\n  const [load, setLoad] = useState(false)\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const params = useParams();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { table_id } = params;\r\n  console.log(params);\r\n  const ordersData = useSelector((state) => state.order.checkoutData);\r\n  const selectedTable = useSelector((state) => state.order.selectedTable);\r\n  const client = useSelector((state) => state.order.client);\r\n  console.log(ordersData);\r\n  let thisOrder = ordersData.filter((o) => o.order_id == table_id)[0] || {};\r\n\r\n  console.log(thisOrder);\r\n  if (thisOrder.totalPrice == undefined) {\r\n    thisOrder = {\r\n      ...thisOrder,\r\n      totalPrice: thisOrder.price,\r\n    };\r\n  }\r\n  let orderDate = new Date(\r\n    thisOrder.Date == undefined ? thisOrder.date : thisOrder.Date\r\n  );\r\n  var curr_date = orderDate?.getDate();\r\n  var curr_month = orderDate?.getMonth();\r\n  var curr_year = orderDate?.getFullYear();\r\n  var curr_hour = orderDate?.getHours();\r\n  var curr_min = orderDate?.getMinutes();\r\n  const [show, setShow] = useState(false);\r\n  const [showPay, setShowPay] = useState(false);\r\n  const [accompte, setAccompte] = useState(false);\r\n  const [part, setPart] = useState(1);\r\n  const [typeRepart, settypeRepart] = useState(\"partager\");\r\n  const [paymentType, setpaymentType] = useState(\"Especes\");\r\n  const [amount, setAmount] = useState(0);\r\n  const [amountPaid, setamountPaid] = useState(0);\r\n  const [note, setNote] = useState(\"\");\r\n  const [notefrais, setnotefrais] = useState(false);\r\n  const [input, setInput] = useState(\"\");\r\n  const [nbrCouverts, setNbrCouverts] = useState(1);\r\n  const [selected, setSelected] = useState(\"pay\");\r\n  const [acompte, setAcompte] = useState(false);\r\n  const [coupon, setCoupon] = useState(\"\");\r\n  const [payments, setpayments] = useState([]);\r\n  const [getkeyborad, setkeyborad] = useState(0);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n\r\n  var groupBy = function (xs, key) {\r\n    return xs.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n\r\n  let tvas = 0;\r\n  let is_alcool = false;\r\n  let test = thisOrder.orderItems;\r\n  thisOrder?.orderItems?.forEach((element) => {\r\n    if (element.tva == 20) {\r\n      is_alcool = true;\r\n    }\r\n  });\r\n  if (is_alcool == true) {\r\n    tvas = 20;\r\n  } else {\r\n    switch (\r\n      thisOrder.orderType == undefined\r\n        ? thisOrder.order_type\r\n        : thisOrder.orderType\r\n    ) {\r\n      case \"surplace\":\r\n        tvas = 10;\r\n        break;\r\n      case \"sur place\":\r\n        tvas = 10;\r\n        break;\r\n      case \"emporter\":\r\n        tvas = 5.5;\r\n        break;\r\n      case \"livraison\":\r\n        tvas = 5.5;\r\n        break;\r\n      default:\r\n        tvas = 10;\r\n        break;\r\n    }\r\n  }\r\n  const handleVerifyCoupon = () => {\r\n \r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/verifyCoupon\",\r\n        {\r\n          code: coupon,\r\n          user_id :user_id,\r\n          paidamount:thisOrder?.totalPrice?.toFixed(2)\r\n        }\r\n      )\r\n      .then((res) => {\r\n        let remise = res.data.couponInDb.discount;\r\n   \r\n        let today = new Date().toISOString().slice(0, 10);\r\n        if (res.data.couponInDb.expires_at > today) {\r\n          setAmount(Number(res.data.couponInDb.discount+amount))\r\n          setpaymentType(\"ticket restaurant\")\r\n          Swal.fire({\r\n            icon: \"success\",\r\n            title: `Coupon valid pour ${remise} euro`,\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        \r\n        } else {\r\n          Swal.fire({\r\n            icon: \"warning\",\r\n            title: `Validit epuis`,\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) =>\r\n        Swal.fire({\r\n          icon: \"warning\",\r\n          title: `Coupon non valide`,\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        })\r\n       \r\n      );\r\n  };\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  let thisDate =\r\n    curr_date +\r\n    \"-\" +\r\n    curr_month +\r\n    \"-\" +\r\n    curr_year +\r\n    \"-\" +\r\n    curr_hour +\r\n    \":\" +\r\n    curr_min;\r\n\r\n  // let tax = (thisOrder.taxPrice * thisOrder.totalPrice) / 100;\r\n\r\n  const handleFinal = () => {\r\n    setLoad(true)\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/finalizeorder\",\r\n        {\r\n          order: {\r\n            ...thisOrder,\r\n            nbrCouverts: nbrCouverts,\r\n            message: note,\r\n            pay_method: paymentType,\r\n            amount: amount,\r\n            amountPaid: amountPaid,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n           \r\n        console.log(amount);\r\n        console.log(amountPaid);\r\n        setpayments([...payments, { type: paymentType, value: amount }]);\r\n        let paid = [\"Glovo\", \"Just-Eat\", \"Deliveroo\", \"Uber Eats\",\"ticket restaurant\"].includes(\r\n          paymentType\r\n        );\r\n        setTimeout(() => {\r\n          if (\r\n            amountPaid + amount >=\r\n            (\r\n              thisOrder?.totalPrice +\r\n              (thisOrder?.totalPrice * tvas) / 100\r\n            ).toFixed(2)\r\n          ) {\r\n            handleExit();\r\n          }\r\n        }, 1);\r\n        setAmount(0);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const handleAddition = () => {\r\n    console.log(\"called\");\r\n    handleClose();\r\n    if (part > 1) {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/updatehow_paid\",\r\n          {\r\n            type: typeRepart,\r\n            order: thisOrder,\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          if (res.data) {\r\n            navigate(`/checkout2/${table_id}/${typeRepart}/${part}`);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } else {\r\n      setShowPay(true);\r\n    }\r\n  };\r\n\r\n  const handleExit = () => {\r\n    let tva = 0;\r\n    let is_alcool = false;\r\n    let test = thisOrder.orderItems;\r\n    thisOrder.orderItems.forEach((element) => {\r\n      if (element.tva == 20) {\r\n        is_alcool = true;\r\n      }\r\n    });\r\n    if (is_alcool == true) {\r\n      tva = 20;\r\n    } else {\r\n      switch (thisOrder.orderType) {\r\n        case \"surplace\":\r\n          tva = 10;\r\n          break;\r\n        case \"emporter\":\r\n          tva = 5.5;\r\n          break;\r\n        case \"livraison\":\r\n          tva = 5.5;\r\n          break;\r\n        default:\r\n          tva = 10;\r\n          break;\r\n      }\r\n    }\r\n    \r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printFinalOrder\",\r\n        {\r\n          user_id: user_id,\r\n          order: {\r\n            ...thisOrder,\r\n            tvas: tva,\r\n            nbrCouverts: nbrCouverts,\r\n            table_number: thisOrder.table || \"\",\r\n            order_id: thisOrder.order_id,\r\n            Date: new Date(),\r\n            amount:\r\n              amount >=\r\n              thisOrder?.totalPrice +\r\n                ((tvas * 100) / thisOrder?.totalPrice).toFixed(2)\r\n                ? (\r\n                    thisOrder?.totalPrice +\r\n                    (tvas * 100) / thisOrder?.totalPrice\r\n                  ).toFixed(2) - amountPaid\r\n                : amount - amountPaid,\r\n            amountPaid: amount,\r\n            paymentType: paymentType,\r\n          },\r\n          type: \"payertout\",\r\n        }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n    if (notefrais == true) {\r\n      axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/printnotefrais\",\r\n          {\r\n            user_id: user_id,\r\n            order: {\r\n              ...thisOrder,\r\n              tvas: tva,\r\n              nbrCouverts: nbrCouverts,\r\n              table_number: thisOrder.table || \"\",\r\n              order_id: thisOrder.order_id,\r\n              Date: new Date(),\r\n              amount:\r\n                amount >=\r\n                thisOrder?.totalPrice +\r\n                  ((thisOrder?.totalPrice * tvas) / 100).toFixed(2)\r\n                  ? (\r\n                      thisOrder?.totalPrice +\r\n                      (thisOrder?.totalPrice * tvas) / 100\r\n                    ).toFixed(2) - amountPaid\r\n                  : amount - amountPaid,\r\n              amountPaid: amount,\r\n              paymentType: paymentType,\r\n            },\r\n          }\r\n        )\r\n        .then((res) => console.log(res.data))\r\n        .catch((err) => console.log(err));\r\n    }\r\n    let restAvoir = (amount- (thisOrder?.totalPrice +\r\n      (thisOrder?.totalPrice * tvas) / 100)).toFixed(2)\r\n      let amountss = amount.toFixed(2)\r\n    Swal.fire({\r\n      icon: \"success\",\r\n      title:\r\n        \"<h5 >\" +\r\n        `le paiement effectu avec succs avec montant: <span style='color:red'>${amountss}</span> du reste:<span style='color:green'>${restAvoir}</span> ` +\r\n        \"</h5>\",\r\n      showConfirmButton: false,\r\n      timer: 3000,\r\n    });\r\n    setLoad(false)\r\n    navigate(\"/main\");\r\n    dispatch(deletecheckoutData({ order_id: table_id }));\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n\r\n  const { t } = useTranslation();\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  //////////////////////CLAVIER///////////////////////////////////////\r\n\r\n  const onChange = (input) => {\r\n    let i = 0;\r\n    for (let index = 0; index < input.length; index++) {\r\n      const element = input[index];\r\n      if (element == \",\") {\r\n        i++;\r\n        if (i >= 2) {\r\n          break;\r\n        }\r\n      } else if (index == 0 && element == \",\") {\r\n        i = 2;\r\n        break;\r\n      }\r\n    }\r\n    function numberFromLocaleString(stringValue, locale) {\r\n      var parts = Number(1111.11)\r\n        .toLocaleString(locale)\r\n        .replace(/\\d+/g, \"\")\r\n        .split(\"\");\r\n      if (stringValue === null) return null;\r\n      if (parts.length == 1) {\r\n        parts.unshift(\"\");\r\n      }\r\n      return Number(\r\n        String(stringValue)\r\n          .replace(new RegExp(parts[0].replace(/\\s/g, \" \"), \"g\"), \"\")\r\n          .replace(parts[1], \".\")\r\n      );\r\n    }\r\n    if (i < 2) {\r\n      setInput(input);\r\n      console.log(\"Input changed\", input);\r\n      if (selected == \"pay\") {\r\n        let v = numberFromLocaleString(input, \"fr\");\r\n        console.log(v);\r\n        setAmount(v);\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    } else {\r\n      setInput(\"\");\r\n      console.log(\"Input changed\", input);\r\n      if (selected == \"pay\") {\r\n        setAmount(0);\r\n        keyboard.current.setInput(\"0\");\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    }\r\n  };\r\n\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n    if (button == \"{bksp}\") {\r\n    }\r\n  };\r\n  const keyboard = useRef();\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 , {bksp}\",\r\n  ]);\r\n  const onChangeInput = ({ e, index }) => {\r\n    const input = e.target.value;\r\n    setInput(input);\r\n    keyboard.current.setInput(amount);\r\n    // setTotal(calcMontant());\r\n  };\r\n\r\n  return (\r\n    <div style={{ backgroundColor: \"white\" }}>\r\n      <Navbar variant=\"warning\" className=\"navbar\">\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"checkout-cassier\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"chekout-server\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <Container fluid>\r\n        <Row className=\"row_h\">\r\n          <Col xs={8} className=\"col_h\">\r\n            <div\r\n              style={{\r\n                marginTop: \"1rem\",\r\n                height: \"max-content\",\r\n                padding: \"1rem\",\r\n                boxShadow: \"rgba(17, 12, 46, 0.15) 0px 48px 100px 0px\",\r\n                overflow: \"auto\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  justifyContent: \"space-between\",\r\n                  display: \"flex\",\r\n                }}\r\n              >\r\n                <div className=\"leftt\">\r\n                  <h6 className=\"checkout-tbd\">\r\n                    <b>Commande</b>\r\n                  </h6>\r\n                  <h6 className=\"checkout-tbd\">\r\n                    <FontAwesomeIcon\r\n                      icon={faUtensils}\r\n                      style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                    />\r\n                    <b>#{thisOrder.order_id}</b>\r\n                  </h6>\r\n                  <h6 className=\"checkout-tbd\">\r\n                    <FontAwesomeIcon\r\n                      icon={faHistory}\r\n                      style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                    />\r\n                    <b>{thisDate}</b>\r\n                  </h6>\r\n                \r\n                  {thisOrder.orderType==\"surplace\"&&  <h6 className=\"checkout-tbd\">\r\n                    <FontAwesomeIcon\r\n                      icon={faUtensils}\r\n                      style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                    />\r\n                    <b>Table {selectedTable.nbr}</b>\r\n                  </h6>}\r\n                </div>\r\n                {Object.keys(client).length > 0 ? (\r\n                  <div className=\"rightt\">\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <b>{client.name}</b>\r\n                    </h6>\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <FontAwesomeIcon\r\n                        icon={faPhone}\r\n                        style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                      />\r\n                      <b>{client.phone}</b>\r\n                    </h6>\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <FontAwesomeIcon\r\n                        icon={faMapMarkerAlt}\r\n                        style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                      />\r\n                      <b>{client.address}</b>\r\n                    </h6>\r\n                    <h6 className=\"checkout-tbd\">\r\n                      <FontAwesomeIcon\r\n                        icon={faCircle}\r\n                        style={{ color: \"#ff6b6b\", marginRight: \"1rem\" }}\r\n                      />\r\n                      <b>{thisOrder.orderType}</b>\r\n                    </h6>\r\n                  </div>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n              <Table hover>\r\n                <thead className=\"tbd\">\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>Article</th>\r\n                    <th>Prix</th>\r\n                    <th>Qt</th>\r\n                    <th>Total</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"ccc\">\r\n                  {thisOrder?.orderItems?.map((item, key) => (\r\n                    <tr>\r\n                      <td>{key}</td>\r\n                      <td>\r\n                        {item.name}\r\n                        <br />\r\n\r\n                        {/* {item.extras && item.extras.length\r\n                          ? item.extras.map((extra) => <p>{extra.title}</p>)\r\n                          : \"\"} */}\r\n                      </td>\r\n\r\n                      <td style={{ display: \"flex\" }}>\r\n                        {item.price?.toFixed(2)}{\" \"}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </td>\r\n                      <td>{item.qt}</td>\r\n                      <td style={{ display: \"flex\" }}>\r\n                        {item.price?.toFixed(2)}{\" \"}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </Table>\r\n              <Col xs={3}>\r\n                <Table>\r\n                  <tbody\r\n                    className=\"checkout-tbd\"\r\n                    style={{ width: \"50%\", height: \"auto\", align: \"right\" }}\r\n                  >\r\n                    <tr>\r\n                      <td>\r\n                        <h6\r\n                          className=\"checkout-tbd\"\r\n                          style={{ display: \"flex\", fontWeight: \"bold\" }}\r\n                        >\r\n                          Total HT :\r\n                        </h6>\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          style={{\r\n                            color: \"#ff6b6b\",\r\n                            display: \"flex\",\r\n                            marginLeft: \"0.5rem\",\r\n                            fontWeight: \"bold\",\r\n                          }}\r\n                        >\r\n                          {thisOrder?.totalPrice?.toFixed(2)}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>\r\n                        <h6\r\n                          className=\"checkout-tbd\"\r\n                          style={{ display: \"flex\", fontWeight: \"bold\" }}\r\n                        >\r\n                          TVA( {tvas}\r\n                          %)\r\n                        </h6>\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          style={{\r\n                            color: \"#ff6b6b\",\r\n                            display: \"flex\",\r\n                            marginLeft: \"0.5rem\",\r\n                            fontWeight: \"bold\",\r\n                          }}\r\n                        >\r\n                          {((thisOrder?.totalPrice * tvas) / 100).toFixed(2)}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>\r\n                        <h6\r\n                          className=\"checkout-tbd\"\r\n                          style={{ display: \"flex\", fontWeight: \"bold\" }}\r\n                        >\r\n                          TOTAL TTC :{\" \"}\r\n                        </h6>\r\n                      </td>\r\n                      <td>\r\n                        <span\r\n                          style={{\r\n                            color: \"#ff6b6b\",\r\n                            display: \"flex\",\r\n                            marginLeft: \"0.5rem\",\r\n                            fontWeight: \"bold\",\r\n                          }}\r\n                        >\r\n                          {\" \"}\r\n                          {(\r\n                            thisOrder?.totalPrice +\r\n                            (thisOrder?.totalPrice * tvas) / 100\r\n                          )?.toFixed(2)}{\" \"}\r\n                          {renderHTML(`<i>${currency}</i>`)}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </Table>\r\n              </Col>\r\n\r\n              <div className=\"regler-addition-btns\">\r\n                <Button\r\n                  variant=\"outline-info\"\r\n                  onClick={handleShow}\r\n                  className=\"btn_chee\"\r\n                >\r\n                  Rgler addition\r\n                </Button>\r\n               {thisOrder?.status!=\"cooking\"&& thisOrder?.status!=\"ready\"?<Button\r\n                  variant=\"outline-info\"\r\n                  onClick={() => navigate(\"/menu/\" + thisOrder?.order_id)}\r\n                  className=\"btn_chee\"\r\n                >\r\n                  <FontAwesomeIcon\r\n                    icon={faEdit}\r\n                    style={{ marginRight: \"0.5rem\" }}\r\n                  />\r\n                  Modifier la commande\r\n                </Button>:\"\"}\r\n              </div>\r\n            </div>\r\n          </Col>\r\n          <Col xs={4} className=\"col_h\">\r\n            <Ticket order={thisOrder} thisDate={thisDate} />\r\n          </Col>\r\n        </Row>\r\n        <NaviBottom />\r\n        <Modal show={show} onHide={handleClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Addition</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Row>\r\n              <Col xs={4} style={{ borderRight: \"1px solid black\" }}>\r\n                <h5>\r\n                  <FontAwesomeIcon\r\n                    icon={faUsers}\r\n                    style={{ color: \"#ff6b6b\", marginRight: \"0.5rem\" }}\r\n                  />\r\n                  <b>Nombre de parts :</b>\r\n                </h5>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-evenly\",\r\n                    alignItems: \"center\",\r\n                    marginTop: \"15%\",\r\n                  }}\r\n                >\r\n                  <FontAwesomeIcon\r\n                    color=\"#ff6b6b\"\r\n                    icon={faAngleLeft}\r\n                    size=\"2x\"\r\n                    onClick={() => {\r\n                      if (part > 1) {\r\n                        setPart(part - 1);\r\n                      }\r\n                    }}\r\n                  />\r\n                  <h3>{part}</h3>\r\n                  <FontAwesomeIcon\r\n                    color=\"#ff6b6b\"\r\n                    icon={faAngleRight}\r\n                    size=\"2x\"\r\n                    onClick={() => {\r\n                      if (part < thisOrder.nbrCouverts) {\r\n                        setPart(part + 1);\r\n                      }\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Col>\r\n              <Col xs={8}>\r\n                <div\r\n                  style={{\r\n                    display: \"block\",\r\n                    width: \"80%\",\r\n                    textAlign: \"center\",\r\n                  }}\r\n                >\r\n                  <h5>Choix de l'addition</h5>\r\n                  <div\r\n                    style={{\r\n                      width: \"100%\",\r\n                      display: \"flex\",\r\n                      justifyContent: \"space-evenly\",\r\n                    }}\r\n                  >\r\n                    <div\r\n                      onClick={() => settypeRepart(\"partager\")}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                      }}\r\n                    >\r\n                      <FontAwesomeIcon\r\n                        icon={faBorderAll}\r\n                        size=\"6x\"\r\n                        color={typeRepart == \"partager\" ? \"#ff6b6b\" : \"grey\"}\r\n                        className=\"faborder\"\r\n                      />\r\n                      <h6>partager</h6>\r\n                    </div>\r\n                    <div\r\n                      onClick={() => settypeRepart(\"repartir\")}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        flexDirection: \"column\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                      }}\r\n                    >\r\n                      <FontAwesomeIcon\r\n                        icon={faBorderNone}\r\n                        size=\"6x\"\r\n                        color={typeRepart == \"repartir\" ? \"#ff6b6b\" : \"grey\"}\r\n                        className=\"faborder\"\r\n                      />\r\n                      <h6>Repartir</h6>\r\n                    </div>\r\n                    <Button\r\n                      variant=\"info\"\r\n                      onClick={() => handleAddition()}\r\n                      className=\"btn_che\"\r\n                      style={{ marginLeft: \"2rem\", backgroundColor: \"#ff6b6b\" }}\r\n                    >\r\n                      <b>Payer tout</b>\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n            ;\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n              Fermer\r\n            </Button>\r\n            <Button\r\n              className=\"bgcolor\"\r\n              variant=\"warning\"\r\n              onClick={() => handleAddition()}\r\n            >\r\n              Payer\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n        {/* /////ShowPayModal////// */}\r\n        <Modal show={showPay} onHide={() => setShowPay(false)}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>finaliser Commande</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Row>\r\n              <Col xs=\"5\">\r\n                <Form\r\n                  onSubmit={(e) => {\r\n                    e.preventDefault();\r\n                    handleVerifyCoupon();\r\n                  }}\r\n                >\r\n                  <Form.Label>\r\n                    {\" \"}\r\n                    <b>Paiement Reu</b>{\" \"}\r\n                  </Form.Label>\r\n                  <Form.Control\r\n                    onFocus={(e) => {\r\n                      setSelected(\"pay\");\r\n                      keyboard.current.setInput(\"\");\r\n                    }}\r\n                    placeholder=\"0.00\"\r\n                    value={amountPaid}\r\n                    onChange={(e) => {\r\n                      setAmount(e.target.value);\r\n                    }}\r\n                    readOnly\r\n                  />\r\n                </Form>\r\n                <h6 style={{ marginTop: \"1rem\" }}>\r\n                  {\" \"}\r\n                  <b>Reste  devoir</b>{\" \"}\r\n                </h6>\r\n                <h4 style={{ color: \"red\" }}>\r\n                  <b style={{ display: \"flex\" }}>\r\n                    {\" \"}\r\n                    {(\r\n                      thisOrder?.totalPrice +\r\n                      (thisOrder?.totalPrice * tvas) / 100 -\r\n                      amountPaid\r\n                    ).toFixed(2)}\r\n                    {renderHTML(`<i>${currency}</i>`)}\r\n                  </b>\r\n                </h4>\r\n                <Form\r\n                  onSubmit={(e) => {\r\n                    e.preventDefault();\r\n                    handleVerifyCoupon();\r\n                  }}\r\n                >\r\n                  <Form.Group\r\n                    style={{ marginTop: \"2rem\" }}\r\n                    className=\"mb-3\"\r\n                    controlId=\"exampleForm.ControlTextarea1\"\r\n                  >\r\n                    <Form.Label>\r\n                      {\" \"}\r\n                      <b>Details de paiement</b>{\" \"}\r\n                    </Form.Label>\r\n                    <div style={{ height: \"150px\", overflow: \"auto\" }}>\r\n                      {payments.map((e) => (\r\n                        <div\r\n                          style={{\r\n                            display: \"flex\",\r\n                            justifyContent: \"space-between\",\r\n                          }}\r\n                        >\r\n                          <h5>{e.type}</h5>\r\n                          <h5>{e.value}</h5>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </Form.Group>\r\n                  <Form.Group\r\n                    style={{ marginTop: \"2rem\" }}\r\n                    className=\"mb-3\"\r\n                    controlId=\"exampleForm.ControlTextarea1\"\r\n                  >\r\n                    <Form.Label>\r\n                      {\" \"}\r\n                      <b>Scanner code remise</b>{\" \"}\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      rows={1}\r\n                      placeholder=\"*11111111111111*\"\r\n                      onChange={(e) => setCoupon(e.target.value)}\r\n                    />\r\n                  </Form.Group>\r\n                </Form>\r\n              </Col>\r\n              <Col xs=\"5\">\r\n                <Form onSubmit={(e) => e.preventDefault()}>\r\n                  <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                    <Form.Label>\r\n                      <b>Addition Total</b>\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      readOnly={true}\r\n                      type=\"number\"\r\n                      placeholder=\"0.00\"\r\n                      value={(\r\n                        thisOrder.totalPrice +\r\n                        (thisOrder?.totalPrice * tvas) / 100\r\n                      ).toFixed(2)}\r\n                    />\r\n                  </Form.Group>\r\n                  <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                    <Form.Label>\r\n                      {\" \"}\r\n                      <b>Methode de paiement</b>{\" \"}\r\n                    </Form.Label>\r\n                    <Form.Select\r\n                      aria-label=\"Default select example\"\r\n                      onChange={(e) => setpaymentType(e.target.value)}\r\n                    >\r\n                      <option value=\"espece\">Especes</option>\r\n                      <option value=\"carte bleu\">Carte bleu</option>\r\n                      <option value=\"ticket restaurant\">\r\n                        Ticket restaurant\r\n                      </option>\r\n                      <option value=\"cheque\">Cheque</option>\r\n\r\n                      <option value=\"Glovo\">Glovo</option>\r\n                      <option value=\"Just-Eat\">Just-Eat</option>\r\n                      <option value=\"Deliveroo\">Deliveroo</option>\r\n                      <option value=\"Uber Eats\">Uber Eats</option>\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                </Form>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>\r\n                    <b>Total</b>\r\n                  </Form.Label>\r\n                  <Form.Control\r\n                    type=\"number\"\r\n                    placeholder=\"0.00\"\r\n                    value={amount}\r\n                    onChange={(e) => setAmount(Number(e.target.value))}\r\n                  />\r\n                </Form.Group>\r\n                <Keyboard\r\n                  theme={\"hg-theme-default hg-layout-default myTheme5\"}\r\n                  display={{\r\n                    \"{bksp}\": \"EFFACER\",\r\n                  }}\r\n                  buttonTheme={[\r\n                    {\r\n                      class: \"key_btn3\",\r\n                      buttons: \"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}\",\r\n                    },\r\n                    {\r\n                      class: \"hg-highlight\",\r\n                      buttons: \"Q q\",\r\n                    },\r\n                  ]}\r\n                  keyboardRef={(r) => {\r\n                    console.log(r);\r\n                    keyboard.current = r;\r\n                  }}\r\n                  layoutName={\"default\"}\r\n                  layout={{\r\n                    default: myLayout,\r\n                  }}\r\n                  onChange={onChange}\r\n                  onKeyPress={onKeyPress}\r\n                />\r\n              </Col>\r\n\r\n              <Col xs=\"2\" className=\"show-pay-modal\">\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 0.5);\r\n                    keyboard.current.setInput(String(amount + 0.5));\r\n                  }}\r\n                >\r\n                  0.5 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 1);\r\n                    keyboard.current.setInput(String(amount + 1));\r\n                  }}\r\n                >\r\n                  1 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 2);\r\n                    keyboard.current.setInput(String(amount + 2));\r\n                  }}\r\n                >\r\n                  2 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 5);\r\n                    keyboard.current.setInput(String(amount + 5));\r\n                  }}\r\n                >\r\n                  5 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 10);\r\n                    keyboard.current.setInput(String(amount + 10));\r\n                  }}\r\n                >\r\n                  10 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 20);\r\n                    keyboard.current.setInput(String(amount + 20));\r\n                  }}\r\n                >\r\n                  20 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 50);\r\n                    keyboard.current.setInput(String(amount + 50));\r\n                  }}\r\n                >\r\n                  50 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(amount + 100);\r\n                    keyboard.current.setInput(String(amount + 100));\r\n                  }}\r\n                >\r\n                  100 {renderHTML(`<i>${currency}</i>`)}\r\n                </Button>\r\n                <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(\r\n                      (\r\n                        thisOrder?.totalPrice +\r\n                        (thisOrder?.totalPrice * tvas) / 100\r\n                      ).toFixed(2) - amountPaid\r\n                    );\r\n                    keyboard.current.setInput(\r\n                      String(\r\n                        thisOrder?.totalPrice +\r\n                          (thisOrder?.totalPrice * tvas) / 100 -\r\n                          amountPaid\r\n                      )\r\n                    );\r\n                  }}\r\n                >\r\n                  Payer Tout\r\n                </Button>\r\n                <Button\r\n                  variant=\"warning\"\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                    paddingLeft: \"2rem\",\r\n                  }}\r\n                  onClick={() => {\r\n                    setAmount(0);\r\n                    keyboard.current.setInput(String(0));\r\n                  }}\r\n                >\r\n                  Effacer\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            {notefrais ? (\r\n              <>\r\n                <Form.Label style={{ fontSize: \"24px\", fontWeight: \"bold\" }}>\r\n                  Nbr couverts\r\n                </Form.Label>\r\n                <Form.Control\r\n                  onFocus={(e) => {\r\n                    setSelected(\"couverts\");\r\n                    keyboard.current.setInput(\"\");\r\n                  }}\r\n                  style={{ width: \"120px\" }}\r\n                  placeholder=\"1 Couverts\"\r\n                  type=\"number\"\r\n                  value={nbrCouverts}\r\n                  onChange={(e) => setNbrCouverts(e.target.value)}\r\n                ></Form.Control>\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            <Form.Check\r\n              size=\"3x\"\r\n              type=\"checkbox\"\r\n              label=\"Note de frais\"\r\n              style={{\r\n                fontSize: \"24px\",\r\n                marginRight: \"2rem\",\r\n                fontWeight: \"bold\",\r\n              }}\r\n              onClick={() => setnotefrais(!notefrais)}\r\n            />\r\n            <Button variant=\"danger\" onClick={() => setShowPay(false)}>\r\n              {t(\"cancel\")}\r\n            </Button>\r\n            {!accompte&&!load ? (\r\n              <Button\r\n                variant=\"success\"\r\n                onClick={() => {\r\n                  if (amount > 0) {\r\n                    setamountPaid(amountPaid + amount);\r\n                    handleFinal();\r\n                    keyboard.current.setInput(\"\");\r\n                  } else {\r\n                    console.log(\"null\");\r\n                  }\r\n                }}\r\n              >\r\n                Valider\r\n              </Button>\r\n            ) :load?(\r\n              <Button\r\n                variant=\"success\"\r\n              \r\n              \r\n              >\r\n                 <Spinner animation=\"border\" variant=\"light\" />\r\n              </Button>\r\n            )\r\n            : (\r\n              <Button\r\n                variant=\"outline-danger\"\r\n                onClick={() => {\r\n                  setShowPay(false);\r\n                  handleFinal();\r\n                }}\r\n              >\r\n                Accompte\r\n              </Button>\r\n            )}\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useRef, useState, useId } from \"react\";\r\nimport {\r\n  Button,\r\n  Container,\r\n  Form,\r\n  Modal,\r\n  Row,\r\n  Col,\r\n  Nav,\r\n  Navbar,\r\n} from \"react-bootstrap\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport Keyboard from \"react-simple-keyboard\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navigate, useNavigate, useParams } from \"react-router\";\r\nimport Ticket from \"../Components/Ticket\";\r\nimport { deletecheckoutData } from \"../Slices/order\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport useTranslation from \"./../i18\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faBorderAll,\r\n  faBorderNone,\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faEdit,\r\n  faHistory,\r\n  faMapMarkedAlt,\r\n  faMapMarkerAlt,\r\n  faPhone,\r\n  faSignOutAlt,\r\n  faTimesCircle,\r\n  faUsers,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FcPaid } from \"react-icons/fc\";\r\n\r\nconst CheckoutTwo = () => {\r\n  const [payments, setpayments] = useState([]);\r\n  const username = localStorage.getItem(\"username\") || [];\r\n\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const { type, part, table_id } = params;\r\n  const ordersData = useSelector((state) => state.order.checkoutData);\r\n  let thisOrder = ordersData.filter((o) => o.order_id == table_id)[0] || {};\r\n\r\n  const [theseOrders, settheseOrders] = useState([]);\r\n  const [list, setList] = useState([]);\r\n  const [ping, setPing] = useState(true);\r\n  const [show, setShow] = useState(type == \"repartir\");\r\n  const [amount, setAmount] = useState(0);\r\n  const [amountPaid, setamountPaid] = useState(0);\r\n  const [note, setNote] = useState(\"\");\r\n  const [paymentType, setpaymentType] = useState(\"espece\");\r\n  const [showPay, setShowPay] = useState(false);\r\n  const [getkeyborad, setkeyborad] = useState(\"\");\r\n  const [input, setInput] = useState(\"\");\r\n  const [selected, setSelected] = useState(\"pay\");\r\n  const [nbrCouverts, setNbrCouverts] = useState(1);\r\n  const [accompte, setAccompte] = useState(false);\r\n  const [oredertopay, setordertopay] = useState({});\r\n  const [orederpartage, setorederpartage] = useState([]);\r\n  const [orederepartir, setorederepartir] = useState([]);\r\n\r\n  const [getclient, setclient] = useState(0);\r\n  const onKeyPress = (button) => {\r\n    console.log(\"Button pressed\", button);\r\n    if (button == \"{bksp}\") {\r\n      setkeyborad(getkeyborad.slice(0, -1));\r\n      setAmount(Number(amount.toString().slice(0, -1)));\r\n    }\r\n  };\r\n  const keyboard = useRef();\r\n  const [myLayout, setLayout] = useState([\r\n    \"9 8 7\",\r\n    \"6 5 4\",\r\n    \"3 2 1\",\r\n    \"0 , {bksp}\",\r\n  ]);\r\n  const onChange = (input) => {\r\n   \r\n    let i = 0;\r\n    for (let index = 0; index < input.length; index++) {\r\n      const element = input[index];\r\n      if (element == \",\") {\r\n        i++;\r\n        if (i >= 2) {\r\n          break;\r\n        }\r\n      } else if (index == 0 && element == \",\") {\r\n        i = 2;\r\n        break;\r\n      }\r\n    }\r\n    function numberFromLocaleString(stringValue, locale) {\r\n      var parts = Number(1111.11)\r\n        .toLocaleString(locale)\r\n        .replace(/\\d+/g, \"\")\r\n        .split(\"\");\r\n      if (stringValue === null) return null;\r\n      if (parts.length == 1) {\r\n        parts.unshift(\"\");\r\n      }\r\n      setkeyborad(\r\n        Number(\r\n          String(stringValue)\r\n            .replace(new RegExp(parts[0].replace(/\\s/g, \" \"), \"g\"), \"\")\r\n            .replace(parts[1], \".\")\r\n        ).toString()\r\n      );\r\n      return Number(\r\n        String(stringValue)\r\n          .replace(new RegExp(parts[0].replace(/\\s/g, \" \"), \"g\"), \"\")\r\n          .replace(parts[1], \".\")\r\n      );\r\n    }\r\n    setInput(input);\r\n   \r\n    if (i < 2) {\r\n      setInput(input);\r\n     \r\n      if (selected == \"pay\") {\r\n        let v = numberFromLocaleString(input, \"fr\");\r\n        console.log(v);\r\n        setAmount(v);\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    } else {\r\n      setInput(\"\");\r\n     \r\n      if (selected == \"pay\") {\r\n        setAmount(0);\r\n        keyboard.current.setInput(\"0\");\r\n\r\n        /*    setkeyborad(v); */\r\n        setInput(\"\");\r\n      } else {\r\n        setNbrCouverts(input);\r\n        setInput(\"\");\r\n      }\r\n      // let newarr = [...lay];\r\n      // newarr[selected].value = Number(input);\r\n      // setlay(newarr);\r\n      setInput(\"\");\r\n    }\r\n  };\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  // let tax = (thisOrder.taxPrice * thisOrder.totalPrice) / 100;\r\n  const partageorder = [];\r\n  let tvas = 0;\r\n  let is_alcool = false;\r\n  let test = thisOrder.orderItems;\r\n  thisOrder.orderItems.forEach((element) => {\r\n    if (element.tva == 20) {\r\n      is_alcool = true;\r\n    }\r\n  });\r\n  if (is_alcool == true) {\r\n    tvas = 20;\r\n  } else {\r\n    switch (thisOrder.orderType) {\r\n      case \"surplace\":\r\n        tvas = 10;\r\n        break;\r\n      case \"emporter\":\r\n        tvas = 5.5;\r\n        break;\r\n      case \"livraison\":\r\n        tvas = 5.5;\r\n        break;\r\n      default:\r\n        tvas = 10;\r\n        break;\r\n    }\r\n  }\r\n  useEffect(() => {}, [partageorder]);\r\n\r\n  useEffect(() => {\r\n    if (type == \"partager\" || \"repartir\") {\r\n      let newOrders = [];\r\n      var i = 0;\r\n      var t = [];\r\n      thisOrder?.orderItems?.forEach((element) => {\r\n        const newObj = Object.assign({ ids: i }, element);\r\n      \r\n        t.push(newObj);\r\n        i++;\r\n      });\r\n      console.log(t);\r\n      let listData = [t];\r\n      console.log(part);\r\n      let vs = [];\r\n      var ids;\r\n      for (let i = 1; i <= part; i++) {\r\n        newOrders.push({\r\n          ...thisOrder,\r\n          totalPrice: thisOrder.totalPrice,\r\n          taxPrice: (thisOrder?.totalPrice * tvas) / 100,\r\n          part: part,\r\n          type: type,\r\n          client: i,\r\n          ids: i,\r\n        });\r\n        if (type == \"partager\") {\r\n          vs.push(\r\n            (thisOrder.totalPrice + (thisOrder?.totalPrice * tvas) / 100) / part\r\n          );\r\n        }\r\n      }\r\n      localStorage.setItem(\"partageorder\", partageorder);\r\n      setorederpartage(vs);\r\n\r\n      for (let i = 1; i < part; i++) {\r\n        listData = [...listData, []];\r\n      }\r\n      setList(listData);\r\n      console.log(listData);\r\n      settheseOrders(newOrders);\r\n      console.log(newOrders);\r\n    }\r\n  }, []);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n\r\n  const handleExit = () => {\r\n    \r\n\r\n    // theseOrders.map((lot) => {\r\n     \r\n\r\n    //   axios\r\n    //     .post(\r\n    //       process.env.REACT_APP_API_HOST +\r\n    //         \":\" +\r\n    //         process.env.REACT_APP_API_PORT +\r\n    //         \"/api/printFinalOrder\",\r\n    //       {\r\n    //         user_id: user_id,\r\n    //         order: {\r\n    //           ...lot,\r\n    //           tvas: tvas,\r\n    //           nbrCouverts: lot.nbrCouverts,\r\n    //           table_number: lot.table || \"\",\r\n    //           order_id: lot.order_id,\r\n    //           Date: new Date(),\r\n    //           amount:\r\n    //             amount > lot?.totalPrice + (lot?.totalPrice * tvas) / 100\r\n    //               ? lot?.totalPrice +\r\n    //                 ((lot?.totalPrice * tvas) / 100).toFixed(2) -\r\n    //                 amountPaid\r\n    //               : amount - amountPaid,\r\n    //           amountPaid: amount,\r\n    //           paymentType: paymentType,\r\n    //           numbrpayment: payments[lot.client - 1],\r\n    //         },\r\n    //         type: type,\r\n    //         part: part,\r\n    //         pricepart: lot.pricepart,\r\n    //       }\r\n    //     )\r\n    //     .then((res) => {})\r\n    //     .catch((err) => console.log(err));\r\n    //   setShowPay(false);\r\n    // });\r\n    navigate(\"/main\");\r\n    dispatch(deletecheckoutData({ order_id: table_id }));\r\n  };\r\n\r\n  const handleFinal = (arryofswitch, client) => {\r\n    \r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/finalizeorder\",\r\n        {\r\n          order: {\r\n            ...thisOrder,\r\n            message: note,\r\n            pay_method: paymentType,\r\n            amount: amount,\r\n            amountPaid: amountPaid,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        \r\n        axios\r\n        .post(\r\n          process.env.REACT_APP_API_HOST +\r\n            \":\" +\r\n            process.env.REACT_APP_API_PORT +\r\n            \"/api/printFinalOrder\",\r\n          {\r\n            user_id: user_id,\r\n            order: {\r\n              ...thisOrder,\r\n            nbrCouverts: nbrCouverts,\r\n            message: note,\r\n            pay_method: paymentType,\r\n            amount: amount/part,\r\n            amountPaid: amountPaid,\r\n            totalPrice:thisOrder.totalPrice/part\r\n            },\r\n            type: type,\r\n            part: part,\r\n            pricepart: thisOrder.totalPrice/part,\r\n          }\r\n        )\r\n        .then((res) => {})\r\n        .catch((err) => console.log(err));\r\n        setamountPaid(0);\r\n        setShowPay(true);\r\n\r\n        for (let index = 0; index <= part - 1; index++) {\r\n          if (payments.length == 0) {\r\n            let ts = [];\r\n            for (let i = 0; i <= part - 1; i++) {\r\n              ts.push([]);\r\n            }\r\n          \r\n            if (index == oredertopay.client - 1) {\r\n              ts[index] = [{ type: paymentType, value: amount }];\r\n              setpayments(ts);\r\n            }\r\n          } else {\r\n            let t = payments;\r\n            if (index == oredertopay.client - 1) {\r\n              t[index] = [...t[index], { type: paymentType, value: amount }];\r\n              setpayments(t);\r\n            }\r\n          }\r\n        }\r\n       \r\n\r\n        const isAllZero = arryofswitch.every((item) => item === 0);\r\n        if (arryofswitch[client] == 0) {\r\n          setShowPay(false);\r\n        } else {\r\n          console.log(\"not paid yet\");\r\n        }\r\n        if (isAllZero) {\r\n          handleExit();\r\n        }\r\n        /*  if (amountPaid >= thisOrder.totalPrice + thisOrder.taxPrice) {\r\n          handleExit();\r\n        } */\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n\r\n  const { t } = useTranslation();\r\n  const handleFinalize = () => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/finalizeorder\",\r\n        {\r\n          order: thisOrder,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        dispatch(deletecheckoutData({ table_id: table_id }));\r\n        navigate(\"/main\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  //DRAG /////////////////////\r\n\r\n  const reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n  };\r\n\r\n  const move = (source, destination, droppableSource, droppableDestination) => {\r\n    const sourceClone = Array.from(source);\r\n    const destClone = Array.from(destination);\r\n    const [removed] = sourceClone.splice(droppableSource.index, 1);\r\n\r\n    destClone.splice(droppableDestination.index, 0, removed);\r\n\r\n    const result = {};\r\n\r\n    result[droppableSource.droppableId] = sourceClone;\r\n    result[droppableDestination.droppableId] = destClone;\r\n    return result;\r\n  };\r\n\r\n  const grid = 8;\r\n\r\n  const getItemStyle = (isDragging, draggableStyle) => ({\r\n    // some basic styles to make the items look a bit nicer\r\n    userSelect: \"none\",\r\n    padding: grid * 2,\r\n    margin: `0 0 ${grid}px 0`,\r\n\r\n    // change background colour if dragging\r\n    background: isDragging ? \"lightgreen\" : \"grey\",\r\n\r\n    // styles we need to apply on draggables\r\n    ...draggableStyle,\r\n  });\r\n  const getListStyle = (isDraggingOver) => ({\r\n    background: isDraggingOver ? \"lightblue\" : \"lightgrey\",\r\n    padding: grid,\r\n    width: 250,\r\n  });\r\n\r\n  function onDragEnd(result) {\r\n    const { source, destination } = result;\r\n\r\n    // dropped outside the list\r\n    if (!destination) {\r\n      return;\r\n    }\r\n    const sInd = +source.droppableId;\r\n    const dInd = +destination.droppableId;\r\n\r\n    if (sInd === dInd) {\r\n      const items = reorder(list[sInd], source.index, destination.index);\r\n      const newState = [...list];\r\n      newState[sInd] = items;\r\n      setList(newState);\r\n    } else {\r\n      const result = move(list[sInd], list[dInd], source, destination);\r\n      const newState = [...list];\r\n      newState[sInd] = result[sInd];\r\n      newState[dInd] = result[dInd];\r\n      setList(newState);\r\n    }\r\n  }\r\n\r\n  const handleRepart = () => {\r\n    let copy = theseOrders.map((order, key) => ({\r\n      ...order,\r\n      orderItems: [...list[key]],\r\n    }));\r\n\r\n    var repatir = [];\r\n    var tax = [];\r\n    var sums = [];\r\n    for (let indexs = 0; indexs < copy.length; indexs++) {\r\n      const element = copy[indexs];\r\n      console.log(element);\r\n      let sum = 0;\r\n      let sum2 = 0;\r\n      let tva = 0;\r\n      for (let index1 = 0; index1 < element.orderItems.length; index1++) {\r\n        const element1 = element.orderItems[index1];\r\n        sum = sum + element1.price + (element1.tva / 100) * element1.price;\r\n        sum2 = sum2 + element1.price;\r\n        tva = tva + (element1.tva / 100) * element1.price;\r\n      }\r\n      repatir.push(sum);\r\n      tax.push(tva);\r\n      sums.push(sum2);\r\n    }\r\n\r\n    setorederpartage(repatir);\r\n   \r\n    var y = [];\r\n    for (let index = 0; index < repatir.length; index++) {\r\n      const element = repatir[index];\r\n      const newObj = Object.assign({ pricepart: element }, copy[index]);\r\n      newObj.totalPrice = sums[index];\r\n      newObj.taxPrice = tax[index];\r\n      y.push(newObj);\r\n    }\r\n    settheseOrders(y);\r\n\r\n    handleClose();\r\n    setPing(!ping);\r\n  };\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundColor: \"white\",\r\n        width: \"100%\",\r\n        // height: \"100vh\",\r\n      }}\r\n    >\r\n      <Navbar\r\n        variant=\"warning\"\r\n        style={{ backgroundColor: \"#ff6b6b\", height: \"70px\" }}\r\n      >\r\n        <Container>\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"checkout-2-agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"checkout-2-chasier\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"checkout-2-server\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            {/* <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            /> */}\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <Modal show={show}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Repartir</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div style={{ display: \"flex\" }}>\r\n            <DragDropContext onDragEnd={onDragEnd}>\r\n              {list?.map((el, ind) => (\r\n                <Droppable key={ind} droppableId={ind.toString()}>\r\n                  {(provided, snapshot) => (\r\n                    <div\r\n                      ref={provided.innerRef}\r\n                      style={getListStyle(snapshot.isDraggingOver)}\r\n                      {...provided.droppableProps}\r\n                    >\r\n                      <h6>{`personne ${ind + 1}`}</h6>\r\n                      {el.map((item, index) => (\r\n                        <Draggable\r\n                          key={item.ids}\r\n                          draggableId={item.ids.toString()}\r\n                          index={index}\r\n                        >\r\n                          {(provided, snapshot) => (\r\n                            <div\r\n                              ref={provided.innerRef}\r\n                              {...provided.draggableProps}\r\n                              {...provided.dragHandleProps}\r\n                              style={getItemStyle(\r\n                                snapshot.isDragging,\r\n                                provided.draggableProps.style\r\n                              )}\r\n                            >\r\n                              <div\r\n                                style={{\r\n                                  display: \"flex\",\r\n                                  justifyContent: \"space-around\",\r\n                                }}\r\n                              >\r\n                                {item.name}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                        </Draggable>\r\n                      ))}\r\n                      {provided.placeholder}\r\n                    </div>\r\n                  )}\r\n                </Droppable>\r\n              ))}\r\n            </DragDropContext>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={() => handleRepart()}>\r\n            Terminer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <div className=\"co2\">\r\n        {theseOrders?.map((order) =>\r\n          orederpartage[order.client - 1] != 0 ? (\r\n            <div className=\"checkout2\">\r\n              <Ticket order={order} ping={ping} />\r\n              <Button\r\n                variant=\"success\"\r\n                className=\"c2btn\"\r\n                onClick={() => {\r\n                  setordertopay(order);\r\n                  setShowPay(true);\r\n                  console.log(order.client);\r\n                  console.log(getclient);\r\n                }}\r\n              >\r\n                impay\r\n              </Button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"checkout2\">\r\n              <Ticket order={order} ping={ping} />\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"error\"\r\n                className=\"c2btn\"\r\n                startIcon={<FcPaid />}\r\n                Disabled\r\n              >\r\n                pay\r\n              </Button>\r\n            </div>\r\n          )\r\n        )}\r\n      </div>\r\n      {/* <Button variant=\"success\" onClick={() => handleFinalize()}>\r\n        Finaliser\r\n      </Button> */}\r\n      {/* /////ShowPayModal////// */}\r\n      <Modal show={showPay} onHide={() => setShowPay(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>finaliser Commande</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Row>\r\n            <Col xs=\"5\">\r\n              <Form onSubmit={(e) => e.preventDefault()}>\r\n                <Form.Label>Paiement Reu</Form.Label>\r\n                <Form.Control\r\n                  type=\"number\"\r\n                  placeholder=\"0.00\"\r\n                  value={amountPaid}\r\n                  onChange={(e) => {setAmount(e.target.value)}}\r\n                />\r\n              </Form>\r\n              <h6 style={{ marginTop: \"1rem\" }}>Monnaie</h6>\r\n              <h4 style={{ color: \"red\" }}>\r\n                <b>\r\n                  {Number(orederpartage[oredertopay.client - 1]).toFixed(2)}\r\n                  {/* {(\r\n                    amountPaid -\r\n                    (oredertopay.totalPrice + oredertopay.taxPrice) /\r\n                      parseInt(part)\r\n                  ).toFixed(2)} */}\r\n                </b>\r\n              </h4>\r\n              <Form.Group\r\n                style={{ marginTop: \"2rem\" }}\r\n                className=\"mb-3\"\r\n                controlId=\"exampleForm.ControlTextarea1\"\r\n              >\r\n                <Form.Label>\r\n                  {\" \"}\r\n                  <b>Details de paiement</b>{\" \"}\r\n                </Form.Label>\r\n                <div style={{ height: \"150px\", overflow: \"auto\" }}>\r\n                  {payments[oredertopay.client - 1]?.map((e) => (\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                      }}\r\n                    >\r\n                      <h5>{e.type}</h5>\r\n                      <h5>{e.value}</h5>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </Form.Group>\r\n            </Col>\r\n            <Col xs=\"5\">\r\n              <Form onSubmit={(e) => e.preventDefault()}>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>Paiement total</Form.Label>\r\n                  <Form.Control\r\n                    type=\"number\"\r\n                    placeholder=\"0.00\"\r\n                    value={\r\n                      ((oredertopay.totalPrice + oredertopay.taxPrice) / part).toFixed(2)\r\n                    }\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>Methode de paiement</Form.Label>\r\n                  <Form.Select\r\n                    aria-label=\"Default select example\"\r\n                    onChange={(e) => setpaymentType(e.target.value)}\r\n                  >\r\n                    <option value=\"espece\">Especes</option>\r\n                    <option value=\"carte bleu\">Carte bleu</option>\r\n                    <option value=\"ticket restaurant\">Ticket restaurant</option>\r\n                    <option value=\"cheque\">Cheque</option>\r\n\r\n                    <option value=\"Glovo\">Glovo</option>\r\n                    <option value=\"Just-Eat\">Just-Eat</option>\r\n                    <option value=\"Deliveroo\">Deliveroo</option>\r\n                    <option value=\"Uber Eats\">Uber Eats</option>\r\n                  </Form.Select>\r\n                </Form.Group>\r\n              </Form>\r\n              <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                <Form.Label>\r\n                  <b>Total</b>\r\n                </Form.Label>\r\n                <Form.Control\r\n                  \r\n                  type=\"number\"\r\n                  placeholder=\"0.00\"\r\n                  value={amount}\r\n                  onChange={(e)=>setAmount(Number(e.target.value))}\r\n                />\r\n              </Form.Group>\r\n              <Keyboard\r\n                theme={\"hg-theme-default hg-layout-default myTheme5\"}\r\n                display={{\r\n                  \"{bksp}\": \"EFFACER\",\r\n                }}\r\n                buttonTheme={[\r\n                  {\r\n                    class: \"key_btn3\",\r\n                    buttons: \"0 1 2 3 4 5 6 7 8 9 , {bksp} {enter}\",\r\n                  },\r\n                  {\r\n                    class: \"hg-highlight\",\r\n                    buttons: \"Q q\",\r\n                  },\r\n                ]}\r\n                keyboardRef={(r) => (keyboard.current = r)}\r\n                layoutName={\"default\"}\r\n                layout={{\r\n                  default: myLayout,\r\n                }}\r\n                onChange={onChange}\r\n                onKeyPress={onKeyPress}\r\n              />\r\n            </Col>\r\n\r\n            <Col xs=\"2\">\r\n              <h4>Cash</h4>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 0.5);\r\n                  setkeyborad((amount + 0.5).toString());\r\n                }}\r\n              >\r\n                0.5 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 1);\r\n                  setkeyborad((amount + 1).toString());\r\n                }}\r\n              >\r\n                1 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 2);\r\n                  setkeyborad((amount + 2).toString());\r\n                }}\r\n              >\r\n                2 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 5);\r\n                  setkeyborad((amount + 5).toString());\r\n                }}\r\n              >\r\n                5 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 10);\r\n                  setkeyborad((amount + 10).toString());\r\n                }}\r\n              >\r\n                10 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 20);\r\n                  setkeyborad((amount + 20).toString());\r\n                }}\r\n              >\r\n                20 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 50);\r\n                  setkeyborad((amount + 50).toString());\r\n                }}\r\n              >\r\n                50 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {\r\n                  setAmount(amount + 100);\r\n                  setkeyborad((amount + 100).toString());\r\n                }}\r\n              >\r\n                100 {renderHTML(`<i>${currency}</i>`)}\r\n              </Button>\r\n              <Button\r\n                  style={{\r\n                    display: \"flex\",\r\n                    width: \"100%\",\r\n                    textAlign: \"center\",\r\n                    marginBottom: \"0.5rem\",\r\n                   \r\n                  }}\r\n                  onClick={() => {\r\n                    \r\n                    setAmount(\r\n                      Number((orederpartage[oredertopay.client - 1])).toFixed(2)\r\n                    );\r\n                    // setkeyborad(((orederpartage[oredertopay.client - 1]).toFixed(2)).toString());\r\n                  }}\r\n                >\r\n                  Payer Tout\r\n                </Button>\r\n              <Button\r\n                variant=\"danger\"\r\n                style={{\r\n                  display: \"flex\",\r\n                  width: \"100%\",\r\n                  textAlign: \"center\",\r\n                  marginBottom: \"0.5rem\",\r\n                  paddingLeft: \"2rem\",\r\n                }}\r\n                onClick={() => {setAmount(0);setkeyborad((0).toString())}}\r\n              >\r\n                Effacer\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"outline-secondary\" onClick={() => setShowPay(false)}>\r\n            {t(\"cancel\")}\r\n          </Button>\r\n          {!accompte ? (\r\n            <Button\r\n              variant=\"success\"\r\n              onClick={() => {\r\n                if (amount > 0) {\r\n                  setamountPaid(amountPaid + amount);\r\n\r\n                  keyboard.current.setInput(\"\");\r\n                  setkeyborad(\"0\");\r\n                  setAmount(0);\r\n                  let arryofswitch = [];\r\n\r\n                  var i = 0;\r\n                  var c = 0;\r\n                  for (i = 0; i < orederpartage.length; i++) {\r\n                    if (oredertopay.client - 1 == i) {\r\n                      c = i;\r\n                      arryofswitch.push(\r\n                        (orederpartage[i] - amount).toFixed(2) <= 0\r\n                          ? 0\r\n                          : (orederpartage[i] - amount).toFixed(2)\r\n                      );\r\n                      if ((orederpartage[i] - amount).toFixed(2) <= 0) {\r\n                        setShowPay(false);\r\n                      }\r\n                    } else {\r\n                      arryofswitch.push(orederpartage[i]);\r\n                    }\r\n                  }\r\n                  setorederpartage(arryofswitch);\r\n                  handleFinal(arryofswitch, c);\r\n                } else {\r\n                  console.log(\"null\");\r\n                }\r\n              }}\r\n            >\r\n              Valider\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              variant=\"outline-danger\"\r\n              onClick={() => {\r\n                setShowPay(false);\r\n                handleFinal();\r\n              }}\r\n            >\r\n              Accompte\r\n            </Button>\r\n          )}\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutTwo;\r\n","export default __webpack_public_path__ + \"static/media/cc.883bea09.png\";","export default __webpack_public_path__ + \"static/media/delivery.c63ca6d5.png\";","export default __webpack_public_path__ + \"static/media/takeout.47a36a20.png\";","export default __webpack_public_path__ + \"static/media/cash.99b68bb2.jpg\";","export default __webpack_public_path__ + \"static/media/surplace.2e0aa439.png\";","export default __webpack_public_path__ + \"static/media/borne.aac446c5.png\";","export default __webpack_public_path__ + \"static/media/updateorder.37f478bf.wav\";","export default __webpack_public_path__ + \"static/media/born-sound.8be7451a.mp3\";","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Button, Col, Container, Nav, Navbar, Table } from \"react-bootstrap\";\r\nimport {\r\n \r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCheckSquare,\r\n  \r\n  faEdit,\r\n  faGlobe,\r\n \r\n  faSignOutAlt,\r\n  faTimes,\r\n  faUtensils,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport useTranslation from \"./../i18\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport cc from \"./../Shared/cc.png\";\r\nimport delivery from \"./../Shared/delivery.png\";\r\nimport takeout from \"./../Shared/takeout.png\";\r\nimport cash from \"./../Shared/cash.jpg\";\r\nimport surplace from \"./../Shared/surplace.png\";\r\nimport borne from \"./../Shared/borne.png\";\r\nimport $ from \"jquery\";\r\nimport Ticket from \"../Components/Ticket\";\r\nimport _, { now } from \"lodash\";\r\nimport { TokenExpiredError } from \"jsonwebtoken\";\r\nimport axios from \"axios\";\r\nimport { addNewcheckoutData, setCheckoutChange } from \"../Slices/order\";\r\nimport { io } from \"socket.io-client\";\r\nimport Swal from \"sweetalert2\";\r\nimport updateSound from \"../Shared/updateorder.wav\";\r\nimport bornSound from \"../Shared/born-sound.mp3\";\r\nconst socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\nconst History = () => {\r\n  const [audioBorn, setaudioBorn] = useState(new Audio(bornSound));\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState({});\r\n  const tva_mode = useSelector((state) => state.data.tva_mode);\r\n  const [rab_tva, setRab_tva] = useState(0);\r\n  const [newOrders, setnewOrders] = useState([]);\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  var curr = new Date();\r\n  var date = curr.toISOString().substring(0, 10);\r\n  var time = curr.getHours() + \":\" + curr.getMinutes();\r\n  console.log(date, time);\r\n  const dispatch = useDispatch();\r\n\r\n  var myTime = curr.getTime();\r\n  console.log(myTime);\r\n\r\n  const params = useParams();\r\n  const { type } = params;\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n  \r\n  let checkoutData = useSelector((state) => state.order.checkoutData);\r\n  /**\r\n   * @typedef {string} string\r\n   */\r\n\r\n  console.log(\"za\",checkoutData);\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n\r\n  const table = ({ e }) => {\r\n    console.log(e);\r\n    return tables.find((table) => table.id == e);\r\n  };\r\n  \r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const handleEditOrder = (id) => {\r\n    navigate(\"/menu/\" + id);\r\n  };\r\n  const handlePreview = ({ order }) => {\r\n    let toOrder = _.clone(order);\r\n    toOrder = {\r\n      ...toOrder,\r\n      order_id: toOrder.id,\r\n      taxPrice: toOrder.tva,\r\n      totalPrice: toOrder.price,\r\n    };\r\n    toOrder.orderItems = toOrder.orderItems.map((item) => ({\r\n      ...item,\r\n      qt: item.quantity,\r\n    }));\r\n    setSelectedOrder(toOrder);\r\n    setShowPreview(true);\r\n  };\r\n  var groupBy = function (xs, key) {\r\n    return xs?.reduce(function (rv, x) {\r\n      (rv[x[key]] = rv[x[key]] || []).push(x.value);\r\n      return rv;\r\n    }, {});\r\n  };\r\n\r\n  // const calcOrder = (order) => {\r\n  //   let price = order.price;\r\n  //   let tva = order.tva;\r\n  //   if (\r\n  //     selectedOrder.order_type == \"surplace\" ||\r\n  //     selectedOrder.order_type == \"livraison\"\r\n  //   ) {\r\n  //     tva = tva_mode.find((e) => e.nom == \"surplace\").valeur;\r\n  //   } else if (selectedOrder.order_type == \"emporter\") {\r\n  //     tva = tva_mode.find((e) => e.nom == \"emporter\").valeur;\r\n  //   }\r\n  //   if (rab_tva > 0) {\r\n  //     tva = rab_tva;\r\n  //   }\r\n  //   if (order.extras && order.extras.length) {\r\n  //     console.log(\"has extra\");\r\n  //     order.extras.map((extra) => {\r\n  //       console.log(extra.price, extra.default_quantity);\r\n  //       price += extra.price * extra.default_quantity;\r\n  //     });\r\n  //   }\r\n  //   if (order.stepItems && order.stepItems != {}) {\r\n  //     Object.keys(order.stepItems).map((e) => {\r\n  //       order.stepItems[e].map((item) => {\r\n  //         price += item.price;\r\n  //       });\r\n  //     });\r\n  //   }\r\n\r\n  //   if (order.offert == true) {\r\n  //     return 0;\r\n  //   } else\r\n  //     return {\r\n  //       dbPrice: price,\r\n  //       price: price * order.qt,\r\n  //       tva: (price * order.qt * tva) / 100,\r\n  //       item_tva: tva,\r\n  //     };\r\n  // };\r\n\r\n  let b = [];\r\n  useEffect(() => {\r\n    let copy = _.clone(selectedOrder?.orderItems || [{}]);\r\n    console.log(\"salaaam\", copy);\r\n    setnewOrders(copy);\r\n    selectedOrder.orderItems?.map((order) => {\r\n      if (order.is_alcool == true) {\r\n        let tva_alcool = tva_mode.find((e) => e.nom == \"alcool\").valeur;\r\n        console.log(tva_alcool);\r\n        setRab_tva(tva_alcool);\r\n      }\r\n    });\r\n  }, [selectedOrder]);\r\n  const calcTotal = () => {\r\n    let tot = 0;\r\n    let tva = 0;\r\n    let tvas = [];\r\n    newOrders.map((order) => {\r\n      tot += order.price;\r\n      tva += order.tva;\r\n      tvas.push({\r\n        value: order.tva,\r\n        perc: (order.tva / order.price) * 100,\r\n      });\r\n    });\r\n    return { tot, tva, tvas };\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    setShowPreview(false);\r\n    let order = {\r\n      from_kiosk:false,\r\n      table: selectedOrder?.table_number || \"\",\r\n      client_id: selectedOrder?.customer_id || 0,\r\n      order_id: selectedOrder.id,\r\n      message: selectedOrder.message || \"aucune\",\r\n      customer_name: selectedOrder?.customer_name || \"\",\r\n      customer_company: selectedOrder?.customer_company || \"\",\r\n      code1: selectedOrder?.code1 || \"\",\r\n      code2: selectedOrder?.code2 || \"\",\r\n      interphone: selectedOrder?.interphone || \"\",\r\n      etage: selectedOrder?.etage || \"\",\r\n      table_number: selectedOrder?.table_number || 0,\r\n      customer_tel: selectedOrder?.customer_tel || \"\",\r\n      customer_adress: selectedOrder?.customer_adress,\r\n      status: selectedOrder?.status,\r\n      orderType: selectedOrder?.order_type,\r\n      paymentType: selectedOrder?.pay_method,\r\n      totalPrice: selectedOrder?.price,\r\n      taxPrice: selectedOrder?.tva,\r\n      tvas: calcTotal().tvas,\r\n      orderItems: [],\r\n      date: selectedOrder?.date,\r\n      time: selectedOrder?.time,\r\n    };\r\n    console.log(calcTotal().tvas);\r\n    newOrders.map((one) => {\r\n      order.orderItems.push({\r\n        ...one,\r\n        price: one.price,\r\n        tva: one.tva,\r\n      });\r\n    });\r\n\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/printOrder\",\r\n        {\r\n          kitchen: false,\r\n          user_id: user_id,\r\n          order: {\r\n            new: false,\r\n            ...order,\r\n            tvas: groupBy(calcTotal().tvas, \"perc\"),\r\n            Date: new Date(),\r\n            nbrCouverts: 1,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => console.log(res.data))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  //kitchen update order\r\n\r\n  const [soundUpdate, setSoundUpdate] = useState(new Audio(updateSound));\r\n  \r\n  // useEffect(() => {\r\n    \r\n  //   socket.on(`ping${user_id}`, (data) => {\r\n  // console.log(\"data\",data)\r\n  //     audioBorn.play()\r\n  //     Swal.fire({\r\n  //       icon: \"success\",\r\n  //       title: \r\n  //       \"<h5 >\" +\r\n  //       `Une commande a et ajouter ` +\r\n  //       \"</h5>\",\r\n  //       showConfirmButton: false,\r\n  //       timer: 2500,\r\n  //     });\r\n  // })\r\n  //   socket.on(`ping${user_id}`, (order) => {\r\n  //    console.log(\"zezea\",order)\r\n  //     soundUpdate.play()\r\n  //     dispatch(setCheckoutChange({order:order}))\r\n  //     if(order.status==\"cooking\"){\r\n  //       Swal.fire({\r\n  //         icon: \"success\",\r\n  //         title: \r\n  //         \"<h5 >\" +\r\n  //         `La commande <span style='color:green'>${order.order_id}</span> en prparation` +\r\n  //         \"</h5>\",\r\n          \r\n  //         showConfirmButton: false,\r\n  //         timer: 2500,\r\n  //       });\r\n  //     } else {\r\n  //       Swal.fire({\r\n  //         icon: \"success\",\r\n  //         title: \r\n  //         \"<h5 >\" +\r\n  //         `La commande <span style='color:green'>${order.order_id}</span> a t prte` +\r\n  //         \"</h5>\",\r\n  //         showConfirmButton: false,\r\n  //         timer: 2500,\r\n  //       });\r\n        \r\n  //     }\r\n      \r\n    \r\n  //   })\r\n  \r\n  //  console.log(\"orders\",checkoutData)\r\n  // }, [socket])\r\n  \r\n\r\n  return (\r\n    <div className=\"main_bg\">\r\n      <Navbar variant=\"warning\" className=\"navbar\">\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"caiss-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"log-out\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"server-icon\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <Col  style={{ backgroundColor: \"white\" }} fluid>\r\n        <Table hover className=\"ttt\">\r\n          <thead className=\"tbds\">\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Type</th>\r\n              <th>Table</th>\r\n              <th>date</th>\r\n              <th>order</th>\r\n              <th>Prix</th>\r\n              {type == \"all\" ? <th>Reglement</th> : \"\"}\r\n              {type == \"encours\" ? <th>statut</th> : \"\"}\r\n              <th>Paiement </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"scro\">\r\n            {type == \"encours\" \r\n              ? checkoutData\r\n                  ?.slice()\r\n                  ?.sort((a, b) => b.id - a.id)\r\n                  ?.filter((e) =>\r\n                    \r\n                      \r\n                       (e.status == \"pending\"||e.status == \"cooking\"||e.status == \"ready\") && e.date == date\r\n                  )\r\n                  .map((order, key) => {\r\n                    let tva = 0;\r\n                    let is_alcool = false;\r\n                    let test = order.orderItems;\r\n                    order?.orderItems?.forEach((element) => {\r\n                      if (element.is_alcool == true) {\r\n                        is_alcool = true;\r\n                      }\r\n                    });\r\n                    if (is_alcool == true) {\r\n                      tva = 20;\r\n                    } else {\r\n                      switch (order.orderType) {\r\n                        case \"surplace\":\r\n                          tva = 10;\r\n                          break;\r\n                          case \"sur place\":\r\n                          tva = 10;\r\n                          break;\r\n                        case \"emporter\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        case \"livraison\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        default:\r\n                          tva = 10;\r\n                          break;\r\n                      }\r\n                    }\r\n                    return (\r\n                      <tr>\r\n                        <td>\r\n                          {order.status == \"pending\" ? (\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-evenly\",\r\n                              }}\r\n                            >\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faEdit}\r\n                                color=\"#42d4cb\"\r\n                                onClick={() =>\r\n                                  handleEditOrder(\r\n                                    order.order_id == undefined\r\n                                      ? order.id\r\n                                      : order.order_id\r\n                                  )\r\n                                }\r\n                              />\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faCashRegister}\r\n                                color=\"#ff6b6b\"\r\n                                onClick={() =>\r\n                                  navigate(\r\n                                    \"/checkout/\" +\r\n                                      (order.order_id == undefined\r\n                                        ? order.id\r\n                                        : order.order_id)\r\n                                  )\r\n                                }\r\n                              />\r\n                            </div>\r\n                          ) :order.status == \"cooking\"?\r\n                          (\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-evenly\",\r\n                              }}\r\n                            >\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faUtensils}\r\n                                color=\"#42d4cb\"\r\n                            \r\n                              />\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faCashRegister}\r\n                                color=\"#ff6b6b\"\r\n                                onClick={() =>\r\n                                  navigate(\r\n                                    \"/checkout/\" +\r\n                                      (order.order_id == undefined\r\n                                        ? order.id\r\n                                        : order.order_id)\r\n                                  )\r\n                                }\r\n                              />\r\n                            </div>\r\n                          ) :order.status == \"ready\"?\r\n                          (\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-evenly\",\r\n                              }}\r\n                            >\r\n                                <FontAwesomeIcon\r\n                              icon={faCheckSquare}\r\n                              color=\"green \"\r\n                            />\r\n                              <FontAwesomeIcon\r\n                                size=\"2x\"\r\n                                style={{ cursor: \"pointer\" }}\r\n                                icon={faCashRegister}\r\n                                color=\"#ff6b6b\"\r\n                                onClick={() =>\r\n                                  navigate(\r\n                                    \"/checkout/\" +\r\n                                      (order.order_id == undefined\r\n                                        ? order.id\r\n                                        : order.order_id)\r\n                                  )\r\n                                }\r\n                              />\r\n                            </div>\r\n                          )                          \r\n                          :  (\r\n                            <FontAwesomeIcon\r\n                              icon={faCheckSquare}\r\n                              color=\"green \"\r\n                            />\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          {order?.orderType==undefined? \"de borne\":order.orderType}\r\n                          {order.orderType == \"surplace\" ? (\r\n                            <img\r\n                              src={surplace}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ) :order.orderType == \"emporter\" ?\r\n                          (\r\n                            <img\r\n                              src={takeout}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ):order.orderType == \"livraison\" ?(\r\n                            <img\r\n                              src={delivery}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ):(\r\n                            <img\r\n                              src={borne}\r\n                              width={40}\r\n                              height={40}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            /> \r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          Table : {table({ e: order.table_number })?.numero}\r\n                        </td>\r\n                        <td>{order.date + \"-\" + order.time}</td>\r\n                        <td>\r\n                          {\"#\" +\r\n                            (order.order_id == undefined\r\n                              ? order.id\r\n                              : order.order_id)}\r\n                        </td>\r\n                        <td>\r\n                          <b style={{ display: \"flex\", color: \"red\" }}>\r\n                            {}\r\n                            {order.totalPrice == undefined\r\n                              ? order.price + order.taxPrice\r\n                              : order.totalPrice+order.taxPrice}{\" \"}\r\n                            {renderHTML(`<i>${currency}</i>`)}\r\n                          </b>\r\n                        </td>\r\n                        <td>\r\n                          {order.status==\"pending\"?\r\n                          <b>En attente</b>:\r\n                           order.status==\"cooking\"?\r\n                           <b style={{color:\"orange\"}}> En prparation</b>:\r\n                           <b style={{color:\"green\"}}> Prte</b>\r\n                          \r\n                          }\r\n                        </td>\r\n                        <td>\r\n                          <b>En cours</b>\r\n                       \r\n                        \r\n                        </td>\r\n                       \r\n                      </tr>\r\n                    );\r\n                  })\r\n              :\r\n              type==\"annules\"?\r\n              checkoutData\r\n              ?.slice()\r\n              ?.sort((a, b) => b.id - a.id)\r\n              ?.filter((e) =>\r\n                type == \"avenir\"\r\n                  ? e.date > date\r\n                  : e.status == \"rejected\" && e.date == date\r\n              )\r\n              .map((order, key) => {\r\n                let tva = 0;\r\n                let is_alcool = false;\r\n                let test = order.orderItems;\r\n                order.orderItems.forEach((element) => {\r\n                  if (element.is_alcool == true) {\r\n                    is_alcool = true;\r\n                  }\r\n                });\r\n                if (is_alcool == true) {\r\n                  tva = 20;\r\n                } else {\r\n                  switch (order.orderType) {\r\n                    case \"surplace\":\r\n                      tva = 10;\r\n                      break;\r\n                    case \"emporter\":\r\n                      tva = 5.5;\r\n                      break;\r\n                    case \"livraison\":\r\n                      tva = 5.5;\r\n                      break;\r\n                    default:\r\n                      tva = 5.5;\r\n                      break;\r\n                  }\r\n                }\r\n                return (\r\n                  <tr>\r\n                    <td>\r\n                      {order.status == \"pending\" ? (\r\n                        <div\r\n                          style={{\r\n                            display: \"flex\",\r\n                            justifyContent: \"space-evenly\",\r\n                          }}\r\n                        >\r\n                          <FontAwesomeIcon\r\n                            size=\"2x\"\r\n                            style={{ cursor: \"pointer\" }}\r\n                            icon={faEdit}\r\n                            color=\"#42d4cb\"\r\n                            onClick={() =>\r\n                              handleEditOrder(\r\n                                order.order_id == undefined\r\n                                  ? order.id\r\n                                  : order.order_id\r\n                              )\r\n                            }\r\n                          />\r\n                          <FontAwesomeIcon\r\n                            size=\"2x\"\r\n                            style={{ cursor: \"pointer\" }}\r\n                            icon={faCashRegister}\r\n                            color=\"#ff6b6b\"\r\n                            onClick={() =>\r\n                              navigate(\r\n                                \"/checkout/\" +\r\n                                  (order.order_id == undefined\r\n                                    ? order.id\r\n                                    : order.order_id)\r\n                              )\r\n                            }\r\n                          />\r\n                        </div>\r\n                      ) : (\r\n                        <FontAwesomeIcon\r\n                          icon={faTimes}\r\n                          color=\"red\"\r\n                        />\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {order.orderType}\r\n                      {order.orderType == \"surplace\" ? (\r\n                        <img\r\n                          src={surplace}\r\n                          width={32}\r\n                          height={32}\r\n                          style={{ marginLeft: \"0.5rem\" }}\r\n                        />\r\n                      ) :order.orderType == \"emporter\" ?\r\n                      (\r\n                        <img\r\n                          src={takeout}\r\n                          width={32}\r\n                          height={32}\r\n                          style={{ marginLeft: \"0.5rem\" }}\r\n                        />\r\n                      )\r\n                      : (\r\n                        <img\r\n                          src={delivery}\r\n                          width={32}\r\n                          height={32}\r\n                          style={{ marginLeft: \"0.5rem\" }}\r\n                        />\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      Table : {table({ e: order.table_number })?.numero}\r\n                    </td>\r\n                    <td>{order.date + \"-\" + order.time}</td>\r\n                    <td>\r\n                      {\"#\" +\r\n                        (order.order_id == undefined\r\n                          ? order.id\r\n                          : order.order_id)}\r\n                    </td>\r\n                    <td>\r\n                      <b style={{ display: \"flex\", color: \"red\" }}>\r\n                        {}\r\n                        {order.totalPrice == undefined\r\n                          ? order.price + (order.tva*order.price/100)\r\n                          : order.totalPrice+order.taxPrice}{\" \"}\r\n                        {renderHTML(`<i>${currency}</i>`)}\r\n                      </b>\r\n                    </td>\r\n                    <td>\r\n                      <b>Annuler</b>\r\n                      {/* {order.paymentType == \"espece\" ? (\r\n                      <img\r\n                        src={cash}\r\n                        width={32}\r\n                        height={32}\r\n                        style={{ marginLeft: \"0.5rem\" }}\r\n                      />\r\n                    ) : order.paymentType == \"Carte Bancaire\" ? (\r\n                      <img\r\n                        src={cc}\r\n                        width={32}\r\n                        height={32}\r\n                        style={{ marginLeft: \"0.5rem\" }}\r\n                      />\r\n                    ) : (\r\n                      \"\"\r\n                    )} */}\r\n                    \r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n              :type== \"avenir\"? \"\"\r\n              : orders\r\n                  ?.slice()\r\n                  ?.sort((a, b) => b.id - a.id)\r\n                  .filter(\r\n                    (item) => item.paymentsInDb && item.paymentsInDb.length > 0\r\n                  )\r\n                  .map((order, key) => {\r\n                    let tva = 0;\r\n                    let is_alcool = false;\r\n                    let test = order.orderItems;\r\n                    order.orderItems.forEach((element) => {\r\n                      if (element.is_alcool == true) {\r\n                        is_alcool = true;\r\n                      }\r\n                    });\r\n                    if (is_alcool == true) {\r\n                      tva = 20;\r\n                    } else {\r\n                      let iss =\r\n                        order.orderType == undefined\r\n                          ? order.order_type\r\n                          : order.orderType;\r\n                      switch (iss) {\r\n                        case \"surplace\":\r\n                          tva = 10;\r\n                          break;\r\n                        case \"emporter\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        case \"livraison\":\r\n                          tva = 5.5;\r\n                          break;\r\n                        default:\r\n                          tva = 10;\r\n                          break;\r\n                      }\r\n                    }\r\n                    return (\r\n                      <tr onClick={() => handlePreview({ order })}>\r\n                        <td>\r\n                          {order.source == 1 ? (\r\n                            <>\r\n                              <FontAwesomeIcon\r\n                                icon={faGlobe}\r\n                                color=\"blue\"\r\n                                style={{ marginRight: \"0.5rem\" }}\r\n                              />\r\n                              <b>Enligne</b>\r\n                            </>\r\n                          ) : (\r\n                            <FontAwesomeIcon\r\n                              icon={faCheckSquare}\r\n                              color=\"green\"\r\n                            />\r\n                          )}\r\n                        </td>\r\n                        <td style={{ display: \"flex\" }}>\r\n                          {order.order_type}\r\n                          {order.order_type == \"surplace\" ? (\r\n                            <img\r\n                              src={surplace}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ) : order.order_type == \"emporter\" ? (\r\n                            <img\r\n                              src={takeout}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          ) : (\r\n                            <img\r\n                              src={delivery}\r\n                              width={32}\r\n                              height={32}\r\n                              style={{ marginLeft: \"0.5rem\" }}\r\n                            />\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          Table :{\" \"}\r\n                          {table({ e: order.table_number })?.numero || \"N/A\"}\r\n                        </td>\r\n                        <td>{order.date + \"-\" + order.time}</td>\r\n                        <td>{\"#\" + order.id}</td>\r\n                        <td>\r\n                          <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                            {order.source != 3\r\n                              ? (\r\n                                  order.price +\r\n                                  (order.price * tva) / 100\r\n                                ).toFixed(2)\r\n                              : order.price + (order.tva*order.price/100)}{\" \"}\r\n                            {renderHTML(`<i>${currency}</i>`)}\r\n                          </b>\r\n                        </td>\r\n                        <td>\r\n                          <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                            {order.how_paid}\r\n                          </b>\r\n                        </td>\r\n                        <td>\r\n                          {[\r\n                            ...new Set(\r\n                              order.paymentsInDb.map(\r\n                                (words) => words.pay_method\r\n                              )\r\n                            ),\r\n                          ].map((pay) => {\r\n                          \r\n\r\n                            /*  const sumWithInitial = array1.reduce(\r\n                              (previousValue, currentValue) =>\r\n                                previousValue + currentValue,\r\n                              initialValue\r\n                            );*/\r\n                            return <b>{pay}-</b>;\r\n                          })}\r\n                          {/* <b>\r\n                          {order.pay_method == \"espece\"\r\n                            ? \"Especes\"\r\n                            : order.pay_method == \"Carte Bancaire\" ||\r\n                              order.pay_method == 1\r\n                            ? \"Carte Bancaire\"\r\n                            : \"Especes\"}\r\n                        </b>\r\n                        {order.pay_method == \"espece\" ||\r\n                        order.pay_method == 2 ? (\r\n                          <img\r\n                            src={cash}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : order.pay_method == \"Carte Bancaire\" ||\r\n                          order.pay_method == 1 ? (\r\n                          <img\r\n                            src={cc}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : (\r\n                          \"\"\r\n                        )} */}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n          </tbody>\r\n        </Table>\r\n        {showPreview && (\r\n          <div className=\"preview\">\r\n            <FontAwesomeIcon\r\n              onClick={() => setShowPreview(false)}\r\n              icon={faTimes}\r\n              size=\"2x\"\r\n              style={{ position: \"absolute\", right: \"5px\" }}\r\n            />\r\n            <div className=\"scr\">\r\n              <Ticket order={selectedOrder} />\r\n            </div>\r\n            <Button\r\n              onClick={handlePrint}\r\n              variant=\"danger\"\r\n              style={{\r\n                height: \"50px\",\r\n                width: \"100%\",\r\n                bottom: \"0\",\r\n                position: \"absolute\",\r\n              }}\r\n            >\r\n              Imprimer\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </Col >\r\n      <NaviBottom />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Container,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  Nav,\r\n  Navbar,\r\n  Row,\r\n  Table,\r\n  Col,\r\n} from \"react-bootstrap\";\r\nimport {\r\n  faCalendarAlt,\r\n  faCashRegister,\r\n  faCheckSquare,\r\n  faEdit,\r\n  faSignOutAlt,\r\n  faSearch,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport useTranslation from \"./../i18\";\r\nimport NaviBottom from \"../Components/NaviBottom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport cc from \"./../Shared/cc.png\";\r\nimport delivery from \"./../Shared/delivery.png\";\r\nimport takeout from \"./../Shared/takeout.png\";\r\nimport cash from \"./../Shared/cash.jpg\";\r\nimport surplace from \"./../Shared/surplace.png\";\r\nimport $ from \"jquery\";\r\nimport axios from \"axios\";\r\nimport { storeClients } from \"../Slices/data\";\r\n\r\nconst History = () => {\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n  const user_id = localStorage.getItem(\"user_id\");\r\n  const clients = useSelector((state) => state.data.clients);\r\n  const orders = useSelector((state) => state.data.orderHistory) || [];\r\n  const tables = useSelector((state) => state.data.tables);\r\n  const [editClient, setEditClient] = useState({});\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [ping, setping] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const { id } = params;\r\n  const { t } = useTranslation();\r\n  const dispatch = useDispatch();\r\n\r\n  const handleEditClient = () => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/updateClient\",\r\n        {\r\n          client_id: editClient.id,\r\n          client: editClient,\r\n        }\r\n      )\r\n      .then((res) => setping(!ping))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        process.env.REACT_APP_API_HOST +\r\n          \":\" +\r\n          process.env.REACT_APP_API_PORT +\r\n          \"/api/getclients\",\r\n        {\r\n          user_id,\r\n        }\r\n      )\r\n      .then((res) => {\r\n        dispatch(storeClients({ clients: res.data.clients }));\r\n      });\r\n  }, [ping]);\r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const renderHTML = (rawHTML: string) =>\r\n    React.createElement(\"div\", {\r\n      dangerouslySetInnerHTML: { __html: rawHTML },\r\n    });\r\n  const currency = localStorage.getItem(\"currency\");\r\n  const table = ({ e }) => {\r\n    console.log(e);\r\n    return tables.find((table) => table.id == e);\r\n  };\r\n\r\n  return (\r\n    <div className=\"navbar\">\r\n      <Navbar\r\n        style={{ backgroundColor: \"#ff6b6b\", height: \"70px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container className=\"history-navbar\">\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link onClick={() => navigate(\"/main\")}>\r\n              <img width=\"45px\" src={tableIcon} className=\"table-icon\" />\r\n            </Nav.Link>\r\n            <Nav.Link>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"agenda\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCalendarAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                Agenda\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => navigate(\"/cloture\")}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"caiss-h6\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faCashRegister}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"cashier\")}\r\n              </h6>\r\n            </Nav.Link>\r\n            <Nav.Link onClick={() => handleDisconnect()}>\r\n              <h6\r\n                style={{ color: \"white\", paddingTop: \"1rem\" }}\r\n                className=\"log-out\"\r\n              >\r\n                <FontAwesomeIcon\r\n                  icon={faSignOutAlt}\r\n                  style={{ marginRight: \"5px\" }}\r\n                />\r\n                {t(\"disconnect\")}\r\n              </h6>\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            className=\"client-server-icon\"\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n          <div className=\"client-search\">\r\n            <label>\r\n              <FontAwesomeIcon icon={faSearch} />\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Chercher...\"\r\n              onChange={(e) => setSearch(e.target.value)}\r\n            />\r\n          </div>\r\n        </Container>\r\n      </Navbar>\r\n      <Container style={{ backgroundColor: \"white\" }} fluid>\r\n        <Table hover className=\"ttt\">\r\n          <thead className=\"tbds\">\r\n            {id ? (\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Type</th>\r\n                <th>Table</th>\r\n                <th>date</th>\r\n                <th>order</th>\r\n                <th>Prix</th>\r\n                <th>Paiement </th>\r\n              </tr>\r\n            ) : (\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Nom/Prenom</th>\r\n                <th>Telephone</th>\r\n                <th>Email</th>\r\n                <th>Adresse</th>\r\n                <th>Ville</th>\r\n                <th>Code postal</th>\r\n              </tr>\r\n            )}\r\n          </thead>\r\n          <tbody className=\"scro\">\r\n            {id\r\n              ? orders\r\n                  ?.slice()\r\n                  ?.sort((a, b) => b.id - a.id)\r\n                  .filter((el) => el.customer_id == id)\r\n                  .map((order, key) => (\r\n                    <tr>\r\n                      <td>\r\n                        <FontAwesomeIcon icon={faCheckSquare} color=\"green\" />\r\n                      </td>\r\n                      <td style={{ display: \"flex\" }}>\r\n                        {order.order_type}\r\n                        {order.order_type == \"surplace\" ? (\r\n                          <img\r\n                            src={surplace}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : (\r\n                          <img\r\n                            src={delivery}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        Table :{\" \"}\r\n                        {table({ e: order.table_number })?.numero || \"N/A\"}\r\n                      </td>\r\n                      <td>{order.date + \"-\" + order.time}</td>\r\n                      <td>{\"#\" + order.id}</td>\r\n                      <td>\r\n                        <b style={{ display: \"flex\", color: \"#ff6b6b\" }}>\r\n                          {order.price} {renderHTML(`<i>${currency}</i>`)}\r\n                        </b>\r\n                      </td>\r\n                      <td>\r\n                        <b>\r\n                          {order.pay_method == \"espece\"\r\n                            ? \"Especes\"\r\n                            : order.pay_method == \"Carte Bancaire\" ||\r\n                              order.pay_method == 1\r\n                            ? \"Carte Bancaire\"\r\n                            : \"Especes\"}\r\n                        </b>\r\n                        {order.pay_method == \"espece\" ||\r\n                        order.pay_method == 2 ? (\r\n                          <img\r\n                            src={cash}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : order.pay_method == \"Carte Bancaire\" ||\r\n                          order.pay_method == 1 ? (\r\n                          <img\r\n                            src={cc}\r\n                            width={32}\r\n                            height={32}\r\n                            style={{ marginLeft: \"0.5rem\" }}\r\n                          />\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n              : clients\r\n                  .filter(\r\n                    (client) =>\r\n                      client.nom_prenom\r\n                        .toLowerCase()\r\n                        .includes(search.toLowerCase()) ||\r\n                      client.email\r\n                        .toLowerCase()\r\n                        .includes(search.toLowerCase()) ||\r\n                      client.adresse\r\n                        .toLowerCase()\r\n                        .includes(search.toLowerCase()) ||\r\n                      client.ville\r\n                        .toLowerCase()\r\n                        .includes(search.toLowerCase()) ||\r\n                      client.telephone.includes(search)\r\n                  )\r\n                  .map((client, key) => (\r\n                    <tr className=\"client-tr\">\r\n                      <td>\r\n                        <FontAwesomeIcon\r\n                          icon={faEdit}\r\n                          color=\"#ff6b6b\"\r\n                          size=\"2x\"\r\n                          onClick={() => {\r\n                            setEditClient(client);\r\n                            console.log(client);\r\n                            setShowEdit(true);\r\n                          }}\r\n                        />\r\n                      </td>\r\n                      <td onClick={() => navigate(\"/clients/\" + client.id)}>\r\n                        {client.nom_prenom || \"N/A\"}\r\n                      </td>\r\n                      <td>{client.telephone || \"N/A\"}</td>\r\n                      <td>{client.email || \"N/A\"}</td>\r\n                      <td>{client.adresse || \"N/A\"}</td>\r\n                      <td>{client.ville || \"N/A\"}</td>\r\n                      <td>{client.code_postal || \"N/A\"}</td>\r\n                    </tr>\r\n                  ))}\r\n          </tbody>\r\n        </Table>\r\n      </Container>\r\n      <Modal show={showEdit} onHide={() => setShowEdit(false)}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Client</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div>\r\n            <Form auto>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.nom_prenom}\r\n                      type=\"text\"\r\n                      placeholder=\"nom/prenom\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          nom_prenom: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    {editClient.telephone?.length > 0 &&\r\n                    editClient.telephone?.length < 10 ? (\r\n                      <Badge bg=\"danger\">\r\n                        Numero pas valide (10 chiffres obligatoire)\r\n                      </Badge>\r\n                    ) : (\r\n                      \"\"\r\n                    )}\r\n                    <Form.Control\r\n                      value={editClient.telephone}\r\n                      type=\"tel\"\r\n                      placeholder=\"telephone\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          telephone: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.email}\r\n                      type=\"email\"\r\n                      placeholder=\"Email\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, email: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.adresse}\r\n                      as=\"textarea\"\r\n                      type=\"text\"\r\n                      placeholder=\"adresse\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          adresse: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.societe}\r\n                      type=\"text\"\r\n                      placeholder=\"socit\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          societe: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.code_1}\r\n                      type=\"text\"\r\n                      placeholder=\"code 1\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, code_1: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.code_2}\r\n                      type=\"text\"\r\n                      placeholder=\"code 2\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, code_2: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n\r\n                  <Col xs=\"6\">\r\n                    <Form.Control\r\n                      value={editClient.ville}\r\n                      type=\"text\"\r\n                      placeholder=\"Ville\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, ville: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\">\r\n                <Row>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.interphone}\r\n                      type=\"text\"\r\n                      placeholder=\"interphone\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          interphone: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col>\r\n                    <Form.Control\r\n                      value={editClient.etage}\r\n                      type=\"text\"\r\n                      placeholder=\"etage\"\r\n                      onChange={(e) =>\r\n                        setEditClient({ ...editClient, etage: e.target.value })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                  <Col xs=\"6\">\r\n                    <Form.Control\r\n                      value={editClient.code_postal}\r\n                      type=\"postal\"\r\n                      placeholder=\"Code postal\"\r\n                      onChange={(e) =>\r\n                        setEditClient({\r\n                          ...editClient,\r\n                          code_postal: e.target.value,\r\n                        })\r\n                      }\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              </Form.Group>\r\n            </Form>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setShowEdit(false)}>\r\n            Annuler\r\n          </Button>\r\n          <Button\r\n            style={{ backgroundColor: \"#ff6b6b\", borderColor: \"#ff6b6b\" }}\r\n            variant=\"primary\"\r\n            onClick={() => {\r\n              setShowEdit(false);\r\n              handleEditClient();\r\n            }}\r\n          >\r\n            Terminer\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <NaviBottom />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default History;\r\n","import React from \"react\";\r\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport tableIcon from \"./../Shared/table.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport logo from \"./../Shared/logo.png\";\r\nimport { faSignOutAlt } from \"@fortawesome/free-solid-svg-icons\";\r\nimport serveur from \"./../Shared/serveur.png\";\r\nimport { clearOrders } from \"../Slices/order\";\r\nimport _ from \"lodash\";\r\n\r\nconst CalendarScreen = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const username = localStorage.getItem(\"username\") || \"\";\r\n\r\n  const handleDisconnect = () => {\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"username\");\r\n    navigate(\"/\"); \r\n  };\r\n  return (\r\n    <div>\r\n      <Navbar\r\n        style={{ backgroundColor: \"#ff6b6b\", height: \"70px\" }}\r\n        variant=\"warning\"\r\n      >\r\n        <Container>\r\n          <Navbar.Brand>\r\n            <div class=\"logo-container\">\r\n              <img id=\"chrome\" class=\"logo\" src={logo} />\r\n            </div>\r\n          </Navbar.Brand>\r\n          <Nav className=\"ms-auto\">\r\n            <Nav.Link\r\n              onClick={() => {\r\n                navigate(\"/main\");\r\n                dispatch(clearOrders());\r\n              }}\r\n            >\r\n              <img width=\"45px\" src={tableIcon} />\r\n            </Nav.Link>\r\n          </Nav>\r\n          <h6\r\n            style={{\r\n              color: \"white\",\r\n              marginLeft: \"1rem\",\r\n              marginTop: \"0.5rem\",\r\n              borderLeft: \"1px solid white\",\r\n              padding: \"5px\",\r\n            }}\r\n          >\r\n            <img\r\n              src={serveur}\r\n              width={32}\r\n              height={32}\r\n              style={{ marginRight: \"0.5rem\" }}\r\n            />\r\n            <b>{username}</b>\r\n            <FontAwesomeIcon\r\n              onClick={() => handleDisconnect()}\r\n              size=\"2x\"\r\n              icon={faSignOutAlt}\r\n              style={{ marginLeft: \"0.5rem\", paddingTop: \"0.5rem\" }}\r\n            />\r\n          </h6>\r\n        </Container>\r\n      </Navbar>\r\n      <div id=\"calendar\" style={{ height: \"800px\" }}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalendarScreen;\r\n","import { BrowserRouter, Routes, Route } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport Home from \"./Screens/Home\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Init from \"./Screens/Init\";\r\nimport Main from \"./Screens/Main\";\r\nimport Menu from \"./Screens/Menu\";\r\nimport Caisse from \"./Screens/Caisse\";\r\nimport Cloture from \"./Screens/Cloture\";\r\nimport Test from \"./Screens/Test\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport Checkout from \"./Screens/Checkout\";\r\nimport CheckoutTwo from \"./Screens/CheckoutTwo\";\r\nimport History from \"./Screens/History\";\r\nimport Clients from \"./Screens/Clients\";\r\nimport CalendarScreen from \"./Screens/CalendarScreen\";\r\nimport io from \"socket.io-client\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { setCheckoutChange } from \"./Slices/order\";\r\nimport Swal from \"sweetalert2\";\r\nimport updateSound from \"./Shared/updateorder.wav\";\r\nimport bornSound from \"./Shared/born-sound.mp3\";\r\n\r\nconst socket = io.connect(process.env.REACT_APP_API_SOCKET);\r\nfunction App() {\r\n  const [soundUpdate, setSoundUpdate] = useState(new Audio(updateSound));\r\n  const [audioBorn, setaudioBorn] = useState(new Audio(bornSound));\r\n  const dispatch = useDispatch()\r\n  const user_id =localStorage.getItem(\"user_id\")\r\n   socket.on(`update${user_id}`, (order) => {\r\n    soundUpdate.play()\r\n    if(order.status==\"cooking\"){\r\n    \r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \r\n        \"<h5 >\" +\r\n        `La commande <span style='color:green'>${order.order_id}</span> en prparation` +\r\n        \"</h5>\",\r\n        \r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }else if(order.status==\"ready\"){\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \r\n        \"<h5 >\" +\r\n        `La commande <span style='color:green'>${order.order_id}</span> et prte` +\r\n        \"</h5>\",\r\n        \r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    } else{\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: \r\n        \"<h5 >\" +\r\n        `La commande <span style='color:green'>${order.order_id}</span> a t annul` +\r\n        \"</h5>\",\r\n        \r\n        showConfirmButton: false,\r\n        timer: 2500,\r\n      });\r\n    }\r\n   \r\n     dispatch(setCheckoutChange({order:order}))\r\n    \r\n    })\r\n  \r\n  return (\r\n    <div className=\"App\">\r\n      <Routes>\r\n        <Route exact path=\"/\" element={<Home />} />\r\n        <Route path=\"/init\" element={<Init />} />\r\n        <Route path=\"/main\" element={<Main />} />\r\n        <Route path=\"/menu\" element={<Menu />} />\r\n        <Route path=\"/menu/:order_id\" element={<Menu />} />\r\n        <Route path=\"/caisse\" element={<Caisse />} />\r\n        <Route path=\"/cloture\" element={<Cloture />} />\r\n        <Route path=\"/calendar\" element={<CalendarScreen />} />\r\n        <Route path=\"/history/:type\" element={<History />} />\r\n        <Route path=\"/clients\" element={<Clients />} />\r\n        <Route path=\"/clients/:id\" element={<Clients />} />\r\n\r\n        <Route\r\n          path=\"/checkout2/:table_id/:type/:part\"\r\n          element={<CheckoutTwo />}\r\n        />\r\n        <Route path=\"/checkout/:table_id\" element={<Checkout />} />\r\n        <Route path=\"/test\" element={<Test />} />\r\n      </Routes>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport authReducer from \"./Slices/auth\";\r\nimport messageReducer from \"./Slices/message\";\r\nimport dataReducer from \"./Slices/data\";\r\nimport orderReducer from \"./Slices/order\";\r\nimport caisseReducer from \"./Slices/caisse\";\r\nimport { combineReducers } from \"@reduxjs/toolkit\";\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  message: messageReducer,\r\n  data: dataReducer,\r\n  order: orderReducer,\r\n  caisse: caisseReducer,\r\n});\r\nconst persistConfig = {\r\n  key: \"root\",\r\n  version: 1,\r\n  storage,\r\n};\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nexport const store = configureStore({\r\n  reducer: persistedReducer,\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }),\r\n});\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { store } from \"./store\";\r\nimport { Provider } from \"react-redux\";\r\nimport { HashRouter } from \"react-router-dom\";\r\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { PersistGate } from \"redux-persist/integration/react\";\r\nimport { persistStore } from \"redux-persist\";\r\nlet persistor = persistStore(store);\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <HashRouter>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <App />\r\n      </PersistGate>\r\n    </HashRouter>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}